import{escapeHtml as o}from"./utils-BB91om2o.js";function n(n){const{id:e="selector-modal-"+Date.now(),title:t="アイテムを選択",description:m="選択してください。",items:c=[],buttonText:d="追加する",cancelText:a="キャンセル",onSelect:l,onClose:i}=n,s=document.getElementById(e);s&&s.remove();const r=`\n    <div id="${e}" class="common-modal-overlay">\n      <div class="common-modal">\n        <div class="common-modal-header">\n          <h3>${o(t)}</h3>\n          <button type="button" class="common-modal-close">&times;</button>\n        </div>\n        <div class="common-modal-body">\n          <p class="common-modal-description">${o(m)}</p>\n          <div class="common-modal-list">\n            ${c.map(n=>function(n,e){const{id:t,name:m,description:c="",thumbnail:d,icon:a,iconBgColor:l="#4AA7C0",disabled:i=!1,disabledText:s="追加済み"}=n,r=d?`<div class="common-modal-item-thumbnail">\n         <img src="${o(d)}" alt="${o(m)}">\n       </div>`:a?`<div class="common-modal-item-thumbnail common-modal-item-icon" style="background-color: ${o(l)}">\n           <span>${a}</span>\n         </div>`:"";return`\n    <div class="common-modal-item ${i?"disabled":""}" data-item-id="${o(t)}">\n      ${r}\n      <div class="common-modal-item-info">\n        <h4 class="common-modal-item-name">${o(m)}</h4>\n        ${c?`<p class="common-modal-item-description">${o(c)}</p>`:""}\n      </div>\n      <button type="button" class="common-modal-item-btn" data-item-id="${o(t)}" ${i?"disabled":""}>\n        ${o(i?s:e)}\n      </button>\n    </div>\n  `}(n,d)).join("")}\n          </div>\n        </div>\n        <div class="common-modal-footer">\n          <button type="button" class="common-modal-cancel">${o(a)}</button>\n        </div>\n      </div>\n    </div>\n  `;document.body.insertAdjacentHTML("beforeend",r);const v=document.getElementById(e),u=()=>{v.remove(),i&&i()};return v.querySelector(".common-modal-close").addEventListener("click",u),v.querySelector(".common-modal-cancel").addEventListener("click",u),v.addEventListener("click",o=>{o.target===v&&u()}),v.querySelectorAll(".common-modal-item-btn:not([disabled])").forEach(o=>{o.addEventListener("click",()=>{const n=o.dataset.itemId;l&&l(n),u()})}),v}function e(n){const{title:e="確認",message:t="",confirmText:m="OK",cancelText:c="キャンセル",danger:d=!1}=n;return new Promise(n=>{const a="confirm-dialog-"+Date.now(),l=`\n      <div id="${a}" class="common-modal-overlay">\n        <div class="common-modal common-modal-sm">\n          <div class="common-modal-header">\n            <h3>${o(e)}</h3>\n            <button type="button" class="common-modal-close">&times;</button>\n          </div>\n          <div class="common-modal-body">\n            <p class="common-modal-message">${o(t)}</p>\n          </div>\n          <div class="common-modal-footer common-modal-footer-buttons">\n            <button type="button" class="common-modal-cancel">${o(c)}</button>\n            <button type="button" class="common-modal-confirm ${d?"danger":""}">${o(m)}</button>\n          </div>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",l);const i=document.getElementById(a),s=o=>{i.remove(),n(o)};i.querySelector(".common-modal-close").addEventListener("click",()=>s(!1)),i.querySelector(".common-modal-cancel").addEventListener("click",()=>s(!1)),i.querySelector(".common-modal-confirm").addEventListener("click",()=>s(!0)),i.addEventListener("click",o=>{o.target===i&&s(!1)})})}export{n as a,e as s};
