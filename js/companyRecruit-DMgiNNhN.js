const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/RecruitEditor-CSZ9Yj7M.js","js/utils-BNVq905i.js","js/modal-BOD5e818.js","js/image-uploader-DhILrmx3.js","js/core-CGzeo6h2.js","js/api-DapBkB8R.js","js/firestore-service-qEqRY9xZ.js","js/env-config-Bna8zKOp.js"])))=>i.map(i=>d[i]);
import"./modulepreload-polyfill-YP0FEG5d.js";import{_ as t}from"./jobs-loader-DkJA1PgK.js";import{hasUrlParam as e,getUrlParam as n,escapeHtml as i}from"./utils-BNVq905i.js";import{l as r}from"./api-DapBkB8R.js";import{i as s,t as o,r as a,b as c,a as u}from"./page-analytics-Dnh2KkE5.js";import"./firestore-service-qEqRY9xZ.js";import"./env-config-Bna8zKOp.js";class l{constructor(){this.companyDomain=null,this.company=null,this.jobs=[],this.recruitSettings=null,this.isEditMode=e("edit"),this.editor=null,this.selectedJobType="all",this.currentPage=1,this.jobsPerPage=6}async init(){if(this.companyDomain=n("id")||n("c"),this.companyDomain)try{await this.waitForJobsLoader(),await window.JobsLoader.initFirestoreLoader();const[t,e]=await Promise.all([window.JobsLoader.fetchCompanies(),r(this.companyDomain)]);if(this.recruitSettings=e||{},this.isEditMode?this.company=null==t?void 0:t.find(t=>{var e;return(null==(e=t.companyDomain)?void 0:e.trim())===this.companyDomain}):this.company=null==t?void 0:t.find(t=>{var e;return(null==(e=t.companyDomain)?void 0:e.trim())===this.companyDomain&&window.JobsLoader.isCompanyVisible(t)}),!this.company)return void this.showError("指定された会社は見つかりませんでした。");if(!this.isEditMode&&!1===this.recruitSettings.isPublished)return void this.showError("このページは現在非公開です。");this.jobs=await this.fetchJobs(this.company),this.hideLoading(),this.render(),this.renderLayoutComponents(),this.updateSEO(),this.isEditMode?this.enableEditMode():this.trackPageView()}catch(t){console.error("[RecruitPage] 初期化エラー:",t),this.showError("ページの読み込みに失敗しました。")}else this.showError("会社が指定されていません。")}trackPageView(){var t;s({pageType:"recruit",companyDomain:this.companyDomain,companyName:(null==(t=this.company)?void 0:t.company)||null})}trackCTAButtonClick(t,e=null){o({pageType:"recruit",companyDomain:this.companyDomain,buttonType:t,buttonText:e})}async enableEditMode(){try{const{RecruitEditor:e}=await t(async()=>{const{RecruitEditor:t}=await import("./RecruitEditor-CSZ9Yj7M.js");return{RecruitEditor:t}},__vite__mapDeps([0,1,2,3,4,5,6,7]));this.editor=new e,this.editor.enable(this.companyDomain,this.company,this.recruitSettings,t=>this.onSettingsChange(t)),console.log("[RecruitPage] 編集モード有効化")}catch(e){console.error("[RecruitPage] 編集モードの読み込みエラー:",e)}}onSettingsChange(t){this.recruitSettings=t,this.removeLayoutComponents(),this.render(),this.renderLayoutComponents()}removeLayoutComponents(){var t,e,n;null==(t=document.querySelector(".site-header"))||t.remove(),null==(e=document.querySelector(".fixed-cta-bar"))||e.remove(),null==(n=document.querySelector(".site-footer"))||n.remove(),document.body.classList.remove("has-fixed-header","has-fixed-cta-bar"),document.body.removeAttribute("data-template")}waitForJobsLoader(){return new Promise((t,e)=>{const n=Date.now(),i=()=>{window.JobsLoader&&"function"==typeof window.JobsLoader.fetchCompanies?t():Date.now()-n>1e4?e(new Error("JobsLoaderのロードがタイムアウトしました")):setTimeout(i,100)};i()})}async fetchJobs(t){var e;try{const n=null==(e=t.jobsSheet)?void 0:e.trim();if(!n)return console.log("[RecruitPage] jobsSheetが設定されていません"),[];const i=await window.JobsLoader.fetchCompanyJobs(n);if(console.log("[RecruitPage] 取得した全求人:",null==i?void 0:i.length),!(null==i?void 0:i.length))return[];const r=i.filter(t=>"false"!==t.visible&&"FALSE"!==t.visible).filter(t=>window.JobsLoader.isJobInPublishPeriod(t)).sort((t,e)=>(parseInt(t.order)||999)-(parseInt(e.order)||999)).map(e=>({...e,company:t.company,companyDomain:t.companyDomain}));return console.log("[RecruitPage] フィルタ後の求人:",r.length),r}catch(n){return console.error("[RecruitPage] 求人取得エラー:",n),[]}}render(){var t;const e=document.getElementById("recruit-content");if(!e)return;const n=this.getSectionOrder(),r=this.getSectionVisibility(),s=this.getCustomSectionsArray(),o=n.map(t=>{if(!1===r[t])return"";if(t.startsWith("custom-")){const e=parseInt(t.replace("custom-",""),10);return!isNaN(e)&&s[e]?this.renderSingleCustomSection(s[e],e):""}switch(t){case"hero":return this.renderHeroSection();case"company-intro":return this.renderCompanyIntroSection();case"jobs":return this.renderJobsSection();case"cta":return this.renderCTASection();default:return""}}).join(""),a=new Set(n.filter(t=>t.startsWith("custom-")).map(t=>parseInt(t.replace("custom-",""),10))),c=s.map((t,e)=>({section:t,index:e})).filter(({index:t})=>!a.has(t)&&!1!==r[`custom-${t}`]).map(({section:t,index:e})=>this.renderSingleCustomSection(t,e)).join("");e.innerHTML=o+c;const u=document.getElementById("header-logo");u&&(null==(t=this.company)?void 0:t.company)&&(u.innerHTML=`<span class="logo-text">${i(this.company.company)}</span>`),this.setupJobTypeTabs(),this.setupPagination(),this.setupVideoButton(),this.updateFooterLinks()}updateFooterLinks(){const t=document.querySelector(".recruit-footer-links");if(!t||!this.companyDomain)return;const e=`company-recruit.html?id=${encodeURIComponent(this.companyDomain)}`,n=t.querySelector('a[href="./"]');n&&(n.href=e,n.textContent="採用サイトTOP");const i=t.querySelector('a[href="./#jobs"]');i&&(i.href=`${e}#jobs`)}getSectionOrder(){const t=this.recruitSettings||{};return t.sectionOrder?t.sectionOrder.split(",").map(t=>t.trim()).filter(t=>t):["hero","company-intro","jobs","cta"]}getCustomSectionsArray(){let t=(this.recruitSettings||{}).customSections||[];if("string"==typeof t)try{t=JSON.parse(t)}catch(e){console.error("[RecruitPage] customSectionsのパースエラー:",e),t=[]}return Array.isArray(t)?t:[]}getSectionVisibility(){const t=this.recruitSettings||{};if(t.sectionVisibility)try{return JSON.parse(t.sectionVisibility)}catch(e){console.error("[RecruitPage] セクション表示設定のパースエラー:",e)}return{"company-intro":!0}}renderHeroSection(){const t=this.company,e=this.recruitSettings||{},n=e.heroImage||t.imageUrl||"",r=e.heroTitle||`${i(t.company)}で働こう`,s=(e.heroSubtitle||(t.description?this.truncateText(t.description,300):"私たちと一緒に働きませんか？")).replace(/&nbsp;/g," "),o="true"===String(e.showVideoButton).toLowerCase(),a=e.videoUrl||"";return`\n      <section class="recruit-hero" id="recruit-hero">\n        <div class="recruit-hero-bg" style="${n?`background-image: url('${i(n)}')`:""}"></div>\n        <div class="recruit-hero-overlay"></div>\n        <div class="recruit-hero-content">\n          <h1 class="recruit-hero-title">${i(r)}</h1>\n          <p class="recruit-hero-subtitle">${i(s)}</p>\n          <div class="recruit-hero-stats">\n            <div class="recruit-stat">\n              <span class="recruit-stat-number">${this.jobs.length}</span>\n              <span class="recruit-stat-label">募集中の求人</span>\n            </div>\n          </div>\n          <div class="recruit-hero-buttons">\n            <a href="#recruit-jobs" class="recruit-hero-cta">求人を見る</a>\n            ${o&&a?`\n              <button type="button" class="recruit-video-button" data-video-url="${i(a)}">\n                <span class="recruit-video-button-icon">▶</span>\n                <span class="recruit-video-button-text">動画を見る</span>\n              </button>\n            `:""}\n          </div>\n        </div>\n      </section>\n    `}renderCompanyIntroSection(){const t=this.company;return t.description||t.jobContent?`\n      <section class="recruit-section recruit-about" id="recruit-about">\n        <div class="recruit-section-inner">\n          <h2 class="recruit-section-title">私たちについて</h2>\n          <div class="recruit-about-content">\n            ${t.imageUrl?`\n              <div class="recruit-about-image">\n                <img src="${i(t.imageUrl)}" alt="${i(t.company)}">\n              </div>\n            `:""}\n            <div class="recruit-about-text">\n              ${t.description?`<p>${this.formatText(t.description)}</p>`:""}\n              ${t.jobContent?`\n                <h3>お仕事内容</h3>\n                <p>${this.formatText(t.jobContent)}</p>\n              `:""}\n            </div>\n          </div>\n        </div>\n      </section>\n    `:""}renderJobsSection(){const t=this.recruitSettings||{},e=t.jobsTitle||"募集中の求人";if(0===this.jobs.length)return`\n        <section class="recruit-section recruit-jobs" id="recruit-jobs">\n          <div class="recruit-section-inner">\n            <h2 class="recruit-section-title">${i(e)}</h2>\n            <p class="recruit-no-jobs">現在募集中の求人はありません。</p>\n          </div>\n        </section>\n      `;let n=[...this.jobs];const r=t.jobsSort||"newest";n=this.sortJobs(n,r);const s=parseInt(t.jobsLimit)||0;s>0&&n.length>s&&(n=n.slice(0,s));const o=window.innerWidth<768||document.body.classList.contains("preview-mode-mobile"),a=n.length;let c=n,u="";if(!o&&a>this.jobsPerPage){const t=Math.ceil(a/this.jobsPerPage),e=(this.currentPage-1)*this.jobsPerPage,i=Math.min(e+this.jobsPerPage,a);c=n.slice(e,i),u=this.renderPagination(t,a)}const l=this.renderJobTypeTabs();return`\n      <section class="recruit-section recruit-jobs" id="recruit-jobs">\n        <div class="recruit-section-inner">\n          <h2 class="recruit-section-title">${i(e)}</h2>\n          ${l}\n          <div class="recruit-jobs-grid" id="recruit-jobs-grid">\n            ${c.map(t=>this.renderJobCard(t)).join("")}\n          </div>\n          ${u}\n        </div>\n      </section>\n    `}renderPagination(t,e){const n=[];for(let i=1;i<=t;i++)1===i||i===t||i>=this.currentPage-1&&i<=this.currentPage+1?n.push(i):"..."!==n[n.length-1]&&n.push("...");return`\n      <div class="recruit-pagination" id="recruit-pagination">\n        <div class="recruit-pagination-info">\n          全${e}件中 ${(this.currentPage-1)*this.jobsPerPage+1}〜${Math.min(this.currentPage*this.jobsPerPage,e)}件を表示\n        </div>\n        <div class="recruit-pagination-controls">\n          <button class="recruit-pagination-btn prev" ${1===this.currentPage?"disabled":""} data-page="${this.currentPage-1}">\n            ← 前へ\n          </button>\n          <div class="recruit-pagination-pages">\n            ${n.map(t=>"..."===t?'<span class="recruit-pagination-ellipsis">...</span>':`<button class="recruit-pagination-page ${t===this.currentPage?"active":""}" data-page="${t}">${t}</button>`).join("")}\n          </div>\n          <button class="recruit-pagination-btn next" ${this.currentPage===t?"disabled":""} data-page="${this.currentPage+1}">\n            次へ →\n          </button>\n        </div>\n      </div>\n    `}sortJobs(t,e){switch(e){case"newest":return t.sort((t,e)=>{const n=new Date(t.publishStartDate||0);return new Date(e.publishStartDate||0)-n});case"oldest":return t.sort((t,e)=>new Date(t.publishStartDate||0)-new Date(e.publishStartDate||0));case"salary-high":return t.sort((t,e)=>{const n=this.parseSalary(t.monthlySalary);return this.parseSalary(e.monthlySalary)-n});case"salary-low":return t.sort((t,e)=>this.parseSalary(t.monthlySalary)-this.parseSalary(e.monthlySalary));case"custom":return t.sort((t,e)=>(parseInt(t.order)||999)-(parseInt(e.order)||999));default:return t}}parseSalary(t){if(!t)return 0;const e=t.match(/(\d+(?:,\d{3})*)/);return e?parseInt(e[1].replace(/,/g,""),10):0}renderJobTypeTabs(){const t=[...new Set(this.jobs.map(t=>t.jobType).filter(Boolean))];if(t.length<=1)return"";const e={};return this.jobs.forEach(t=>{const n=t.jobType||"その他";e[n]=(e[n]||0)+1}),`\n      <div class="recruit-job-tabs" id="recruit-job-tabs">\n        <button class="recruit-job-tab active" data-type="all">\n          すべて<span class="tab-count">${this.jobs.length}</span>\n        </button>\n        ${t.map(t=>`\n          <button class="recruit-job-tab" data-type="${i(t)}">\n            ${i(t)}<span class="tab-count">${e[t]||0}</span>\n          </button>\n        `).join("")}\n      </div>\n    `}setupJobTypeTabs(){const t=document.getElementById("recruit-job-tabs");t&&t.addEventListener("click",e=>{const n=e.target.closest(".recruit-job-tab");if(!n)return;const i=n.dataset.type;this.filterJobsByType(i),t.querySelectorAll(".recruit-job-tab").forEach(t=>t.classList.remove("active")),n.classList.add("active")})}filterJobsByType(t){this.selectedJobType=t;document.querySelectorAll(".recruit-job-card").forEach(e=>{const n=e.dataset.jobType||"";"all"===t||n===t?(e.style.display="",e.classList.remove("hidden")):(e.style.display="none",e.classList.add("hidden"))})}setupPagination(){const t=document.getElementById("recruit-pagination");t&&t.addEventListener("click",t=>{const e=t.target.closest("[data-page]");if(!e||e.disabled)return;const n=parseInt(e.dataset.page);n&&n!==this.currentPage&&this.goToPage(n)})}goToPage(t){this.currentPage=t;const e=document.getElementById("recruit-jobs");if(e){const t=document.createElement("div");t.innerHTML=this.renderJobsSection(),e.replaceWith(t.firstElementChild),this.setupJobTypeTabs(),this.setupPagination();const n=document.getElementById("recruit-jobs");n&&n.scrollIntoView({behavior:"smooth",block:"start"})}}renderJobCard(t){var e;const n=t.jobId||t["求人ID"]||t.id||"",r=`lp.html?j=${this.companyDomain}_${n}`,s=t.jobLogo||t.imageUrl||(null==(e=this.company)?void 0:e.imageUrl)||"",o=t.jobType||"",a=function(t){if(!t)return!1;const e=new Date(t);return!isNaN(e.getTime())&&e>=new Date((new Date).getTime()-6048e5)}(t.publishStartDate),c=t._displayTotalBonus||t.totalBonus||"",u=t._displayMonthlySalary||t.monthlySalaryExample||t.monthlySalary||"",l=t.dailySalaryExample||"",d=t.yearlySalaryExample||"",m=t.companyAddress||t.location||"";return`\n      <article class="recruit-job-card${a?" is-new":""}" data-job-type="${i(o)}">\n        ${a?'<span class="recruit-job-new-tag">✨ NEW</span>':""}\n        <div class="recruit-job-card-image" style="${s?`background-image: url('${i(s)}')`:""}">\n          ${s?"":'<div class="recruit-job-card-placeholder"></div>'}\n        </div>\n        <div class="recruit-job-card-body">\n          <h3 class="recruit-job-card-title">${i(t.title||"求人情報")}</h3>\n          ${m?`<p class="recruit-job-card-location">${i(m)}</p>`:""}\n          ${t.access?`<p class="recruit-job-card-access">${i(t.access)}</p>`:""}\n          <div class="recruit-job-card-benefits">\n            ${c?`\n              <div class="recruit-benefit-item highlight">\n                <span class="recruit-benefit-label">特典総額</span>\n                <span class="recruit-benefit-value">${i(c)}</span>\n              </div>\n            `:""}\n            ${l?`\n              <div class="recruit-benefit-item">\n                <span class="recruit-benefit-label">日収例</span>\n                <span class="recruit-benefit-value">${i(l)}</span>\n              </div>\n            `:""}\n            ${u?`\n              <div class="recruit-benefit-item">\n                <span class="recruit-benefit-label">月収例</span>\n                <span class="recruit-benefit-value">${i(u)}</span>\n              </div>\n            `:""}\n            ${d?`\n              <div class="recruit-benefit-item">\n                <span class="recruit-benefit-label">年収例</span>\n                <span class="recruit-benefit-value">${i(d)}</span>\n              </div>\n            `:""}\n          </div>\n          ${t.features||t.displayedFeatures?`\n            <div class="recruit-job-card-features">\n              ${this.renderFeatures(t.features,t.displayedFeatures)}\n            </div>\n          `:""}\n          <a href="${r}" class="recruit-job-card-btn">詳細を見る</a>\n        </div>\n      </article>\n    `}renderFeatures(t,e=""){if(e&&"string"==typeof e){const t=e.split(/[,、]/).map(t=>t.trim()).filter(t=>t).slice(0,3);if(t.length>0)return t.map(t=>`<span class="recruit-feature-tag">${i(t)}</span>`).join("")}if(!t)return"";if("string"!=typeof t)return"";return t.split(/[,、]/).map(t=>t.trim()).filter(t=>t).slice(0,3).map(t=>`<span class="recruit-feature-tag">${i(t)}</span>`).join("")}renderCTASection(){const t=this.recruitSettings||{},e=t.ctaTitle||"あなたの応募をお待ちしています",n=t.ctaText||"気になる求人があれば、ぜひお気軽にご応募ください。";return`\n      <section class="recruit-section recruit-cta">\n        <div class="recruit-section-inner">\n          <h2 class="recruit-cta-title">${i(e)}</h2>\n          <p class="recruit-cta-text">${i(n)}</p>\n          <a href="#recruit-jobs" class="recruit-cta-button">求人一覧へ戻る</a>\n        </div>\n      </section>\n    `}renderSingleCustomSection(t,e){switch(t.type){case"heading":return`\n          <section class="recruit-section recruit-custom-section recruit-custom-heading" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              <h2 class="recruit-section-title">${i(t.content||"")}</h2>\n            </div>\n          </section>\n        `;case"text":return`\n          <section class="recruit-section recruit-custom-section recruit-custom-text" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              <div class="recruit-custom-content">${this.formatText(t.content||"")}</div>\n            </div>\n          </section>\n        `;case"image":return t.content?`\n          <section class="recruit-section recruit-custom-section recruit-custom-image" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              <img src="${i(t.content)}" alt="" class="recruit-custom-image-content" loading="lazy">\n            </div>\n          </section>\n        `:"";case"message":return`\n          <section class="recruit-section recruit-custom-section recruit-custom-message" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              ${t.title?`<h2 class="recruit-section-title">${i(t.title)}</h2>`:""}\n              <div class="recruit-message-content">\n                ${t.image?`<div class="recruit-message-image"><img src="${i(t.image)}" alt="" loading="lazy"></div>`:""}\n                <div class="recruit-message-text">\n                  ${t.headline?`<p class="recruit-message-headline">${i(t.headline)}</p>`:""}\n                  ${t.description?`<div class="recruit-message-description">${this.formatText(t.description)}</div>`:""}\n                </div>\n              </div>\n            </div>\n          </section>\n        `;case"about":return`\n          <section class="recruit-section recruit-custom-section recruit-custom-about" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              ${t.title?`<h2 class="recruit-section-title">${i(t.title)}</h2>`:""}\n              <div class="recruit-about-content">\n                ${t.image?`<div class="recruit-about-image"><img src="${i(t.image)}" alt="" loading="lazy"></div>`:""}\n                ${t.description?`<div class="recruit-about-description">${this.formatText(t.description)}</div>`:""}\n              </div>\n            </div>\n          </section>\n        `;case"business":const n=Array.isArray(t.items)?t.items:[];return`\n          <section class="recruit-section recruit-custom-section recruit-custom-business" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              ${t.title?`<h2 class="recruit-section-title">${i(t.title)}</h2>`:""}\n              <div class="recruit-business-grid">\n                ${n.map(t=>`\n                  <div class="recruit-business-item">\n                    <h3 class="recruit-business-item-title">${i(t.name||"")}</h3>\n                    ${t.description?`<p class="recruit-business-item-description">${i(t.description)}</p>`:""}\n                  </div>\n                `).join("")}\n              </div>\n            </div>\n          </section>\n        `;case"photos":const r=Array.isArray(t.images)?t.images:[];return r.length>0?`\n          <section class="recruit-section recruit-custom-section recruit-custom-photos" id="custom-section-${e}">\n            <div class="recruit-section-inner">\n              ${t.title?`<h2 class="recruit-section-title">${i(t.title)}</h2>`:""}\n              <div class="recruit-photos-grid">\n                ${r.map(t=>`\n                  <div class="recruit-photos-item">\n                    <img src="${i(t)}" alt="" loading="lazy">\n                  </div>\n                `).join("")}\n              </div>\n            </div>\n          </section>\n        `:"";default:return""}}renderCustomSections(){const t=this.getCustomSectionsArray();return t.length?t.map((t,e)=>this.renderSingleCustomSection(t,e)).join(""):""}updateSEO(){const t=this.company,e=this.recruitSettings||{},n=e.ogpTitle||"",i=e.ogpDescription||"",r=e.ogpImage||e.heroImage||t.imageUrl||"",s=n?`${n} | ${t.company}`:`${t.company} 採用情報 | L-SET`,o=i||(t.description?this.truncateText(t.description,150):`${t.company}の採用情報ページ。募集中の求人をご覧ください。`);document.title=s,this.updateMetaTag("description",o),this.updateMetaTag("og:title",s,"property"),this.updateMetaTag("og:description",o,"property"),r&&this.updateMetaTag("og:image",r,"property")}updateMetaTag(t,e,n="name"){let i=document.querySelector(`meta[${n}="${t}"]`);i||(i=document.createElement("meta"),i.setAttribute(n,t),document.head.appendChild(i)),i.setAttribute("content",e)}truncateText(t,e){if(!t)return"";const n=t.replace(/<[^>]*>/g,"").replace(/\n/g," ");return n.length<=e?n:n.substring(0,e)+"..."}formatText(t){return t?/<[a-z][\s\S]*>/i.test(t)?t:i(t).replace(/\n/g,"<br>"):""}renderLayoutComponents(){var t,e;const n=this.recruitSettings||{};let i=n.template||"modern";["modern","athome","cute","trust"].includes(i)||(i="modern");const r=document.getElementById("recruit-content"),s=!(!n.logoUrl&&!n.companyNameDisplay),o=!(!n.phoneNumber&&!n.ctaButtonText);if(s)document.body.classList.add("has-fixed-header");else{const t=document.querySelector(".recruit-header");t&&(t.style.display="block"),document.body.classList.add("has-fixed-header")}if(o&&document.body.classList.add("has-fixed-cta-bar"),document.body.setAttribute("data-template",i),s&&!document.querySelector(".site-header")){const e=a({logoUrl:n.logoUrl||"",companyName:n.companyNameDisplay||(null==(t=this.company)?void 0:t.company)||"",recruitPageUrl:"",showBackLink:!1,designPattern:i});document.body.insertAdjacentHTML("afterbegin",e)}if(r){let t=n.customLinks||[];if("string"==typeof t)try{t=JSON.parse(t)}catch(l){console.error("[RecruitPage] customLinksのパースエラー:",l),t=[]}Array.isArray(t)||(t=[]);const s=c({companyName:n.companyNameDisplay||(null==(e=this.company)?void 0:e.company)||"",designPattern:i,sns:{twitter:n.snsTwitter||"",instagram:n.snsInstagram||"",facebook:n.snsFacebook||"",youtube:n.snsYoutube||"",line:n.snsLine||"",tiktok:n.snsTiktok||""},customLinks:t});r.insertAdjacentHTML("afterend",s)}if(o){const t=u({phoneNumber:n.phoneNumber||"",ctaButtonText:n.ctaButtonText||"今すぐ応募する",ctaUrl:"#recruit-jobs",designPattern:i});document.body.insertAdjacentHTML("beforeend",t)}}showError(t){this.hideLoading();const e=document.getElementById("recruit-content");e&&(e.innerHTML=`\n        <div class="recruit-error">\n          <h2>エラー</h2>\n          <p>${i(t)}</p>\n          <a href="./" class="recruit-error-link">トップページへ戻る</a>\n        </div>\n      `)}hideLoading(){const t=document.getElementById("recruit-loading");t&&(t.style.display="none")}setupVideoButton(){const t=document.querySelector(".recruit-video-button");t&&t.addEventListener("click",e=>{e.preventDefault();const n=t.dataset.videoUrl;n&&this.showVideoModal(n)})}showVideoModal(t){const e=this.getYouTubeEmbedUrl(t);if(!e)return void console.error("[RecruitPage] YouTube URLの解析に失敗:",t);const n=`\n      <div class="recruit-video-modal" id="recruit-video-modal">\n        <div class="recruit-video-modal-backdrop"></div>\n        <div class="recruit-video-modal-content">\n          <button type="button" class="recruit-video-modal-close" aria-label="閉じる">&times;</button>\n          <div class="recruit-video-modal-wrapper">\n            <iframe\n              src="${e}?autoplay=1&rel=0"\n              frameborder="0"\n              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n              allowfullscreen\n            ></iframe>\n          </div>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",n);const i=document.getElementById("recruit-video-modal"),r=i.querySelector(".recruit-video-modal-close"),s=i.querySelector(".recruit-video-modal-backdrop");r.addEventListener("click",()=>this.closeVideoModal()),s.addEventListener("click",()=>this.closeVideoModal());const o=t=>{"Escape"===t.key&&(this.closeVideoModal(),document.removeEventListener("keydown",o))};document.addEventListener("keydown",o),document.body.style.overflow="hidden"}closeVideoModal(){const t=document.getElementById("recruit-video-modal");t&&t.remove(),document.body.style.overflow=""}getYouTubeEmbedUrl(t){if(!t)return null;const e=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/];for(const n of e){const e=t.match(n);if(e&&e[1])return`https://www.youtube.com/embed/${e[1]}`}return null}}document.addEventListener("DOMContentLoaded",()=>{(new l).init()});
