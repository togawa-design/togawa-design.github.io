import{e as t,b as e}from"./utils-DCR9QUau.js";import{s as i,d as n}from"./image-uploader-gAKnoYUY.js";import{j as a}from"./core-WpNCZy-k.js";import{s as o}from"./api-B1sZYcOA.js";const s=[{id:"standard",name:"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰",description:"ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ¨™æº–ãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"modern",name:"ãƒ¢ãƒ€ãƒ³",description:"ã‚°ãƒªãƒ¼ãƒ³ç³»ã®ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"classic",name:"ã‚¯ãƒ©ã‚·ãƒƒã‚¯",description:"ãƒ–ãƒ©ã‚¦ãƒ³ç³»ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"minimal",name:"ãƒŸãƒ‹ãƒãƒ«",description:"ãƒ¢ãƒãƒˆãƒ¼ãƒ³ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"colorful",name:"ã‚«ãƒ©ãƒ•ãƒ«",description:"ãƒ”ãƒ³ã‚¯ã€œãƒ‘ãƒ¼ãƒ—ãƒ«ã®è¯ã‚„ã‹ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"blue",name:"ãƒ–ãƒ«ãƒ¼",description:"ä¿¡é ¼æ„Ÿã®ã‚ã‚‹ãƒ–ãƒ«ãƒ¼ç³»ãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"orange",name:"ã‚ªãƒ¬ãƒ³ã‚¸",description:"æ´»æ°—ã®ã‚ã‚‹ã‚ªãƒ¬ãƒ³ã‚¸ç³»ãƒ‡ã‚¶ã‚¤ãƒ³"}],l=[{id:"default",name:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ",description:"æ¨™æº–çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ"},{id:"yellow",name:"ã‚¤ã‚¨ãƒ­ãƒ¼",description:"è¦ªã—ã¿ã‚„ã™ã„æ˜ã‚‹ã„ãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"impact",name:"ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ",description:"é»’èƒŒæ™¯ã®å¼·çƒˆãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"trust",name:"ä¿¡é ¼",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ"},{id:"bold",name:"ãƒœãƒ¼ãƒ«ãƒ‰",description:"å¤§ããªæ–‡å­—ã§å°è±¡çš„ã«"},{id:"elegant",name:"ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ",description:"æ´—ç·´ã•ã‚ŒãŸä¸Šå“ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"playful",name:"ãƒãƒƒãƒ—",description:"æ˜ã‚‹ãæ¥½ã—ã„é›°å›²æ°—"},{id:"corporate",name:"ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆ",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ"},{id:"athome",name:"ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ",description:"ä¸¸ã¿ã®ã‚ã‚‹ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"local",name:"åœ°åŸŸå¯†ç€",description:"å’Œé¢¨ãƒ¢ãƒ€ãƒ³ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³"}];class d{constructor(){this.settings={},this.companyDomain=null,this.company=null,this.isEnabled=!1,this.hasChanges=!1,this.onSettingsChange=null}async enable(t,e,i,n){this.companyDomain=t,this.company=e,this.settings=i||{},this.onSettingsChange=n,this.isEnabled=!0,this.createEditorPanel(),this.populateForm(),this.setupEventListeners(),document.body.classList.add("recruit-edit-mode"),console.log("[RecruitEditor] ç·¨é›†ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–")}createEditorPanel(){const e=document.getElementById("recruit-editor-panel");e&&e.remove();const i=document.createElement("div");i.id="recruit-editor-panel",i.className="recruit-editor-panel",i.innerHTML=`\n      <div class="recruit-editor-header">\n        <h2 class="recruit-editor-title">æ¡ç”¨ãƒšãƒ¼ã‚¸ç·¨é›†</h2>\n        <div class="recruit-editor-actions">\n          <button type="button" class="btn-preview-recruit" id="btn-preview-recruit" title="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">\n            <span>ğŸ‘</span>\n          </button>\n          <button type="button" class="btn-close-editor" id="btn-close-editor" title="é–‰ã˜ã‚‹">\n            <span>âœ•</span>\n          </button>\n        </div>\n      </div>\n\n      <div class="recruit-editor-body">\n        \x3c!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ --\x3e\n        <div class="recruit-editor-tabs">\n          <button type="button" class="recruit-editor-tab active" data-tab="design">ãƒ‡ã‚¶ã‚¤ãƒ³</button>\n          <button type="button" class="recruit-editor-tab" data-tab="content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>\n          <button type="button" class="recruit-editor-tab" data-tab="header">ãƒ˜ãƒƒãƒ€ãƒ¼</button>\n          <button type="button" class="recruit-editor-tab" data-tab="seo">SEO</button>\n        </div>\n\n        \x3c!-- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content active" data-tab-content="design">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</h3>\n            <div class="layout-style-grid" id="layout-style-grid">\n              ${l.map(e=>`\n                <label class="layout-style-item" data-style="${e.id}">\n                  <input type="radio" name="layoutStyle" value="${e.id}" ${this.settings.layoutStyle===e.id?"checked":""}>\n                  <span class="layout-style-name">${t(e.name)}</span>\n                  <span class="layout-style-desc">${t(e.description)}</span>\n                </label>\n              `).join("")}\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ</h3>\n            <div class="design-pattern-grid" id="design-pattern-grid">\n              ${s.map(e=>`\n                <label class="design-pattern-item" data-pattern="${e.id}">\n                  <input type="radio" name="designPattern" value="${e.id}" ${this.settings.designPattern===e.id?"checked":""}>\n                  <span class="design-pattern-preview pattern-${e.id}"></span>\n                  <span class="design-pattern-name">${t(e.name)}</span>\n                </label>\n              `).join("")}\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="content">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼</h3>\n            <div class="form-group">\n              <label for="edit-hero-title">ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-hero-title" placeholder="ã€‡ã€‡ã§åƒã“ã†">\n            </div>\n            <div class="form-group">\n              <label for="edit-hero-subtitle">ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-hero-subtitle" placeholder="ç§ãŸã¡ã¨ä¸€ç·’ã«åƒãã¾ã›ã‚“ã‹ï¼Ÿ">\n            </div>\n            <div class="form-group">\n              <label>ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ</label>\n              <div class="hero-image-presets" id="hero-image-presets">\n                ${a.map(e=>`\n                  <div class="hero-preset-item" data-url="${t(e.url)}">\n                    <img src="${t(e.thumbnail)}" alt="${t(e.name)}" loading="lazy">\n                  </div>\n                `).join("")}\n              </div>\n              <input type="text" id="edit-hero-image" placeholder="ã¾ãŸã¯ç”»åƒURLã‚’å…¥åŠ›" class="mt-2">\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">æ±‚äººã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n            <div class="form-group">\n              <label for="edit-jobs-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-jobs-title" placeholder="å‹Ÿé›†ä¸­ã®æ±‚äºº">\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">CTAã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n            <div class="form-group">\n              <label for="edit-cta-title">ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-cta-title" placeholder="ã‚ãªãŸã®å¿œå‹Ÿã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™">\n            </div>\n            <div class="form-group">\n              <label for="edit-cta-text">èª¬æ˜æ–‡</label>\n              <textarea id="edit-cta-text" rows="2" placeholder="æ°—ã«ãªã‚‹æ±‚äººãŒã‚ã‚Œã°ã€ãœã²ãŠæ°—è»½ã«ã”å¿œå‹Ÿãã ã•ã„ã€‚"></textarea>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="header">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ­ã‚´è¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-logo-url">ãƒ­ã‚´ç”»åƒ</label>\n              <div class="logo-preview-small" id="edit-logo-preview">\n                <span class="logo-placeholder">ãƒ­ã‚´æœªè¨­å®š</span>\n              </div>\n              <div class="input-with-button">\n                <input type="text" id="edit-logo-url" placeholder="https://example.com/logo.png">\n                <button type="button" id="btn-upload-logo-edit" class="btn-upload-small">ğŸ“·</button>\n              </div>\n            </div>\n            <div class="form-group">\n              <label for="edit-company-name-display">è¡¨ç¤ºä¼šç¤¾å</label>\n              <input type="text" id="edit-company-name-display" placeholder="æ ªå¼ä¼šç¤¾ã€‡ã€‡">\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">CTAãƒãƒ¼è¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-phone-number">é›»è©±ç•ªå·</label>\n              <input type="text" id="edit-phone-number" placeholder="0120-XXX-XXX">\n            </div>\n            <div class="form-group">\n              <label for="edit-cta-button-text">ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</label>\n              <input type="text" id="edit-cta-button-text" placeholder="ä»Šã™ãå¿œå‹Ÿã™ã‚‹">\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- SEOã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="seo">\n          <div class="editor-section">\n            <h3 class="editor-section-title">OGPè¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-ogp-title">OGPã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-ogp-title" placeholder="ã€‡ã€‡æ¡ç”¨æƒ…å ±">\n            </div>\n            <div class="form-group">\n              <label for="edit-ogp-description">OGPèª¬æ˜æ–‡</label>\n              <textarea id="edit-ogp-description" rows="2" placeholder="æ¡ç”¨æƒ…å ±ãƒšãƒ¼ã‚¸ã®èª¬æ˜"></textarea>\n            </div>\n            <div class="form-group">\n              <label for="edit-ogp-image">OGPç”»åƒURL</label>\n              <input type="text" id="edit-ogp-image" placeholder="https://example.com/ogp.jpg">\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="recruit-editor-footer">\n        <button type="button" class="btn-save-recruit" id="btn-save-recruit">\n          <span>ğŸ’¾</span> ä¿å­˜\n        </button>\n      </div>\n    `,document.body.appendChild(i)}populateForm(){var t;const e=this.settings,i=(null==(t=this.company)?void 0:t.company)||"";this.setRadioValue("layoutStyle",e.layoutStyle||"default"),this.setRadioValue("designPattern",e.designPattern||"standard"),this.setInputValue("edit-hero-title",e.heroTitle||`${i}ã§åƒã“ã†`),this.setInputValue("edit-hero-subtitle",e.heroSubtitle||"ç§ãŸã¡ã¨ä¸€ç·’ã«åƒãã¾ã›ã‚“ã‹ï¼Ÿ"),this.setInputValue("edit-hero-image",e.heroImage||""),this.setInputValue("edit-jobs-title",e.jobsTitle||"å‹Ÿé›†ä¸­ã®æ±‚äºº"),this.setInputValue("edit-cta-title",e.ctaTitle||"ã‚ãªãŸã®å¿œå‹Ÿã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™"),this.setInputValue("edit-cta-text",e.ctaText||"æ°—ã«ãªã‚‹æ±‚äººãŒã‚ã‚Œã°ã€ãœã²ãŠæ°—è»½ã«ã”å¿œå‹Ÿãã ã•ã„ã€‚"),this.setInputValue("edit-logo-url",e.logoUrl||""),this.setInputValue("edit-company-name-display",e.companyNameDisplay||i),this.setInputValue("edit-phone-number",e.phoneNumber||""),this.setInputValue("edit-cta-button-text",e.ctaButtonText||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹"),this.setInputValue("edit-ogp-title",e.ogpTitle||""),this.setInputValue("edit-ogp-description",e.ogpDescription||""),this.setInputValue("edit-ogp-image",e.ogpImage||""),this.updateLogoPreview(e.logoUrl||""),this.updateHeroPresetSelection(e.heroImage||"")}setupEventListeners(){var t,e,i,n,a;document.querySelectorAll(".recruit-editor-tab").forEach(t=>{t.addEventListener("click",()=>this.switchTab(t.dataset.tab))}),null==(t=document.getElementById("btn-close-editor"))||t.addEventListener("click",()=>{this.close()}),null==(e=document.getElementById("btn-preview-recruit"))||e.addEventListener("click",()=>{this.applyPreview()}),null==(i=document.getElementById("btn-save-recruit"))||i.addEventListener("click",()=>{this.save()}),document.querySelectorAll('input[name="layoutStyle"]').forEach(t=>{t.addEventListener("change",()=>{this.settings.layoutStyle=t.value,this.hasChanges=!0,this.applyPreview()})}),document.querySelectorAll('input[name="designPattern"]').forEach(t=>{t.addEventListener("change",()=>{this.settings.designPattern=t.value,this.hasChanges=!0,this.applyPreview()})});["edit-hero-title","edit-hero-subtitle","edit-hero-image","edit-jobs-title","edit-cta-title","edit-cta-text","edit-logo-url","edit-company-name-display","edit-phone-number","edit-cta-button-text","edit-ogp-title","edit-ogp-description","edit-ogp-image"].forEach(t=>{const e=document.getElementById(t);e&&e.addEventListener("input",()=>{this.hasChanges=!0,this.updateSettingsFromForm()})}),document.querySelectorAll("#hero-image-presets .hero-preset-item").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.url;this.setInputValue("edit-hero-image",e),this.updateHeroPresetSelection(e),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()})}),null==(n=document.getElementById("btn-upload-logo-edit"))||n.addEventListener("click",async()=>{await this.uploadLogo()}),null==(a=document.getElementById("edit-logo-url"))||a.addEventListener("input",t=>{this.updateLogoPreview(t.target.value)})}switchTab(t){document.querySelectorAll(".recruit-editor-tab").forEach(e=>{e.classList.toggle("active",e.dataset.tab===t)}),document.querySelectorAll(".recruit-editor-tab-content").forEach(e=>{e.classList.toggle("active",e.dataset.tabContent===t)})}updateSettingsFromForm(){var t,e,i,n,a,o,s,l,d,r,c,u,p;this.settings={...this.settings,companyDomain:this.companyDomain,layoutStyle:this.getRadioValue("layoutStyle")||"default",designPattern:this.getRadioValue("designPattern")||"standard",heroTitle:(null==(t=document.getElementById("edit-hero-title"))?void 0:t.value)||"",heroSubtitle:(null==(e=document.getElementById("edit-hero-subtitle"))?void 0:e.value)||"",heroImage:(null==(i=document.getElementById("edit-hero-image"))?void 0:i.value)||"",jobsTitle:(null==(n=document.getElementById("edit-jobs-title"))?void 0:n.value)||"",ctaTitle:(null==(a=document.getElementById("edit-cta-title"))?void 0:a.value)||"",ctaText:(null==(o=document.getElementById("edit-cta-text"))?void 0:o.value)||"",logoUrl:(null==(s=document.getElementById("edit-logo-url"))?void 0:s.value)||"",companyNameDisplay:(null==(l=document.getElementById("edit-company-name-display"))?void 0:l.value)||"",phoneNumber:(null==(d=document.getElementById("edit-phone-number"))?void 0:d.value)||"",ctaButtonText:(null==(r=document.getElementById("edit-cta-button-text"))?void 0:r.value)||"",ogpTitle:(null==(c=document.getElementById("edit-ogp-title"))?void 0:c.value)||"",ogpDescription:(null==(u=document.getElementById("edit-ogp-description"))?void 0:u.value)||"",ogpImage:(null==(p=document.getElementById("edit-ogp-image"))?void 0:p.value)||""}}applyPreview(){this.updateSettingsFromForm(),this.onSettingsChange&&this.onSettingsChange(this.settings)}async save(){const t=document.getElementById("btn-save-recruit");if(t)try{t.disabled=!0,t.innerHTML='<span class="loading-spinner-small"></span> ä¿å­˜ä¸­...',this.updateSettingsFromForm(),await o(this.settings),this.hasChanges=!1,e("è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ","success")}catch(i){console.error("[RecruitEditor] ä¿å­˜ã‚¨ãƒ©ãƒ¼:",i),e("ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: "+i.message,"error")}finally{t.disabled=!1,t.innerHTML="<span>ğŸ’¾</span> ä¿å­˜"}}async uploadLogo(){const t=document.getElementById("btn-upload-logo-edit");if(t&&this.companyDomain)try{const a=await i({accept:"image/png,image/jpeg,image/webp,image/svg+xml"});t.disabled=!0,t.textContent="...";const o=await n(a,this.companyDomain);this.setInputValue("edit-logo-url",o),this.updateLogoPreview(o),this.hasChanges=!0,this.updateSettingsFromForm(),e("ãƒ­ã‚´ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ","success")}catch(a){"ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ"!==a.message&&e("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: "+a.message,"error")}finally{t&&(t.disabled=!1,t.textContent="ğŸ“·")}}updateLogoPreview(e){const i=document.getElementById("edit-logo-preview");i&&(i.innerHTML=e?`<img src="${t(e)}" alt="ãƒ­ã‚´ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:'<span class="logo-placeholder">ãƒ­ã‚´æœªè¨­å®š</span>')}updateHeroPresetSelection(t){document.querySelectorAll("#hero-image-presets .hero-preset-item").forEach(e=>{const i=e.dataset.url,n=null==t?void 0:t.split("?")[0],a=null==i?void 0:i.split("?")[0];e.classList.toggle("selected",n&&a&&n===a)})}close(){this.hasChanges&&!confirm("ä¿å­˜ã•ã‚Œã¦ã„ãªã„å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚é–‰ã˜ã¾ã™ã‹ï¼Ÿ")||(window.location.href=`company-recruit.html?id=${encodeURIComponent(this.companyDomain)}`)}setInputValue(t,e){const i=document.getElementById(t);i&&(i.value=e||"")}setRadioValue(t,e){const i=document.querySelector(`input[name="${t}"][value="${e}"]`);i&&(i.checked=!0)}getRadioValue(t){var e;return(null==(e=document.querySelector(`input[name="${t}"]:checked`))?void 0:e.value)||""}}export{d as RecruitEditor};
