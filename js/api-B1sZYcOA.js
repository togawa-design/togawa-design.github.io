const e={},t=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),o=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));r=Promise.allSettled(n.map(t=>{if((t=function(e){return"/"+e}(t))in e)return;e[t]=!0;const n=t.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${r}`))return;const s=document.createElement("link");return s.rel=n?"stylesheet":"modulepreload",n||(s.as="script"),s.crossOrigin="",s.href=t,o&&s.setAttribute("nonce",o),document.head.appendChild(s),n?new Promise((e,n)=>{s.addEventListener("load",e),s.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(e=>{for(const t of e||[])"rejected"===t.status&&s(t.reason);return t().catch(s)})},n="https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec",o=new Map;async function r(e){if(!e)return null;const t=Date.now(),r=o.get(e);if(r&&t-r.timestamp<3e5)return r.data;try{const r=await fetch(`${n}?action=getRecruitSettings&companyDomain=${encodeURIComponent(e)}`);if(r.ok){const n=await r.json();if(n.success&&n.settings)return o.set(e,{data:n.settings,timestamp:t}),n.settings}}catch(s){console.log("[RecruitSettings] 設定の読み込みエラー（新規の可能性）:",s)}return(null==r?void 0:r.data)||null}async function s(e){const t=btoa(unescape(encodeURIComponent(JSON.stringify({action:"updateRecruitSettings",settings:e})))),r=`${n}?action=post&data=${encodeURIComponent(t)}`,s=await fetch(r,{method:"GET",redirect:"follow"}),a=await s.json();if(!a.success)throw new Error(a.message||a.error||"保存に失敗しました");return e.companyDomain&&o.set(e.companyDomain,{data:e,timestamp:Date.now()}),a}export{t as _,r as l,s};
