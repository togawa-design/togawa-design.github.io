import"./modulepreload-polyfill-YP0FEG5d.js";import{trackEvent as n,escapeHtml as a}from"./utils-BNVq905i.js";import{i as e,f as o,b as t,e as i,d as c,D as r,k as s,J as l}from"./jobs-loader-CwhHuMi7.js";import{L as d,a as m,C as p,J as y}from"./index-DMbtoUTV.js";import{i as v}from"./layout-Bv7fsJiN.js";async function u(){var u;await e();const b=document.getElementById("job-detail-container");if(!b)return;const f=new URLSearchParams(window.location.search).get("id");if(!f)return void(b.innerHTML='\n      <div class="jobs-error">\n        <p>求人が見つかりませんでした。</p>\n        <a href="/" class="btn-more">トップページに戻る</a>\n      </div>\n    ');b.innerHTML=d({message:"会社情報を読み込んでいます..."});const h=await o();if(!h)return void(b.innerHTML='\n      <div class="jobs-error">\n        <p>会社情報を取得できませんでした。</p>\n        <button onclick="location.reload()">再読み込み</button>\n      </div>\n    ');const g=h.find(n=>{var a;return(null==(a=n.companyDomain)?void 0:a.trim())===f&&t(n)});if(!g)return void(b.innerHTML='\n      <div class="jobs-error">\n        <p>会社が見つかりませんでした。</p>\n        <a href="/" class="btn-more">トップページに戻る</a>\n      </div>\n    ');let j=[];if(null==(u=g.jobsSheet)?void 0:u.trim()){const n=await i(g.jobsSheet.trim());n&&n.length>0&&(j=n.filter(n=>"false"!==n.visible&&"FALSE"!==n.visible).filter(n=>c(n)).sort((n,a)=>(parseInt(n.order)||999)-(parseInt(a.order)||999)).map(n=>({...n,company:g.company,companyDomain:g.companyDomain})))}0===j.length&&(j=[g]),document.title=`${g.company}の求人一覧 | L-SET`;const L=document.querySelector('meta[name="description"]');L&&(L.content=`${g.company}の求人一覧。${j.length}件の求人を掲載中。`);const _=document.getElementById("breadcrumb-current");_&&(_.textContent=g.company),b.innerHTML=function(n,e){var o;const t=(null==(o=n.imageUrl)?void 0:o.trim())||r,i=s(n.designPattern),c=n.description?l.sanitizeHtml(n.description):"";return`\n    <div class="company-page ${i}">\n      <div class="company-header">\n        <div class="company-header-image">\n          ${m({src:t,alt:n.company,className:""})}\n        </div>\n        <div class="company-header-info">\n          <h1 class="company-name">${a(n.company)}</h1>\n          <p class="company-job-count">${e.length}件の求人を掲載中</p>\n        </div>\n      </div>\n\n      ${c?`\n      <div class="company-description">\n        <h2>会社について</h2>\n        <div class="company-description-content">${c}</div>\n      </div>\n      `:""}\n\n      <div class="company-jobs">\n        <h2>募集中の求人</h2>\n        <div class="company-jobs-list">\n          ${e.map(n=>p({job:n})).join("")}\n        </div>\n      </div>\n\n      <div class="company-cta">\n        <p>お仕事選びでお困りですか？</p>\n        <div class="company-cta-buttons">\n          <a href="#" class="btn-apply-large">無料で相談する</a>\n          <a href="#" class="btn-line-large">LINEで相談する</a>\n        </div>\n      </div>\n    </div>\n  `}(g,j),n("view_company_page",{company_domain:g.companyDomain||"",company_name:g.company||"",design_pattern:g.designPattern||"modern",page_location:window.location.href,page_title:document.title}),function(a){document.querySelectorAll(".btn-apply-job, .btn-apply-large").forEach(e=>{e.addEventListener("click",()=>{n("click_apply",{company_domain:a,button_type:"apply"})})}),document.querySelectorAll(".btn-line-large").forEach(e=>{e.addEventListener("click",()=>{n("click_apply",{company_domain:a,button_type:"line"})})})}(g.companyDomain),async function(n,a){const e=document.getElementById("related-jobs-container");if(!e)return;const o=n.filter(n=>n.companyDomain!==a&&t(n)).sort((n,a)=>(parseInt(n.order)||999)-(parseInt(a.order)||999)).slice(0,3);0!==o.length?e.innerHTML=o.map(n=>y({job:n})).join(""):e.innerHTML="<p>他の求人がありません。</p>"}(h,f),v()}document.addEventListener("DOMContentLoaded",()=>{u()});
