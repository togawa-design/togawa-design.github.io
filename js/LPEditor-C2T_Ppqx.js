const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/CarouselSection-BwGz6OSJ.js","js/utils-DCR9QUau.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,i,n)=>((t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n)(t,"symbol"!=typeof i?i+"":i,n);import{_ as i}from"./api-B1sZYcOA.js";import{e as n}from"./utils-DCR9QUau.js";function s(e,t,i,s="default"){const l=i.heroTitle||t.title||`${e.company}ã§åƒã“ã†`,a=i.heroSubtitle||"",o=i.heroImage||e.imageUrl||"",d=[];switch(t.totalBonus&&d.push({label:"ç‰¹å…¸ç·é¡",value:t.totalBonus,icon:"bonus"}),t.monthlySalary&&d.push({label:"æœˆåä¾‹",value:t.monthlySalary,icon:"salary"}),s){case"yellow":return function(e,t,i,s,l){return`\n    <section class="lp-hero lp-hero--yellow">\n      <div class="lp-hero-bg lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" style="${s?`background-image: url('${n(s)}')`:""}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        ${i?`<p class="lp-hero-pretitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-pretitle">æœªçµŒé¨“ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã‚‹ï¼</p>'}\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        <p class="lp-hero-company">${n(e.company)}</p>\n\n        ${l.length>0?`\n        <div class="lp-hero-highlights">\n          ${l.map(e=>`\n            <div class="lp-highlight-item ${e.icon}">\n              <span class="lp-highlight-label">${n(e.label)}</span>\n              <span class="lp-highlight-value">${n(e.value)}</span>\n            </div>\n          `).join("")}\n        </div>\n        `:""}\n      </div>\n    </section>\n  `}(e,l,a,o,d);case"impact":return function(e,t,i,s){return`\n    <section class="lp-hero lp-hero--impact" style="${s?`background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('${n(s)}')`:""}">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-subtitle">é™ç•Œã‚’è¶…ãˆã‚ã€‚å¸¸è­˜ã‚’å¤‰ãˆã‚ã€‚</p>'}\n      </div>\n    </section>\n  `}(0,l,a,o);case"trust":return function(e,t,i){return`\n    <section class="lp-hero lp-hero--trust">\n      <div class="lp-hero-content">\n        <p class="lp-hero-pretitle">Expertise & Growth</p>\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:""}\n      </div>\n    </section>\n  `}(0,l,a);case"athome":return function(e,t,i,s){return`\n    <section class="lp-hero lp-hero--athome">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-subtitle">ã‚¹ã‚­ãƒ«ã‚ˆã‚Šã‚‚ã€ã‚ãªãŸã®ç¬‘é¡”ã‚’é‡è¦è¦–ã—ã¾ã™ï¼</p>'}\n        ${s?`<div class="lp-hero-image-container"><img src="${n(s)}" alt="" class="lp-hero-image lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ"></div>`:""}\n      </div>\n    </section>\n  `}(0,l,a,o);case"local":return function(e,t,i,s){return`\n    <section class="lp-hero lp-hero--local" style="${s?`background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('${n(s)}')`:""}">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:""}\n      </div>\n    </section>\n  `}(0,l,a,o);default:return function(e,t,i,s,l){return`\n    <section class="lp-hero">\n      <div class="lp-hero-bg lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" style="${s?`background-image: url('${n(s)}')`:""}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        <p class="lp-hero-company">${n(e.company)}</p>\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-subtitle lp-editable lp-placeholder" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ </p>'}\n\n        ${l.length>0?`\n        <div class="lp-hero-highlights">\n          ${l.map(e=>`\n            <div class="lp-highlight-item ${e.icon}">\n              <span class="lp-highlight-label">${n(e.label)}</span>\n              <span class="lp-highlight-value">${n(e.value)}</span>\n            </div>\n          `).join("")}\n        </div>\n        `:""}\n      </div>\n    </section>\n  `}(e,l,a,o,d)}}function l(e,t,i,s="default"){const l=[];if(i.pointTitle1&&l.push({title:i.pointTitle1,desc:i.pointDesc1||"",idx:1}),i.pointTitle2&&l.push({title:i.pointTitle2,desc:i.pointDesc2||"",idx:2}),i.pointTitle3&&l.push({title:i.pointTitle3,desc:i.pointDesc3||"",idx:3}),0===l.length&&(t.totalBonus&&l.push({title:"å…¥ç¤¾ç‰¹å…¸",desc:`ç‰¹å…¸ç·é¡${t.totalBonus}ï¼å…¥ç¤¾ç¥ã„é‡‘ã‚„ãã®ä»–ç‰¹å…¸ãŒå……å®Ÿã€‚`,idx:1}),t.monthlySalary&&l.push({title:"é«˜åå…¥",desc:`æœˆåä¾‹${t.monthlySalary}å¯èƒ½ï¼å®‰å®šã—ãŸåå…¥ã‚’å®Ÿç¾ã€‚`,idx:2}),t.benefits&&l.push({title:"å……å®Ÿã®å¾…é‡",desc:"ç¤¾ä¼šä¿é™ºå®Œå‚™ã€å¯®å®Œå‚™ãªã©ç¦åˆ©åšç”ŸãŒå……å®Ÿã€‚",idx:3})),0===l.length)return"";switch(s){case"yellow":return function(e){return`\n    <section class="lp-points lp-points--yellow">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">åƒãé­…åŠ›ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">\n                <span class="lp-point-number">${String(t+1).padStart(2,"0")}.</span>\n                ${n(e.title)}\n              </h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"impact":return function(e){return`\n    <section class="lp-points lp-points--impact">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">WHY JOIN US?</h2>\n        <div class="lp-points-list">\n          ${e.map(e=>`\n            <div class="lp-point-box">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"trust":return function(e){return`\n    <section class="lp-points lp-points--trust">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">åŠ ã‚ã‚‹ä¾¡å€¤</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-item">\n              <span class="lp-point-number">${String(t+1).padStart(2,"0")}</span>\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"athome":return function(e){return`\n    <section class="lp-points lp-points--athome">\n      <div class="lp-section-inner">\n        <div class="lp-points-grid">\n          ${e.map(e=>`\n            <div class="lp-point-card">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"local":return function(e){return`\n    <section class="lp-points lp-points--local">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">\n          <span class="lp-section-title-label">OUR VALUES</span>\n          ç§ãŸã¡ãŒå¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨\n        </h2>\n        <div class="lp-points-grid">\n          ${e.map(e=>`\n            <div class="lp-point-box">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);default:return function(e){return`\n    <section class="lp-points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card">\n              <div class="lp-point-number">${t+1}</div>\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l)}}const a={hero:{id:"hero",name:"ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼",icon:"ğŸ¯",required:!0,maxInstances:1,defaultData:{title:"",subtitle:"",image:""},defaultLayout:{}},heroCta:{id:"heroCta",name:"CTAãƒœã‚¿ãƒ³",icon:"ğŸ“¢",required:!1,maxInstances:1,defaultData:{showVideoButton:!1,videoUrl:"",applyButtonText:"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",videoButtonText:"æ±‚äººå†…å®¹ã‚’å‹•ç”»ã§è¦‹ã‚‹"},defaultLayout:{}},points:{id:"points",name:"ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å¾´ï¼‰",icon:"âœ¨",required:!1,maxInstances:null,defaultData:{sectionTitle:"ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ",points:[]},defaultLayout:{columns:3,style:"cards"}},jobs:{id:"jobs",name:"æ±‚äººä¸€è¦§",icon:"ğŸ’¼",required:!1,maxInstances:1,defaultData:{sectionTitle:"å‹Ÿé›†ä¸­ã®æ±‚äºº"},defaultLayout:{}},details:{id:"details",name:"å‹Ÿé›†è¦é …",icon:"ğŸ“‹",required:!1,maxInstances:1,defaultData:{sectionTitle:"å‹Ÿé›†è¦é …"},defaultLayout:{}},faq:{id:"faq",name:"ã‚ˆãã‚ã‚‹è³ªå•",icon:"â“",required:!1,maxInstances:null,defaultData:{sectionTitle:"ã‚ˆãã‚ã‚‹è³ªå•",items:[]},defaultLayout:{style:"accordion"}},apply:{id:"apply",name:"å¿œå‹Ÿã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ“",required:!0,maxInstances:1,defaultData:{},defaultLayout:{}},custom:{id:"custom",name:"ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ¨",required:!1,maxInstances:null,defaultData:{title:"",content:"",image:"",button:null},defaultLayout:{variant:"text-only"}},gallery:{id:"gallery",name:"ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",icon:"ğŸ–¼ï¸",required:!1,maxInstances:null,defaultData:{sectionTitle:"",images:[]},defaultLayout:{columns:3,style:"grid"}},testimonial:{id:"testimonial",name:"ç¤¾å“¡ã®å£°",icon:"ğŸ’¬",required:!1,maxInstances:null,defaultData:{sectionTitle:"ç¤¾å“¡ã®å£°",testimonials:[]},defaultLayout:{style:"cards"}},carousel:{id:"carousel",name:"ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«",icon:"ğŸ ",required:!1,maxInstances:null,defaultData:{sectionTitle:"",images:[],autoPlay:!0,interval:5e3},defaultLayout:{style:"standard",showDots:!0,showArrows:!0}},video:{id:"video",name:"å‹•ç”»",icon:"ğŸ¬",required:!1,maxInstances:null,defaultData:{sectionTitle:"",videoUrl:"",videoType:"youtube",description:""},defaultLayout:{aspectRatio:"16:9",fullWidth:!1}}},o={"text-only":{name:"ãƒ†ã‚­ã‚¹ãƒˆã®ã¿",icon:"ğŸ“",description:"ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿ã‚’è¡¨ç¤º"},"image-only":{name:"ç”»åƒã®ã¿",icon:"ğŸ–¼ï¸",description:"ç”»åƒã‚’å¤§ããè¡¨ç¤º"},"text-left-image-right":{name:"ãƒ†ã‚­ã‚¹ãƒˆå·¦ãƒ»ç”»åƒå³",icon:"â—§",description:"å·¦ã«ãƒ†ã‚­ã‚¹ãƒˆã€å³ã«ç”»åƒã‚’é…ç½®"},"text-right-image-left":{name:"ãƒ†ã‚­ã‚¹ãƒˆå³ãƒ»ç”»åƒå·¦",icon:"â—¨",description:"å·¦ã«ç”»åƒã€å³ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’é…ç½®"},"centered-with-button":{name:"ä¸­å¤®æƒãˆï¼ˆãƒœã‚¿ãƒ³ä»˜ãï¼‰",icon:"ğŸ”˜",description:"ä¸­å¤®æƒãˆã®ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒœã‚¿ãƒ³"},"full-width-banner":{name:"ãƒ•ãƒ«ãƒ¯ã‚¤ãƒ‰ãƒãƒŠãƒ¼",icon:"â–¬",description:"èƒŒæ™¯ç”»åƒä»˜ãã®å…¨å¹…ãƒãƒŠãƒ¼"}},d=["hero","heroCta","points","jobs","details","faq","apply"];function r(e){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function c(e,t){const i=a[e];if(!i)return!1;if(null===i.maxInstances)return!0;return t.filter(t=>t.type===e).length<i.maxInstances}function p(e,t){const i=t.find(t=>t.id===e);if(!i)return!1;const n=a[i.type];return!(null==n?void 0:n.required)}const u=[{id:"standard",name:"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰",description:"ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ¨™æº–ãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#667eea",secondary:"#764ba2",accent:"#ff6b35",text:"#333333"}},{id:"modern",name:"ãƒ¢ãƒ€ãƒ³",description:"ã‚°ãƒªãƒ¼ãƒ³ç³»ã®ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#10b981",secondary:"#059669",accent:"#10b981",text:"#1f2937"}},{id:"classic",name:"ã‚¯ãƒ©ã‚·ãƒƒã‚¯",description:"ãƒ–ãƒ©ã‚¦ãƒ³ç³»ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#92400e",secondary:"#78350f",accent:"#b45309",text:"#44403c"}},{id:"minimal",name:"ãƒŸãƒ‹ãƒãƒ«",description:"ãƒ¢ãƒãƒˆãƒ¼ãƒ³ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#374151",secondary:"#1f2937",accent:"#111827",text:"#111827"}},{id:"colorful",name:"ã‚«ãƒ©ãƒ•ãƒ«",description:"ãƒ”ãƒ³ã‚¯ã€œãƒ‘ãƒ¼ãƒ—ãƒ«ã®è¯ã‚„ã‹ãªãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#ec4899",secondary:"#8b5cf6",accent:"#ec4899",text:"#581c87"}},{id:"blue",name:"ãƒ–ãƒ«ãƒ¼",description:"ä¿¡é ¼æ„Ÿã®ã‚ã‚‹ãƒ–ãƒ«ãƒ¼ç³»ãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#3b82f6",secondary:"#1d4ed8",accent:"#0ea5e9",text:"#1e3a8a"}},{id:"orange",name:"ã‚ªãƒ¬ãƒ³ã‚¸",description:"æ´»æ°—ã®ã‚ã‚‹ã‚ªãƒ¬ãƒ³ã‚¸ç³»ãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#f97316",secondary:"#ea580c",accent:"#fb923c",text:"#9a3412"}}],h=[{id:"default",name:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ",description:"æ¨™æº–çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ",preview:"ä¸­å¤®æƒãˆãƒ»ã‚·ãƒ³ãƒ—ãƒ«",features:["title-center","card-shadow","rounded-md"]},{id:"yellow",name:"ã‚¤ã‚¨ãƒ­ãƒ¼",description:"è¦ªã—ã¿ã‚„ã™ã„æ˜ã‚‹ã„ãƒ‡ã‚¶ã‚¤ãƒ³",preview:"ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»è§’ä¸¸",features:["hero-gradient","rounded-lg","card-border-bottom","friendly"]},{id:"impact",name:"ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ",description:"é»’èƒŒæ™¯ã®å¼·çƒˆãªãƒ‡ã‚¶ã‚¤ãƒ³",preview:"å¤§æ–‡å­—ãƒ»æ–œã‚ãƒœã‚¿ãƒ³",features:["dark-bg","uppercase","skew-btn","neon"]},{id:"trust",name:"ä¿¡é ¼",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ",preview:"å·¦ãƒœãƒ¼ãƒ€ãƒ¼ãƒ»ã‚·ãƒ³ãƒ—ãƒ«",features:["left-border","minimal","corporate"]},{id:"bold",name:"ãƒœãƒ¼ãƒ«ãƒ‰",description:"å¤§ããªæ–‡å­—ã§å°è±¡çš„ã«",preview:"å¤§æ–‡å­—ãƒ»ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆé‡è¦–",features:["title-large","title-center","hero-overlay-dark","text-bold"]},{id:"elegant",name:"ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ",description:"æ´—ç·´ã•ã‚ŒãŸä¸Šå“ãªãƒ‡ã‚¶ã‚¤ãƒ³",preview:"å·¦æƒãˆãƒ»ä¸‹ç·šè£…é£¾",features:["title-left","title-underline","card-border","section-wide-padding"]},{id:"playful",name:"ãƒãƒƒãƒ—",description:"æ˜ã‚‹ãæ¥½ã—ã„é›°å›²æ°—",preview:"è§’ä¸¸ãƒ»ã‚«ãƒ©ãƒ•ãƒ«",features:["title-center","rounded-lg","card-colorful","section-wave"]},{id:"corporate",name:"ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆ",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ",preview:"å·¦æƒãˆãƒ»ç›´ç·šçš„",features:["title-left","title-badge","card-flat","section-striped"]},{id:"magazine",name:"ãƒã‚¬ã‚¸ãƒ³",description:"é›‘èªŒé¢¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ",preview:"å¤§ããªç”»åƒãƒ»é‡ãªã‚Š",features:["title-overlap","hero-full","card-overlap","section-overlap"]},{id:"athome",name:"ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ",description:"ä¸¸ã¿ã®ã‚ã‚‹ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ‡ã‚¶ã‚¤ãƒ³",preview:"è§’ä¸¸ãƒ»å¹ãå‡ºã—é¢¨",features:["rounded-xl","bubble-card","friendly","soft-colors"]},{id:"local",name:"åœ°åŸŸå¯†ç€",description:"å’Œé¢¨ãƒ¢ãƒ€ãƒ³ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³",preview:"å‰µæ¥­â—‹å¹´ãƒ»å®‰å®šæ„Ÿ",features:["japanese-modern","stable","earth-tone","traditional"]}],v=[{url:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1200&q=80",label:"ã‚ªãƒ•ã‚£ã‚¹ãƒ¯ãƒ¼ã‚¯"},{url:"https://images.unsplash.com/photo-1565043666747-69f6646db940?w=1200&q=80",label:"ãƒ“ã‚¸ãƒã‚¹ã‚·ãƒ¼ãƒ³"},{url:"https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?w=1200&q=80",label:"æŠ€è¡“è·"},{url:"https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=1200&q=80",label:"ITãƒ»ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼"},{url:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&q=80",label:"å€‰åº«ãƒ»ç‰©æµ"},{url:"https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=1200&q=80",label:"ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"},{url:"https://images.unsplash.com/photo-1567789884554-0b844b597180?w=1200&q=80",label:"é›»å­éƒ¨å“çµ„ç«‹"},{url:"https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=1200&q=80",label:"å»ºè¨­ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©"}];class m{constructor(){t(this,"handleAddPanelOutsideClick",e=>{const t=document.getElementById("lp-add-section-panel");!t||t.contains(e.target)||e.target.closest("#lp-btn-add-section")||this.closeAddSectionPanel()}),t(this,"handleOutsideClick",e=>{const t=document.getElementById("lp-active-editor");!t||t.contains(e.target)||e.target.closest(".lp-editable")||this.closeInlineEditor()}),this.editedData={},this.currentCompanyDomain=null,this.draggedSection=null,this.isActive=!1,this.presetImages=v,this.selectedSection=null,this.sections=[],this.sidebarCollapsed=!1,this.currentJobId=null,this.currentJobInfo=null,this.lpSettings=null,this.currentDesignPattern="standard",this.currentLayoutStyle="default",this.company=null,this.mainJob=null}enable(e,t,i=null,n=null,s=null){this.isActive=!0,this.currentCompanyDomain=t,this.editedData={},this.sections=e.sections||[],this.lpSettings=e,this.currentJobInfo=i,this.company=n,this.mainJob=s,this.currentDesignPattern=e.designPattern||"standard",this.currentLayoutStyle=e.layoutStyle||"default";const l=new URLSearchParams(window.location.search);this.currentJobId=l.get("j")||"",document.body.classList.add("lp-edit-mode"),this.renderToolbar(),this.renderSidebar(),this.setupEditableElements(),this.setupSectionSortable(),this.setupSectionSelection(),this.addSectionEditButtons()}addSectionEditButtons(){const e=document.querySelector(".lp-points");if(e){const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ ãƒã‚¤ãƒ³ãƒˆã‚’ç·¨é›†ãƒ»è¿½åŠ ",i.addEventListener("click",e=>{e.stopPropagation(),this.openPointsEditor()});(e.querySelector(".lp-section-inner")||e).appendChild(i)}const t=document.querySelector(".lp-faq");if(t){const e=t.querySelector(".lp-section-quick-edit-btn");e&&e.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ FAQã‚’ç·¨é›†ãƒ»è¿½åŠ ",i.addEventListener("click",e=>{e.stopPropagation(),this.openFAQEditor()});(t.querySelector(".lp-section-inner")||t).appendChild(i)}document.querySelectorAll(".lp-carousel").forEach(e=>{const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ ç”»åƒã‚’ç·¨é›†ãƒ»è¿½åŠ ",i.addEventListener("click",t=>{t.stopPropagation(),this.openCarouselEditor(e)});(e.querySelector(".lp-section-inner")||e).appendChild(i)}),document.querySelectorAll(".lp-video").forEach(e=>{const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ å‹•ç”»ã‚’ç·¨é›†",i.addEventListener("click",t=>{t.stopPropagation(),this.openVideoEditor(e)});(e.querySelector(".lp-section-inner")||e).appendChild(i)})}renderSidebar(){const e=document.createElement("div");e.className="lp-editor-panel",e.id="lp-editor-panel",e.innerHTML=`\n      <div class="lp-editor-header">\n        <h2 class="lp-editor-title">LPç·¨é›†</h2>\n        <div class="lp-editor-actions">\n          <button type="button" class="btn-preview-lp" id="btn-preview-lp" title="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">\n            <span>ğŸ‘</span>\n          </button>\n          <button type="button" class="btn-close-editor" id="btn-close-lp-editor" title="é–‰ã˜ã‚‹">\n            <span>âœ•</span>\n          </button>\n        </div>\n      </div>\n\n      <div class="lp-editor-body">\n        \x3c!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ --\x3e\n        <div class="lp-editor-tabs">\n          <button type="button" class="lp-editor-tab active" data-tab="design">ãƒ‡ã‚¶ã‚¤ãƒ³</button>\n          <button type="button" class="lp-editor-tab" data-tab="sections">ã‚»ã‚¯ã‚·ãƒ§ãƒ³</button>\n        </div>\n\n        \x3c!-- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¿ãƒ– --\x3e\n        <div class="lp-editor-tab-content active" data-tab-content="design">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</h3>\n            <div class="layout-style-grid" id="lp-layout-selector">\n              ${this.renderLayoutStyleOptions()}\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ</h3>\n            <div class="design-pattern-grid" id="lp-design-selector">\n              ${this.renderDesignPatternOptions()}\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ãƒ– --\x3e\n        <div class="lp-editor-tab-content" data-tab-content="sections">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§</h3>\n            <div class="lp-sidebar-sections" id="lp-sidebar-sections">\n              ${this.renderSidebarSectionList()}\n            </div>\n            <button type="button" class="lp-btn-add-section" id="lp-btn-add-section">\n              <span class="lp-btn-add-icon">+</span>\n              ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ \n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div class="lp-editor-footer">\n        <button type="button" class="btn-save-lp" id="lp-sidebar-save">\n          <span>ğŸ’¾</span> ä¿å­˜\n        </button>\n      </div>\n    `,document.body.appendChild(e),e.querySelectorAll(".lp-editor-tab").forEach(e=>{e.addEventListener("click",()=>this.switchTab(e.dataset.tab))}),e.querySelector("#btn-close-lp-editor").addEventListener("click",()=>{this.closeLPEditor()}),e.querySelector("#btn-preview-lp").addEventListener("click",()=>{this.previewChanges()}),e.querySelector("#lp-btn-add-section").addEventListener("click",()=>{this.openAddSectionPanel()}),e.querySelector("#lp-sidebar-save").addEventListener("click",()=>this.saveChanges()),this.setupLayoutStyleEvents(),this.setupDesignPatternEvents(),this.applyLayoutStyle(this.currentLayoutStyle),document.body.classList.add("lp-edit-mode");const t=document.getElementById("lp-content");t&&t.classList.add("lp-content-with-sidebar")}switchTab(e){document.querySelectorAll(".lp-editor-tab").forEach(t=>{t.classList.toggle("active",t.dataset.tab===e)}),document.querySelectorAll(".lp-editor-tab-content").forEach(t=>{t.classList.toggle("active",t.dataset.tabContent===e)})}closeLPEditor(){const e=new URL(window.location.href);e.searchParams.delete("edit"),window.location.href=e.toString()}renderLayoutStyleOptions(){return h.map(e=>{const t=this.currentLayoutStyle===e.id;return`\n        <div class="lp-layout-option ${t?"selected":""}"\n             data-layout="${e.id}"\n             title="${e.description}">\n          <div class="lp-layout-option-preview">\n            <span class="lp-layout-preview-text">${e.preview}</span>\n          </div>\n          <span class="lp-layout-option-name">${e.name}</span>\n          ${t?'<span class="lp-layout-option-check">âœ“</span>':""}\n        </div>\n      `}).join("")}setupLayoutStyleEvents(){const e=document.getElementById("lp-layout-selector");e&&e.querySelectorAll(".lp-layout-option").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.layout;this.changeLayoutStyle(t)})})}changeLayoutStyle(e){if(!h.find(t=>t.id===e))return;this.currentLayoutStyle=e,this.editedData.layoutStyle=e;const t=document.getElementById("lp-layout-selector");t&&(t.innerHTML=this.renderLayoutStyleOptions(),this.setupLayoutStyleEvents()),this.applyLayoutStyle(e),this.rerenderSections()}rerenderSections(){if(!this.company||!this.mainJob)return void console.log("[LPEditor] company/mainJob ãŒãªã„ãŸã‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ã‚¹ã‚­ãƒƒãƒ—");const e=this.getMergedSettings();this.rerenderHeroSection(e),this.updatePointsDisplay(),console.log("[LPEditor] ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã—ãŸ")}rerenderHeroSection(e){const t=document.querySelector(".lp-hero");if(!t)return;const i=s(this.company,this.mainJob,e,this.currentLayoutStyle),n=document.createElement("div");n.innerHTML=i;const l=n.querySelector(".lp-hero");l&&(t.replaceWith(l),this.setupEditableElements(),this.setupSectionSelection())}getMergedSettings(){const e={...this.lpSettings};return Object.keys(this.editedData).forEach(t=>{void 0!==this.editedData[t]&&(e[t]=this.editedData[t])}),e}applyLayoutStyle(e){const t=document.body,i=document.getElementById("lp-content");h.forEach(e=>{t.classList.remove(`lp-layout-${e.id}`),i&&i.classList.remove(`lp-layout-${e.id}`)}),t.classList.add(`lp-layout-${e}`),i&&i.classList.add(`lp-layout-${e}`)}renderDesignPatternOptions(){return u.map(e=>{const t=this.currentDesignPattern===e.id;return`\n        <div class="lp-design-option ${t?"selected":""}"\n             data-pattern="${e.id}"\n             title="${e.description}">\n          <div class="lp-design-option-colors">\n            <span class="lp-design-color" style="background: ${e.colors.primary}"></span>\n            <span class="lp-design-color" style="background: ${e.colors.secondary}"></span>\n            <span class="lp-design-color" style="background: ${e.colors.accent}"></span>\n          </div>\n          <span class="lp-design-option-name">${e.name}</span>\n          ${t?'<span class="lp-design-option-check">âœ“</span>':""}\n        </div>\n      `}).join("")}setupDesignPatternEvents(){const e=document.getElementById("lp-design-selector");e&&e.querySelectorAll(".lp-design-option").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.pattern;this.changeDesignPattern(t)})})}changeDesignPattern(e){if(!u.find(t=>t.id===e))return;this.currentDesignPattern=e,this.editedData.designPattern=e;const t=document.getElementById("lp-design-selector");t&&(t.innerHTML=this.renderDesignPatternOptions(),this.setupDesignPatternEvents()),this.applyDesignPattern(e)}applyDesignPattern(e){const t=document.body,i=document.getElementById("lp-content");u.forEach(e=>{t.classList.remove(`lp-pattern-${e.id}`),i&&i.classList.remove(`lp-pattern-${e.id}`)}),t.classList.add(`lp-pattern-${e}`),i&&i.classList.add(`lp-pattern-${e}`)}renderSidebarSectionList(){const e=document.getElementById("lp-content");if(!e)return'<p class="lp-sidebar-empty">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“</p>';const t=e.querySelectorAll("section");return 0===t.length?'<p class="lp-sidebar-empty">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“</p>':Array.from(t).map((e,t)=>{const i=e.dataset.sectionId||`section-${t}`,n=this.detectSectionType(e),s=a[n]||{name:"ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ“„"};return`\n        <div class="lp-sidebar-section-item ${this.selectedSection===e?"selected":""}"\n             data-section-id="${i}"\n             data-section-type="${n}">\n          <span class="lp-sidebar-section-handle">â‹®â‹®</span>\n          <span class="lp-sidebar-section-icon">${s.icon}</span>\n          <span class="lp-sidebar-section-name">${s.name}</span>\n          <div class="lp-sidebar-section-actions">\n            <button type="button" class="lp-sidebar-section-btn lp-btn-visibility" title="è¡¨ç¤º/éè¡¨ç¤º">\n              ğŸ‘ï¸\n            </button>\n          </div>\n        </div>\n      `}).join("")}updateSidebarList(){const e=document.getElementById("lp-sidebar-sections");e&&(e.innerHTML=this.renderSidebarSectionList(),this.setupSidebarSectionEvents())}setupSidebarSectionEvents(){const e=document.getElementById("lp-sidebar-sections");e&&e.querySelectorAll(".lp-sidebar-section-item").forEach(e=>{e.addEventListener("click",t=>{if(t.target.closest(".lp-sidebar-section-actions"))return;const i=e.dataset.sectionId;this.selectSectionById(i)})})}toggleSidebar(){const e=document.getElementById("lp-editor-panel"),t=document.getElementById("lp-content");e&&(this.sidebarCollapsed=!this.sidebarCollapsed,e.classList.toggle("collapsed",this.sidebarCollapsed)),t&&t.classList.toggle("lp-content-sidebar-collapsed",this.sidebarCollapsed)}openAddSectionPanel(){this.closeAddSectionPanel();const e=document.createElement("div");e.className="lp-add-section-panel",e.id="lp-add-section-panel",e.innerHTML=`\n      <div class="lp-add-section-header">\n        <span>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ </span>\n        <button type="button" class="lp-add-section-close">Ã—</button>\n      </div>\n      <div class="lp-add-section-grid">\n        ${Object.entries(a).map(([e,t])=>`\n          <div class="lp-add-section-card" data-type="${e}">\n            <span class="lp-add-section-icon">${t.icon}</span>\n            <span class="lp-add-section-name">${t.name}</span>\n          </div>\n        `).join("")}\n      </div>\n    `,document.body.appendChild(e),e.querySelector(".lp-add-section-close").addEventListener("click",()=>{this.closeAddSectionPanel()}),e.querySelectorAll(".lp-add-section-card").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.type;this.addNewSection(t),this.closeAddSectionPanel()})}),setTimeout(()=>{document.addEventListener("click",this.handleAddPanelOutsideClick)},100)}closeAddSectionPanel(){const e=document.getElementById("lp-add-section-panel");e&&e.remove(),document.removeEventListener("click",this.handleAddPanelOutsideClick)}addNewSection(e){const t=a[e];if(!t)return;const n={id:`${e}-${Date.now()}`,type:e,order:this.sections.length,visible:!0,data:JSON.parse(JSON.stringify(t.defaultData)),layout:JSON.parse(JSON.stringify(t.defaultLayout))};this.sections.push(n);const s=this.renderNewSection(n);if(s){const l=document.getElementById("lp-content");if(l){const a=l.querySelector(".lp-apply");a?a.insertAdjacentHTML("beforebegin",s):l.insertAdjacentHTML("beforeend",s),this.editedData.addedSections=this.editedData.addedSections||[],this.editedData.addedSections.push(n),this.setupSectionSortable(),this.setupSectionSelection(),this.updateSidebarList(),"carousel"===e&&i(()=>import("./CarouselSection-BwGz6OSJ.js"),__vite__mapDeps([0,1])).then(e=>{e.initCarousels&&e.initCarousels()}),this.showSuccessMessage(`ã€Œ${t.name}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã—ãŸ`)}}}renderNewSection(e){var t;switch(e.type){case"carousel":return this.renderCarouselSectionHtml(e);case"video":return this.renderVideoSectionHtml(e);case"gallery":return this.renderGallerySectionHtml(e);case"custom":return this.renderCustomSectionHtml(e);default:return alert(`ã€Œ${(null==(t=a[e.type])?void 0:t.name)||e.type}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ç®¡ç†ç”»é¢ã‹ã‚‰è¿½åŠ ã—ã¦ãã ã•ã„ã€‚`),null}}renderCarouselSectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.sectionTitle)||"";return`\n      <section class="lp-carousel lp-carousel-empty lp-sortable-section" data-section-id="${e.id}" data-section="carousel">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«</span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-carousel-placeholder">\n            <div class="lp-carousel-placeholder-icon">ğŸ </div>\n            <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰ç”»åƒã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}renderVideoSectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.sectionTitle)||"";return`\n      <section class="lp-video lp-video-empty lp-sortable-section" data-section-id="${e.id}" data-section="video">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">å‹•ç”»</span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-video-placeholder">\n            <div class="lp-video-placeholder-icon">ğŸ¬</div>\n            <p>å‹•ç”»URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰å‹•ç”»URLã‚’è¨­å®šã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}renderGallerySectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.sectionTitle)||"";return`\n      <section class="lp-gallery lp-gallery-empty lp-sortable-section" data-section-id="${e.id}" data-section="gallery">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼</span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-gallery-placeholder">\n            <div class="lp-gallery-placeholder-icon">ğŸ–¼ï¸</div>\n            <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰ç”»åƒã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}renderCustomSectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.title)||"";return`\n      <section class="lp-custom lp-custom-empty lp-sortable-section" data-section-id="${e.id}" data-section="custom">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">ã‚«ã‚¹ã‚¿ãƒ </span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-custom-placeholder">\n            <div class="lp-custom-placeholder-icon">ğŸ¨</div>\n            <p>ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰å†…å®¹ã‚’ç·¨é›†ã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}escapeHtml(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}setupSectionSelection(){const e=document.getElementById("lp-content");e&&(e.querySelectorAll("section").forEach((e,t)=>{e.dataset.sectionId=e.dataset.sectionId||`section-${t}`,e.addEventListener("click",t=>{t.target.closest(".lp-editable, .lp-editable-image, .lp-section-action-menu, .lp-inline-editor")||this.selectSection(e)})}),this.setupSidebarSectionEvents())}selectSection(e){if(document.querySelectorAll("section.lp-section-selected").forEach(e=>{e.classList.remove("lp-section-selected")}),document.querySelectorAll(".lp-sidebar-section-item.selected").forEach(e=>{e.classList.remove("selected")}),this.removeFloatingMenu(),e===this.selectedSection)return void(this.selectedSection=null);this.selectedSection=e,e.classList.add("lp-section-selected");const t=e.dataset.sectionId,i=document.querySelector(`.lp-sidebar-section-item[data-section-id="${t}"]`);i&&i.classList.add("selected"),this.showFloatingMenu(e),e.scrollIntoView({behavior:"smooth",block:"center"})}selectSectionById(e){const t=document.querySelector(`section[data-section-id="${e}"]`);t&&this.selectSection(t)}showFloatingMenu(e){var t,i,n,s,l;this.removeFloatingMenu();const o=this.detectSectionType(e),d=a[o]||{required:!1},r=document.createElement("div");r.className="lp-section-action-menu",r.id="lp-section-action-menu",r.innerHTML=`\n      <button type="button" class="lp-action-btn lp-action-edit" title="ç·¨é›†">\n        âœï¸\n      </button>\n      <button type="button" class="lp-action-btn lp-action-move-up" title="ä¸Šã«ç§»å‹•">\n        â¬†ï¸\n      </button>\n      <button type="button" class="lp-action-btn lp-action-move-down" title="ä¸‹ã«ç§»å‹•">\n        â¬‡ï¸\n      </button>\n      ${d.required?"":'\n        <button type="button" class="lp-action-btn lp-action-duplicate" title="è¤‡è£½">\n          ğŸ“‹\n        </button>\n        <button type="button" class="lp-action-btn lp-action-delete" title="å‰Šé™¤">\n          ğŸ—‘ï¸\n        </button>\n      '}\n    `,e.appendChild(r),null==(t=r.querySelector(".lp-action-edit"))||t.addEventListener("click",t=>{t.stopPropagation(),this.editSection(e)}),null==(i=r.querySelector(".lp-action-move-up"))||i.addEventListener("click",t=>{t.stopPropagation(),this.moveSectionUp(e)}),null==(n=r.querySelector(".lp-action-move-down"))||n.addEventListener("click",t=>{t.stopPropagation(),this.moveSectionDown(e)}),null==(s=r.querySelector(".lp-action-duplicate"))||s.addEventListener("click",t=>{t.stopPropagation(),this.duplicateSection(e)}),null==(l=r.querySelector(".lp-action-delete"))||l.addEventListener("click",t=>{t.stopPropagation(),this.deleteSection(e)})}removeFloatingMenu(){const e=document.getElementById("lp-section-action-menu");e&&e.remove()}editSection(e){const t=this.detectSectionType(e);"points"!==t?"faq"!==t?"carousel"!==t?"video"!==t?alert(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`):this.openVideoEditor(e):this.openCarouselEditor(e):this.openFAQEditor():this.openPointsEditor()}openPointsEditor(){var e,t;this.closePointsEditor();const i=[];for(let s=1;s<=6;s++){const n=this.editedData[`pointTitle${s}`]??(null==(e=this.lpSettings)?void 0:e[`pointTitle${s}`])??"",l=this.editedData[`pointDesc${s}`]??(null==(t=this.lpSettings)?void 0:t[`pointDesc${s}`])??"";i.push({idx:s,title:n,desc:l})}const n=document.createElement("div");n.className="lp-points-editor-overlay",n.id="lp-points-editor",n.innerHTML=`\n      <div class="lp-points-editor">\n        <div class="lp-points-editor-header">\n          <h3>ãƒã‚¤ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-points-editor-close">&times;</button>\n        </div>\n        <div class="lp-points-editor-body">\n          <p class="lp-points-editor-hint">æœ€å¤§6ã¤ã®ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã§ãã¾ã™ã€‚ç©ºã®ãƒã‚¤ãƒ³ãƒˆã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>\n          <div class="lp-points-editor-list" id="lp-points-editor-list">\n            ${i.map(e=>this.renderPointEditorItem(e)).join("")}\n          </div>\n        </div>\n        <div class="lp-points-editor-footer">\n          <button type="button" class="lp-points-editor-btn lp-points-editor-btn-secondary" id="lp-points-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-points-editor-btn lp-points-editor-btn-primary" id="lp-points-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(n),n.querySelector(".lp-points-editor-close").addEventListener("click",()=>this.closePointsEditor()),n.querySelector("#lp-points-editor-cancel").addEventListener("click",()=>this.closePointsEditor()),n.querySelector("#lp-points-editor-apply").addEventListener("click",()=>this.applyPointsChanges()),n.addEventListener("click",e=>{e.target===n&&this.closePointsEditor()}),n.querySelectorAll(".lp-point-editor-clear").forEach(e=>{e.addEventListener("click",t=>{const i=e.dataset.idx,s=n.querySelector(`.lp-point-editor-item[data-idx="${i}"]`);s&&(s.querySelector(".lp-point-editor-title").value="",s.querySelector(".lp-point-editor-desc").value="")})})}renderPointEditorItem(e){return`\n      <div class="lp-point-editor-item ${e.title||e.desc?"has-content":""}" data-idx="${e.idx}">\n        <div class="lp-point-editor-header">\n          <span class="lp-point-editor-number">ãƒã‚¤ãƒ³ãƒˆ ${e.idx}</span>\n          <button type="button" class="lp-point-editor-clear" data-idx="${e.idx}" title="ã‚¯ãƒªã‚¢">\n            <span>ã‚¯ãƒªã‚¢</span>\n          </button>\n        </div>\n        <div class="lp-point-editor-fields">\n          <div class="lp-point-editor-field">\n            <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n            <input type="text" class="lp-point-editor-title" value="${n(e.title)}" placeholder="ä¾‹: å…¥ç¤¾ç‰¹å…¸å……å®Ÿ">\n          </div>\n          <div class="lp-point-editor-field">\n            <label>èª¬æ˜</label>\n            <textarea class="lp-point-editor-desc" rows="2" placeholder="ä¾‹: ç‰¹å…¸ç·é¡50ä¸‡å††ï¼å…¥ç¤¾ç¥ã„é‡‘ã‚„ãã®ä»–ç‰¹å…¸ãŒå……å®Ÿã€‚">${n(e.desc)}</textarea>\n          </div>\n        </div>\n      </div>\n    `}closePointsEditor(){const e=document.getElementById("lp-points-editor");e&&e.remove()}openFAQEditor(){var e;this.closeFAQEditor();const t=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",i=this.parseFAQString(t);0===i.length&&i.push({question:"",answer:""});const n=document.createElement("div");n.className="lp-faq-editor-overlay",n.id="lp-faq-editor",n.innerHTML=`\n      <div class="lp-faq-editor">\n        <div class="lp-faq-editor-header">\n          <h3>FAQã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-faq-editor-close">&times;</button>\n        </div>\n        <div class="lp-faq-editor-body">\n          <p class="lp-faq-editor-hint">ã‚ˆãã‚ã‚‹è³ªå•ã¨å›ç­”ã‚’è¿½åŠ ãƒ»ç·¨é›†ã§ãã¾ã™ã€‚ç©ºã®é …ç›®ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>\n          <div class="lp-faq-editor-list" id="lp-faq-editor-list">\n            ${i.map((e,t)=>this.renderFAQEditorItem(e,t)).join("")}\n          </div>\n          <button type="button" class="lp-faq-editor-add-btn" id="lp-faq-editor-add">\n            + è³ªå•ã‚’è¿½åŠ \n          </button>\n        </div>\n        <div class="lp-faq-editor-footer">\n          <button type="button" class="lp-faq-editor-btn lp-faq-editor-btn-secondary" id="lp-faq-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-faq-editor-btn lp-faq-editor-btn-primary" id="lp-faq-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(n),n.querySelector(".lp-faq-editor-close").addEventListener("click",()=>this.closeFAQEditor()),n.querySelector("#lp-faq-editor-cancel").addEventListener("click",()=>this.closeFAQEditor()),n.querySelector("#lp-faq-editor-apply").addEventListener("click",()=>this.applyFAQChanges()),n.querySelector("#lp-faq-editor-add").addEventListener("click",()=>this.addFAQItem()),n.addEventListener("click",e=>{e.target===n&&this.closeFAQEditor()}),this.setupFAQDeleteButtons()}renderFAQEditorItem(e,t){return`\n      <div class="lp-faq-editor-item ${e.question||e.answer?"has-content":""}" data-idx="${t}">\n        <div class="lp-faq-editor-item-header">\n          <span class="lp-faq-editor-number">Q${t+1}</span>\n          <button type="button" class="lp-faq-editor-delete" data-idx="${t}" title="å‰Šé™¤">\n            ğŸ—‘ï¸\n          </button>\n        </div>\n        <div class="lp-faq-editor-fields">\n          <div class="lp-faq-editor-field">\n            <label>è³ªå•</label>\n            <input type="text" class="lp-faq-editor-question" value="${n(e.question)}" placeholder="ä¾‹: æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ">\n          </div>\n          <div class="lp-faq-editor-field">\n            <label>å›ç­”</label>\n            <textarea class="lp-faq-editor-answer" rows="3" placeholder="ä¾‹: ã¯ã„ã€æœªçµŒé¨“ã®æ–¹ã‚‚å¤§æ­“è¿ã§ã™ã€‚ç ”ä¿®åˆ¶åº¦ãŒå……å®Ÿã—ã¦ã„ã‚‹ã®ã§å®‰å¿ƒã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã¾ã™ã€‚">${n(e.answer)}</textarea>\n          </div>\n        </div>\n      </div>\n    `}setupFAQDeleteButtons(){const e=document.getElementById("lp-faq-editor");e&&e.querySelectorAll(".lp-faq-editor-delete").forEach(e=>{e.addEventListener("click",t=>{const i=parseInt(e.dataset.idx);this.deleteFAQItem(i)})})}addFAQItem(){const e=document.getElementById("lp-faq-editor-list");if(!e)return;const t=e.querySelectorAll(".lp-faq-editor-item").length,i=document.createElement("div");i.innerHTML=this.renderFAQEditorItem({question:"",answer:""},t);const n=i.firstElementChild;e.appendChild(n),this.setupFAQDeleteButtons();const s=n.querySelector(".lp-faq-editor-question");s&&s.focus()}deleteFAQItem(e){const t=document.getElementById("lp-faq-editor-list");if(!t)return;const i=t.querySelectorAll(".lp-faq-editor-item");if(i.length<=1){const e=i[0];return e.querySelector(".lp-faq-editor-question").value="",void(e.querySelector(".lp-faq-editor-answer").value="")}i[e].remove(),this.renumberFAQItems()}renumberFAQItems(){const e=document.getElementById("lp-faq-editor-list");e&&(e.querySelectorAll(".lp-faq-editor-item").forEach((e,t)=>{e.dataset.idx=t,e.querySelector(".lp-faq-editor-number").textContent=`Q${t+1}`,e.querySelector(".lp-faq-editor-delete").dataset.idx=t}),this.setupFAQDeleteButtons())}closeFAQEditor(){const e=document.getElementById("lp-faq-editor");e&&e.remove()}openCarouselEditor(e){var t;this.closeCarouselEditor();const i=(null==(t=null==e?void 0:e.dataset)?void 0:t.sectionId)||"";let n=this.getCarouselData(i);n.images||(n.images=[]);const s=document.createElement("div");s.className="lp-carousel-editor-overlay",s.id="lp-carousel-editor",s.dataset.sectionId=i,s.innerHTML=`\n      <div class="lp-carousel-editor">\n        <div class="lp-carousel-editor-header">\n          <h3>ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-carousel-editor-close">&times;</button>\n        </div>\n        <div class="lp-carousel-editor-body">\n          <div class="lp-carousel-editor-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä»»æ„ï¼‰</label>\n            <input type="text" class="lp-carousel-editor-title" value="${this.escapeHtml(n.sectionTitle||"")}" placeholder="ä¾‹: è·å ´ã®æ§˜å­">\n          </div>\n          <p class="lp-carousel-editor-hint">ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ä¸¦ã³æ›¿ãˆã§ãã¾ã™ã€‚</p>\n          <div class="lp-carousel-editor-list" id="lp-carousel-editor-list">\n            ${n.images.map((e,t)=>this.renderCarouselEditorItem(e,t)).join("")}\n          </div>\n          <button type="button" class="lp-carousel-editor-add-btn" id="lp-carousel-editor-add">\n            + ç”»åƒã‚’è¿½åŠ \n          </button>\n        </div>\n        <div class="lp-carousel-editor-footer">\n          <button type="button" class="lp-carousel-editor-btn lp-carousel-editor-btn-secondary" id="lp-carousel-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-carousel-editor-btn lp-carousel-editor-btn-primary" id="lp-carousel-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(s),s.querySelector(".lp-carousel-editor-close").addEventListener("click",()=>this.closeCarouselEditor()),s.querySelector("#lp-carousel-editor-cancel").addEventListener("click",()=>this.closeCarouselEditor()),s.querySelector("#lp-carousel-editor-apply").addEventListener("click",()=>this.applyCarouselChanges(e)),s.querySelector("#lp-carousel-editor-add").addEventListener("click",()=>this.addCarouselItem()),s.addEventListener("click",e=>{e.target===s&&this.closeCarouselEditor()}),this.setupCarouselItemEvents()}getCarouselData(e){var t;if(this.editedData.carouselData&&this.editedData.carouselData[e])return this.editedData.carouselData[e];const i=this.sections.find(t=>t.id===e);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",images:i.data.images||[]};if(null==(t=this.lpSettings)?void 0:t.lpContent)try{const t="string"==typeof this.lpSettings.lpContent?JSON.parse(this.lpSettings.lpContent):this.lpSettings.lpContent;if(t.sections){const i=t.sections.find(t=>t.id===e||"carousel"===t.type);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",images:i.data.images||[]}}}catch(n){console.error("ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",n)}return{sectionTitle:"",images:[]}}renderCarouselEditorItem(e,t){return`\n      <div class="lp-carousel-editor-item ${e.url||e.alt?"has-content":""}" data-idx="${t}" draggable="true">\n        <div class="lp-carousel-editor-item-header">\n          <span class="lp-carousel-editor-handle">â‹®â‹®</span>\n          <span class="lp-carousel-editor-number">ç”»åƒ ${t+1}</span>\n          <button type="button" class="lp-carousel-editor-delete" data-idx="${t}" title="å‰Šé™¤">\n            ğŸ—‘ï¸\n          </button>\n        </div>\n        <div class="lp-carousel-editor-fields">\n          <div class="lp-carousel-editor-preview">\n            ${e.url?`<img src="${this.escapeHtml(e.url)}" alt="${this.escapeHtml(e.alt||"")}">`:'<div class="lp-carousel-no-image">ç”»åƒãªã—</div>'}\n          </div>\n          <div class="lp-carousel-editor-inputs">\n            <div class="lp-carousel-editor-field">\n              <label>ç”»åƒURL</label>\n              <input type="url" class="lp-carousel-editor-url" value="${this.escapeHtml(e.url||"")}" placeholder="https://example.com/image.jpg">\n            </div>\n            <div class="lp-carousel-editor-field">\n              <label>ä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä»»æ„ï¼‰</label>\n              <input type="text" class="lp-carousel-editor-alt" value="${this.escapeHtml(e.alt||"")}" placeholder="ç”»åƒã®èª¬æ˜">\n            </div>\n            <div class="lp-carousel-editor-field">\n              <label>ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ï¼ˆä»»æ„ï¼‰</label>\n              <input type="text" class="lp-carousel-editor-caption" value="${this.escapeHtml(e.caption||"")}" placeholder="ç”»åƒã®ä¸‹ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆ">\n            </div>\n          </div>\n        </div>\n      </div>\n    `}setupCarouselItemEvents(){const e=document.getElementById("lp-carousel-editor");e&&(e.querySelectorAll(".lp-carousel-editor-delete").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.idx);this.deleteCarouselItem(t)})}),e.querySelectorAll(".lp-carousel-editor-url").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.closest(".lp-carousel-editor-item"),i=t.querySelector(".lp-carousel-editor-preview"),n=e.target.value.trim(),s=t.querySelector(".lp-carousel-editor-alt").value||"";i.innerHTML=n?`<img src="${this.escapeHtml(n)}" alt="${this.escapeHtml(s)}" onerror="this.parentElement.innerHTML='<div class=\\'lp-carousel-no-image\\'>èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</div>'">`:'<div class="lp-carousel-no-image">ç”»åƒãªã—</div>'})}),this.setupCarouselDragDrop())}setupCarouselDragDrop(){const e=document.getElementById("lp-carousel-editor-list");if(!e)return;let t=null;e.querySelectorAll(".lp-carousel-editor-item").forEach(i=>{i.addEventListener("dragstart",e=>{t=i,i.classList.add("lp-carousel-item-dragging"),e.dataTransfer.effectAllowed="move"}),i.addEventListener("dragend",()=>{i.classList.remove("lp-carousel-item-dragging"),t=null,this.renumberCarouselItems()}),i.addEventListener("dragover",n=>{if(n.preventDefault(),n.dataTransfer.dropEffect="move",t&&t!==i){const n=[...e.querySelectorAll(".lp-carousel-editor-item")];n.indexOf(t)<n.indexOf(i)?i.parentNode.insertBefore(t,i.nextSibling):i.parentNode.insertBefore(t,i)}})})}addCarouselItem(){const e=document.getElementById("lp-carousel-editor-list");if(!e)return;const t=e.querySelectorAll(".lp-carousel-editor-item").length,i=document.createElement("div");i.innerHTML=this.renderCarouselEditorItem({url:"",alt:"",caption:""},t);const n=i.firstElementChild;e.appendChild(n),this.setupCarouselItemEvents(),n.scrollIntoView({behavior:"smooth",block:"center"});const s=n.querySelector(".lp-carousel-editor-url");s&&s.focus()}deleteCarouselItem(e){const t=document.getElementById("lp-carousel-editor-list");if(!t)return;const i=t.querySelectorAll(".lp-carousel-editor-item");i.length<=0||(i[e].remove(),this.renumberCarouselItems())}renumberCarouselItems(){const e=document.getElementById("lp-carousel-editor-list");e&&(e.querySelectorAll(".lp-carousel-editor-item").forEach((e,t)=>{e.dataset.idx=t,e.querySelector(".lp-carousel-editor-number").textContent=`ç”»åƒ ${t+1}`,e.querySelector(".lp-carousel-editor-delete").dataset.idx=t}),this.setupCarouselItemEvents())}closeCarouselEditor(){const e=document.getElementById("lp-carousel-editor");e&&e.remove()}applyCarouselChanges(e){const t=document.getElementById("lp-carousel-editor");if(!t)return;const i=t.dataset.sectionId,n=t.querySelector(".lp-carousel-editor-title").value.trim(),s=t.querySelectorAll(".lp-carousel-editor-item"),l=[];s.forEach(e=>{const t=e.querySelector(".lp-carousel-editor-url").value.trim(),i=e.querySelector(".lp-carousel-editor-alt").value.trim(),n=e.querySelector(".lp-carousel-editor-caption").value.trim();t&&l.push({id:`img-${Date.now()}-${l.length}`,url:t,alt:i,caption:n})}),this.editedData.carouselData=this.editedData.carouselData||{},this.editedData.carouselData[i]={sectionTitle:n,images:l},console.log("[LPEditor] ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚’æ›´æ–°:",this.editedData.carouselData[i]),this.updateCarouselDisplay(e,n,l),this.closeCarouselEditor(),this.showSuccessMessage("ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updateCarouselDisplay(e,t,n){if(!e)return;const s=e.querySelector(".lp-section-inner");s&&(0===n.length?(e.classList.add("lp-carousel-empty"),s.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-carousel-placeholder">\n          <div class="lp-carousel-placeholder-icon">ğŸ </div>\n          <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n        </div>\n      `):(e.classList.remove("lp-carousel-empty"),s.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-carousel-container">\n          <div class="lp-carousel-track">\n            ${n.map((e,t)=>`\n              <div class="lp-carousel-slide ${0===t?"active":""}" data-index="${t}">\n                <img src="${this.escapeHtml(e.url)}" alt="${this.escapeHtml(e.alt||"")}">\n                ${e.caption?`<div class="lp-carousel-caption">${this.escapeHtml(e.caption)}</div>`:""}\n              </div>\n            `).join("")}\n          </div>\n          <button class="lp-carousel-btn lp-carousel-btn-prev" aria-label="å‰ã¸">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>\n          </button>\n          <button class="lp-carousel-btn lp-carousel-btn-next" aria-label="æ¬¡ã¸">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg>\n          </button>\n          <div class="lp-carousel-dots">\n            ${n.map((e,t)=>`\n              <button class="lp-carousel-dot ${0===t?"active":""}" data-index="${t}" aria-label="ã‚¹ãƒ©ã‚¤ãƒ‰ ${t+1}"></button>\n            `).join("")}\n          </div>\n          <div class="lp-carousel-counter">\n            <span class="lp-carousel-current">1</span> / <span class="lp-carousel-total">${n.length}</span>\n          </div>\n        </div>\n      `,i(()=>import("./CarouselSection-BwGz6OSJ.js"),__vite__mapDeps([0,1])).then(e=>{e.initCarousels&&e.initCarousels()})),this.addSectionEditButtons())}openVideoEditor(e){var t;this.closeVideoEditor();const i=(null==(t=null==e?void 0:e.dataset)?void 0:t.sectionId)||"";let n=this.getVideoData(i);const s=document.createElement("div");s.className="lp-video-editor-overlay",s.id="lp-video-editor",s.dataset.sectionId=i,s.innerHTML=`\n      <div class="lp-video-editor">\n        <div class="lp-video-editor-header">\n          <h3>å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-video-editor-close">&times;</button>\n        </div>\n        <div class="lp-video-editor-body">\n          <div class="lp-video-editor-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä»»æ„ï¼‰</label>\n            <input type="text" class="lp-video-editor-title" value="${this.escapeHtml(n.sectionTitle||"")}" placeholder="ä¾‹: ä¼šç¤¾ç´¹ä»‹å‹•ç”»">\n          </div>\n          <div class="lp-video-editor-field">\n            <label>å‹•ç”»URL</label>\n            <input type="url" class="lp-video-editor-url" value="${this.escapeHtml(n.videoUrl||"")}" placeholder="YouTubeã€Vimeoã€ã¾ãŸã¯MP4ã®URL">\n            <p class="lp-video-editor-hint">å¯¾å¿œ: YouTubeã€Vimeoã€TikTokã€MP4/WebMç›´æ¥ãƒªãƒ³ã‚¯</p>\n          </div>\n          <div class="lp-video-editor-field">\n            <label>èª¬æ˜æ–‡ï¼ˆä»»æ„ï¼‰</label>\n            <textarea class="lp-video-editor-description" rows="2" placeholder="å‹•ç”»ã®ä¸‹ã«è¡¨ç¤ºã•ã‚Œã‚‹èª¬æ˜æ–‡">${this.escapeHtml(n.description||"")}</textarea>\n          </div>\n          <div class="lp-video-editor-preview-container">\n            <label>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</label>\n            <div class="lp-video-editor-preview" id="lp-video-editor-preview">\n              ${this.generateVideoPreview(n.videoUrl)}\n            </div>\n          </div>\n        </div>\n        <div class="lp-video-editor-footer">\n          <button type="button" class="lp-video-editor-btn lp-video-editor-btn-secondary" id="lp-video-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-video-editor-btn lp-video-editor-btn-primary" id="lp-video-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(s),s.querySelector(".lp-video-editor-close").addEventListener("click",()=>this.closeVideoEditor()),s.querySelector("#lp-video-editor-cancel").addEventListener("click",()=>this.closeVideoEditor()),s.querySelector("#lp-video-editor-apply").addEventListener("click",()=>this.applyVideoChanges(e));const l=s.querySelector(".lp-video-editor-url");l.addEventListener("input",()=>{const e=document.getElementById("lp-video-editor-preview");e&&(e.innerHTML=this.generateVideoPreview(l.value.trim()))}),s.addEventListener("click",e=>{e.target===s&&this.closeVideoEditor()})}getVideoData(e){var t;if(this.editedData.videoData&&this.editedData.videoData[e])return this.editedData.videoData[e];const i=this.sections.find(t=>t.id===e);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",videoUrl:i.data.videoUrl||"",description:i.data.description||""};if(null==(t=this.lpSettings)?void 0:t.lpContent)try{const t="string"==typeof this.lpSettings.lpContent?JSON.parse(this.lpSettings.lpContent):this.lpSettings.lpContent;if(t.sections){const i=t.sections.find(t=>t.id===e||"video"===t.type);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",videoUrl:i.data.videoUrl||"",description:i.data.description||""}}}catch(n){console.error("å‹•ç”»ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",n)}return{sectionTitle:"",videoUrl:"",description:""}}generateVideoPreview(e){if(!e)return'<div class="lp-video-no-preview">URLã‚’å…¥åŠ›ã™ã‚‹ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>';if(e.includes("youtube.com")||e.includes("youtu.be")){const t=this.extractYouTubeId(e);if(t)return`<iframe src="https://www.youtube.com/embed/${t}" frameborder="0" allowfullscreen></iframe>`}if(e.includes("vimeo.com")){const t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);if(t)return`<iframe src="https://player.vimeo.com/video/${t[1]}" frameborder="0" allowfullscreen></iframe>`}return e.match(/\.(mp4|webm|ogg)$/i)?`<video src="${this.escapeHtml(e)}" controls></video>`:'<div class="lp-video-no-preview">å¯¾å¿œã—ã¦ã„ãªã„å½¢å¼ã§ã™</div>'}extractYouTubeId(e){let t=e.match(/[?&]v=([^&]+)/);return t?t[1]:(t=e.match(/youtu\.be\/([^?&]+)/),t?t[1]:(t=e.match(/youtube\.com\/embed\/([^?&]+)/),t?t[1]:(t=e.match(/youtube\.com\/shorts\/([^?&]+)/),t?t[1]:null)))}closeVideoEditor(){const e=document.getElementById("lp-video-editor");e&&e.remove()}applyVideoChanges(e){const t=document.getElementById("lp-video-editor");if(!t)return;const i=t.dataset.sectionId,n=t.querySelector(".lp-video-editor-title").value.trim(),s=t.querySelector(".lp-video-editor-url").value.trim(),l=t.querySelector(".lp-video-editor-description").value.trim();this.editedData.videoData=this.editedData.videoData||{},this.editedData.videoData[i]={sectionTitle:n,videoUrl:s,description:l},console.log("[LPEditor] å‹•ç”»ã‚’æ›´æ–°:",this.editedData.videoData[i]),this.updateVideoDisplay(e,n,s,l),this.closeVideoEditor(),this.showSuccessMessage("å‹•ç”»ã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updateVideoDisplay(e,t,i,n){if(!e)return;const s=e.querySelector(".lp-section-inner");if(s){if(i){e.classList.remove("lp-video-empty");const l=this.generateVideoEmbed(i);s.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-video-wrapper lp-video-aspect-16-9">\n          ${l}\n        </div>\n        ${n?`<p class="lp-video-description">${this.escapeHtml(n)}</p>`:""}\n      `}else e.classList.add("lp-video-empty"),s.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-video-placeholder">\n          <div class="lp-video-placeholder-icon">ğŸ¬</div>\n          <p>å‹•ç”»URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n        </div>\n      `;this.addSectionEditButtons()}}generateVideoEmbed(e){if(e.includes("youtube.com")||e.includes("youtu.be")){const t=this.extractYouTubeId(e);if(t)return`<iframe src="https://www.youtube.com/embed/${t}?rel=0&modestbranding=1" title="YouTubeå‹•ç”»" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>`}if(e.includes("vimeo.com")){const t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);if(t)return`<iframe src="https://player.vimeo.com/video/${t[1]}?title=0&byline=0&portrait=0" title="Vimeoå‹•ç”»" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe>`}if(e.match(/\.(mp4|webm|ogg)$/i)){const t=e.split(".").pop().toLowerCase(),i={mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg"};return`<video controls preload="metadata" playsinline><source src="${this.escapeHtml(e)}" type="${i[t]||"video/mp4"}"></video>`}return`<iframe src="${this.escapeHtml(e)}" title="åŸ‹ã‚è¾¼ã¿å‹•ç”»" frameborder="0" allowfullscreen loading="lazy"></iframe>`}applyFAQChanges(){const e=document.getElementById("lp-faq-editor");if(!e)return;const t=e.querySelectorAll(".lp-faq-editor-item"),i=[];t.forEach(e=>{const t=e.querySelector(".lp-faq-editor-question").value.trim(),n=e.querySelector(".lp-faq-editor-answer").value.trim();t&&n&&i.push({question:t,answer:n})});const n=i.map(e=>`Q:${e.question}|A:${e.answer}`).join("\n");this.editedData.faq=n,console.log("[LPEditor] FAQã‚’æ›´æ–°:",n),this.updateFAQDisplay(),this.closeFAQEditor(),this.showSuccessMessage("FAQã‚’æ›´æ–°ã—ã¾ã—ãŸ")}parseFAQString(e){if(!e)return[];const t=[],i=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const n of i){const e=n.match(/Q[:ï¼š](.+?)\|A[:ï¼š](.+)/i);e&&t.push({question:e[1].trim(),answer:e[2].trim()})}return t}updateFAQDisplay(){var e;const t=document.querySelector(".lp-faq");if(!t)return;const i=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",s=this.parseFAQString(i),l=t.querySelector(".lp-faq-chat-container")||t.querySelector(".lp-faq-list");l&&(0!==s.length?(l.innerHTML=s.map((e,t)=>`\n      <div class="lp-faq-chat-pair">\n        \x3c!-- è³ªå•ï¼ˆå·¦å´ãƒ»ã‚µãƒãƒ¼ãƒˆï¼‰ --\x3e\n        <div class="lp-faq-chat-row lp-faq-chat-question">\n          <div class="lp-faq-chat-avatar lp-faq-chat-avatar-support">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>\n          </div>\n          <div class="lp-faq-chat-bubble lp-faq-chat-bubble-support">\n            <span class="lp-faq-chat-text">${n(e.question)}</span>\n          </div>\n        </div>\n        \x3c!-- å›ç­”ï¼ˆå³å´ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ --\x3e\n        <div class="lp-faq-chat-row lp-faq-chat-answer">\n          <div class="lp-faq-chat-bubble lp-faq-chat-bubble-user">\n            <span class="lp-faq-chat-text">${n(e.answer)}</span>\n          </div>\n          <div class="lp-faq-chat-avatar lp-faq-chat-avatar-user">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\n          </div>\n        </div>\n      </div>\n    `).join(""),this.addSectionEditButtons()):l.innerHTML='<p style="text-align: center; color: #666;">FAQãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>')}applyPointsChanges(){const e=document.getElementById("lp-points-editor");if(!e)return;e.querySelectorAll(".lp-point-editor-item").forEach(e=>{const t=e.dataset.idx,i=e.querySelector(".lp-point-editor-title").value.trim(),n=e.querySelector(".lp-point-editor-desc").value.trim();this.editedData[`pointTitle${t}`]=i,this.editedData[`pointDesc${t}`]=n}),console.log("[LPEditor] ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°:",this.editedData),this.updatePointsDisplay(),this.closePointsEditor(),this.showSuccessMessage("ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updatePointsDisplay(){const e=document.querySelector(".lp-points");if(!e||!this.company||!this.mainJob){for(let e=1;e<=6;e++){const t=this.editedData[`pointTitle${e}`]??"",i=this.editedData[`pointDesc${e}`]??"",n=document.querySelector(`[data-field="pointTitle${e}"]`),s=document.querySelector(`[data-field="pointDesc${e}"]`);n&&(n.textContent=t||`ãƒã‚¤ãƒ³ãƒˆ${e}ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ `,n.classList.toggle("lp-placeholder",!t)),s&&(s.textContent=i||`ãƒã‚¤ãƒ³ãƒˆ${e}èª¬æ˜ã‚’è¿½åŠ `,s.classList.toggle("lp-placeholder",!i))}return}const t=this.getMergedSettings(),i=l(this.company,this.mainJob,t,this.currentLayoutStyle),n=document.createElement("div");n.innerHTML=i;const s=n.querySelector(".lp-points");s&&(e.replaceWith(s),this.setupEditableElements(),this.setupSectionSelection(),this.addSectionEditButtons())}moveSectionUp(e){const t=e.previousElementSibling;t&&"SECTION"===t.tagName&&(e.parentNode.insertBefore(e,t),this.saveSectionOrder(),this.updateSidebarList())}moveSectionDown(e){const t=e.nextElementSibling;t&&"SECTION"===t.tagName&&(e.parentNode.insertBefore(t,e),this.saveSectionOrder(),this.updateSidebarList())}duplicateSection(e){const t=this.detectSectionType(e);alert(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¤‡è£½ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`)}deleteSection(e){const t=this.detectSectionType(e);confirm(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\nå®Ÿéš›ã®å‰Šé™¤ã¯ç®¡ç†ç”»é¢ã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`)&&(e.style.display="none",this.removeFloatingMenu(),this.selectedSection=null,this.updateSidebarList())}renderToolbar(){const e=document.createElement("div");e.className="lp-edit-toolbar",e.innerHTML='\n      <div class="lp-edit-toolbar-inner">\n        <span class="lp-edit-toolbar-title">ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</span>\n        <div class="lp-edit-toolbar-actions">\n          <button type="button" class="lp-edit-btn-preview" id="btn-preview-changes">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>\n          <button type="button" class="lp-edit-btn-save" id="btn-save-changes">ä¿å­˜</button>\n          <button type="button" class="lp-edit-btn-cancel" id="btn-cancel-edit">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        </div>\n      </div>\n    ',document.body.insertBefore(e,document.body.firstChild),e.querySelector("#btn-save-changes").addEventListener("click",()=>this.saveChanges()),e.querySelector("#btn-cancel-edit").addEventListener("click",()=>this.cancelEdit()),e.querySelector("#btn-preview-changes").addEventListener("click",()=>this.previewChanges())}setupEditableElements(){document.querySelectorAll(".lp-editable").forEach(e=>{const t=e.dataset.field,i=e.dataset.label||t;e.addEventListener("mouseenter",()=>this.showEditLabel(e,i)),e.addEventListener("mouseleave",()=>this.hideEditLabel()),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.startTextEditing(e,t,i)})}),document.querySelectorAll(".lp-editable-image").forEach(e=>{const t=e.dataset.field,i=e.dataset.label||t;e.addEventListener("mouseenter",()=>this.showEditLabel(e,i)),e.addEventListener("mouseleave",()=>this.hideEditLabel()),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.startImageEditing(e,t,i)})})}setupSectionSortable(){const e=document.getElementById("lp-content");if(!e)return;const t=e.querySelectorAll("section");0!==t.length&&t.forEach(t=>{const i=this.detectSectionType(t);t.dataset.section=i,t.classList.add("lp-sortable-section");const n=document.createElement("div");n.className="lp-section-drag-handle",n.innerHTML=`\n        <span class="lp-section-label">${this.getSectionLabel(i)}</span>\n        <span class="lp-section-drag-icon">â‹®â‹®</span>\n      `,t.insertBefore(n,t.firstChild),t.setAttribute("draggable","true"),t.addEventListener("dragstart",e=>{this.draggedSection=t,t.classList.add("lp-section-dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(t,50,30)}),t.addEventListener("dragend",()=>{t.classList.remove("lp-section-dragging"),this.draggedSection=null,this.saveSectionOrder()}),t.addEventListener("dragover",i=>{if(i.preventDefault(),i.dataTransfer.dropEffect="move",this.draggedSection&&this.draggedSection!==t){const i=[...e.querySelectorAll("section")];i.indexOf(this.draggedSection)<i.indexOf(t)?t.parentNode.insertBefore(this.draggedSection,t.nextSibling):t.parentNode.insertBefore(this.draggedSection,t)}})})}detectSectionType(e){return e.classList.contains("lp-hero")?"hero":e.classList.contains("lp-points")?"points":e.classList.contains("lp-jobs")?"jobs":e.classList.contains("lp-details")?"details":e.classList.contains("lp-faq")?"faq":e.classList.contains("lp-apply")?"apply":e.classList.contains("lp-carousel")?"carousel":e.classList.contains("lp-video")?"video":e.classList.contains("lp-gallery")?"gallery":e.classList.contains("lp-testimonial")?"testimonial":e.classList.contains("lp-custom")?"custom":"unknown"}getSectionLabel(e){return{hero:"ãƒ’ãƒ¼ãƒ­ãƒ¼",points:"ãƒã‚¤ãƒ³ãƒˆ",jobs:"æ±‚äººä¸€è¦§",details:"å‹Ÿé›†è¦é …",faq:"FAQ",apply:"å¿œå‹Ÿ",carousel:"ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«",video:"å‹•ç”»",gallery:"ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",testimonial:"ç¤¾å“¡ã®å£°",custom:"ã‚«ã‚¹ã‚¿ãƒ "}[e]||"ã‚»ã‚¯ã‚·ãƒ§ãƒ³"}saveSectionOrder(){const e=document.getElementById("lp-content");if(!e)return;const t=e.querySelectorAll("section"),i=Array.from(t).map(e=>e.dataset.section);this.editedData.sectionOrder=i.join(",")}showEditLabel(e,t){this.hideEditLabel();const i=document.createElement("div");i.className="lp-edit-label",i.textContent=`${t}ã‚’ç·¨é›†`,i.id="lp-edit-label-tooltip";const n=e.getBoundingClientRect();i.style.position="fixed",i.style.top=n.top-30+"px",i.style.left=`${n.left}px`,document.body.appendChild(i)}hideEditLabel(){const e=document.getElementById("lp-edit-label-tooltip");e&&e.remove()}startTextEditing(e,t,i){this.closeInlineEditor();const s=this.editedData[t]||e.textContent.trim(),l=document.createElement("div");l.className="lp-inline-editor",l.id="lp-active-editor",l.innerHTML=`\n      <label class="lp-inline-editor-label">${n(i)}</label>\n      <textarea class="lp-inline-editor-textarea" rows="3">${n(s)}</textarea>\n      <div class="lp-inline-editor-actions">\n        <button type="button" class="lp-inline-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        <button type="button" class="lp-inline-editor-apply">é©ç”¨</button>\n      </div>\n    `;const a=e.getBoundingClientRect();l.style.position="fixed",l.style.top=`${Math.min(a.bottom+10,window.innerHeight-250)}px`,l.style.left=`${Math.max(10,Math.min(a.left,window.innerWidth-320))}px`,document.body.appendChild(l);const o=l.querySelector("textarea");o.focus(),o.select();const d=()=>this.closeInlineEditor();l.querySelector(".lp-inline-editor-cancel").addEventListener("click",d),l.querySelector(".lp-inline-editor-apply").addEventListener("click",()=>{const n=o.value.trim();this.editedData[t]=n,e.textContent=n||`${i}ã‚’è¿½åŠ `,e.classList.toggle("lp-placeholder",!n),d()}),setTimeout(()=>{document.addEventListener("click",this.handleOutsideClick)},100)}closeInlineEditor(){const e=document.getElementById("lp-active-editor");e&&e.remove(),document.removeEventListener("click",this.handleOutsideClick)}startImageEditing(e,t,i){this.closeInlineEditor();const s=this.editedData[t]||"",l=this.presetImages.map((e,t)=>`\n      <div class="lp-preset-image" data-url="${n(e.url)}" title="${n(e.label)}">\n        <img src="${n(e.url)}" alt="${n(e.label)}" loading="lazy">\n        <span class="lp-preset-label">${n(e.label)}</span>\n      </div>\n    `).join(""),a=document.createElement("div");a.className="lp-inline-editor lp-image-editor",a.id="lp-active-editor",a.innerHTML=`\n      <label class="lp-inline-editor-label">${n(i)}</label>\n\n      <div class="lp-image-tabs">\n        <button type="button" class="lp-image-tab active" data-tab="preset">ãƒ—ãƒªã‚»ãƒƒãƒˆ</button>\n        <button type="button" class="lp-image-tab" data-tab="url">URLå…¥åŠ›</button>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="preset">\n        <div class="lp-preset-grid">\n          ${l}\n        </div>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="url" style="display: none;">\n        <div class="lp-image-url-input">\n          <input type="url" class="lp-inline-editor-input" placeholder="ç”»åƒURLã‚’å…¥åŠ›" value="${n(s)}">\n        </div>\n      </div>\n\n      <div class="lp-image-preview">\n        ${s?`<img src="${n(s)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"}\n      </div>\n\n      <div class="lp-inline-editor-actions">\n        <button type="button" class="lp-inline-editor-clear">ã‚¯ãƒªã‚¢</button>\n        <button type="button" class="lp-inline-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        <button type="button" class="lp-inline-editor-apply">é©ç”¨</button>\n      </div>\n    `,a.style.position="fixed",a.style.top="50%",a.style.left="50%",a.style.transform="translate(-50%, -50%)",a.style.maxWidth="500px",a.style.width="90%",a.style.maxHeight="80vh",a.style.overflowY="auto",document.body.appendChild(a);const o=a.querySelector("input"),d=a.querySelector(".lp-image-preview"),r=a.querySelectorAll(".lp-image-tab"),c=a.querySelectorAll(".lp-image-tab-content");let p=s;r.forEach(e=>{e.addEventListener("click",()=>{r.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.tab;c.forEach(e=>{e.style.display=e.dataset.content===t?"block":"none"})})}),a.querySelectorAll(".lp-preset-image").forEach(e=>{e.addEventListener("click",()=>{a.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),p=e.dataset.url,o.value=p,d.innerHTML=`<img src="${n(p)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`})}),o.addEventListener("input",()=>{p=o.value.trim(),a.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),d.innerHTML=p?`<img src="${n(p)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"});const u=()=>this.closeInlineEditor();a.querySelector(".lp-inline-editor-clear").addEventListener("click",()=>{p="",o.value="",a.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),d.innerHTML="<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"}),a.querySelector(".lp-inline-editor-cancel").addEventListener("click",u),a.querySelector(".lp-inline-editor-apply").addEventListener("click",()=>{this.editedData[t]=p,console.log(`[LPEditor] ç”»åƒã‚’è¨­å®š: ${t} = ${p}`),e.style.backgroundImage=p?`url('${p}')`:"",u()}),setTimeout(()=>{document.addEventListener("click",this.handleOutsideClick)},100)}async saveChanges(){this.showSaveModal()}showSaveModal(){const e=document.getElementById("lp-save-modal");e&&e.remove();const t=Object.keys(this.editedData).length>0,i=t?`<div class="lp-save-modal-changes">\n          <p class="lp-save-modal-hint">ç·¨é›†ã—ãŸå†…å®¹ï¼š</p>\n          <ul class="lp-save-modal-list">\n            ${Object.entries(this.editedData).map(([e,t])=>`<li><strong>${e}:</strong> ${"string"==typeof t&&t.length>50?t.substring(0,50)+"...":t}</li>`).join("")}\n          </ul>\n        </div>`:'<p class="lp-save-modal-empty">å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“</p>',n=document.createElement("div");n.className="lp-save-modal-overlay",n.id="lp-save-modal",n.innerHTML=`\n      <div class="lp-save-modal">\n        <div class="lp-save-modal-header">\n          <h3>å¤‰æ›´ã‚’ä¿å­˜</h3>\n          <button type="button" class="lp-save-modal-close">&times;</button>\n        </div>\n        <div class="lp-save-modal-body">\n          ${i}\n          <p class="lp-save-modal-message" style="margin-top: 16px; font-size: 13px; color: #666;">\n            â€» ç›´æ¥ä¿å­˜ã™ã‚‹ã¨ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«å¤‰æ›´ãŒåæ˜ ã•ã‚Œã¾ã™\n          </p>\n        </div>\n        <div class="lp-save-modal-footer">\n          <button type="button" class="lp-save-modal-btn lp-save-modal-btn-secondary" id="lp-save-modal-close">é–‰ã˜ã‚‹</button>\n          <a href="/admin.html#lp-settings" class="lp-save-modal-btn lp-save-modal-btn-secondary" target="_blank" style="text-decoration: none;">\n            ç®¡ç†ç”»é¢ã‚’é–‹ã\n          </a>\n          <button type="button" class="lp-save-modal-btn lp-save-modal-btn-primary" id="lp-save-modal-save" ${t?"":"disabled"}>\n            ç›´æ¥ä¿å­˜\n          </button>\n        </div>\n      </div>\n    `,document.body.appendChild(n),n.querySelector(".lp-save-modal-close").addEventListener("click",()=>n.remove()),n.querySelector("#lp-save-modal-close").addEventListener("click",()=>n.remove()),n.querySelector("#lp-save-modal-save").addEventListener("click",async()=>{await this.saveToSpreadsheet(n)}),n.addEventListener("click",e=>{e.target===n&&n.remove()})}async saveToSpreadsheet(e){if(!this.currentJobId)return void alert("æ±‚äººIDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");const t=e.querySelector("#lp-save-modal-save");t&&(t.disabled=!0,t.textContent="ä¿å­˜ä¸­...");try{const t=this.buildSaveSettings();console.log("[LPEditor] ä¿å­˜ã™ã‚‹è¨­å®š:",t),console.log("[LPEditor] ç·¨é›†ãƒ‡ãƒ¼ã‚¿:",this.editedData);const n=btoa(unescape(encodeURIComponent(JSON.stringify({action:"saveLPSettings",settings:t})))),s=`https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec?action=post&data=${encodeURIComponent(n)}`,l=await fetch(s,{method:"GET",redirect:"follow"}),a=await l.text();let o;try{o=JSON.parse(a)}catch(i){throw new Error(`GASã‹ã‚‰ã®å¿œç­”ãŒä¸æ­£ã§ã™: ${a.substring(0,200)}`)}if(!o.success)throw new Error(o.error||"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼");e.remove(),this.showSuccessMessage("ä¿å­˜ã—ã¾ã—ãŸï¼å¤‰æ›´ãŒã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«åæ˜ ã•ã‚Œã¾ã—ãŸã€‚"),this.editedData={}}catch(n){console.error("ä¿å­˜ã‚¨ãƒ©ãƒ¼:",n),t&&(t.disabled=!1,t.textContent="ç›´æ¥ä¿å­˜");confirm(`ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nã‚¨ãƒ©ãƒ¼: ${n.message}\n\nãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ`)&&(this.saveToLocalStorage(),e.remove())}}buildSaveSettings(){var e,t;const i=this.currentJobId.split("_"),n=i.length>1?i[0]:this.currentCompanyDomain;i.length>1?i.slice(1).join("_"):this.currentJobId;const s=this.lpSettings||{},l={jobId:this.currentJobId,companyDomain:n,company:(null==(e=this.currentJobInfo)?void 0:e.company)||s.company||"",jobTitle:(null==(t=this.currentJobInfo)?void 0:t.title)||s.jobTitle||"",designPattern:this.currentDesignPattern||s.designPattern||"standard",layoutStyle:this.currentLayoutStyle||s.layoutStyle||"default",heroTitle:this.editedData.heroTitle??s.heroTitle??"",heroSubtitle:this.editedData.heroSubtitle??s.heroSubtitle??"",heroImage:this.editedData.heroImage??s.heroImage??"",ctaText:this.editedData.ctaText??s.ctaText??"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",faq:this.editedData.faq??s.faq??"",sectionOrder:this.editedData.sectionOrder??s.sectionOrder??"",sectionVisibility:s.sectionVisibility??""};for(let d=1;d<=6;d++)l[`pointTitle${d}`]=this.editedData[`pointTitle${d}`]??s[`pointTitle${d}`]??"",l[`pointDesc${d}`]=this.editedData[`pointDesc${d}`]??s[`pointDesc${d}`]??"";l.tiktokPixelId=s.tiktokPixelId??"",l.googleAdsId=s.googleAdsId??"",l.googleAdsLabel=s.googleAdsLabel??"",l.ogpTitle=s.ogpTitle??"",l.ogpDescription=s.ogpDescription??"",l.ogpImage=s.ogpImage??"";let a=null;if(s.lpContent)try{a="string"==typeof s.lpContent?JSON.parse(s.lpContent):{...s.lpContent}}catch(o){a={version:"2.0",sections:[],globalSettings:{}}}else a={version:"2.0",sections:[],globalSettings:{}};return this.editedData.carouselData&&Object.entries(this.editedData.carouselData).forEach(([e,t])=>{var i;const n=null==(i=a.sections)?void 0:i.find(t=>t.id===e);n?n.data={...n.data,sectionTitle:t.sectionTitle,images:t.images}:(a.sections=a.sections||[],a.sections.push({id:e,type:"carousel",order:a.sections.length,visible:!0,data:{sectionTitle:t.sectionTitle,images:t.images,autoPlay:!0,interval:5e3},layout:{style:"standard",showDots:!0,showArrows:!0}}))}),this.editedData.videoData&&Object.entries(this.editedData.videoData).forEach(([e,t])=>{var i;const n=null==(i=a.sections)?void 0:i.find(t=>t.id===e);n?n.data={...n.data,sectionTitle:t.sectionTitle,videoUrl:t.videoUrl,description:t.description}:(a.sections=a.sections||[],a.sections.push({id:e,type:"video",order:a.sections.length,visible:!0,data:{sectionTitle:t.sectionTitle,videoUrl:t.videoUrl,videoType:"auto",description:t.description},layout:{aspectRatio:"16:9",fullWidth:!1}}))}),this.editedData.addedSections&&this.editedData.addedSections.forEach(e=>{var t;(null==(t=a.sections)?void 0:t.some(t=>t.id===e.id))||(a.sections=a.sections||[],a.sections.push(e))}),l.lpContent=JSON.stringify(a),l}saveToLocalStorage(){const e=this.buildSaveSettings(),t=`lp_settings_${this.currentJobId}`;localStorage.setItem(t,JSON.stringify(e)),this.showSuccessMessage("ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã—ãŸã€‚æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«åæ˜ ã•ã‚Œã¾ã™ã€‚"),this.editedData={}}showSuccessMessage(e){const t=document.createElement("div");t.className="lp-save-toast",t.innerHTML=`\n      <span class="lp-save-toast-icon">âœ“</span>\n      <span class="lp-save-toast-message">${n(e)}</span>\n    `,document.body.appendChild(t),setTimeout(()=>{t.classList.add("lp-save-toast-hide"),setTimeout(()=>t.remove(),300)},3e3)}cancelEdit(){if(confirm("ç·¨é›†å†…å®¹ã‚’ç ´æ£„ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")){const e=new URL(window.location.href);e.searchParams.delete("edit"),window.location.href=e.toString()}}previewChanges(){const e={lpSettings:this.getMergedSettings(),timestamp:Date.now()},t=`lp_preview_${this.currentJobId}`;sessionStorage.setItem(t,JSON.stringify(e)),console.log("[LPEditor] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜:",e);const i=new URL(window.location.href);i.searchParams.delete("edit"),i.searchParams.set("preview","1"),window.open(i.toString(),"_blank")}}export{o as C,d as D,m as L,a as S,s as a,h as b,c,p as d,r as g,l as r};
