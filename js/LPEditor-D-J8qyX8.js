var e=Object.defineProperty,t=(t,i,n)=>((t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n)(t,"symbol"!=typeof i?i+"":i,n);import{escapeHtml as i,sanitizeHtml as n,showToast as s}from"./utils-BNVq905i.js";import{_ as l}from"./jobs-loader-ujpdJS3I.js";import{s as a}from"./modal-BOD5e818.js";import{d as o}from"./image-uploader-DhILrmx3.js";import{e as d}from"./firestore-service-qEqRY9xZ.js";function r(e,t,n,s="modern"){const l=n.heroTitle||t.title||`${e.company}ã§åƒã“ã†`,a=n.heroSubtitle||"",o=n.heroImage||"",d=[];switch(t.totalBonus&&d.push({label:"ç‰¹å…¸ç·é¡",value:t.totalBonus,icon:"bonus"}),t.monthlySalary&&d.push({label:"æœˆåä¾‹",value:t.monthlySalary,icon:"salary"}),s){case"yellow":return function(e,t,n,s,l){return`\n    <section class="lp-hero lp-hero--yellow">\n      <div class="lp-hero-bg lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" style="${s?`background-image: url('${i(s)}')`:""}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        ${n?`<p class="lp-hero-pretitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${i(n)}</p>`:'<p class="lp-hero-pretitle">æœªçµŒé¨“ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã‚‹ï¼</p>'}\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${i(t)}</h1>\n        <p class="lp-hero-company">${i(e.company)}</p>\n\n        ${l.length>0?`\n        <div class="lp-hero-highlights">\n          ${l.map(e=>`\n            <div class="lp-highlight-item ${e.icon}">\n              <span class="lp-highlight-label">${i(e.label)}</span>\n              <span class="lp-highlight-value">${i(e.value)}</span>\n            </div>\n          `).join("")}\n        </div>\n        `:""}\n      </div>\n    </section>\n  `}(e,l,a,o,d);case"impact":return function(e,t,n,s){return`\n    <section class="lp-hero lp-hero--impact" style="${s?`background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('${i(s)}')`:""}">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${i(t)}</h1>\n        ${n?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${i(n)}</p>`:'<p class="lp-hero-subtitle">é™ç•Œã‚’è¶…ãˆã‚ã€‚å¸¸è­˜ã‚’å¤‰ãˆã‚ã€‚</p>'}\n      </div>\n    </section>\n  `}(0,l,a,o);case"trust":return function(e,t,n){return`\n    <section class="lp-hero lp-hero--trust">\n      <div class="lp-hero-content">\n        <p class="lp-hero-pretitle">Expertise & Growth</p>\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${i(t)}</h1>\n        ${n?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${i(n)}</p>`:""}\n      </div>\n    </section>\n  `}(0,l,a);case"athome":return function(e,t,n,s){return`\n    <section class="lp-hero lp-hero--athome">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${i(t)}</h1>\n        ${n?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${i(n)}</p>`:'<p class="lp-hero-subtitle">ã‚¹ã‚­ãƒ«ã‚ˆã‚Šã‚‚ã€ã‚ãªãŸã®ç¬‘é¡”ã‚’é‡è¦è¦–ã—ã¾ã™ï¼</p>'}\n        ${s?`<div class="lp-hero-image-container"><img src="${i(s)}" alt="" class="lp-hero-image lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ"></div>`:""}\n      </div>\n    </section>\n  `}(0,l,a,o);case"local":return function(e,t,n,s){return`\n    <section class="lp-hero lp-hero--local" style="${s?`background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('${i(s)}')`:""}">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${i(t)}</h1>\n        ${n?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${i(n)}</p>`:""}\n      </div>\n    </section>\n  `}(0,l,a,o);default:return function(e,t,n,s,l){return`\n    <section class="lp-hero">\n      <div class="lp-hero-bg lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" style="${s?`background-image: url('${i(s)}')`:""}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        <p class="lp-hero-company">${i(e.company)}</p>\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${i(t)}</h1>\n        ${n?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${i(n)}</p>`:""}\n\n        ${l.length>0?`\n        <div class="lp-hero-highlights">\n          ${l.map(e=>`\n            <div class="lp-highlight-item ${e.icon}">\n              <span class="lp-highlight-label">${i(e.label)}</span>\n              <span class="lp-highlight-value">${i(e.value)}</span>\n            </div>\n          `).join("")}\n        </div>\n        `:""}\n      </div>\n    </section>\n  `}(e,l,a,o,d)}}const c={direction:"vertical",columns:3,gap:24,padding:32,cardBorderRadius:16,cardBackgroundColor:"#ffffff",cardBorderWidth:1,cardBorderColor:"#e5e7eb",cardShadow:"md",sectionTitleSize:"lg",titleColor:"#1f2937",titleSize:"md",descSize:"sm",titleAlign:"left",accentColor:"#6366f1"},p={none:"none",sm:"0 1px 2px rgba(0,0,0,0.05)",md:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)",lg:"0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05)"},u={sm:"1.25rem",md:"1.5rem",lg:"1.875rem",xl:"2.25rem"},v={sm:"0.875rem",md:"1rem",lg:"1.25rem",xl:"1.5rem"},h={xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem"};function m(e,t,n,s="modern",l=null){const a=[];if(n.pointTitle1&&a.push({title:n.pointTitle1,desc:n.pointDesc1||"",idx:1}),n.pointTitle2&&a.push({title:n.pointTitle2,desc:n.pointDesc2||"",idx:2}),n.pointTitle3&&a.push({title:n.pointTitle3,desc:n.pointDesc3||"",idx:3}),0===a.length&&(t.totalBonus&&a.push({title:"å…¥ç¤¾ç‰¹å…¸",desc:`ç‰¹å…¸ç·é¡${t.totalBonus}ï¼å…¥ç¤¾ç¥ã„é‡‘ã‚„ãã®ä»–ç‰¹å…¸ãŒå……å®Ÿã€‚`,idx:1}),t.monthlySalary&&a.push({title:"é«˜åå…¥",desc:`æœˆåä¾‹${t.monthlySalary}å¯èƒ½ï¼å®‰å®šã—ãŸåå…¥ã‚’å®Ÿç¾ã€‚`,idx:2}),t.benefits&&a.push({title:"å……å®Ÿã®å¾…é‡",desc:"ç¤¾ä¼šä¿é™ºå®Œå‚™ã€å¯®å®Œå‚™ãªã©ç¦åˆ©åšç”ŸãŒå……å®Ÿã€‚",idx:3})),0===a.length)return"";if(l&&Object.keys(l).length>0)return function(e,t,n){const s={...c,...t},l=`\n    padding: ${s.padding}px;\n  `.trim(),a="horizontal"===s.direction,o=a?`\n      display: flex;\n      flex-direction: row;\n      flex-wrap: nowrap;\n      gap: ${s.gap}px;\n      overflow-x: auto;\n    `:`\n      display: grid;\n      grid-template-columns: repeat(${s.columns}, 1fr);\n      gap: ${s.gap}px;\n    `,d=p[s.cardShadow]||p.md,r=`\n    background-color: ${s.cardBackgroundColor};\n    border-radius: ${s.cardBorderRadius}px;\n    border: ${s.cardBorderWidth}px solid ${s.cardBorderColor};\n    box-shadow: ${d};\n    padding: 24px;\n    ${a?"flex: 0 0 280px; min-width: 280px;":""}\n  `.trim(),m=v[s.titleSize]||v.md,b=`\n    color: ${s.titleColor};\n    font-size: ${m};\n    font-weight: 700;\n    text-align: ${s.titleAlign};\n    margin-bottom: 8px;\n    white-space: nowrap;\n  `.trim(),y=`\n    font-size: ${h[s.descSize]||h.sm};\n    line-height: 1.6;\n  `.trim(),g=`\n    background-color: ${s.accentColor};\n    color: #ffffff;\n  `.trim(),f=u[s.sectionTitleSize]||u.lg,S=`\n    text-align: ${s.titleAlign};\n    font-size: ${f};\n  `.trim();return`\n    <section class="lp-points lp-points--custom" data-section-type="points">\n      <div class="lp-section-inner" style="${i(l)}">\n        <h2 class="lp-section-title" style="${i(S)}">${i(n)}</h2>\n        <div class="lp-points-grid lp-points-grid--custom" style="${i(o)}">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card lp-point-card--custom" style="${i(r)}">\n              <div class="lp-point-number" style="${i(g)}">${t+1}</div>\n              <h3 class="lp-point-title lp-editable" style="${i(b)}" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${i(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" style="${i(y)}" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a,l,n.sectionTitle||"ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ");switch(s){case"yellow":return function(e){return`\n    <section class="lp-points lp-points--yellow" data-section-type="points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">åƒãé­…åŠ›ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">\n                <span class="lp-point-number">${String(t+1).padStart(2,"0")}.</span>\n                ${i(e.title)}\n              </h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a);case"impact":return function(e){return`\n    <section class="lp-points lp-points--impact" data-section-type="points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">WHY JOIN US?</h2>\n        <div class="lp-points-list">\n          ${e.map(e=>`\n            <div class="lp-point-box">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${i(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a);case"trust":return function(e){return`\n    <section class="lp-points lp-points--trust" data-section-type="points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">åŠ ã‚ã‚‹ä¾¡å€¤</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-item">\n              <span class="lp-point-number">${String(t+1).padStart(2,"0")}</span>\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${i(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a);case"athome":return function(e){return`\n    <section class="lp-points lp-points--athome" data-section-type="points">\n      <div class="lp-section-inner">\n        <div class="lp-points-grid">\n          ${e.map(e=>`\n            <div class="lp-point-card">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${i(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a);case"local":return function(e){return`\n    <section class="lp-points lp-points--local" data-section-type="points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">\n          <span class="lp-section-title-label">OUR VALUES</span>\n          ç§ãŸã¡ãŒå¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨\n        </h2>\n        <div class="lp-points-grid">\n          ${e.map(e=>`\n            <div class="lp-point-box">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${i(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a);default:return function(e){return`\n    <section class="lp-points" data-section-type="points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card">\n              <div class="lp-point-number">${t+1}</div>\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${i(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${i(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(a)}}function b(e,t){return 0===t.length?"":`\n    <section class="lp-jobs">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">å‹Ÿé›†ä¸­ã®æ±‚äºº</h2>\n        <div class="lp-jobs-list">\n          ${t.map(t=>function(e,t){const n=e.displayedFeatures||"",s=n?n.split(",").map(e=>e.trim()).filter(e=>e):[],l=e.features||"",a=l?Array.isArray(l)?l:l.split(",").map(e=>e.trim()):[],o=s.length>0?s:a,d=function(e){if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&t>=new Date((new Date).getTime()-6048e5)}(e.publishStartDate);return`\n    <div class="lp-job-card${d?" is-new":""}">\n      ${d?'<span class="lp-job-new-tag">âœ¨ NEW</span>':""}\n      <div class="lp-job-card-header">\n        <h3 class="lp-job-title">${i(e.title)}</h3>\n        ${e.employmentType?`<span class="lp-job-type">${i(e.employmentType)}</span>`:""}\n      </div>\n      <div class="lp-job-card-body">\n        <ul class="lp-job-info">\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>\n            </span>\n            ${i(e.location)}\n          </li>\n          ${e.access?`\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2c-4 0-8 .5-8 4v9.5C4 17.43 5.57 19 7.5 19L6 20.5v.5h2.23l2-2H14l2 2h2v-.5L16.5 19c1.93 0 3.5-1.57 3.5-3.5V6c0-3.5-3.58-4-8-4zM7.5 17c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm3.5-6H6V6h5v5zm2 0V6h5v5h-5zm3.5 6c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>\n            </span>\n            ${i(e.access)}\n          </li>\n          `:""}\n          ${e.dailySalaryExample?`\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>\n            </span>\n            æ—¥åä¾‹ ${i(e.dailySalaryExample)}\n          </li>\n          `:""}\n          ${e.monthlySalaryExample||e.monthlySalary?`\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>\n            </span>\n            æœˆåä¾‹ ${i(e.monthlySalaryExample||e.monthlySalary)}\n          </li>\n          `:""}\n          ${e.yearlySalaryExample?`\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>\n            </span>\n            å¹´åä¾‹ ${i(e.yearlySalaryExample)}\n          </li>\n          `:""}\n          ${e.totalBonus?`\n          <li class="highlight">\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"/></svg>\n            </span>\n            ç‰¹å…¸ç·é¡ ${i(e.totalBonus)}\n          </li>\n          `:""}\n        </ul>\n        ${o.length>0?`\n        <div class="lp-job-tags">\n          ${o.slice(0,3).map(e=>`<span class="lp-job-tag">${i("string"==typeof e?e.trim():e)}</span>`).join("")}\n        </div>\n        `:""}\n      </div>\n      <div class="lp-job-card-footer">\n        <a href="job-detail.html?company=${i(e.companyDomain||t.companyDomain)}&job=${i(e.id||"")}" class="lp-btn-detail">è©³ç´°ã‚’è¦‹ã‚‹</a>\n      </div>\n    </div>\n  `}(t,e)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function y(e,t){const s=[];return e.description&&s.push({label:"ä¼šç¤¾æ¦‚è¦",value:e.description,isHtml:!0}),e.jobDescription&&s.push({label:"ãŠä»•äº‹å†…å®¹",value:e.jobDescription,isHtml:!0}),e.workingHours&&s.push({label:"å‹¤å‹™æ™‚é–“",value:e.workingHours,isHtml:!0}),e.workLocation&&s.push({label:"å‹¤å‹™åœ°",value:e.workLocation,isHtml:!0}),t.benefits&&t.benefits!==e.benefits?s.push({label:"å¾…é‡ãƒ»ç¦åˆ©åšç”Ÿ",value:t.benefits,isHtml:!0}):e.benefits&&s.push({label:"å¾…é‡ãƒ»ç¦åˆ©åšç”Ÿ",value:e.benefits,isHtml:!0}),t.requirements&&s.push({label:"å¿œå‹Ÿè³‡æ ¼",value:t.requirements,isHtml:!0}),0===s.length?"":`\n    <section class="lp-details">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">å‹Ÿé›†è¦é …</h2>\n        <div class="lp-details-table">\n          ${s.map(e=>`\n            <div class="lp-detail-row">\n              <dt class="lp-detail-label">${i(e.label)}</dt>\n              <dd class="lp-detail-value">${e.isHtml?n(e.value):i(e.value)}</dd>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}function g(e){if(!e)return"";const t=function(e){const t=[];if("string"==typeof e){const i=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const e of i){const i=e.match(/Q[:ï¼š](.+?)\|A[:ï¼š](.+)/i);i&&t.push({question:i[1].trim(),answer:i[2].trim()})}}else Array.isArray(e)&&e.forEach(e=>{e.question&&e.answer&&t.push(e)});return t}(e);return 0===t.length?"":`\n    <section class="lp-faq lp-faq-chat">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">ã‚ˆãã‚ã‚‹è³ªå•</h2>\n        <div class="lp-faq-chat-container">\n          ${t.map((e,t)=>`\n            <div class="lp-faq-chat-pair">\n              \x3c!-- è³ªå•ï¼ˆå·¦å´ãƒ»ã‚µãƒãƒ¼ãƒˆï¼‰ --\x3e\n              <div class="lp-faq-chat-row lp-faq-chat-question">\n                <div class="lp-faq-chat-avatar lp-faq-chat-avatar-support">\n                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>\n                </div>\n                <div class="lp-faq-chat-bubble lp-faq-chat-bubble-support">\n                  <span class="lp-faq-chat-text">${i(e.question)}</span>\n                </div>\n              </div>\n              \x3c!-- å›ç­”ï¼ˆå³å´ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ --\x3e\n              <div class="lp-faq-chat-row lp-faq-chat-answer">\n                <div class="lp-faq-chat-bubble lp-faq-chat-bubble-user">\n                  <span class="lp-faq-chat-text">${i(e.answer)}</span>\n                </div>\n                <div class="lp-faq-chat-avatar lp-faq-chat-avatar-user">\n                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\n                </div>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}function f(e,t){const n=t.ctaText||"ã“ã®æ±‚äººã«å¿œå‹Ÿã™ã‚‹",s=e.phoneNumber||"0120-000-000";return`\n    <section class="lp-apply" id="lp-apply">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">å¿œå‹Ÿã™ã‚‹</h2>\n        <div class="lp-apply-content">\n          <p class="lp-apply-lead">ãŠæ°—è»½ã«ã”å¿œå‹Ÿãã ã•ã„</p>\n\n          <div class="lp-apply-methods">\n            \x3c!-- WEBå¿œå‹Ÿ --\x3e\n            <div class="lp-apply-method lp-apply-web">\n              <div class="lp-apply-method-header">\n                <span class="lp-apply-method-badge">24æ™‚é–“å—ä»˜</span>\n              </div>\n              <a href="#" class="lp-btn-apply-main lp-editable" data-field="ctaText" data-label="CTAãƒ†ã‚­ã‚¹ãƒˆ">${i(n)}</a>\n              <p class="lp-apply-method-note">ã‚«ãƒ³ã‚¿ãƒ³1åˆ†ã§å®Œäº†</p>\n            </div>\n\n            \x3c!-- é›»è©±å¿œå‹Ÿ --\x3e\n            <div class="lp-apply-method lp-apply-tel">\n              <div class="lp-apply-method-header">\n                <span class="lp-apply-method-badge">å¹³æ—¥9:00ã€œ18:00</span>\n              </div>\n              <a href="tel:${i(s.replace(/-/g,""))}" class="lp-btn-tel-main">\n                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>\n                <span>${i(s)}</span>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  `}function S(e,t){const{data:i,layout:n}=e;return({"text-only":$,"image-only":x,"text-left-image-right":E,"text-right-image-left":L,"centered-with-button":q,"full-width-banner":w}[(null==n?void 0:n.variant)||"text-only"]||$)(e,t)}function $(e,t){const{data:n}=e;return`\n    <section class="lp-custom lp-custom-text-only" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        ${n.title?`<h2 class="lp-section-title">${i(n.title)}</h2>`:""}\n        ${n.content?`<div class="lp-custom-content">${T(n.content)}</div>`:""}\n        ${C(n.button)}\n      </div>\n    </section>\n  `}function x(e,t){const{data:n}=e;return n.image?`\n    <section class="lp-custom lp-custom-image-only" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        ${n.title?`<h2 class="lp-section-title">${i(n.title)}</h2>`:""}\n        <div class="lp-custom-image-container">\n          <img src="${i(n.image)}" alt="${i(n.title||"")}" loading="lazy">\n        </div>\n        ${C(n.button)}\n      </div>\n    </section>\n  `:""}function E(e,t){const{data:n}=e;return`\n    <section class="lp-custom lp-custom-split lp-custom-text-left" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        <div class="lp-split-layout">\n          <div class="lp-split-text">\n            ${n.title?`<h2 class="lp-custom-title">${i(n.title)}</h2>`:""}\n            ${n.content?`<div class="lp-custom-content">${T(n.content)}</div>`:""}\n            ${C(n.button)}\n          </div>\n          <div class="lp-split-image">\n            ${n.image?`<img src="${i(n.image)}" alt="" loading="lazy">`:'<div class="lp-image-placeholder"></div>'}\n          </div>\n        </div>\n      </div>\n    </section>\n  `}function L(e,t){const{data:n}=e;return`\n    <section class="lp-custom lp-custom-split lp-custom-text-right" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        <div class="lp-split-layout">\n          <div class="lp-split-image">\n            ${n.image?`<img src="${i(n.image)}" alt="" loading="lazy">`:'<div class="lp-image-placeholder"></div>'}\n          </div>\n          <div class="lp-split-text">\n            ${n.title?`<h2 class="lp-custom-title">${i(n.title)}</h2>`:""}\n            ${n.content?`<div class="lp-custom-content">${T(n.content)}</div>`:""}\n            ${C(n.button)}\n          </div>\n        </div>\n      </div>\n    </section>\n  `}function q(e,t){const{data:n}=e;return`\n    <section class="lp-custom lp-custom-centered" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        ${n.title?`<h2 class="lp-section-title">${i(n.title)}</h2>`:""}\n        ${n.content?`<div class="lp-custom-content">${T(n.content)}</div>`:""}\n        ${n.image?`\n          <div class="lp-custom-image-centered">\n            <img src="${i(n.image)}" alt="" loading="lazy">\n          </div>\n        `:""}\n        ${C(n.button,"centered")}\n      </div>\n    </section>\n  `}function w(e,t){const{data:n}=e,s=n.image?`background-image: url('${i(n.image)}')`:"";return`\n    <section class="lp-custom lp-custom-banner" data-section-id="${e.id}" style="${s}">\n      <div class="lp-banner-overlay"></div>\n      <div class="lp-section-inner">\n        ${n.title?`<h2 class="lp-banner-title">${i(n.title)}</h2>`:""}\n        ${n.content?`<div class="lp-banner-content">${T(n.content)}</div>`:""}\n        ${C(n.button,"banner")}\n      </div>\n    </section>\n  `}function C(e,t=""){if(!e||!e.text)return"";const n=e.style||"primary",s=e.url||"#";return`\n    <div class="lp-custom-button-wrapper ${t?`lp-btn-${t}`:""}">\n      <a href="${i(s)}" class="lp-btn lp-btn-${n}" ${e.newTab?'target="_blank" rel="noopener"':""}>\n        ${i(e.text)}\n      </a>\n    </div>\n  `}function T(e){if(!e)return"";let t=i(e).replace(/\n/g,"<br>");return t=t.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),t=t.replace(/\*(.+?)\*/g,"<em>$1</em>"),t}function D(e,t){const{data:i,layout:n}=e,s=(null==i?void 0:i.images)||[],l=(null==i?void 0:i.sectionTitle)||"",a=(null==n?void 0:n.columns)||3,o=(null==n?void 0:n.style)||"grid";if(0===s.length)return"";return({grid:k,masonry:I,slider:A}[o]||k)(e.id,l,s,a)}function k(e,t,n,s){return`\n    <section class="lp-gallery lp-gallery-grid" data-section-id="${e}">\n      <div class="lp-section-inner">\n        ${t?`<h2 class="lp-section-title">${i(t)}</h2>`:""}\n        <div class="lp-gallery-items cols-${s}">\n          ${n.map((e,t)=>function(e,t){const n="string"==typeof e?e:e.url,s="object"==typeof e&&(e.alt||e.caption)||"",l="object"==typeof e?e.caption:"";return`\n    <div class="lp-gallery-item" data-index="${t}">\n      <img src="${i(n)}" alt="${i(s)}" loading="lazy">\n      ${l?`<div class="lp-gallery-caption">${i(l)}</div>`:""}\n    </div>\n  `}(e,t)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function I(e,t,n,s){return`\n    <section class="lp-gallery lp-gallery-masonry" data-section-id="${e}">\n      <div class="lp-section-inner">\n        ${t?`<h2 class="lp-section-title">${i(t)}</h2>`:""}\n        <div class="lp-gallery-masonry-grid cols-${s}">\n          ${n.map((e,t)=>function(e,t){const n="string"==typeof e?e:e.url,s="object"==typeof e&&(e.alt||e.caption)||"",l="object"==typeof e?e.caption:"";return`\n    <div class="lp-gallery-masonry-item" data-index="${t}">\n      <img src="${i(n)}" alt="${i(s)}" loading="lazy">\n      ${l?`<div class="lp-gallery-caption">${i(l)}</div>`:""}\n    </div>\n  `}(e,t)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function A(e,t,n,s){return`\n    <section class="lp-gallery lp-gallery-slider" data-section-id="${e}">\n      <div class="lp-section-inner">\n        ${t?`<h2 class="lp-section-title">${i(t)}</h2>`:""}\n        <div class="lp-gallery-slider-container">\n          <div class="lp-gallery-slider-track">\n            ${n.map((e,t)=>function(e,t){const n="string"==typeof e?e:e.url,s="object"==typeof e&&(e.alt||e.caption)||"",l="object"==typeof e?e.caption:"";return`\n    <div class="lp-gallery-slide ${0===t?"active":""}" data-index="${t}">\n      <img src="${i(n)}" alt="${i(s)}">\n      ${l?`<div class="lp-gallery-slide-caption">${i(l)}</div>`:""}\n    </div>\n  `}(e,t)).join("")}\n          </div>\n          <button class="lp-gallery-slider-prev" aria-label="å‰ã¸">&#10094;</button>\n          <button class="lp-gallery-slider-next" aria-label="æ¬¡ã¸">&#10095;</button>\n        </div>\n        <div class="lp-gallery-slider-dots">\n          ${n.map((e,t)=>`<button class="lp-gallery-dot ${0===t?"active":""}" data-index="${t}" aria-label="ç”»åƒ${t+1}"></button>`).join("")}\n        </div>\n      </div>\n    </section>\n  `}function P(e,t){const{data:i,layout:n}=e,s=(null==i?void 0:i.testimonials)||[],l=(null==i?void 0:i.sectionTitle)||"ç¤¾å“¡ã®å£°",a=(null==n?void 0:n.style)||"cards";if(0===s.length)return"";return({cards:B,list:H,slider:M}[a]||B)(e.id,l,s)}function B(e,t,n){return`\n    <section class="lp-testimonial lp-testimonial-cards" data-section-id="${e}">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">${i(t)}</h2>\n        <div class="lp-testimonial-grid">\n          ${n.map(e=>function(e){const{name:t,role:n,department:s,quote:l,avatar:a,yearsWorked:o}=e;return`\n    <div class="lp-testimonial-card">\n      <div class="lp-testimonial-quote-mark">"</div>\n      <p class="lp-testimonial-quote">${i(l||"")}</p>\n      <div class="lp-testimonial-author">\n        ${a?`\n          <div class="lp-testimonial-avatar">\n            <img src="${i(a)}" alt="${i(t||"")}" loading="lazy">\n          </div>\n        `:`\n          <div class="lp-testimonial-avatar lp-testimonial-avatar-placeholder">\n            <span>${j(t)}</span>\n          </div>\n        `}\n        <div class="lp-testimonial-info">\n          <p class="lp-testimonial-name">${i(t||"åŒ¿å")}</p>\n          ${n||s?`\n            <p class="lp-testimonial-role">\n              ${s?i(s):""}${s&&n?" / ":""}${n?i(n):""}\n            </p>\n          `:""}\n          ${o?`<p class="lp-testimonial-years">å‹¤ç¶š${i(o)}</p>`:""}\n        </div>\n      </div>\n    </div>\n  `}(e)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function H(e,t,n){return`\n    <section class="lp-testimonial lp-testimonial-list" data-section-id="${e}">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">${i(t)}</h2>\n        <div class="lp-testimonial-items">\n          ${n.map((e,t)=>function(e,t){const{name:n,role:s,department:l,quote:a,avatar:o,yearsWorked:d}=e,r=t%2==0;return`\n    <div class="lp-testimonial-list-item ${r?"":"lp-testimonial-reverse"}">\n      <div class="lp-testimonial-list-avatar">\n        ${o?`\n          <img src="${i(o)}" alt="${i(n||"")}" loading="lazy">\n        `:`\n          <div class="lp-testimonial-avatar-placeholder">\n            <span>${j(n)}</span>\n          </div>\n        `}\n      </div>\n      <div class="lp-testimonial-list-content">\n        <div class="lp-testimonial-list-header">\n          <p class="lp-testimonial-name">${i(n||"åŒ¿å")}</p>\n          ${s||l?`\n            <p class="lp-testimonial-role">\n              ${l?i(l):""}${l&&s?" / ":""}${s?i(s):""}\n            </p>\n          `:""}\n          ${d?`<p class="lp-testimonial-years">å‹¤ç¶š${i(d)}</p>`:""}\n        </div>\n        <p class="lp-testimonial-quote">${i(a||"")}</p>\n      </div>\n    </div>\n  `}(e,t)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function M(e,t,n){return`\n    <section class="lp-testimonial lp-testimonial-slider" data-section-id="${e}">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">${i(t)}</h2>\n        <div class="lp-testimonial-slider-container">\n          <div class="lp-testimonial-slider-track">\n            ${n.map((e,t)=>function(e,t){const{name:n,role:s,department:l,quote:a,avatar:o,yearsWorked:d}=e;return`\n    <div class="lp-testimonial-slide ${0===t?"active":""}" data-index="${t}">\n      <div class="lp-testimonial-slide-inner">\n        <div class="lp-testimonial-quote-mark">"</div>\n        <p class="lp-testimonial-quote">${i(a||"")}</p>\n        <div class="lp-testimonial-author">\n          ${o?`\n            <div class="lp-testimonial-avatar">\n              <img src="${i(o)}" alt="${i(n||"")}">\n            </div>\n          `:`\n            <div class="lp-testimonial-avatar lp-testimonial-avatar-placeholder">\n              <span>${j(n)}</span>\n            </div>\n          `}\n          <div class="lp-testimonial-info">\n            <p class="lp-testimonial-name">${i(n||"åŒ¿å")}</p>\n            ${s||l?`\n              <p class="lp-testimonial-role">\n                ${l?i(l):""}${l&&s?" / ":""}${s?i(s):""}\n              </p>\n            `:""}\n            ${d?`<p class="lp-testimonial-years">å‹¤ç¶š${i(d)}</p>`:""}\n          </div>\n        </div>\n      </div>\n    </div>\n  `}(e,t)).join("")}\n          </div>\n          <button class="lp-testimonial-slider-prev" aria-label="å‰ã¸">&#10094;</button>\n          <button class="lp-testimonial-slider-next" aria-label="æ¬¡ã¸">&#10095;</button>\n        </div>\n        <div class="lp-testimonial-slider-dots">\n          ${n.map((e,t)=>`<button class="lp-testimonial-dot ${0===t?"active":""}" data-index="${t}" aria-label="ç¤¾å“¡${t+1}"></button>`).join("")}\n        </div>\n      </div>\n    </section>\n  `}function j(e){if(!e)return"?";const t=e.split(/[\sã€€]+/);return t.length>=2?(t[0][0]+t[1][0]).toUpperCase():e.substring(0,2)}function z(e,t){const{data:n,layout:s}=e,l=(null==n?void 0:n.images)||[],a=(null==n?void 0:n.sectionTitle)||"",o=!1!==(null==n?void 0:n.autoPlay),d=(null==n?void 0:n.interval)||5e3,r=(null==s?void 0:s.style)||"standard",c=!1!==(null==s?void 0:s.showDots),p=!1!==(null==s?void 0:s.showArrows);return 0===l.length?`\n      <section class="lp-carousel lp-carousel-empty" data-section-id="${e.id}">\n        <div class="lp-section-inner">\n          ${a?`<h2 class="lp-section-title">${i(a)}</h2>`:""}\n          <div class="lp-carousel-placeholder">\n            <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n          </div>\n        </div>\n      </section>\n    `:`\n    <section class="lp-carousel lp-carousel-${r}" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        ${a?`<h2 class="lp-section-title">${i(a)}</h2>`:""}\n        <div class="lp-carousel-container"\n             data-autoplay="${o}"\n             data-interval="${d}">\n          <div class="lp-carousel-track">\n            ${l.map((e,t)=>function(e,t){const n="string"==typeof e?e:e.url,s="object"==typeof e&&(e.alt||e.caption)||`ç”»åƒ ${t+1}`,l="object"==typeof e?e.caption:"";return`\n    <div class="lp-carousel-slide ${0===t?"active":""}" data-index="${t}">\n      <div class="lp-carousel-slide-inner">\n        <img src="${i(n)}" alt="${i(s)}" loading="${0===t?"eager":"lazy"}">\n        ${l?`<div class="lp-carousel-caption">${i(l)}</div>`:""}\n      </div>\n    </div>\n  `}(e,t,l.length)).join("")}\n          </div>\n          ${p&&l.length>1?'\n            <button type="button" class="lp-carousel-btn lp-carousel-prev" aria-label="å‰ã®ç”»åƒ">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <polyline points="15,18 9,12 15,6"></polyline>\n              </svg>\n            </button>\n            <button type="button" class="lp-carousel-btn lp-carousel-next" aria-label="æ¬¡ã®ç”»åƒ">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <polyline points="9,6 15,12 9,18"></polyline>\n              </svg>\n            </button>\n          ':""}\n        </div>\n        ${c&&l.length>1?`\n          <div class="lp-carousel-dots">\n            ${l.map((e,t)=>`\n              <button type="button"\n                      class="lp-carousel-dot ${0===t?"active":""}"\n                      data-index="${t}"\n                      aria-label="ç”»åƒ${t+1}ã‚’è¡¨ç¤º">\n              </button>\n            `).join("")}\n          </div>\n        `:""}\n        <div class="lp-carousel-counter">\n          <span class="lp-carousel-current">1</span> / <span class="lp-carousel-total">${l.length}</span>\n        </div>\n      </div>\n    </section>\n  `}function V(){document.querySelectorAll(".lp-carousel-container").forEach(e=>{e.querySelector(".lp-carousel-track");const t=e.querySelectorAll(".lp-carousel-slide"),i=e.querySelector(".lp-carousel-prev"),n=e.querySelector(".lp-carousel-next"),s=e.closest(".lp-carousel"),l=null==s?void 0:s.querySelectorAll(".lp-carousel-dot"),a=null==s?void 0:s.querySelector(".lp-carousel-current");if(t.length<=1)return;let o=0,d=null;const r="true"===e.dataset.autoplay,c=parseInt(e.dataset.interval)||5e3;function p(e){e<0&&(e=t.length-1),e>=t.length&&(e=0),t.forEach((t,i)=>{t.classList.toggle("active",i===e)}),null==l||l.forEach((t,i)=>{t.classList.toggle("active",i===e)}),a&&(a.textContent=e+1),o=e}function u(){p(o+1)}function v(){p(o-1)}function h(){r&&!d&&(d=setInterval(u,c))}function m(){d&&(clearInterval(d),d=null)}null==i||i.addEventListener("click",()=>{v(),m(),h()}),null==n||n.addEventListener("click",()=>{u(),m(),h()}),null==l||l.forEach((e,t)=>{e.addEventListener("click",()=>{p(t),m(),h()})});let b=0,y=0;e.addEventListener("touchstart",e=>{b=e.changedTouches[0].screenX,m()},{passive:!0}),e.addEventListener("touchend",e=>{y=e.changedTouches[0].screenX;const t=b-y;Math.abs(t)>50&&(t>0?u():v()),h()},{passive:!0}),e.addEventListener("mouseenter",m),e.addEventListener("mouseleave",h),h()})}const O=Object.freeze(Object.defineProperty({__proto__:null,default:z,initCarousels:V,renderCarouselSection:z},Symbol.toStringTag,{value:"Module"}));function F(e,t){const{data:n,layout:s}=e,l=(null==n?void 0:n.sectionTitle)||"",a=(null==n?void 0:n.videoUrl)||"",o=function(e){if(!e)return"unknown";if(e.includes("youtube.com")||e.includes("youtu.be"))return"youtube";if(e.includes("vimeo.com"))return"vimeo";if(e.includes("tiktok.com"))return"tiktok";if(e.match(/\.(mp4|webm|ogg)$/i))return"direct";return"iframe"}(a),d="unknown"!==o?o:(null==n?void 0:n.videoType)||"iframe",r=(null==n?void 0:n.description)||"",c=(null==s?void 0:s.aspectRatio)||"16:9",p=(null==s?void 0:s.fullWidth)||!1;if(!a)return`\n      <section class="lp-video lp-video-empty" data-section-id="${e.id}">\n        <div class="lp-section-inner">\n          ${l?`<h2 class="lp-section-title">${i(l)}</h2>`:""}\n          <div class="lp-video-placeholder">\n            <div class="lp-video-placeholder-icon">ğŸ¬</div>\n            <p>å‹•ç”»URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n          </div>\n        </div>\n      </section>\n    `;const u=function(e,t){switch(t){case"youtube":return function(e){const t=function(e){let t=e.match(/[?&]v=([^&]+)/);return t?t[1]:(t=e.match(/youtu\.be\/([^?&]+)/),t?t[1]:(t=e.match(/youtube\.com\/embed\/([^?&]+)/),t?t[1]:(t=e.match(/youtube\.com\/shorts\/([^?&]+)/),t?t[1]:null)))}(e);if(!t)return'<p class="lp-video-error">YouTubeã®URLã‚’èªè­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ</p>';return`\n    <iframe\n      src="https://www.youtube.com/embed/${t}?rel=0&modestbranding=1"\n      title="YouTubeå‹•ç”»"\n      frameborder="0"\n      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"\n      allowfullscreen\n      loading="lazy"\n    ></iframe>\n  `}(e);case"vimeo":return function(e){const t=function(e){const t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);return t?t[1]:null}(e);if(!t)return'<p class="lp-video-error">Vimeoã®URLã‚’èªè­˜ã§ãã¾ã›ã‚“ã§ã—ãŸ</p>';return`\n    <iframe\n      src="https://player.vimeo.com/video/${t}?title=0&byline=0&portrait=0"\n      title="Vimeoå‹•ç”»"\n      frameborder="0"\n      allow="autoplay; fullscreen; picture-in-picture"\n      allowfullscreen\n      loading="lazy"\n    ></iframe>\n  `}(e);case"tiktok":return function(e){return`\n    <blockquote class="tiktok-embed" cite="${i(e)}" data-video-id="">\n      <section>\n        <a target="_blank" href="${i(e)}">TikTokã§è¦‹ã‚‹</a>\n      </section>\n    </blockquote>\n    <script async src="https://www.tiktok.com/embed.js"><\/script>\n  `}(e);case"direct":return function(e){const t=e.split(".").pop().toLowerCase(),n={mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg"}[t]||"video/mp4";return`\n    <video controls preload="metadata" playsinline>\n      <source src="${i(e)}" type="${n}">\n      <p>ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»ã®å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚</p>\n    </video>\n  `}(e);default:return function(e){return`\n    <iframe\n      src="${i(e)}"\n      title="åŸ‹ã‚è¾¼ã¿å‹•ç”»"\n      frameborder="0"\n      allowfullscreen\n      loading="lazy"\n    ></iframe>\n  `}(e)}}(a,d);return`\n    <section class="lp-video ${p?"lp-video-fullwidth":""}" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        ${l?`<h2 class="lp-section-title">${i(l)}</h2>`:""}\n        <div class="lp-video-wrapper lp-video-aspect-${c.replace(":","-")}">\n          ${u}\n        </div>\n        ${r?`<p class="lp-video-description">${i(r)}</p>`:""}\n      </div>\n    </section>\n  `}function N(e={},t="modern"){const{showVideoButton:n=!1,videoUrl:s="",applyButtonText:l="ä»Šã™ãå¿œå‹Ÿã™ã‚‹",videoButtonText:a="æ±‚äººå†…å®¹ã‚’å‹•ç”»ã§è¦‹ã‚‹"}=e,o=n&&s,d=function(e){if(!e)return null;const t=e.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/);if(t)return t[1];const i=e.match(/youtu\.be\/([a-zA-Z0-9_-]{11})/);return i?i[1]:null}(s),r=d?`https://www.youtube.com/embed/${d}?autoplay=1&rel=0`:"";return`\n    <section class="lp-hero-cta-section lp-layout-${t}">\n      <div class="lp-hero-cta-buttons">\n        <a href="#lp-apply" class="lp-hero-cta-btn lp-hero-cta-btn--apply">\n          <span class="lp-hero-cta-icon">\n            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>\n            </svg>\n          </span>\n          <span class="lp-hero-cta-text">${i(l)}</span>\n        </a>\n        ${o?`\n        <button type="button" class="lp-hero-cta-btn lp-hero-cta-btn--video" data-video-url="${i(r)}">\n          <span class="lp-hero-cta-icon">\n            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M8 5v14l11-7z"/>\n            </svg>\n          </span>\n          <span class="lp-hero-cta-text">æ±‚äººå†…å®¹ã‚’<br>å‹•ç”»ã§è¦‹ã‚‹</span>\n        </button>\n        `:""}\n      </div>\n    </section>\n\n    ${o?'\n    <div class="lp-video-modal" id="lp-video-modal">\n      <div class="lp-video-modal-overlay"></div>\n      <div class="lp-video-modal-content">\n        <button type="button" class="lp-video-modal-close" aria-label="é–‰ã˜ã‚‹">&times;</button>\n        <div class="lp-video-modal-player">\n          <iframe id="lp-video-iframe" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n        </div>\n      </div>\n    </div>\n    ':""}\n  `}function U(){document.querySelectorAll(".lp-hero-cta-btn--video").forEach(e=>{e.addEventListener("click",()=>{!function(e){const t=document.getElementById("lp-video-modal"),i=document.getElementById("lp-video-iframe");t&&i&&e&&(i.src=e,t.classList.add("active"),document.body.style.overflow="hidden")}(e.dataset.videoUrl)})});const e=document.getElementById("lp-video-modal");if(e){const t=e.querySelector(".lp-video-modal-overlay"),i=e.querySelector(".lp-video-modal-close");t&&t.addEventListener("click",Q),i&&i.addEventListener("click",Q),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&Q()})}}function Q(){const e=document.getElementById("lp-video-modal"),t=document.getElementById("lp-video-iframe");e&&(e.classList.remove("active"),document.body.style.overflow="",t&&(t.src=""))}class R{constructor(){this.sectionRenderers={hero:r,heroCta:N,points:m,jobs:b,details:y,faq:g,apply:f,custom:S,gallery:D,testimonial:P,carousel:z,video:F},this.defaultOrder=["hero","heroCta","points","jobs","details","faq","apply"]}render(e,t,i,n){var s;const l=i.layoutStyle||"modern",a=`lp-layout-${l}`,o=`lp-pattern-${l}`;document.body.classList.add(o),document.body.classList.add(a),n&&n.classList.add(a);const d=t.length>0?t[0]:e,r=this.parseLPContent(i);r&&"2.0"===r.version&&(null==(s=r.sections)?void 0:s.length)>0?this.renderV2Sections(r,e,d,t,i,n):this.renderLegacySections(e,d,t,i,n)}parseLPContent(e){var t;if(!e.lpContent)return null;try{const i="string"==typeof e.lpContent?JSON.parse(e.lpContent):e.lpContent;if("2.0"===i.version&&e.faq){const n=this.parseLegacyFAQ(e.faq),s=null==(t=i.sections)?void 0:t.find(e=>"faq"===e.type);s&&(s.data=s.data||{},s.data.items=n,s.visible=n.length>0)}return i}catch(i){return console.error("lpContent parse error:",i),null}}parseLegacyFAQ(e){if(!e)return[];const t=[],i=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const n of i){const e=n.match(/Q[:ï¼š](.+?)(?=\|A[:ï¼š]|$)/i),i=n.match(/A[:ï¼š](.+)/i);e&&i&&t.push({id:`faq-${t.length+1}`,question:e[1].trim(),answer:i[1].trim()})}return t}renderV2Sections(e,t,i,n,s,l){let{sections:a,globalSettings:o}=e;if(!a.some(e=>"heroCta"===e.type)){const e=a.findIndex(e=>"hero"===e.type),t={id:"heroCta-auto",type:"heroCta",order:e>=0?a[e].order+.5:.5,visible:!0,data:{}};a=[...a,t]}const d=a.filter(e=>!1!==e.visible).sort((e,t)=>(e.order||0)-(t.order||0)),r={company:t,mainJob:i,jobs:n,globalSettings:o||{},lpSettings:s||{}};l.innerHTML=d.map(e=>this.renderV2Section(e,r)).join(""),V(),U()}renderV2Section(e,t){var i,n,s,l,a,o,d,r,c,p,u,v,h;const m=this.sectionRenderers[e.type];if(!m)return console.warn(`Unknown section type: ${e.type}`),"";try{switch(e.type){case"hero":return m(t.company,t.mainJob,{heroTitle:null==(i=e.data)?void 0:i.title,heroSubtitle:null==(n=e.data)?void 0:n.subtitle,heroImage:null==(s=e.data)?void 0:s.image,...t.globalSettings});case"heroCta":const b=(null==(l=e.data)?void 0:l.showVideoButton)||"true"===String(null==(a=t.lpSettings)?void 0:a.showVideoButton).toLowerCase()||!0===(null==(o=t.lpSettings)?void 0:o.showVideoButton);return m({showVideoButton:b,videoUrl:(null==(d=e.data)?void 0:d.videoUrl)||(null==(r=t.lpSettings)?void 0:r.videoUrl)||"",applyButtonText:(null==(c=e.data)?void 0:c.applyButtonText)||(null==(p=t.lpSettings)?void 0:p.ctaText)||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",videoButtonText:(null==(u=e.data)?void 0:u.videoButtonText)||"æ±‚äººå†…å®¹ã‚’å‹•ç”»ã§è¦‹ã‚‹"},(null==(v=t.globalSettings)?void 0:v.layoutStyle)||"modern");case"points":const y=this.convertPointsToLegacy(e.data,t.globalSettings);return m(t.company,t.mainJob,y);case"jobs":return m(t.company,t.jobs);case"details":return m(t.company,t.mainJob);case"faq":const g=this.convertFAQToLegacy(null==(h=e.data)?void 0:h.items);return g?m(g):"";case"apply":return m(t.company,t.globalSettings);case"custom":case"gallery":case"testimonial":case"carousel":case"video":return m(e,t);default:return""}}catch(b){return console.error(`Error rendering section ${e.type}:`,b),""}}convertPointsToLegacy(e,t){const i={...t};return(null==e?void 0:e.points)&&e.points.forEach((e,t)=>{i[`pointTitle${t+1}`]=e.title||"",i[`pointDesc${t+1}`]=e.description||""}),i}convertFAQToLegacy(e){return e&&0!==e.length?e.map(e=>`Q:${e.question}|A:${e.answer}`).join("||"):""}renderLegacySections(e,t,i,n,s){const l=this.parseSectionVisibility(n.sectionVisibility),a=this.parseSectionOrder(n.sectionOrder),o=n.layoutStyle||"modern";s.innerHTML=a.map(s=>this.renderLegacySection(s,e,t,i,n,l,o)).join(""),U()}renderLegacySection(e,t,i,n,s,l,a){switch(e){case"hero":return this.sectionRenderers.hero(t,i,s,a);case"heroCta":return this.sectionRenderers.heroCta({showVideoButton:"true"===String(s.showVideoButton).toLowerCase()||!0===s.showVideoButton,videoUrl:s.videoUrl||"",applyButtonText:s.ctaText||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",videoButtonText:s.videoButtonText||"æ±‚äººå†…å®¹ã‚’å‹•ç”»ã§è¦‹ã‚‹"},a);case"points":{if(!l.points)return"";let e=null;if(s.pointsLayout)try{e="string"==typeof s.pointsLayout?JSON.parse(s.pointsLayout):s.pointsLayout}catch(o){console.error("pointsLayout parse error:",o)}return this.sectionRenderers.points(t,i,s,a,e)}case"jobs":return l.jobs?this.sectionRenderers.jobs(t,n,a):"";case"details":return l.details?this.sectionRenderers.details(t,i,a):"";case"faq":return l.faq&&s.faq?this.sectionRenderers.faq(s.faq,a):"";case"apply":return this.sectionRenderers.apply(t,s,a);default:return""}}parseSectionVisibility(e){const t={points:!0,jobs:!0,details:!0,faq:!0};if(!e)return t;try{return{...t,...JSON.parse(e)}}catch(i){return console.error("ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºè¨­å®šã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",i),t}}parseSectionOrder(e){if(!e)return this.defaultOrder;const t=e.split(",").map(e=>e.trim()).filter(e=>e);if(0===t.length)return this.defaultOrder;if(!t.includes("heroCta")){const e=t.indexOf("hero");-1!==e?t.splice(e+1,0,"heroCta"):t.unshift("heroCta")}const i=this.defaultOrder.filter(e=>!t.includes(e));return[...t,...i]}renderToHtml(e,t,i){const n=i.layoutStyle||"modern",s=`lp-layout-${n}`,l=`lp-pattern-${n}`,a=t.length>0?t[0]:e,o=this.parseLPContent(i);let d="";return d=o&&"2.0"===o.version?this.renderV2SectionsToHtml(o,e,a,t,i):this.renderLegacySectionsToHtml(e,a,t,i),{html:d,patternClass:l,layoutClass:s}}renderV2SectionsToHtml(e,t,i,n,s){let{sections:l,globalSettings:a}=e;if(!l.some(e=>"heroCta"===e.type)){const e=l.findIndex(e=>"hero"===e.type),t={id:"heroCta-auto",type:"heroCta",order:e>=0?l[e].order+.5:.5,visible:!0,data:{}};l=[...l,t]}const o=l.filter(e=>!1!==e.visible).sort((e,t)=>(e.order||0)-(t.order||0)),d={company:t,mainJob:i,jobs:n,globalSettings:a||{},lpSettings:s||{}};return o.map(e=>this.renderV2Section(e,d)).join("")}renderLegacySectionsToHtml(e,t,i,n){const s=this.parseSectionVisibility(n.sectionVisibility),l=this.parseSectionOrder(n.sectionOrder),a=n.layoutStyle||"modern";return l.map(l=>this.renderLegacySection(l,e,t,i,n,s,a)).join("")}}const J={hero:{id:"hero",name:"ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼",icon:"ğŸ¯",required:!0,maxInstances:1,defaultData:{title:"",subtitle:"",image:""},defaultLayout:{}},heroCta:{id:"heroCta",name:"CTAãƒœã‚¿ãƒ³",icon:"ğŸ“¢",required:!1,maxInstances:1,defaultData:{showVideoButton:!1,videoUrl:"",applyButtonText:"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",videoButtonText:"æ±‚äººå†…å®¹ã‚’å‹•ç”»ã§è¦‹ã‚‹"},defaultLayout:{}},points:{id:"points",name:"ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å¾´ï¼‰",icon:"âœ¨",required:!1,maxInstances:null,defaultData:{sectionTitle:"ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ",points:[]},defaultLayout:{direction:"vertical",columns:3,gap:24,padding:32,cardBorderRadius:16,cardBackgroundColor:"#ffffff",cardBorderWidth:1,cardBorderColor:"#e5e7eb",cardShadow:"md",sectionTitleSize:"lg",titleColor:"#1f2937",titleSize:"md",descSize:"sm",titleAlign:"left",accentColor:"#6366f1"}},jobs:{id:"jobs",name:"æ±‚äººä¸€è¦§",icon:"ğŸ’¼",required:!1,maxInstances:1,defaultData:{sectionTitle:"å‹Ÿé›†ä¸­ã®æ±‚äºº"},defaultLayout:{}},details:{id:"details",name:"å‹Ÿé›†è¦é …",icon:"ğŸ“‹",required:!1,maxInstances:1,defaultData:{sectionTitle:"å‹Ÿé›†è¦é …"},defaultLayout:{}},faq:{id:"faq",name:"ã‚ˆãã‚ã‚‹è³ªå•",icon:"â“",required:!1,maxInstances:null,defaultData:{sectionTitle:"ã‚ˆãã‚ã‚‹è³ªå•",items:[]},defaultLayout:{style:"accordion"}},apply:{id:"apply",name:"å¿œå‹Ÿã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ“",required:!0,maxInstances:1,defaultData:{},defaultLayout:{}},custom:{id:"custom",name:"ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ¨",required:!1,maxInstances:null,defaultData:{title:"",content:"",image:"",button:null},defaultLayout:{variant:"text-only"}},gallery:{id:"gallery",name:"ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",icon:"ğŸ–¼ï¸",required:!1,maxInstances:null,defaultData:{sectionTitle:"",images:[]},defaultLayout:{columns:3,style:"grid"}},testimonial:{id:"testimonial",name:"ç¤¾å“¡ã®å£°",icon:"ğŸ’¬",required:!1,maxInstances:null,defaultData:{sectionTitle:"ç¤¾å“¡ã®å£°",testimonials:[]},defaultLayout:{style:"cards"}},carousel:{id:"carousel",name:"ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«",icon:"ğŸ ",required:!1,maxInstances:null,defaultData:{sectionTitle:"",images:[],autoPlay:!0,interval:5e3},defaultLayout:{style:"standard",showDots:!0,showArrows:!0}},video:{id:"video",name:"å‹•ç”»",icon:"ğŸ¬",required:!1,maxInstances:null,defaultData:{sectionTitle:"",videoUrl:"",videoType:"youtube",description:""},defaultLayout:{aspectRatio:"16:9",fullWidth:!1}}},_={"text-only":{name:"ãƒ†ã‚­ã‚¹ãƒˆã®ã¿",icon:"ğŸ“",description:"ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿ã‚’è¡¨ç¤º"},"image-only":{name:"ç”»åƒã®ã¿",icon:"ğŸ–¼ï¸",description:"ç”»åƒã‚’å¤§ããè¡¨ç¤º"},"text-left-image-right":{name:"ãƒ†ã‚­ã‚¹ãƒˆå·¦ãƒ»ç”»åƒå³",icon:"â—§",description:"å·¦ã«ãƒ†ã‚­ã‚¹ãƒˆã€å³ã«ç”»åƒã‚’é…ç½®"},"text-right-image-left":{name:"ãƒ†ã‚­ã‚¹ãƒˆå³ãƒ»ç”»åƒå·¦",icon:"â—¨",description:"å·¦ã«ç”»åƒã€å³ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’é…ç½®"},"centered-with-button":{name:"ä¸­å¤®æƒãˆï¼ˆãƒœã‚¿ãƒ³ä»˜ãï¼‰",icon:"ğŸ”˜",description:"ä¸­å¤®æƒãˆã®ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒœã‚¿ãƒ³"},"full-width-banner":{name:"ãƒ•ãƒ«ãƒ¯ã‚¤ãƒ‰ãƒãƒŠãƒ¼",icon:"â–¬",description:"èƒŒæ™¯ç”»åƒä»˜ãã®å…¨å¹…ãƒãƒŠãƒ¼"}},W=["hero","heroCta","points","jobs","details","faq","apply"];function G(e){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function Y(e,t){const i=J[e];if(!i)return!1;if(null===i.maxInstances)return!0;return t.filter(t=>t.type===e).length<i.maxInstances}function Z(e,t){const i=t.find(t=>t.id===e);if(!i)return!1;const n=J[i.type];return!(null==n?void 0:n.required)}const K=[{id:"modern",name:"ãƒ¢ãƒ€ãƒ³",description:"æ´—ç·´ã•ã‚ŒãŸãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼ + é’ã€‚ä¿¡é ¼æ„Ÿã¨å…ˆé€²æ€§",color:"linear-gradient(135deg, #2d3436, #0984e3)",industries:["è£½é€ ","IT","ã‚ªãƒ•ã‚£ã‚¹ãƒ¯ãƒ¼ã‚¯"],colors:{primary:"#2d3436",secondary:"#0984e3",accent:"#fff176",text:"#333333"}},{id:"athome",name:"ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ",description:"æ¸©ã‹ã¿ã®ã‚ã‚‹ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã€‚è¦ªã—ã¿ã‚„ã™ã•é‡è¦–",color:"linear-gradient(135deg, #e67e22, #f39c12)",industries:["é£²é£Ÿ","ä»‹è­·","ã‚µãƒ¼ãƒ“ã‚¹"],colors:{primary:"#f39c12",secondary:"#e67e22",accent:"#fff176",text:"#5d4037"}},{id:"cute",name:"ã‚­ãƒ¥ãƒ¼ãƒˆ",description:"ãƒãƒƒãƒ—ã§å¯æ„›ã„ãƒ‘ã‚¹ãƒ†ãƒ«èª¿ã€‚å¥³æ€§å‘ã‘ã«æœ€é©",color:"linear-gradient(135deg, #ff8fa3, #fab1a0)",industries:["ä¿è‚²","ç¾å®¹","ã‚¢ãƒ‘ãƒ¬ãƒ«"],colors:{primary:"#ff8fa3",secondary:"#fab1a0",accent:"#fff59d",text:"#5d4037"}},{id:"trust",name:"ä¿¡é ¼",description:"èª å®Ÿã§å …å®Ÿãªå°è±¡ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ»ä¼æ¥­å‘ã‘",color:"linear-gradient(135deg, #1a2a3a, #0077c2)",industries:["è£½é€ ","é‡‘è","ã‚³ãƒ³ã‚µãƒ«"],colors:{primary:"#0077c2",secondary:"#1a2a3a",accent:"#fff176",text:"#2d3436"}},{id:"kenchiku",name:"å»ºç¯‰",description:"åŠ›å¼·ã„ã‚ªãƒ¬ãƒ³ã‚¸ + ãƒ€ãƒ¼ã‚¯ã€‚å»ºè¨­ãƒ»åœŸæœ¨æ¥­ç•Œå‘ã‘",color:"linear-gradient(135deg, #2c3e50, #f39c12)",industries:["å»ºè¨­","åœŸæœ¨","æ–½å·¥ç®¡ç†"],colors:{primary:"#f39c12",secondary:"#1a1a1a",accent:"#fff176",text:"#333333"}}],X=[{id:"modern",name:"ãƒ¢ãƒ€ãƒ³",description:"æ´—ç·´ã•ã‚ŒãŸãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼ + é’ã€‚ä¿¡é ¼æ„Ÿã¨å…ˆé€²æ€§",color:"linear-gradient(135deg, #2d3436, #0984e3)",industries:["è£½é€ ","IT","ã‚ªãƒ•ã‚£ã‚¹ãƒ¯ãƒ¼ã‚¯"],features:["title-center","card-shadow","rounded-md","minimal"]},{id:"athome",name:"ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ",description:"æ¸©ã‹ã¿ã®ã‚ã‚‹ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã€‚è¦ªã—ã¿ã‚„ã™ã•é‡è¦–",color:"linear-gradient(135deg, #e67e22, #f39c12)",industries:["é£²é£Ÿ","ä»‹è­·","ã‚µãƒ¼ãƒ“ã‚¹"],features:["rounded-xl","bubble-card","friendly","soft-colors"]},{id:"cute",name:"ã‚­ãƒ¥ãƒ¼ãƒˆ",description:"ãƒãƒƒãƒ—ã§å¯æ„›ã„ãƒ‘ã‚¹ãƒ†ãƒ«èª¿ã€‚å¥³æ€§å‘ã‘ã«æœ€é©",color:"linear-gradient(135deg, #ff8fa3, #fab1a0)",industries:["ä¿è‚²","ç¾å®¹","ã‚¢ãƒ‘ãƒ¬ãƒ«"],features:["title-center","rounded-lg","card-colorful","section-wave"]},{id:"trust",name:"ä¿¡é ¼",description:"èª å®Ÿã§å …å®Ÿãªå°è±¡ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ»ä¼æ¥­å‘ã‘",color:"linear-gradient(135deg, #1a2a3a, #0077c2)",industries:["è£½é€ ","é‡‘è","ã‚³ãƒ³ã‚µãƒ«"],features:["left-border","minimal","corporate"]},{id:"kenchiku",name:"å»ºç¯‰",description:"åŠ›å¼·ã„ã‚ªãƒ¬ãƒ³ã‚¸ + ãƒ€ãƒ¼ã‚¯ã€‚å»ºè¨­ãƒ»åœŸæœ¨æ¥­ç•Œå‘ã‘",color:"linear-gradient(135deg, #2c3e50, #f39c12)",industries:["å»ºè¨­","åœŸæœ¨","æ–½å·¥ç®¡ç†"],features:["title-large","dark-bg","text-bold","impact"]}],ee=[{id:"video",name:"VIDEO",label:"å‹•ç”»",description:"å‹•ç”»ï¼ˆYouTubeã€Vimeoã€TikTokï¼‰ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã€æ±‚äººã‚„ä¼šç¤¾ã®é­…åŠ›ã‚’ä¼ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚",thumbnail:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 80"%3E%3Cdefs%3E%3ClinearGradient id="vidBg" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" stop-color="%23ef4444"/%3E%3Cstop offset="100%25" stop-color="%23dc2626"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill="url(%23vidBg)" width="120" height="80" rx="4"/%3E%3Crect fill="%23000" opacity="0.3" x="15" y="15" width="90" height="50" rx="4"/%3E%3Ccircle fill="%23fff" opacity="0.9" cx="60" cy="40" r="15"/%3E%3Cpath fill="%23ef4444" d="M55 32 L55 48 L70 40 Z"/%3E%3C/svg%3E'},{id:"carousel",name:"CAROUSEL",label:"ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«",description:"è¤‡æ•°ã®ç”»åƒã‚’ã‚¹ãƒ©ã‚¤ãƒ‰ã‚·ãƒ§ãƒ¼å½¢å¼ã§è¡¨ç¤ºã§ãã¾ã™ã€‚è·å ´ã®æ§˜å­ã‚„ä»•äº‹é¢¨æ™¯ã‚’ã‚¢ãƒ”ãƒ¼ãƒ«ã§ãã¾ã™ã€‚",thumbnail:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 80"%3E%3Cdefs%3E%3ClinearGradient id="carBg" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" stop-color="%233b82f6"/%3E%3Cstop offset="100%25" stop-color="%232563eb"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill="url(%23carBg)" width="120" height="80" rx="4"/%3E%3Crect fill="%23fff" opacity="0.2" x="25" y="12" width="70" height="45" rx="4"/%3E%3Ccircle fill="%23fff" opacity="0.6" cx="45" cy="28" r="8"/%3E%3Cpath fill="%23fff" opacity="0.5" d="M30 52 L50 32 L70 45 L90 35 L90 52 L30 52 Z"/%3E%3Crect fill="%23fff" opacity="0.4" x="8" y="20" width="12" height="30" rx="2"/%3E%3Crect fill="%23fff" opacity="0.4" x="100" y="20" width="12" height="30" rx="2"/%3E%3Cpath fill="%23fff" opacity="0.8" d="M12 32 L16 35 L12 38 Z"/%3E%3Cpath fill="%23fff" opacity="0.8" d="M108 32 L104 35 L108 38 Z"/%3E%3Ccircle fill="%23fff" opacity="0.5" cx="52" cy="65" r="3"/%3E%3Ccircle fill="%23fff" opacity="0.9" cx="60" cy="65" r="3"/%3E%3Ccircle fill="%23fff" opacity="0.5" cx="68" cy="65" r="3"/%3E%3C/svg%3E'},{id:"gallery",name:"GALLERY",label:"ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",description:"è¤‡æ•°ã®ç”»åƒã‚’ã‚°ãƒªãƒƒãƒ‰å½¢å¼ã§è¡¨ç¤ºã§ãã¾ã™ã€‚è·å ´ç’°å¢ƒã‚„ä»•äº‹ã®æ§˜å­ã‚’è¦‹ã›ã‚‰ã‚Œã¾ã™ã€‚",thumbnail:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 80"%3E%3Cdefs%3E%3ClinearGradient id="galBg" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" stop-color="%23f59e0b"/%3E%3Cstop offset="100%25" stop-color="%23d97706"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill="url(%23galBg)" width="120" height="80" rx="4"/%3E%3Crect fill="%23fff" opacity="0.3" x="8" y="10" width="32" height="26" rx="3"/%3E%3Ccircle fill="%23fff" opacity="0.6" cx="18" cy="18" r="4"/%3E%3Cpath fill="%23fff" opacity="0.5" d="M12 32 L22 22 L32 28 L36 24 L36 32 L12 32 Z"/%3E%3Crect fill="%23fff" opacity="0.3" x="44" y="10" width="32" height="26" rx="3"/%3E%3Ccircle fill="%23fff" opacity="0.6" cx="54" cy="18" r="4"/%3E%3Cpath fill="%23fff" opacity="0.5" d="M48 32 L58 22 L68 28 L72 24 L72 32 L48 32 Z"/%3E%3Crect fill="%23fff" opacity="0.3" x="80" y="10" width="32" height="26" rx="3"/%3E%3Ccircle fill="%23fff" opacity="0.6" cx="90" cy="18" r="4"/%3E%3Cpath fill="%23fff" opacity="0.5" d="M84 32 L94 22 L104 28 L108 24 L108 32 L84 32 Z"/%3E%3Crect fill="%23fff" opacity="0.3" x="8" y="42" width="32" height="26" rx="3"/%3E%3Crect fill="%23fff" opacity="0.3" x="44" y="42" width="32" height="26" rx="3"/%3E%3Crect fill="%23fff" opacity="0.3" x="80" y="42" width="32" height="26" rx="3"/%3E%3C/svg%3E'},{id:"testimonial",name:"VOICE",label:"ç¤¾å“¡ã®å£°",description:"ç¤¾å“¡ã®å£°ã‚„ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚’æ²è¼‰ã§ãã¾ã™ã€‚å®Ÿéš›ã«åƒã„ã¦ã„ã‚‹äººã®å£°ã‚’å±Šã‘ã‚‰ã‚Œã¾ã™ã€‚",thumbnail:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 80"%3E%3Cdefs%3E%3ClinearGradient id="tstBg" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" stop-color="%2310b981"/%3E%3Cstop offset="100%25" stop-color="%23059669"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill="url(%23tstBg)" width="120" height="80" rx="4"/%3E%3Ccircle fill="%23fff" opacity="0.3" cx="30" cy="32" r="16"/%3E%3Ccircle fill="%23fff" opacity="0.6" cx="30" cy="28" r="8"/%3E%3Cellipse fill="%23fff" opacity="0.4" cx="30" cy="42" rx="10" ry="6"/%3E%3Crect fill="%23fff" opacity="0.2" x="52" y="18" width="58" height="36" rx="4"/%3E%3Cpath fill="%23fff" opacity="0.3" d="M52 40 L46 48 L52 48 Z"/%3E%3Crect fill="%23fff" opacity="0.6" x="58" y="24" width="40" height="4" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="58" y="32" width="46" height="3" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="58" y="38" width="42" height="3" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="58" y="44" width="38" height="3" rx="1"/%3E%3Ccircle fill="%23fff" opacity="0.5" cx="30" cy="66" r="2"/%3E%3Ccircle fill="%23fff" opacity="0.9" cx="40" cy="66" r="2"/%3E%3Ccircle fill="%23fff" opacity="0.5" cx="50" cy="66" r="2"/%3E%3C/svg%3E'},{id:"custom",name:"CUSTOM",label:"ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³",description:"è‡ªç”±ãªãƒ†ã‚­ã‚¹ãƒˆã¨ç”»åƒã§ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã§ãã¾ã™ã€‚",thumbnail:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 80"%3E%3Cdefs%3E%3ClinearGradient id="cstBg" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" stop-color="%238b5cf6"/%3E%3Cstop offset="100%25" stop-color="%237c3aed"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill="url(%23cstBg)" width="120" height="80" rx="4"/%3E%3Crect fill="%23fff" opacity="0.2" x="8" y="12" width="48" height="56" rx="4"/%3E%3Crect fill="%23fff" opacity="0.6" x="14" y="18" width="36" height="4" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="14" y="26" width="32" height="3" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="14" y="32" width="36" height="3" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="14" y="38" width="28" height="3" rx="1"/%3E%3Crect fill="%23fff" opacity="0.3" x="14" y="48" width="36" height="14" rx="2"/%3E%3Ccircle fill="%23fff" opacity="0.5" cx="22" cy="52" r="3"/%3E%3Cpath fill="%23fff" opacity="0.4" d="M18 58 L26 50 L34 54 L42 48 L46 58 L18 58 Z"/%3E%3Crect fill="%23fff" opacity="0.2" x="64" y="12" width="48" height="56" rx="4"/%3E%3Crect fill="%23fff" opacity="0.3" x="70" y="18" width="36" height="24" rx="2"/%3E%3Ccircle fill="%23fff" opacity="0.5" cx="80" cy="26" r="5"/%3E%3Cpath fill="%23fff" opacity="0.4" d="M74 38 L86 26 L98 32 L102 28 L102 38 L74 38 Z"/%3E%3Crect fill="%23fff" opacity="0.5" x="70" y="48" width="30" height="3" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="70" y="54" width="36" height="2" rx="1"/%3E%3Crect fill="%23fff" opacity="0.4" x="70" y="58" width="32" height="2" rx="1"/%3E%3C/svg%3E'},{id:"heroCta",name:"CTA",label:"CTAãƒœã‚¿ãƒ³",description:"ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼å†…ã«CTAãƒœã‚¿ãƒ³ï¼ˆå¿œå‹Ÿãƒœã‚¿ãƒ³ãƒ»å‹•ç”»ãƒœã‚¿ãƒ³ï¼‰ã‚’è¿½åŠ ã§ãã¾ã™ã€‚",thumbnail:'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 80"%3E%3Cdefs%3E%3ClinearGradient id="ctaBg" x1="0%25" y1="0%25" x2="100%25" y2="100%25"%3E%3Cstop offset="0%25" stop-color="%23ec4899"/%3E%3Cstop offset="100%25" stop-color="%23db2777"/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill="url(%23ctaBg)" width="120" height="80" rx="4"/%3E%3Crect fill="%23fff" opacity="0.95" x="20" y="28" width="80" height="24" rx="12"/%3E%3Crect fill="%23ec4899" x="28" y="36" width="64" height="8" rx="4"/%3E%3Cpath fill="%23fff" d="M84 40 L88 36 L88 44 Z"/%3E%3Crect fill="%23fff" opacity="0.4" x="35" y="60" width="50" height="6" rx="3"/%3E%3C/svg%3E'}],te=[{url:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1200&q=80",label:"ã‚ªãƒ•ã‚£ã‚¹ãƒ¯ãƒ¼ã‚¯"},{url:"https://images.unsplash.com/photo-1565043666747-69f6646db940?w=1200&q=80",label:"ãƒ“ã‚¸ãƒã‚¹ã‚·ãƒ¼ãƒ³"},{url:"https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?w=1200&q=80",label:"æŠ€è¡“è·"},{url:"https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=1200&q=80",label:"ITãƒ»ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼"},{url:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&q=80",label:"å€‰åº«ãƒ»ç‰©æµ"},{url:"https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=1200&q=80",label:"ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"},{url:"https://images.unsplash.com/photo-1567789884554-0b844b597180?w=1200&q=80",label:"é›»å­éƒ¨å“çµ„ç«‹"},{url:"https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=1200&q=80",label:"å»ºè¨­ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©"}];class ie{constructor(){t(this,"handleOutsideClick",e=>{const t=document.getElementById("lp-active-editor");!t||t.contains(e.target)||e.target.closest(".lp-editable")||this.closeInlineEditor()}),this.editedData={},this.currentCompanyDomain=null,this.draggedSection=null,this.isActive=!1,this.presetImages=te,this.selectedSection=null,this.sections=[],this.sidebarCollapsed=!1,this.currentJobId=null,this.currentJobInfo=null,this.lpSettings=null,this.currentDesignPattern="modern",this.currentLayoutStyle="default",this.company=null,this.mainJob=null,this.undoStack=[],this.redoStack=[],this.maxUndoStackSize=50,this.autosaveTimer=null,this.autosaveInterval=3e4,this.hasChanges=!1,this.initialSettings=null,this.keyboardHandler=null,this.saveStateTimer=null}trackChange(){this.markAsChanged(),this.saveStateTimer&&clearTimeout(this.saveStateTimer),this.saveStateTimer=setTimeout(()=>{this.saveState()},500)}enable(e,t,i=null,n=null,s=null){this.isActive=!0,this.currentCompanyDomain=t,this.editedData={},this.sections=e.sections||[],this.lpSettings=e,this.currentJobInfo=i,this.company=n,this.mainJob=s;const l=e.layoutStyle||e.designPattern||"modern";this.currentDesignPattern=l,this.currentLayoutStyle=l;const a=new URLSearchParams(window.location.search);this.currentJobId=a.get("j")||"",document.body.classList.add("lp-edit-mode"),this.initialSettings=JSON.stringify(this.lpSettings),this.hasChanges=!1,this.renderToolbar(),this.renderSidebar(),this.setupEditableElements(),this.setupSectionSortable(),this.setupSectionSelection(),this.addSectionEditButtons(),this.startAutosave(),this.checkDraft(),this.saveState(),this.setupImageHoverPreview()}addSectionEditButtons(){const e=document.querySelector(".lp-points");if(e){const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ ãƒã‚¤ãƒ³ãƒˆã‚’ç·¨é›†ãƒ»è¿½åŠ ",i.addEventListener("click",e=>{e.stopPropagation(),this.openPointsEditor()});(e.querySelector(".lp-section-inner")||e).appendChild(i)}const t=document.querySelector(".lp-faq");if(t){const e=t.querySelector(".lp-section-quick-edit-btn");e&&e.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ FAQã‚’ç·¨é›†ãƒ»è¿½åŠ ",i.addEventListener("click",e=>{e.stopPropagation(),this.openFAQEditor()});(t.querySelector(".lp-section-inner")||t).appendChild(i)}document.querySelectorAll(".lp-carousel").forEach(e=>{const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ ç”»åƒã‚’ç·¨é›†ãƒ»è¿½åŠ ",i.addEventListener("click",t=>{t.stopPropagation(),this.openCarouselEditor(e)});(e.querySelector(".lp-section-inner")||e).appendChild(i)}),document.querySelectorAll(".lp-video").forEach(e=>{const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const i=document.createElement("button");i.type="button",i.className="lp-section-quick-edit-btn",i.innerHTML="âœï¸ å‹•ç”»ã‚’ç·¨é›†",i.addEventListener("click",t=>{t.stopPropagation(),this.openVideoEditor(e)});(e.querySelector(".lp-section-inner")||e).appendChild(i)})}renderSidebar(){var e,t,i,n,s,l,a,o,d,r,c,p,u,v,h,m,b,y,g,f,S,$,x,E,L,q,w,C,T,D;const k=document.createElement("div");k.className="lp-editor-panel",k.id="lp-editor-panel",k.innerHTML=`\n      <div class="lp-editor-header">\n        <div class="lp-editor-header-top">\n          <h2 class="lp-editor-title">LPç·¨é›†</h2>\n          <div class="lp-editor-undo-redo">\n            <button type="button" class="btn-undo" id="btn-lp-undo" title="å…ƒã«æˆ»ã™ (Ctrl+Z)" disabled>â†¶</button>\n            <button type="button" class="btn-redo" id="btn-lp-redo" title="ã‚„ã‚Šç›´ã™ (Ctrl+Y)" disabled>â†·</button>\n          </div>\n        </div>\n        <div class="lp-editor-actions">\n          <div class="preview-mode-toggle" id="lp-preview-mode-toggle">\n            <button type="button" class="btn-preview-mode active" data-mode="pc" title="PCè¡¨ç¤º">\n              ğŸ–¥ï¸\n            </button>\n            <button type="button" class="btn-preview-mode" data-mode="mobile" title="ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º">\n              ğŸ“±\n            </button>\n          </div>\n          \x3c!-- åˆ¥ã‚¿ãƒ–ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ --\x3e\n          <button type="button" class="btn-preview-new-tab" id="btn-lp-preview-new-tab" title="åˆ¥ã‚¿ãƒ–ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">\n            â†—ï¸\n          </button>\n          <button type="button" class="btn-preview-lp" id="btn-preview-lp" title="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">\n            <span>ğŸ‘</span>\n          </button>\n          <button type="button" class="btn-collapse-panel" id="btn-collapse-lp-panel" title="ãƒ‘ãƒãƒ«ã‚’æŠ˜ã‚ŠãŸãŸã‚€">\n            â—€\n          </button>\n          <button type="button" class="btn-close-editor" id="btn-close-lp-editor" title="é–‰ã˜ã‚‹">\n            <span>âœ•</span>\n          </button>\n        </div>\n      </div>\n\n      <div class="lp-editor-body">\n        \x3c!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ --\x3e\n        <div class="lp-editor-tabs">\n          <button type="button" class="lp-editor-tab active" data-tab="design">ãƒ‡ã‚¶ã‚¤ãƒ³</button>\n          <button type="button" class="lp-editor-tab" data-tab="content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>\n          <button type="button" class="lp-editor-tab" data-tab="sections">ã‚»ã‚¯ã‚·ãƒ§ãƒ³</button>\n          <button type="button" class="lp-editor-tab" data-tab="settings">è¨­å®š</button>\n        </div>\n\n        \x3c!-- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¿ãƒ– --\x3e\n        <div class="lp-editor-tab-content active" data-tab-content="design">\n          <div class="editor-section editor-section-collapsible">\n            <div class="editor-section-header-collapsible" data-collapse="template">\n              <h3 class="editor-section-title">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h3>\n              <span class="editor-section-toggle">â–¼</span>\n            </div>\n            <div class="editor-section-body" id="collapse-template">\n              <p class="editor-section-desc">æ¥­ç¨®ã‚„ã‚¤ãƒ¡ãƒ¼ã‚¸ã«åˆã‚ã›ã¦æœ€é©ãªãƒ‡ã‚¶ã‚¤ãƒ³ã‚’é¸ã¹ã¾ã™</p>\n              <div class="layout-style-grid" id="lp-layout-selector">\n                ${this.renderLayoutStyleOptions()}\n              </div>\n            </div>\n          </div>\n\n          <div class="editor-section editor-section-collapsible">\n            <div class="editor-section-header-collapsible" data-collapse="colors">\n              <h3 class="editor-section-title">ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ©ãƒ¼</h3>\n              <span class="editor-section-toggle">â–¼</span>\n            </div>\n            <div class="editor-section-body" id="collapse-colors" style="display: none;">\n              <p class="editor-section-desc">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®è‰²ã‚’èª¿æ•´ã§ãã¾ã™</p>\n              <div class="color-settings-grid">\n                <div class="color-setting-item">\n                  <label class="color-label">\n                    <span class="color-label-text">ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼</span>\n                    <span class="help-icon" data-tooltip="ãƒœã‚¿ãƒ³ã‚„ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã«ä½¿ç”¨ã•ã‚Œã‚‹è‰²">?</span>\n                  </label>\n                  <div class="color-input-group">\n                    <input type="color" id="lp-color-primary" class="color-picker" value="${(null==(e=this.lpSettings)?void 0:e.customPrimary)||"#6366f1"}">\n                    <input type="text" id="lp-color-primary-text" class="color-text" value="${(null==(t=this.lpSettings)?void 0:t.customPrimary)||""}" placeholder="ä¾‹: #6366f1">\n                  </div>\n                </div>\n                <div class="color-setting-item">\n                  <label class="color-label">\n                    <span class="color-label-text">ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼</span>\n                    <span class="help-icon" data-tooltip="è£…é£¾ã‚„å¼·èª¿ã«ä½¿ç”¨ã•ã‚Œã‚‹è‰²">?</span>\n                  </label>\n                  <div class="color-input-group">\n                    <input type="color" id="lp-color-accent" class="color-picker" value="${(null==(i=this.lpSettings)?void 0:i.customAccent)||"#8b5cf6"}">\n                    <input type="text" id="lp-color-accent-text" class="color-text" value="${(null==(n=this.lpSettings)?void 0:n.customAccent)||""}" placeholder="ä¾‹: #8b5cf6">\n                  </div>\n                </div>\n                <div class="color-setting-item">\n                  <label class="color-label">\n                    <span class="color-label-text">èƒŒæ™¯è‰²</span>\n                    <span class="help-icon" data-tooltip="ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®èƒŒæ™¯è‰²">?</span>\n                  </label>\n                  <div class="color-input-group">\n                    <input type="color" id="lp-color-bg" class="color-picker" value="${(null==(s=this.lpSettings)?void 0:s.customBg)||"#f8fafc"}">\n                    <input type="text" id="lp-color-bg-text" class="color-text" value="${(null==(l=this.lpSettings)?void 0:l.customBg)||""}" placeholder="ä¾‹: #f8fafc">\n                  </div>\n                </div>\n                <div class="color-setting-item">\n                  <label class="color-label">\n                    <span class="color-label-text">ãƒ†ã‚­ã‚¹ãƒˆè‰²</span>\n                    <span class="help-icon" data-tooltip="æœ¬æ–‡ãƒ†ã‚­ã‚¹ãƒˆã®è‰²">?</span>\n                  </label>\n                  <div class="color-input-group">\n                    <input type="color" id="lp-color-text" class="color-picker" value="${(null==(a=this.lpSettings)?void 0:a.customText)||"#1f2937"}">\n                    <input type="text" id="lp-color-text-text" class="color-text" value="${(null==(o=this.lpSettings)?void 0:o.customText)||""}" placeholder="ä¾‹: #1f2937">\n                  </div>\n                </div>\n              </div>\n              <button type="button" class="btn-reset-colors" id="lp-reset-colors">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™</button>\n            </div>\n          </div>\n\n          \x3c!-- ãƒã‚¤ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« --\x3e\n          <div class="editor-section editor-section-collapsible">\n            <div class="editor-section-header-collapsible" data-collapse="points-style">\n              <h3 class="editor-section-title">ãƒã‚¤ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n              <span class="editor-section-toggle">â–¼</span>\n            </div>\n            <div class="editor-section-body" id="collapse-points-style" style="display: none;">\n              <p class="editor-section-desc">ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å¾´ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</p>\n              ${this.renderSidebarPointsStyle()}\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ãƒ– --\x3e\n        <div class="lp-editor-tab-content" data-tab-content="content">\n          \x3c!-- ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼è¨­å®š --\x3e\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼</h3>\n            <div class="editor-form-group">\n              <label for="lp-edit-hero-title">ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="lp-edit-hero-title" placeholder="ä¾‹: æœˆå32ä¸‡å††ä»¥ä¸Šå¯ï¼" value="${this.escapeAttr((null==(d=this.lpSettings)?void 0:d.heroTitle)||"")}">\n            </div>\n            <div class="editor-form-group">\n              <label for="lp-edit-hero-subtitle">ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="lp-edit-hero-subtitle" placeholder="ä¾‹: æœªçµŒé¨“æ­“è¿ãƒ»å¯®å®Œå‚™" value="${this.escapeAttr((null==(r=this.lpSettings)?void 0:r.heroSubtitle)||"")}">\n            </div>\n            <div class="editor-form-group">\n              <label>èƒŒæ™¯ç”»åƒ</label>\n              <div class="editor-image-upload-area" id="lp-hero-image-upload-area">\n                ${(null==(c=this.lpSettings)?void 0:c.heroImage)?`<img src="${this.escapeAttr(this.lpSettings.heroImage)}" alt="èƒŒæ™¯ç”»åƒ" class="editor-image-preview">`:'<div class="editor-image-placeholder">\n                      <span class="editor-image-icon">ğŸ“·</span>\n                      <span class="editor-image-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’è¨­å®š</span>\n                    </div>'}\n              </div>\n              <button type="button" class="editor-image-clear-btn" id="lp-hero-image-clear" ${(null==(p=this.lpSettings)?void 0:p.heroImage)?"":'style="display:none"'}>ç”»åƒã‚’ã‚¯ãƒªã‚¢</button>\n            </div>\n          </div>\n\n          \x3c!-- CTAè¨­å®š --\x3e\n          <div class="editor-section">\n            <h3 class="editor-section-title">CTAãƒœã‚¿ãƒ³</h3>\n            <div class="editor-form-group">\n              <label for="lp-edit-cta-text">ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</label>\n              <input type="text" id="lp-edit-cta-text" placeholder="ä»Šã™ãå¿œå‹Ÿã™ã‚‹" value="${this.escapeAttr((null==(u=this.lpSettings)?void 0:u.ctaText)||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹")}">\n            </div>\n          </div>\n\n          \x3c!-- ãƒã‚¤ãƒ³ãƒˆç·¨é›† --\x3e\n          <div class="editor-section">\n            <div class="editor-section-header">\n              <h3 class="editor-section-title">ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å¾´ï¼‰</h3>\n              <span class="editor-section-hint">æœ€å¤§6ã¤ã¾ã§</span>\n            </div>\n            <div class="sidebar-items-list" id="sidebar-points-list">\n              ${this.renderSidebarPoints()}\n            </div>\n          </div>\n\n          \x3c!-- FAQç·¨é›† --\x3e\n          <div class="editor-section">\n            <div class="editor-section-header">\n              <h3 class="editor-section-title">FAQï¼ˆã‚ˆãã‚ã‚‹è³ªå•ï¼‰</h3>\n              <button type="button" class="editor-add-btn" id="sidebar-add-faq">+</button>\n            </div>\n            <div class="sidebar-items-list" id="sidebar-faq-list">\n              ${this.renderSidebarFAQ()}\n            </div>\n          </div>\n\n          \x3c!-- ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç·¨é›† --\x3e\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n            <p class="section-description">ãƒšãƒ¼ã‚¸ã«ç‹¬è‡ªã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™</p>\n            <div class="custom-sections-list" id="sidebar-custom-list">\n              ${this.renderSidebarCustomSections()}\n            </div>\n            <div class="add-section-buttons">\n              <button type="button" class="btn-open-template-selector" id="sidebar-add-custom">+ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ </button>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ãƒ– --\x3e\n        <div class="lp-editor-tab-content" data-tab-content="sections">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§</h3>\n            <p class="editor-section-desc">ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ä¸¦ã³æ›¿ãˆã§ãã¾ã™</p>\n            <div class="lp-sidebar-sections" id="lp-sidebar-sections">\n              ${this.renderSidebarSectionList()}\n            </div>\n            <button type="button" class="lp-btn-add-section" id="lp-btn-add-section">\n              <span class="lp-btn-add-icon">+</span>\n              ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ \n            </button>\n          </div>\n        </div>\n\n        \x3c!-- è¨­å®šã‚¿ãƒ– --\x3e\n        <div class="lp-editor-tab-content" data-tab-content="settings">\n          \x3c!-- å‹•ç”»è¨­å®š --\x3e\n          <div class="editor-section editor-section-collapsible">\n            <div class="editor-section-header-collapsible" data-collapse="video">\n              <h3 class="editor-section-title">å‹•ç”»è¨­å®š</h3>\n              <span class="editor-section-toggle">â–¼</span>\n            </div>\n            <div class="editor-section-body" id="collapse-video">\n              <div class="editor-form-group">\n                <label class="checkbox-label">\n                  <input type="checkbox" id="lp-show-video" ${"true"===(null==(v=this.lpSettings)?void 0:v.showVideoButton)?"checked":""}>\n                  <span>å‹•ç”»ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹</span>\n                </label>\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-video-url">\n                  å‹•ç”»URL\n                </label>\n                <div class="video-url-input-wrapper">\n                  <input type="url" id="lp-video-url" placeholder="https://youtube.com/watch?v=..." value="${this.escapeAttr((null==(h=this.lpSettings)?void 0:h.videoUrl)||"")}">\n                  <button type="button" class="video-url-clear-btn" id="lp-video-url-clear" title="ã‚¯ãƒªã‚¢" ${(null==(m=this.lpSettings)?void 0:m.videoUrl)?"":'style="display:none"'}>Ã—</button>\n                </div>\n                <div class="video-url-validation" id="lp-video-url-validation"></div>\n                <p class="editor-hint video-url-hint">\n                  <span class="video-service-icon">â–¶</span> YouTubeã€Vimeoã€TikTokã€MP4/WebMã«å¯¾å¿œ\n                </p>\n              </div>\n              <div class="video-preview-container" id="lp-video-preview-container">\n                ${(null==(b=this.lpSettings)?void 0:b.videoUrl)?this.generateVideoPreviewCompact(this.lpSettings.videoUrl):""}\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- OGP/SEOè¨­å®š --\x3e\n          <div class="editor-section editor-section-collapsible">\n            <div class="editor-section-header-collapsible" data-collapse="ogp">\n              <h3 class="editor-section-title">OGP/SEO</h3>\n              <span class="editor-section-toggle">â–¼</span>\n            </div>\n            <div class="editor-section-body" id="collapse-ogp" style="display: none;">\n              <p class="editor-section-desc">SNSã‚·ã‚§ã‚¢æ™‚ã®è¡¨ç¤ºã‚’è¨­å®šã—ã¾ã™</p>\n              <div class="editor-form-group">\n                <label for="lp-ogp-title">\n                  OGPã‚¿ã‚¤ãƒˆãƒ«\n                  <span class="help-icon" data-tooltip="SNSã§ã‚·ã‚§ã‚¢ã•ã‚ŒãŸæ™‚ã®ã‚¿ã‚¤ãƒˆãƒ«">?</span>\n                </label>\n                <input type="text" id="lp-ogp-title" placeholder="æ±‚äººã‚¿ã‚¤ãƒˆãƒ« | ä¼šç¤¾å" value="${this.escapeAttr((null==(y=this.lpSettings)?void 0:y.ogpTitle)||"")}">\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-ogp-description">OGPèª¬æ˜æ–‡</label>\n                <textarea id="lp-ogp-description" rows="2" placeholder="æ±‚äººã®é­…åŠ›ã‚’ç°¡æ½”ã«...">${this.escapeAttr((null==(g=this.lpSettings)?void 0:g.ogpDescription)||"")}</textarea>\n              </div>\n              <div class="editor-form-group">\n                <label>OGPç”»åƒ</label>\n                <div class="editor-image-upload-area" id="lp-ogp-image-upload-area">\n                  ${(null==(f=this.lpSettings)?void 0:f.ogpImage)?`<img src="${this.escapeAttr(this.lpSettings.ogpImage)}" alt="OGPç”»åƒ" class="editor-image-preview">`:'<div class="editor-image-placeholder">\n                        <span class="editor-image-icon">ğŸ“·</span>\n                        <span class="editor-image-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’è¨­å®š</span>\n                      </div>'}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°è¨­å®š --\x3e\n          <div class="editor-section editor-section-collapsible">\n            <div class="editor-section-header-collapsible" data-collapse="tracking">\n              <h3 class="editor-section-title">ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</h3>\n              <span class="editor-section-toggle">â–¼</span>\n            </div>\n            <div class="editor-section-body" id="collapse-tracking" style="display: none;">\n              <p class="editor-section-desc">åºƒå‘ŠåŠ¹æœæ¸¬å®šç”¨ã®ãƒ”ã‚¯ã‚»ãƒ«IDã‚’è¨­å®š</p>\n              <div class="editor-form-group">\n                <label for="lp-meta-pixel">\n                  Meta Pixel ID\n                  <span class="help-icon" data-tooltip="Facebook/Instagramåºƒå‘Šç”¨">?</span>\n                </label>\n                <input type="text" id="lp-meta-pixel" placeholder="ä¾‹: 123456789012345" value="${this.escapeAttr((null==(S=this.lpSettings)?void 0:S.metaPixelId)||"")}">\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-tiktok-pixel">TikTok Pixel ID</label>\n                <input type="text" id="lp-tiktok-pixel" placeholder="ä¾‹: ABCDEFG123" value="${this.escapeAttr((null==($=this.lpSettings)?void 0:$.tiktokPixelId)||"")}">\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-google-ads-id">Google Ads ID</label>\n                <input type="text" id="lp-google-ads-id" placeholder="ä¾‹: AW-123456789" value="${this.escapeAttr((null==(x=this.lpSettings)?void 0:x.googleAdsId)||"")}">\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-google-ads-label">Google Ads ãƒ©ãƒ™ãƒ«</label>\n                <input type="text" id="lp-google-ads-label" placeholder="ä¾‹: abCdEfGhIjK" value="${this.escapeAttr((null==(E=this.lpSettings)?void 0:E.googleAdsLabel)||"")}">\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-line-tag">LINE Tag ID</label>\n                <input type="text" id="lp-line-tag" placeholder="ä¾‹: 12345678-abcd-efgh" value="${this.escapeAttr((null==(L=this.lpSettings)?void 0:L.lineTagId)||"")}">\n              </div>\n              <div class="editor-form-group">\n                <label for="lp-clarity">Microsoft Clarity ID</label>\n                <input type="text" id="lp-clarity" placeholder="ä¾‹: abc123def" value="${this.escapeAttr((null==(q=this.lpSettings)?void 0:q.clarityProjectId)||"")}">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="lp-editor-footer">\n        <div class="lp-editor-footer-status">\n          <span class="autosave-indicator-editor" id="lp-autosave-indicator">\n            <span class="autosave-dot"></span>\n            <span class="autosave-text">è‡ªå‹•ä¿å­˜: ã‚ªãƒ³</span>\n          </span>\n        </div>\n        <button type="button" class="btn-save-lp" id="lp-sidebar-save">\n          <span class="btn-save-icon">ğŸ’¾</span>\n          <span class="btn-save-text">ä¿å­˜</span>\n          <span class="shortcut-hint">Ctrl+S</span>\n        </button>\n      </div>\n    `,document.body.appendChild(k),k.querySelectorAll(".lp-editor-tab").forEach(e=>{e.addEventListener("click",()=>this.switchTab(e.dataset.tab))}),k.querySelector("#btn-close-lp-editor").addEventListener("click",()=>{this.closeLPEditor()}),k.querySelector("#btn-preview-lp").addEventListener("click",()=>{this.previewChanges()}),k.querySelectorAll(".btn-preview-mode").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.mode;this.setPreviewMode(t)})}),k.querySelector("#lp-btn-add-section").addEventListener("click",()=>{this.openAddSectionPanel()}),k.querySelector("#lp-sidebar-save").addEventListener("click",()=>this.saveChanges()),null==(w=k.querySelector("#btn-lp-undo"))||w.addEventListener("click",()=>this.undo()),null==(C=k.querySelector("#btn-lp-redo"))||C.addEventListener("click",()=>this.redo()),null==(T=k.querySelector("#btn-collapse-lp-panel"))||T.addEventListener("click",()=>this.togglePanelCollapse()),null==(D=k.querySelector("#btn-lp-preview-new-tab"))||D.addEventListener("click",()=>this.openPreviewInNewTab()),this.setupLayoutStyleEvents(),this.setupContentInputEvents(k),this.applyLayoutStyle(this.currentLayoutStyle),this.applyDesignPattern(this.currentDesignPattern),document.body.classList.add("lp-edit-mode");const I=document.getElementById("lp-content");I&&I.classList.add("lp-content-with-sidebar")}switchTab(e){document.querySelectorAll(".lp-editor-tab").forEach(t=>{t.classList.toggle("active",t.dataset.tab===e)}),document.querySelectorAll(".lp-editor-tab-content").forEach(t=>{t.classList.toggle("active",t.dataset.tabContent===e)})}closeLPEditor(){const e=new URL(window.location.href);e.searchParams.delete("edit"),window.location.href=e.toString()}setPreviewMode(e){document.querySelectorAll("#lp-preview-mode-toggle .btn-preview-mode").forEach(t=>{t.classList.toggle("active",t.dataset.mode===e)}),"mobile"===e?(document.body.classList.add("lp-preview-mode-mobile"),document.body.classList.remove("lp-preview-mode-pc")):(document.body.classList.add("lp-preview-mode-pc"),document.body.classList.remove("lp-preview-mode-mobile"))}escapeAttr(e){return e?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}setupContentInputEvents(e){const t=e.querySelector("#lp-edit-hero-title"),i=e.querySelector("#lp-edit-hero-subtitle");e.querySelector("#lp-edit-hero-image");const n=e.querySelector("#lp-edit-cta-text");t&&t.addEventListener("input",e=>{this.editedData.heroTitle=e.target.value,this.updateHeroPreview(),this.trackChange()}),i&&i.addEventListener("input",e=>{this.editedData.heroSubtitle=e.target.value,this.updateHeroPreview(),this.trackChange()});const s=e.querySelector("#lp-hero-image-upload-area"),l=e.querySelector("#lp-hero-image-clear");s&&(this.updateSidebarHeroImagePreview=t=>{const i=e.querySelector("#lp-hero-image-upload-area"),n=e.querySelector("#lp-hero-image-clear");i&&(t?(i.innerHTML=`<img src="${this.escapeAttr(t)}" alt="èƒŒæ™¯ç”»åƒ" class="editor-image-preview">`,n&&(n.style.display="block")):(i.innerHTML='\n            <div class="editor-image-placeholder">\n              <span class="editor-image-icon">ğŸ“·</span>\n              <span class="editor-image-text">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç”»åƒã‚’è¨­å®š</span>\n            </div>\n          ',n&&(n.style.display="none")))},s.addEventListener("click",()=>{const e=document.querySelector(".lp-hero-bg")||s;this.startImageEditingForSidebar(e,"heroImage","èƒŒæ™¯ç”»åƒ")}),l&&l.addEventListener("click",()=>{this.editedData.heroImage="",this.updateSidebarHeroImagePreview(""),this.updateHeroPreview()})),n&&n.addEventListener("input",e=>{this.editedData.ctaText=e.target.value,this.updateCtaPreview(),this.trackChange()}),this.setupSidebarPointsEvents(e),this.setupSidebarFAQEvents(e),this.setupSidebarCustomEvents(e),this.setupCollapsibleSections(e),this.setupColorSettings(e),this.setupSidebarPointsStyle(e),this.setupVideoSettings(e),this.setupOGPSettings(e),this.setupTrackingSettings(e),this.setupKeyboardShortcuts()}setupCollapsibleSections(e){e.querySelectorAll(".editor-section-header-collapsible").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.collapse,i=document.getElementById(`collapse-${t}`),n=e.querySelector(".editor-section-toggle");if(i){const t="none"!==i.style.display;i.style.display=t?"none":"block",n.textContent=t?"â–¼":"â–²",e.closest(".editor-section-collapsible").classList.toggle("open",!t)}})})}setupColorSettings(e){const t=["primary","accent","bg","text"];t.forEach(t=>{const i=e.querySelector(`#lp-color-${t}`),n=e.querySelector(`#lp-color-${t}-text`);i&&n&&(i.addEventListener("input",e=>{n.value=e.target.value,this.editedData[`custom${t.charAt(0).toUpperCase()+t.slice(1)}`]=e.target.value,this.applyCustomColors(),this.trackChange()}),n.addEventListener("input",e=>{const n=e.target.value;/^#[0-9A-Fa-f]{6}$/.test(n)&&(i.value=n,this.editedData[`custom${t.charAt(0).toUpperCase()+t.slice(1)}`]=n,this.applyCustomColors(),this.trackChange())}))});const i=e.querySelector("#lp-reset-colors");i&&i.addEventListener("click",()=>{t.forEach(t=>{const i=e.querySelector(`#lp-color-${t}`),n=e.querySelector(`#lp-color-${t}-text`);i&&(i.value=""),n&&(n.value=""),this.editedData[`custom${t.charAt(0).toUpperCase()+t.slice(1)}`]=""}),this.applyCustomColors(),this.trackChange(),s("ã‚«ãƒ©ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ","success")})}applyCustomColors(){var e,t,i,n;const s=document.documentElement,l=this.editedData.customPrimary||(null==(e=this.lpSettings)?void 0:e.customPrimary),a=this.editedData.customAccent||(null==(t=this.lpSettings)?void 0:t.customAccent),o=this.editedData.customBg||(null==(i=this.lpSettings)?void 0:i.customBg),d=this.editedData.customText||(null==(n=this.lpSettings)?void 0:n.customText);l&&s.style.setProperty("--lp-primary",l),a&&s.style.setProperty("--lp-accent",a),o&&s.style.setProperty("--lp-bg",o),d&&s.style.setProperty("--lp-text",d)}setupSidebarPointsStyle(e){if(!e.querySelector(".sidebar-points-style"))return;const t=(e,t)=>{const i=this.getPointsLayout();i[e]=t,this.editedData.pointsLayout=JSON.stringify(i),this.updatePointsDisplay(),this.trackChange()},i=(i,n,s=e=>e)=>{const l=e.querySelector(`#${i}`);l&&l.querySelectorAll(".style-btn").forEach(a=>{a.addEventListener("click",()=>{if(l.querySelectorAll(".style-btn").forEach(e=>e.classList.remove("active")),a.classList.add("active"),t(n,s(a.dataset.value)),"sidebar-points-direction"===i){const t=e.querySelector("#sidebar-points-columns-group");t&&(t.style.display="horizontal"===a.dataset.value?"none":"")}})})};i("sidebar-points-direction","direction"),i("sidebar-points-columns","columns",e=>parseInt(e,10)),i("sidebar-points-shadow","cardShadow"),i("sidebar-points-title-size","titleSize"),i("sidebar-points-desc-size","descSize");const n=(i,n,s="px")=>{const l=e.querySelector(`#${i}`);l&&l.addEventListener("input",()=>{const e=parseInt(l.value,10),i=l.closest(".sidebar-style-group").querySelector(".style-value");i&&(i.textContent=e+s),t(n,e)})};n("sidebar-points-radius","cardBorderRadius"),n("sidebar-points-border","cardBorderWidth");const l=(i,n)=>{const s=e.querySelector(`#${i}`);s&&s.addEventListener("input",()=>{const e=s.closest(".sidebar-color-input").querySelector(".color-value");e&&(e.textContent=s.value),t(n,s.value)})};l("sidebar-points-accent","accentColor"),l("sidebar-points-bg","cardBackgroundColor"),l("sidebar-points-title-color","titleColor");const a=e.querySelector("#sidebar-points-reset");a&&a.addEventListener("click",()=>{this.editedData.pointsLayout="",this.updatePointsDisplay(),this.trackChange();const t=e.querySelector("#collapse-points-style");t&&(t.innerHTML=`\n            <p class="editor-section-desc">ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å¾´ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</p>\n            ${this.renderSidebarPointsStyle()}\n          `,this.setupSidebarPointsStyle(e)),s("ãƒã‚¤ãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ","success")})}setupVideoSettings(e){const t=e.querySelector("#lp-show-video"),i=e.querySelector("#lp-video-url"),n=e.querySelector("#lp-video-url-clear"),s=e.querySelector("#lp-video-url-validation"),l=e.querySelector("#lp-video-preview-container");if(t&&t.addEventListener("change",e=>{this.editedData.showVideoButton=e.target.checked?"true":"false",this.trackChange()}),i){let e=null;i.addEventListener("input",t=>{const a=t.target.value.trim();this.editedData.videoUrl=a,this.trackChange(),n&&(n.style.display=a?"flex":"none"),e&&clearTimeout(e),e=setTimeout(()=>{this.updateVideoPreviewAndValidation(a,l,s,i)},300)}),i.value&&this.updateVideoPreviewAndValidation(i.value.trim(),l,s,i)}n&&n.addEventListener("click",()=>{i&&(i.value="",this.editedData.videoUrl="",this.trackChange()),n.style.display="none",l&&(l.innerHTML=""),s&&(s.innerHTML="",s.className="video-url-validation"),i&&i.classList.remove("is-valid","is-invalid")})}updateVideoPreviewAndValidation(e,t,i,n){if(!e)return t&&(t.innerHTML=""),i&&(i.innerHTML="",i.className="video-url-validation"),void(n&&n.classList.remove("is-valid","is-invalid"));const s=this.validateVideoUrl(e);i&&(s.valid?(i.innerHTML='<span class="validation-success">âœ“ æœ‰åŠ¹ãªå‹•ç”»URL</span>',i.className="video-url-validation valid"):(i.innerHTML=`<span class="validation-error">${this.escapeHtml(s.message)}</span>`,i.className="video-url-validation invalid")),n&&(n.classList.toggle("is-valid",s.valid),n.classList.toggle("is-invalid",!s.valid)),t&&(t.innerHTML=s.valid?this.generateVideoPreviewCompact(e):"")}setupOGPSettings(e){const t=e.querySelector("#lp-ogp-title"),i=e.querySelector("#lp-ogp-description"),n=e.querySelector("#lp-ogp-image-upload-area");t&&t.addEventListener("input",e=>{this.editedData.ogpTitle=e.target.value,this.trackChange()}),i&&i.addEventListener("input",e=>{this.editedData.ogpDescription=e.target.value,this.trackChange()}),n&&n.addEventListener("click",()=>{this.startImageEditingForSidebar(n,"ogpImage","OGPç”»åƒ")})}setupTrackingSettings(e){[{id:"lp-meta-pixel",key:"metaPixelId"},{id:"lp-tiktok-pixel",key:"tiktokPixelId"},{id:"lp-google-ads-id",key:"googleAdsId"},{id:"lp-google-ads-label",key:"googleAdsLabel"},{id:"lp-line-tag",key:"lineTagId"},{id:"lp-clarity",key:"clarityProjectId"}].forEach(({id:t,key:i})=>{const n=e.querySelector(`#${t}`);n&&n.addEventListener("input",e=>{this.editedData[i]=e.target.value,this.trackChange()})})}setupKeyboardShortcuts(){this.keyboardHandler=e=>{if(this.isActive&&((e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),this.saveChanges()),!e.ctrlKey&&!e.metaKey||"z"!==e.key||e.shiftKey||(e.preventDefault(),this.undo()),(e.ctrlKey||e.metaKey)&&("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),this.redo()),"Escape"===e.key)){document.getElementById("lp-active-editor")&&this.closeInlineEditor()}},document.addEventListener("keydown",this.keyboardHandler)}saveState(){const e=JSON.stringify(this.editedData);this.undoStack.length>0&&this.undoStack[this.undoStack.length-1]===e||(this.undoStack.push(e),this.undoStack.length>this.maxUndoStackSize&&this.undoStack.shift(),this.redoStack=[],this.updateUndoRedoButtons(),this.markAsChanged())}undo(){if(this.undoStack.length<=1)return;const e=this.undoStack.pop();this.redoStack.push(e);const t=this.undoStack[this.undoStack.length-1];this.editedData=JSON.parse(t),this.updateUndoRedoButtons(),this.refreshPreview(),s("å…ƒã«æˆ»ã—ã¾ã—ãŸ","success")}redo(){if(0===this.redoStack.length)return;const e=this.redoStack.pop();this.undoStack.push(e),this.editedData=JSON.parse(e),this.updateUndoRedoButtons(),this.refreshPreview(),s("ã‚„ã‚Šç›´ã—ã¾ã—ãŸ","success")}updateUndoRedoButtons(){const e=document.getElementById("btn-lp-undo"),t=document.getElementById("btn-lp-redo");e&&(e.disabled=this.undoStack.length<=1),t&&(t.disabled=0===this.redoStack.length)}refreshPreview(){if(void 0!==this.editedData.heroTitle){const e=document.querySelector(".lp-hero-title");e&&(e.textContent=this.editedData.heroTitle)}if(void 0!==this.editedData.heroSubtitle){const e=document.querySelector(".lp-hero-subtitle");e&&(e.textContent=this.editedData.heroSubtitle)}void 0!==this.editedData.ctaText&&document.querySelectorAll(".lp-hero-cta-btn, .lp-apply-btn").forEach(e=>{(e.querySelector("span")||e).textContent=this.editedData.ctaText})}startAutosave(){this.autosaveTimer=setInterval(()=>{this.hasChanges&&this.saveDraft()},this.autosaveInterval)}stopAutosave(){this.autosaveTimer&&(clearInterval(this.autosaveTimer),this.autosaveTimer=null)}saveDraft(){if(!this.currentJobId)return;const e={editedData:this.editedData,timestamp:Date.now()},t=`lp_draft_${this.currentJobId}`;try{localStorage.setItem(t,JSON.stringify(e)),this.updateAutosaveIndicator("saved")}catch(i){if("QuotaExceededError"===i.name){console.warn("[LPEditor] localStorage quota exceeded, clearing old drafts"),this.clearOldDrafts();try{localStorage.setItem(t,JSON.stringify(e)),this.updateAutosaveIndicator("saved")}catch(n){console.error("[LPEditor] Failed to save draft even after cleanup:",n),this.updateAutosaveIndicator("error")}}else console.error("[LPEditor] Failed to save draft:",i),this.updateAutosaveIndicator("error")}}clearOldDrafts(){const e=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);i&&i.startsWith("lp_draft_")&&e.push(i)}e.forEach(e=>localStorage.removeItem(e))}async checkDraft(){if(!this.currentJobId)return;const e=`lp_draft_${this.currentJobId}`,t=localStorage.getItem(e);if(t)try{const i=JSON.parse(t);if(Date.now()-i.timestamp>864e5)return void localStorage.removeItem(e);const n=this.formatTimeAgo(i.timestamp);await a({title:"ä¸‹æ›¸ãã‚’å¾©å…ƒ",message:`${n}ã«ä¿å­˜ã•ã‚ŒãŸä¸‹æ›¸ããŒã‚ã‚Šã¾ã™ã€‚å¾©å…ƒã—ã¾ã™ã‹ï¼Ÿ`,confirmText:"å¾©å…ƒã™ã‚‹",cancelText:"ç ´æ£„ã™ã‚‹"})?(this.editedData=i.editedData||{},this.refreshPreview(),this.saveState(),s("ä¸‹æ›¸ãã‚’å¾©å…ƒã—ã¾ã—ãŸ","success")):localStorage.removeItem(e)}catch(i){console.error("[LPEditor] ä¸‹æ›¸ãã®å¾©å…ƒã«å¤±æ•—:",i),localStorage.removeItem(e)}}clearDraft(){if(!this.currentJobId)return;const e=`lp_draft_${this.currentJobId}`;localStorage.removeItem(e)}updateAutosaveIndicator(e){const t=document.getElementById("lp-autosave-indicator");if(!t)return;const i=t.querySelector(".autosave-text");t.classList.remove("saving","saved"),"saving"===e?(t.classList.add("saving"),i&&(i.textContent="ä¿å­˜ä¸­...")):"saved"===e&&(t.classList.add("saved"),i&&(i.textContent=`ä¿å­˜æ¸ˆã¿ ${this.formatTime(new Date)}`),setTimeout(()=>{t.classList.remove("saved"),i&&(i.textContent="è‡ªå‹•ä¿å­˜: ã‚ªãƒ³")},3e3))}formatTimeAgo(e){const t=Date.now()-e,i=Math.floor(t/6e4),n=Math.floor(i/60);return n>0?`${n}æ™‚é–“å‰`:i>0?`${i}åˆ†å‰`:"æ•°ç§’å‰"}formatTime(e){return e.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"})}togglePanelCollapse(){this.sidebarCollapsed=!this.sidebarCollapsed;const e=document.getElementById("lp-editor-panel"),t=document.getElementById("lp-content"),i=document.getElementById("btn-collapse-lp-panel");e&&e.classList.toggle("collapsed",this.sidebarCollapsed),t&&t.classList.toggle("lp-content-sidebar-collapsed",this.sidebarCollapsed),i&&(i.textContent=this.sidebarCollapsed?"â–¶":"â—€",i.title=this.sidebarCollapsed?"ãƒ‘ãƒãƒ«ã‚’å±•é–‹":"ãƒ‘ãƒãƒ«ã‚’æŠ˜ã‚ŠãŸãŸã‚€")}openPreviewInNewTab(){const e=new URLSearchParams;this.jobId&&e.set("job",this.jobId),this.companyDomain&&e.set("company",this.companyDomain);const t=`${window.location.origin}/lp.html?${e.toString()}`;window.open(t,"_blank")}markAsChanged(){this.hasChanges=Object.keys(this.editedData).length>0,this.updateChangesIndicator()}updateChangesIndicator(){const e=document.getElementById("lp-sidebar-save");if(e)if(this.hasChanges){e.classList.add("has-changes");let t=e.querySelector(".unsaved-badge");t||(t=document.createElement("span"),t.className="unsaved-badge",e.appendChild(t))}else{e.classList.remove("has-changes");const t=e.querySelector(".unsaved-badge");t&&t.remove()}}setupImageHoverPreview(){let e=document.getElementById("lp-image-hover-preview");e||(e=document.createElement("img"),e.id="lp-image-hover-preview",e.className="image-hover-preview",document.body.appendChild(e)),document.querySelectorAll('input[type="url"], input[type="text"]').forEach(t=>{const i=t.value;i&&i.match(/\.(jpg|jpeg|png|gif|webp|svg)/i)&&(t.addEventListener("mouseenter",t=>{const i=t.target.value;i&&i.match(/^https?:\/\//)&&(e.src=i,e.classList.add("visible"),this.positionHoverPreview(t,e))}),t.addEventListener("mouseleave",()=>{e.classList.remove("visible")}),t.addEventListener("mousemove",t=>{e.classList.contains("visible")&&this.positionHoverPreview(t,e)}))})}positionHoverPreview(e,t){let i=e.clientX+20,n=e.clientY+20;const s=t.getBoundingClientRect(),l=window.innerWidth,a=window.innerHeight;i+s.width>l&&(i=e.clientX-s.width-20),n+s.height>a&&(n=e.clientY-s.height-20),t.style.left=`${i}px`,t.style.top=`${n}px`}setupSidebarPointsEvents(e){const t=e.querySelector("#sidebar-points-list");t&&(t.querySelectorAll(".sidebar-item-header").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.toggle.replace("point-",""),i=document.getElementById(`sidebar-point-body-${t}`),n=e.querySelector(".sidebar-item-toggle");if(i){const t="none"!==i.style.display;i.style.display=t?"none":"block",n.textContent=t?"â–¼":"â–²",e.closest(".sidebar-item").classList.toggle("open",!t)}})}),t.querySelectorAll(".sidebar-point-title").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.idx;this.editedData[`pointTitle${t}`]=e.target.value,this.updateSidebarPointHeader(t),this.updatePointsPreview(),this.trackChange()})}),t.querySelectorAll(".sidebar-point-desc").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.idx;this.editedData[`pointDesc${t}`]=e.target.value,this.updatePointsPreview(),this.trackChange()})}),t.querySelectorAll(".sidebar-item-clear").forEach(e=>{e.addEventListener("click",e=>{const i=e.target.dataset.idx,n=t.querySelector(`.sidebar-item[data-point-idx="${i}"]`);n&&(n.querySelector(".sidebar-point-title").value="",n.querySelector(".sidebar-point-desc").value="",this.editedData[`pointTitle${i}`]="",this.editedData[`pointDesc${i}`]="",this.updateSidebarPointHeader(i),this.updatePointsPreview(),this.trackChange())})}))}updateSidebarPointHeader(e){var t,i;const n=document.querySelector(`.sidebar-item[data-point-idx="${e}"]`);if(!n)return;const s=this.editedData[`pointTitle${e}`]??(null==(t=this.lpSettings)?void 0:t[`pointTitle${e}`])??"",l=this.editedData[`pointDesc${e}`]??(null==(i=this.lpSettings)?void 0:i[`pointDesc${e}`])??"",a=s||l,o=n.querySelector(".sidebar-item-title");o&&(o.textContent=a?s||"ï¼ˆã‚¿ã‚¤ãƒˆãƒ«æœªè¨­å®šï¼‰":"æœªè¨­å®š"),n.classList.toggle("has-content",a),n.classList.toggle("empty",!a)}setupSidebarFAQEvents(e){const t=e.querySelector("#sidebar-faq-list"),i=e.querySelector("#sidebar-add-faq");t&&(i&&i.addEventListener("click",()=>this.addSidebarFAQ()),this.bindSidebarFAQItemEvents(t))}setupSidebarCustomEvents(e){const t=e.querySelector("#sidebar-custom-list"),i=e.querySelector("#sidebar-add-custom");t&&(i&&i.addEventListener("click",()=>this.openContentSelectorModal()),this.bindSidebarCustomItemEvents(t))}bindSidebarCustomItemEvents(e){e.querySelectorAll(".sidebar-section-title").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.id;this.updateCustomSectionData(t,"sectionTitle",e.target.value),this.updateSectionTitlePreview(t)})}),e.querySelectorAll(".sidebar-section-url").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.id;this.updateCustomSectionData(t,"videoUrl",e.target.value),this.updateVideoPreview(t)})}),e.querySelectorAll(".sidebar-custom-title").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.id;this.updateCustomSectionData(t,"title",e.target.value),this.updateCustomSectionPreview(t)})}),e.querySelectorAll(".sidebar-custom-content").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.id;this.updateCustomSectionData(t,"content",e.target.value),this.updateCustomSectionPreview(t)})}),e.querySelectorAll(".sidebar-custom-image").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.dataset.id;this.updateCustomSectionData(t,"image",e.target.value),this.updateCustomSectionPreview(t),this.updateCustomImagePreview(e.target)})}),e.querySelectorAll(".btn-move-section").forEach(e=>{e.addEventListener("click",t=>{const i=e.dataset.id,n=e.dataset.direction;this.moveCustomSection(i,n)})}),e.querySelectorAll(".btn-remove-section").forEach(e=>{e.addEventListener("click",t=>{const i=e.dataset.id;this.deleteSidebarCustomSection(i)})})}updateSectionTitlePreview(e){var t;const i=this.sections.find(t=>t.id===e);if(!i)return;const n=document.querySelector(`[data-section-id="${e}"]`);if(!n)return;const s=n.querySelector(".lp-section-title");s&&(s.textContent=(null==(t=i.data)?void 0:t.sectionTitle)||"")}updateVideoPreview(e){var t;const i=this.sections.find(t=>t.id===e);if(!i)return;const n=document.querySelector(`[data-section-id="${e}"]`);if(!n)return;const s=null==(t=i.data)?void 0:t.videoUrl,l=n.querySelector(".lp-video-placeholder");n.querySelector(".lp-video-container"),s&&l&&(l.innerHTML='\n          <div class="lp-video-placeholder-icon">ğŸ¬</div>\n          <p>å‹•ç”»URLè¨­å®šæ¸ˆã¿</p>\n          <p class="lp-placeholder-hint">ä¿å­˜å¾Œã«å‹•ç”»ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>\n        ')}updateCustomImagePreview(e){const t=e.closest(".section-field");if(!t)return;let i=t.querySelector(".section-image-preview");const n=e.value.trim();n?(i||(i=document.createElement("img"),i.className="section-image-preview",i.alt="",e.insertAdjacentElement("beforebegin",i)),i.src=n):i&&i.remove()}moveCustomSection(e,t){const i=["video","carousel","gallery","testimonial","custom"],n=this.sections.filter(e=>i.includes(e.type)),s=n.findIndex(t=>t.id===e);if(-1===s)return;const l="up"===t?s-1:s+1;if(l<0||l>=n.length)return;const a=n[s],o=n[l],d=this.sections.indexOf(a),r=this.sections.indexOf(o);[this.sections[d],this.sections[r]]=[this.sections[r],this.sections[d]];const c=document.querySelector(`[data-section-id="${e}"]`),p=document.querySelector(`[data-section-id="${o.id}"]`);c&&p&&("up"===t?p.insertAdjacentElement("beforebegin",c):p.insertAdjacentElement("afterend",c)),this.refreshSidebarCustomList(),this.updateSidebarList()}updateCustomSectionData(e,t,i){const n=this.sections.find(t=>t.id===e);n&&(n.data||(n.data={}),n.data[t]=i)}openContentSelectorModal(){const e=document.getElementById("lp-content-selector-modal");e&&e.remove();const t=`\n      <div id="lp-content-selector-modal" class="template-modal-overlay">\n        <div class="template-modal">\n          <div class="template-modal-header">\n            <h3>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ ã™ã‚‹</h3>\n            <button type="button" class="template-modal-close">&times;</button>\n          </div>\n          <div class="template-modal-body">\n            <p class="template-modal-description">è¿½åŠ ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>\n            <div class="template-list">\n              ${ee.map(e=>{const t=!Y(e.id,this.sections);return`\n                <div class="template-item ${t?"disabled":""}" data-template-id="${e.id}">\n                  <div class="template-thumbnail">\n                    <img src='${e.thumbnail}' alt="${i(e.name)}">\n                  </div>\n                  <div class="template-info">\n                    <h4 class="template-name">${i(e.name)}ï¼ˆ${i(e.label)}ï¼‰</h4>\n                    <p class="template-description">${i(e.description)}</p>\n                  </div>\n                  <button type="button" class="btn-add-template" data-template-id="${e.id}" ${t?"disabled":""}>${t?"è¿½åŠ æ¸ˆã¿":"è¿½åŠ ã™ã‚‹"}</button>\n                </div>\n              `}).join("")}\n            </div>\n          </div>\n          <div class="template-modal-footer">\n            <button type="button" class="btn-template-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          </div>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",t);const n=document.getElementById("lp-content-selector-modal");n.querySelector(".template-modal-close").addEventListener("click",()=>{n.remove()}),n.querySelector(".btn-template-cancel").addEventListener("click",()=>{n.remove()}),n.addEventListener("click",e=>{e.target===n&&n.remove()}),n.querySelectorAll(".btn-add-template:not([disabled])").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.templateId;this.addNewSection(t),this.refreshSidebarCustomList(),n.remove()})})}addSidebarCustomSection(){this.addNewSection("custom"),this.refreshSidebarCustomList()}deleteSidebarCustomSection(e){const t=this.sections.findIndex(t=>t.id===e);if(-1===t)return;this.sections.splice(t,1);const i=document.querySelector(`[data-section-id="${e}"]`);i&&i.remove(),this.refreshSidebarCustomList(),this.updateSidebarList()}refreshSidebarCustomList(){const e=document.getElementById("sidebar-custom-list");e&&(e.innerHTML=this.renderSidebarCustomSections(),this.bindSidebarCustomItemEvents(e))}updateCustomSectionPreview(e){var t,i,n;const s=this.sections.find(t=>t.id===e);if(!s)return;const l=document.querySelector(`[data-section-id="${e}"]`);if(!l)return;const a=(null==(t=s.data)?void 0:t.title)||"",o=(null==(i=s.data)?void 0:i.content)||"",d=(null==(n=s.data)?void 0:n.image)||"",r=a||o||d,c=l.querySelector(".lp-section-inner");if(!c)return;const p=l.querySelector(".lp-custom-placeholder");r&&p&&p.remove();let u=l.querySelector(".lp-custom-title");a?(u||(u=document.createElement("h2"),u.className="lp-section-title lp-custom-title",c.insertBefore(u,c.firstChild)),u.textContent=a):u&&u.remove();let v=l.querySelector(".lp-custom-image");if(d)if(v){const e=v.querySelector("img");e&&(e.src=d)}else{v=document.createElement("div"),v.className="lp-custom-image",v.innerHTML=`<img src="${this.escapeHtml(d)}" alt="">`;const e=c.querySelector(".lp-custom-title");e?e.insertAdjacentElement("afterend",v):c.insertBefore(v,c.firstChild)}else v&&v.remove();let h=l.querySelector(".lp-custom-text");o?(h||(h=document.createElement("div"),h.className="lp-custom-text",c.appendChild(h)),h.innerHTML=o.replace(/\n/g,"<br>")):h&&h.remove(),r||l.querySelector(".lp-custom-placeholder")||(c.innerHTML+='\n        <div class="lp-custom-placeholder">\n          <div class="lp-custom-placeholder-icon">ğŸ¨</div>\n          <p>ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</p>\n          <p class="lp-placeholder-hint">ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰å†…å®¹ã‚’ç·¨é›†ã§ãã¾ã™</p>\n        </div>\n      '),l.classList.toggle("lp-custom-empty",!r)}bindSidebarFAQItemEvents(e){e.querySelectorAll(".sidebar-item-header").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.toggle.replace("faq-",""),i=document.getElementById(`sidebar-faq-body-${t}`),n=e.querySelector(".sidebar-item-toggle");if(i){const t="none"!==i.style.display;i.style.display=t?"none":"block",n.textContent=t?"â–¼":"â–²",e.closest(".sidebar-item").classList.toggle("open",!t)}})}),e.querySelectorAll(".sidebar-faq-question").forEach(e=>{e.addEventListener("input",e=>{this.updateSidebarFAQData(),this.updateSidebarFAQHeader(e.target.dataset.idx),this.updateFAQPreview()})}),e.querySelectorAll(".sidebar-faq-answer").forEach(e=>{e.addEventListener("input",e=>{this.updateSidebarFAQData(),this.updateFAQPreview()})}),e.querySelectorAll(".sidebar-item-delete").forEach(e=>{e.addEventListener("click",e=>{const t=parseInt(e.target.dataset.idx);this.deleteSidebarFAQ(t)})})}updateSidebarFAQHeader(e){const t=document.querySelector(`.sidebar-item[data-faq-idx="${e}"]`);if(!t)return;const i=t.querySelector(".sidebar-faq-question").value,n=t.querySelector(".sidebar-faq-answer").value,s=i||n,l=t.querySelector(".sidebar-item-title");if(l){const e=i.substring(0,20)+(i.length>20?"...":"");l.textContent=s?e||"ï¼ˆè³ªå•æœªè¨­å®šï¼‰":"æœªè¨­å®š"}t.classList.toggle("has-content",s),t.classList.toggle("empty",!s)}updateSidebarFAQData(){const e=document.getElementById("sidebar-faq-list");if(!e)return;const t=[];e.querySelectorAll(".sidebar-item").forEach(e=>{const i=e.querySelector(".sidebar-faq-question").value.trim(),n=e.querySelector(".sidebar-faq-answer").value.trim();(i||n)&&t.push({question:i,answer:n})}),this.editedData.faq=t.map(e=>`Q:${e.question}|A:${e.answer}`).join("||")}addSidebarFAQ(){const e=document.getElementById("sidebar-faq-list");if(!e)return;const t=e.querySelectorAll(".sidebar-item").length,i=document.createElement("div");i.className="sidebar-item empty",i.dataset.faqIdx=t,i.innerHTML=`\n      <div class="sidebar-item-header" data-toggle="faq-${t}">\n        <span class="sidebar-item-number">Q${t+1}</span>\n        <span class="sidebar-item-title">æœªè¨­å®š</span>\n        <span class="sidebar-item-toggle">â–²</span>\n      </div>\n      <div class="sidebar-item-body" id="sidebar-faq-body-${t}" style="display: block;">\n        <div class="sidebar-item-field">\n          <label>è³ªå•</label>\n          <input type="text" class="sidebar-faq-question" data-idx="${t}" value="" placeholder="ä¾‹: æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ">\n        </div>\n        <div class="sidebar-item-field">\n          <label>å›ç­”</label>\n          <textarea class="sidebar-faq-answer" data-idx="${t}" rows="3" placeholder="ä¾‹: ã¯ã„ã€æœªçµŒé¨“ã®æ–¹ã‚‚å¤§æ­“è¿ã§ã™ã€‚"></textarea>\n        </div>\n        <button type="button" class="sidebar-item-delete" data-idx="${t}">å‰Šé™¤</button>\n      </div>\n    `,e.appendChild(i),i.classList.add("open"),this.bindSidebarFAQItemEvents(e),i.querySelector(".sidebar-faq-question").focus()}deleteSidebarFAQ(e){const t=document.getElementById("sidebar-faq-list");if(!t)return;const i=t.querySelector(`.sidebar-item[data-faq-idx="${e}"]`);i&&(i.remove(),this.reindexSidebarFAQ(),this.updateSidebarFAQData(),this.updateFAQPreview())}reindexSidebarFAQ(){const e=document.getElementById("sidebar-faq-list");e&&e.querySelectorAll(".sidebar-item").forEach((e,t)=>{e.dataset.faqIdx=t,e.querySelector(".sidebar-item-number").textContent=`Q${t+1}`,e.querySelector(".sidebar-item-header").dataset.toggle=`faq-${t}`,e.querySelector(".sidebar-item-body").id=`sidebar-faq-body-${t}`,e.querySelectorAll("[data-idx]").forEach(e=>e.dataset.idx=t)})}updatePointsPreview(){var e,t;const i=document.querySelector(".lp-points");if(i)for(let n=1;n<=6;n++){const s=this.editedData[`pointTitle${n}`]??(null==(e=this.lpSettings)?void 0:e[`pointTitle${n}`])??"",l=this.editedData[`pointDesc${n}`]??(null==(t=this.lpSettings)?void 0:t[`pointDesc${n}`])??"",a=i.querySelector(`.lp-point-card:nth-child(${n})`);if(a){const e=a.querySelector(".lp-point-title"),t=a.querySelector(".lp-point-desc");e&&(e.textContent=s),t&&(t.textContent=l),a.style.display=s||l?"":"none"}}}updateFAQPreview(){var e;const t=document.querySelector(".lp-faq");if(!t)return;const n=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",s=this.parseFAQString(n),l=t.querySelector(".lp-faq-chat-container");l&&(l.innerHTML=s.map((e,t)=>`\n        <div class="lp-faq-chat-pair">\n          <div class="lp-faq-chat-row lp-faq-chat-question">\n            <div class="lp-faq-chat-avatar lp-faq-chat-avatar-support">\n              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>\n            </div>\n            <div class="lp-faq-chat-bubble lp-faq-chat-bubble-support">\n              <span class="lp-faq-chat-text">${i(e.question)}</span>\n            </div>\n          </div>\n          <div class="lp-faq-chat-row lp-faq-chat-answer">\n            <div class="lp-faq-chat-bubble lp-faq-chat-bubble-user">\n              <span class="lp-faq-chat-text">${i(e.answer)}</span>\n            </div>\n            <div class="lp-faq-chat-avatar lp-faq-chat-avatar-user">\n              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\n            </div>\n          </div>\n        </div>\n      `).join(""))}updateHeroPreview(){var e,t,i;const n=document.querySelector(".lp-hero-title"),s=document.querySelector(".lp-hero-subtitle"),l=document.querySelector(".lp-hero-bg");if(n&&void 0!==this.editedData.heroTitle&&(n.textContent=this.editedData.heroTitle||(null==(e=this.lpSettings)?void 0:e.heroTitle)||""),s&&void 0!==this.editedData.heroSubtitle&&(s.textContent=this.editedData.heroSubtitle||(null==(t=this.lpSettings)?void 0:t.heroSubtitle)||""),l&&void 0!==this.editedData.heroImage){const e=this.editedData.heroImage||(null==(i=this.lpSettings)?void 0:i.heroImage);e&&(l.style.backgroundImage=`url('${e}')`)}}updateCtaPreview(){var e;const t=document.querySelectorAll(".lp-btn-apply-hero, .lp-btn-apply-main"),i=this.editedData.ctaText||(null==(e=this.lpSettings)?void 0:e.ctaText)||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹";t.forEach(e=>{const t=Array.from(e.childNodes).find(e=>e.nodeType===Node.TEXT_NODE);t?t.textContent=i:e.insertAdjacentText("beforeend",i)})}renderLayoutStyleOptions(){return X.map(e=>{const t=this.currentLayoutStyle===e.id;return`\n        <label class="template-item ${t?"selected":""}" data-layout="${e.id}">\n          <input type="radio" name="lp-layout" value="${e.id}" ${t?"checked":""}>\n          <div class="template-preview" style="background: ${e.color}"></div>\n          <div class="template-info">\n            <span class="template-name">${e.name}</span>\n            <span class="template-desc">${e.description}</span>\n            <span class="template-industries">${e.industries.join(" / ")}</span>\n          </div>\n        </label>\n      `}).join("")}renderSidebarPoints(){var e,t;const n=[];for(let s=1;s<=6;s++){const l=this.editedData[`pointTitle${s}`]??(null==(e=this.lpSettings)?void 0:e[`pointTitle${s}`])??"",a=this.editedData[`pointDesc${s}`]??(null==(t=this.lpSettings)?void 0:t[`pointDesc${s}`])??"",o=l||a;n.push(`\n        <div class="sidebar-item ${o?"has-content":"empty"}" data-point-idx="${s}">\n          <div class="sidebar-item-header" data-toggle="point-${s}">\n            <span class="sidebar-item-number">${s}</span>\n            <span class="sidebar-item-title">${o?i(l||"ï¼ˆã‚¿ã‚¤ãƒˆãƒ«æœªè¨­å®šï¼‰"):"æœªè¨­å®š"}</span>\n            <span class="sidebar-item-toggle">â–¼</span>\n          </div>\n          <div class="sidebar-item-body" id="sidebar-point-body-${s}" style="display: none;">\n            <div class="sidebar-item-field">\n              <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" class="sidebar-point-title" data-idx="${s}" value="${this.escapeAttr(l)}" placeholder="ä¾‹: å…¥ç¤¾ç‰¹å…¸å……å®Ÿ">\n            </div>\n            <div class="sidebar-item-field">\n              <label>èª¬æ˜</label>\n              <textarea class="sidebar-point-desc" data-idx="${s}" rows="2" placeholder="ä¾‹: ç‰¹å…¸ç·é¡50ä¸‡å††ï¼">${i(a)}</textarea>\n            </div>\n            <button type="button" class="sidebar-item-clear" data-idx="${s}">ã‚¯ãƒªã‚¢</button>\n          </div>\n        </div>\n      `)}return n.join("")}renderSidebarPointsStyle(){const e=this.getPointsLayout();return`\n      <div class="sidebar-points-style">\n        \x3c!-- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ–¹å‘ --\x3e\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</label>\n          <div class="sidebar-style-buttons" id="sidebar-points-direction">\n            <button type="button" class="style-btn ${"vertical"===e.direction?"active":""}" data-value="vertical" title="ç¸¦ä¸¦ã³">\n              <span class="style-btn-icon">â¬‡</span>\n            </button>\n            <button type="button" class="style-btn ${"horizontal"===e.direction?"active":""}" data-value="horizontal" title="æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«">\n              <span class="style-btn-icon">â¡</span>\n            </button>\n          </div>\n        </div>\n\n        \x3c!-- ã‚«ãƒ©ãƒ æ•° --\x3e\n        <div class="sidebar-style-group" id="sidebar-points-columns-group" ${"horizontal"===e.direction?'style="display:none"':""}>\n          <label class="sidebar-style-label">ã‚«ãƒ©ãƒ æ•°</label>\n          <div class="sidebar-style-buttons" id="sidebar-points-columns">\n            <button type="button" class="style-btn ${2===e.columns?"active":""}" data-value="2">2</button>\n            <button type="button" class="style-btn ${3===e.columns?"active":""}" data-value="3">3</button>\n            <button type="button" class="style-btn ${4===e.columns?"active":""}" data-value="4">4</button>\n          </div>\n        </div>\n\n        \x3c!-- ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« --\x3e\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">å½±</label>\n          <div class="sidebar-style-buttons" id="sidebar-points-shadow">\n            <button type="button" class="style-btn ${"none"===e.cardShadow?"active":""}" data-value="none">ãªã—</button>\n            <button type="button" class="style-btn ${"sm"===e.cardShadow?"active":""}" data-value="sm">å°</button>\n            <button type="button" class="style-btn ${"md"===e.cardShadow?"active":""}" data-value="md">ä¸­</button>\n            <button type="button" class="style-btn ${"lg"===e.cardShadow?"active":""}" data-value="lg">å¤§</button>\n          </div>\n        </div>\n\n        \x3c!-- è§’ä¸¸ --\x3e\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">è§’ä¸¸ <span class="style-value">${e.cardBorderRadius}px</span></label>\n          <input type="range" class="sidebar-style-range" id="sidebar-points-radius" min="0" max="32" step="4" value="${e.cardBorderRadius}">\n        </div>\n\n        \x3c!-- æ ç·š --\x3e\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">æ ç·š <span class="style-value">${e.cardBorderWidth}px</span></label>\n          <input type="range" class="sidebar-style-range" id="sidebar-points-border" min="0" max="4" step="1" value="${e.cardBorderWidth}">\n        </div>\n\n        \x3c!-- ã‚«ãƒ©ãƒ¼è¨­å®š --\x3e\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">ã‚¢ã‚¯ã‚»ãƒ³ãƒˆè‰²</label>\n          <div class="sidebar-color-input">\n            <input type="color" id="sidebar-points-accent" value="${e.accentColor}">\n            <span class="color-value">${e.accentColor}</span>\n          </div>\n        </div>\n\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">ã‚«ãƒ¼ãƒ‰èƒŒæ™¯</label>\n          <div class="sidebar-color-input">\n            <input type="color" id="sidebar-points-bg" value="${e.cardBackgroundColor}">\n            <span class="color-value">${e.cardBackgroundColor}</span>\n          </div>\n        </div>\n\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">ã‚¿ã‚¤ãƒˆãƒ«è‰²</label>\n          <div class="sidebar-color-input">\n            <input type="color" id="sidebar-points-title-color" value="${e.titleColor}">\n            <span class="color-value">${e.titleColor}</span>\n          </div>\n        </div>\n\n        \x3c!-- ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚º --\x3e\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">ã‚¿ã‚¤ãƒˆãƒ«ã‚µã‚¤ã‚º</label>\n          <div class="sidebar-style-buttons" id="sidebar-points-title-size">\n            <button type="button" class="style-btn ${"sm"===e.titleSize?"active":""}" data-value="sm">S</button>\n            <button type="button" class="style-btn ${"md"===e.titleSize?"active":""}" data-value="md">M</button>\n            <button type="button" class="style-btn ${"lg"===e.titleSize?"active":""}" data-value="lg">L</button>\n            <button type="button" class="style-btn ${"xl"===e.titleSize?"active":""}" data-value="xl">XL</button>\n          </div>\n        </div>\n\n        <div class="sidebar-style-group">\n          <label class="sidebar-style-label">èª¬æ˜æ–‡ã‚µã‚¤ã‚º</label>\n          <div class="sidebar-style-buttons" id="sidebar-points-desc-size">\n            <button type="button" class="style-btn ${"xs"===e.descSize?"active":""}" data-value="xs">XS</button>\n            <button type="button" class="style-btn ${"sm"===e.descSize?"active":""}" data-value="sm">S</button>\n            <button type="button" class="style-btn ${"md"===e.descSize?"active":""}" data-value="md">M</button>\n            <button type="button" class="style-btn ${"lg"===e.descSize?"active":""}" data-value="lg">L</button>\n          </div>\n        </div>\n\n        \x3c!-- ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ --\x3e\n        <button type="button" class="btn-reset-style" id="sidebar-points-reset">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™</button>\n      </div>\n    `}renderSidebarFAQ(){var e;const t=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",n=this.parseFAQString(t);return 0===n.length&&n.push({question:"",answer:""}),n.map((e,t)=>{const n=e.question||e.answer;return`\n        <div class="sidebar-item ${n?"has-content":"empty"}" data-faq-idx="${t}">\n          <div class="sidebar-item-header" data-toggle="faq-${t}">\n            <span class="sidebar-item-number">Q${t+1}</span>\n            <span class="sidebar-item-title">${n?i(e.question.substring(0,20)||"ï¼ˆè³ªå•æœªè¨­å®šï¼‰")+(e.question.length>20?"...":""):"æœªè¨­å®š"}</span>\n            <span class="sidebar-item-toggle">â–¼</span>\n          </div>\n          <div class="sidebar-item-body" id="sidebar-faq-body-${t}" style="display: none;">\n            <div class="sidebar-item-field">\n              <label>è³ªå•</label>\n              <input type="text" class="sidebar-faq-question" data-idx="${t}" value="${this.escapeAttr(e.question)}" placeholder="ä¾‹: æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ">\n            </div>\n            <div class="sidebar-item-field">\n              <label>å›ç­”</label>\n              <textarea class="sidebar-faq-answer" data-idx="${t}" rows="3" placeholder="ä¾‹: ã¯ã„ã€æœªçµŒé¨“ã®æ–¹ã‚‚å¤§æ­“è¿ã§ã™ã€‚">${i(e.answer)}</textarea>\n            </div>\n            <button type="button" class="sidebar-item-delete" data-idx="${t}">å‰Šé™¤</button>\n          </div>\n        </div>\n      `}).join("")}renderSidebarCustomSections(){const e=["video","carousel","gallery","testimonial","custom"],t=this.sections.filter(t=>e.includes(t.type));return 0===t.length?"":t.map((e,n)=>{const s=ee.find(t=>t.id===e.type),l=s?`${s.name}ï¼ˆ${s.label}ï¼‰`:e.type.toUpperCase(),a=t.length;return`\n        <div class="custom-section-item" data-custom-id="${e.id}" data-type="${e.type}" data-index="${n}">\n          <div class="section-item-header">\n            <span class="section-drag-handle" title="ãƒ‰ãƒ©ãƒƒã‚°ã§ä¸¦ã³æ›¿ãˆ">â˜°</span>\n            <span class="section-type-badge">${i(l)}</span>\n            <div class="section-item-actions">\n              <button type="button" class="btn-move-section" data-direction="up" data-id="${e.id}" ${0===n?"disabled":""} title="ä¸Šã¸ç§»å‹•">â†‘</button>\n              <button type="button" class="btn-move-section" data-direction="down" data-id="${e.id}" ${n===a-1?"disabled":""} title="ä¸‹ã¸ç§»å‹•">â†“</button>\n              <button type="button" class="btn-remove-section" data-id="${e.id}" title="å‰Šé™¤">âœ•</button>\n            </div>\n          </div>\n          <div class="section-item-content">\n            ${this.renderSectionFields(e)}\n          </div>\n        </div>\n      `}).join("")}renderSectionFields(e){var t,n,s,l,a,o,d;switch(e.type){case"video":return`\n          <div class="section-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n            <input type="text" class="section-field-input sidebar-section-title" data-id="${e.id}" value="${this.escapeAttr((null==(t=e.data)?void 0:t.sectionTitle)||"")}" placeholder="ä¾‹: ä¼šç¤¾ç´¹ä»‹å‹•ç”»">\n          </div>\n          <div class="section-field">\n            <label>å‹•ç”»URL</label>\n            <input type="url" class="section-field-input sidebar-section-url" data-id="${e.id}" value="${this.escapeAttr((null==(n=e.data)?void 0:n.videoUrl)||"")}" placeholder="https://youtube.com/watch?v=...">\n          </div>\n        `;case"carousel":case"gallery":return`\n          <div class="section-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n            <input type="text" class="section-field-input sidebar-section-title" data-id="${e.id}" value="${this.escapeAttr((null==(s=e.data)?void 0:s.sectionTitle)||"")}" placeholder="ä¾‹: è·å ´ã®æ§˜å­">\n          </div>\n          <div class="section-field">\n            <p class="section-field-hint">ç”»åƒã¯ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰è¿½åŠ ã§ãã¾ã™</p>\n          </div>\n        `;case"testimonial":return`\n          <div class="section-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n            <input type="text" class="section-field-input sidebar-section-title" data-id="${e.id}" value="${this.escapeAttr((null==(l=e.data)?void 0:l.sectionTitle)||"ç¤¾å“¡ã®å£°")}" placeholder="ä¾‹: ç¤¾å“¡ã®å£°">\n          </div>\n          <div class="section-field">\n            <p class="section-field-hint">ç¤¾å“¡ã®å£°ã¯ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰è¿½åŠ ã§ãã¾ã™</p>\n          </div>\n        `;default:const r=(null==(a=e.data)?void 0:a.title)||"",c=(null==(o=e.data)?void 0:o.content)||"",p=(null==(d=e.data)?void 0:d.image)||"";return`\n          <div class="section-field">\n            <label>è¦‹å‡ºã—</label>\n            <input type="text" class="section-field-input sidebar-custom-title" data-id="${e.id}" value="${this.escapeAttr(r)}" placeholder="ä¾‹: åƒãã‚„ã™ã„ç’°å¢ƒ">\n          </div>\n          <div class="section-field">\n            <label>æœ¬æ–‡</label>\n            <textarea class="section-field-input sidebar-custom-content" data-id="${e.id}" rows="3" placeholder="ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å†…å®¹ã‚’å…¥åŠ›...">${i(c)}</textarea>\n          </div>\n          <div class="section-field">\n            <label>ç”»åƒ</label>\n            ${p?`<img src="${i(p)}" class="section-image-preview" alt="">`:""}\n            <input type="url" class="section-field-input sidebar-custom-image" data-id="${e.id}" value="${this.escapeAttr(p)}" placeholder="ç”»åƒURLï¼ˆhttps://...ï¼‰">\n          </div>\n        `}}setupLayoutStyleEvents(){const e=document.getElementById("lp-layout-selector");e&&e.querySelectorAll(".template-item").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.layout;this.changeLayoutStyle(t)})})}changeLayoutStyle(e){if(!X.find(t=>t.id===e))return;this.currentLayoutStyle=e,this.currentDesignPattern=e,this.editedData.layoutStyle=e,this.editedData.designPattern=e;const t=document.getElementById("lp-layout-selector");t&&(t.innerHTML=this.renderLayoutStyleOptions(),this.setupLayoutStyleEvents());const i=document.getElementById("lp-design-selector");i&&(i.innerHTML=this.renderDesignPatternOptions(),this.setupDesignPatternEvents()),this.applyLayoutStyle(e),this.applyDesignPattern(e),this.rerenderSections()}rerenderSections(){if(!this.company||!this.mainJob)return void console.log("[LPEditor] company/mainJob ãŒãªã„ãŸã‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ã‚¹ã‚­ãƒƒãƒ—");const e=this.getMergedSettings();this.rerenderHeroSection(e),this.updatePointsDisplay(),console.log("[LPEditor] ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã—ãŸ")}rerenderHeroSection(e){const t=document.querySelector(".lp-hero");if(!t)return;const i=r(this.company,this.mainJob,e,this.currentLayoutStyle),n=document.createElement("div");n.innerHTML=i;const s=n.querySelector(".lp-hero");s&&(t.replaceWith(s),this.setupEditableElements(),this.setupSectionSelection())}getMergedSettings(){const e={...this.lpSettings};return Object.keys(this.editedData).forEach(t=>{void 0!==this.editedData[t]&&(e[t]=this.editedData[t])}),e}applyLayoutStyle(e){const t=document.body,i=document.getElementById("lp-content");X.forEach(e=>{t.classList.remove(`lp-layout-${e.id}`),i&&i.classList.remove(`lp-layout-${e.id}`)}),t.classList.add(`lp-layout-${e}`),i&&i.classList.add(`lp-layout-${e}`)}renderDesignPatternOptions(){return K.map(e=>{const t=this.currentDesignPattern===e.id;return`\n        <div class="lp-design-option ${t?"selected":""}"\n             data-pattern="${e.id}"\n             title="${e.description}">\n          <div class="lp-design-option-colors">\n            <span class="lp-design-color" style="background: ${e.colors.primary}"></span>\n            <span class="lp-design-color" style="background: ${e.colors.secondary}"></span>\n            <span class="lp-design-color" style="background: ${e.colors.accent}"></span>\n          </div>\n          <span class="lp-design-option-name">${e.name}</span>\n          ${t?'<span class="lp-design-option-check">âœ“</span>':""}\n        </div>\n      `}).join("")}setupDesignPatternEvents(){const e=document.getElementById("lp-design-selector");e&&e.querySelectorAll(".lp-design-option").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.pattern;this.changeDesignPattern(t)})})}changeDesignPattern(e){if(!K.find(t=>t.id===e))return;this.currentDesignPattern=e,this.currentLayoutStyle=e,this.editedData.designPattern=e,this.editedData.layoutStyle=e;const t=document.getElementById("lp-design-selector");t&&(t.innerHTML=this.renderDesignPatternOptions(),this.setupDesignPatternEvents());const i=document.getElementById("lp-layout-selector");i&&(i.innerHTML=this.renderLayoutStyleOptions(),this.setupLayoutStyleEvents()),this.applyDesignPattern(e),this.applyLayoutStyle(e),this.rerenderSections()}applyDesignPattern(e){const t=document.body,i=document.getElementById("lp-content");K.forEach(e=>{t.classList.remove(`lp-pattern-${e.id}`),i&&i.classList.remove(`lp-pattern-${e.id}`)}),t.classList.add(`lp-pattern-${e}`),i&&i.classList.add(`lp-pattern-${e}`)}renderSidebarSectionList(){const e=document.getElementById("lp-content");if(!e)return'<p class="lp-sidebar-empty">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“</p>';const t=e.querySelectorAll("section");return 0===t.length?'<p class="lp-sidebar-empty">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“</p>':Array.from(t).map((e,t)=>{const i=e.dataset.sectionId||`section-${t}`,n=this.detectSectionType(e),s=J[n]||{name:"ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ“„"};return`\n        <div class="lp-sidebar-section-item ${this.selectedSection===e?"selected":""}"\n             data-section-id="${i}"\n             data-section-type="${n}">\n          <span class="lp-sidebar-section-handle">â‹®â‹®</span>\n          <span class="lp-sidebar-section-icon">${s.icon}</span>\n          <span class="lp-sidebar-section-name">${s.name}</span>\n          <div class="lp-sidebar-section-actions">\n            <button type="button" class="lp-sidebar-section-btn lp-btn-visibility" title="è¡¨ç¤º/éè¡¨ç¤º">\n              ğŸ‘ï¸\n            </button>\n          </div>\n        </div>\n      `}).join("")}updateSidebarList(){const e=document.getElementById("lp-sidebar-sections");e&&(e.innerHTML=this.renderSidebarSectionList(),this.setupSidebarSectionEvents())}setupSidebarSectionEvents(){const e=document.getElementById("lp-sidebar-sections");e&&e.querySelectorAll(".lp-sidebar-section-item").forEach(e=>{e.addEventListener("click",t=>{if(t.target.closest(".lp-sidebar-section-actions"))return;const i=e.dataset.sectionId;this.selectSectionById(i)})})}toggleSidebar(){const e=document.getElementById("lp-editor-panel"),t=document.getElementById("lp-content");e&&(this.sidebarCollapsed=!this.sidebarCollapsed,e.classList.toggle("collapsed",this.sidebarCollapsed)),t&&t.classList.toggle("lp-content-sidebar-collapsed",this.sidebarCollapsed)}openAddSectionPanel(){this.closeAddSectionPanel();const e=`\n      <div id="lp-add-section-modal" class="template-modal-overlay">\n        <div class="template-modal">\n          <div class="template-modal-header">\n            <h3>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ ã™ã‚‹</h3>\n            <button type="button" class="template-modal-close">&times;</button>\n          </div>\n          <div class="template-modal-body">\n            <p class="template-modal-description">è¿½åŠ ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>\n            <div class="template-list">\n              ${ee.map(e=>{const t=!Y(e.id,this.sections);return`\n                <div class="template-item ${t?"disabled":""}" data-template-id="${e.id}">\n                  <div class="template-thumbnail">\n                    <img src='${e.thumbnail}' alt="${i(e.name)}">\n                  </div>\n                  <div class="template-info">\n                    <h4 class="template-name">${i(e.name)}ï¼ˆ${i(e.label)}ï¼‰</h4>\n                    <p class="template-description">${i(e.description)}</p>\n                  </div>\n                  <button type="button" class="btn-add-template" data-template-id="${e.id}" ${t?"disabled":""}>${t?"è¿½åŠ æ¸ˆã¿":"è¿½åŠ ã™ã‚‹"}</button>\n                </div>\n              `}).join("")}\n            </div>\n          </div>\n          <div class="template-modal-footer">\n            <button type="button" class="btn-template-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          </div>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",e);const t=document.getElementById("lp-add-section-modal");t.querySelector(".template-modal-close").addEventListener("click",()=>{this.closeAddSectionPanel()}),t.querySelector(".btn-template-cancel").addEventListener("click",()=>{this.closeAddSectionPanel()}),t.addEventListener("click",e=>{e.target===t&&this.closeAddSectionPanel()}),t.querySelectorAll(".btn-add-template:not([disabled])").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.templateId;this.addNewSection(t),this.closeAddSectionPanel()})})}closeAddSectionPanel(){const e=document.getElementById("lp-add-section-modal");e&&e.remove()}addNewSection(e){const t=J[e];if(!t)return;const i={id:`${e}-${Date.now()}`,type:e,order:this.sections.length,visible:!0,data:JSON.parse(JSON.stringify(t.defaultData)),layout:JSON.parse(JSON.stringify(t.defaultLayout))};this.sections.push(i);const n=this.renderNewSection(i);if(n){const s=document.getElementById("lp-content");if(s){const a=s.querySelector(".lp-apply");a?a.insertAdjacentHTML("beforebegin",n):s.insertAdjacentHTML("beforeend",n),this.editedData.addedSections=this.editedData.addedSections||[],this.editedData.addedSections.push(i),this.setupSectionSortable(),this.setupSectionSelection(),this.updateSidebarList(),"carousel"===e&&l(()=>Promise.resolve().then(()=>O),void 0).then(e=>{e.initCarousels&&e.initCarousels()}),this.showSuccessMessage(`ã€Œ${t.name}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¾ã—ãŸ`)}}}renderNewSection(e){var t;switch(e.type){case"carousel":return this.renderCarouselSectionHtml(e);case"video":return this.renderVideoSectionHtml(e);case"gallery":return this.renderGallerySectionHtml(e);case"custom":return this.renderCustomSectionHtml(e);default:return s(`ã€Œ${(null==(t=J[e.type])?void 0:t.name)||e.type}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ç®¡ç†ç”»é¢ã‹ã‚‰è¿½åŠ ã—ã¦ãã ã•ã„ã€‚`,"info"),null}}renderCarouselSectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.sectionTitle)||"";return`\n      <section class="lp-carousel lp-carousel-empty lp-sortable-section" data-section-id="${e.id}" data-section="carousel">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«</span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-carousel-placeholder">\n            <div class="lp-carousel-placeholder-icon">ğŸ </div>\n            <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰ç”»åƒã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}renderVideoSectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.sectionTitle)||"";return`\n      <section class="lp-video lp-video-empty lp-sortable-section" data-section-id="${e.id}" data-section="video">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">å‹•ç”»</span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-video-placeholder">\n            <div class="lp-video-placeholder-icon">ğŸ¬</div>\n            <p>å‹•ç”»URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰å‹•ç”»URLã‚’è¨­å®šã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}renderGallerySectionHtml(e){var t;const i=(null==(t=e.data)?void 0:t.sectionTitle)||"";return`\n      <section class="lp-gallery lp-gallery-empty lp-sortable-section" data-section-id="${e.id}" data-section="gallery">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼</span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${i?`<h2 class="lp-section-title">${this.escapeHtml(i)}</h2>`:""}\n          <div class="lp-gallery-placeholder">\n            <div class="lp-gallery-placeholder-icon">ğŸ–¼ï¸</div>\n            <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            <p class="lp-placeholder-hint">ä¿å­˜å¾Œã€ç®¡ç†ç”»é¢ã‹ã‚‰ç”»åƒã‚’è¿½åŠ ã—ã¦ãã ã•ã„</p>\n          </div>\n        </div>\n      </section>\n    `}renderCustomSectionHtml(e){var t,i,n;const s=(null==(t=e.data)?void 0:t.title)||"",l=(null==(i=e.data)?void 0:i.content)||"",a=(null==(n=e.data)?void 0:n.image)||"",o=s||l||a,d=a?`\n      <div class="lp-custom-image">\n        <img src="${this.escapeHtml(a)}" alt="${this.escapeHtml(s)}">\n      </div>\n    `:"",r=l?`\n      <div class="lp-custom-text">${l.replace(/\n/g,"<br>")}</div>\n    `:"",c=o?"":'\n      <div class="lp-custom-placeholder">\n        <div class="lp-custom-placeholder-icon">ğŸ¨</div>\n        <p>ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</p>\n        <p class="lp-placeholder-hint">ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰å†…å®¹ã‚’ç·¨é›†ã§ãã¾ã™</p>\n      </div>\n    ';return`\n      <section class="lp-custom ${o?"":"lp-custom-empty"} lp-sortable-section" data-section-id="${e.id}" data-section="custom">\n        <div class="lp-section-drag-handle">\n          <span class="lp-section-label">ã‚«ã‚¹ã‚¿ãƒ </span>\n          <span class="lp-section-drag-icon">â‹®â‹®</span>\n        </div>\n        <div class="lp-section-inner">\n          ${s?`<h2 class="lp-section-title lp-custom-title">${this.escapeHtml(s)}</h2>`:""}\n          ${d}\n          ${r}\n          ${c}\n        </div>\n      </section>\n    `}escapeHtml(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}setupSectionSelection(){const e=document.getElementById("lp-content");e&&(e.querySelectorAll("section").forEach((e,t)=>{e.dataset.sectionId=e.dataset.sectionId||`section-${t}`,e.addEventListener("click",t=>{t.target.closest(".lp-editable, .lp-editable-image, .lp-section-action-menu, .lp-inline-editor")||this.selectSection(e)})}),this.setupSidebarSectionEvents())}selectSection(e){if(document.querySelectorAll("section.lp-section-selected").forEach(e=>{e.classList.remove("lp-section-selected")}),document.querySelectorAll(".lp-sidebar-section-item.selected").forEach(e=>{e.classList.remove("selected")}),this.removeFloatingMenu(),e===this.selectedSection)return void(this.selectedSection=null);this.selectedSection=e,e.classList.add("lp-section-selected");const t=e.dataset.sectionId,i=document.querySelector(`.lp-sidebar-section-item[data-section-id="${t}"]`);i&&i.classList.add("selected"),this.showFloatingMenu(e),e.scrollIntoView({behavior:"smooth",block:"center"})}selectSectionById(e){const t=document.querySelector(`section[data-section-id="${e}"]`);t&&this.selectSection(t)}showFloatingMenu(e){var t,i,n,s,l;this.removeFloatingMenu();const a=this.detectSectionType(e),o=J[a]||{required:!1},d=document.createElement("div");d.className="lp-section-action-menu",d.id="lp-section-action-menu",d.innerHTML=`\n      <button type="button" class="lp-action-btn lp-action-edit" title="ç·¨é›†">\n        âœï¸\n      </button>\n      <button type="button" class="lp-action-btn lp-action-move-up" title="ä¸Šã«ç§»å‹•">\n        â¬†ï¸\n      </button>\n      <button type="button" class="lp-action-btn lp-action-move-down" title="ä¸‹ã«ç§»å‹•">\n        â¬‡ï¸\n      </button>\n      ${o.required?"":'\n        <button type="button" class="lp-action-btn lp-action-duplicate" title="è¤‡è£½">\n          ğŸ“‹\n        </button>\n        <button type="button" class="lp-action-btn lp-action-delete" title="å‰Šé™¤">\n          ğŸ—‘ï¸\n        </button>\n      '}\n    `,e.appendChild(d),null==(t=d.querySelector(".lp-action-edit"))||t.addEventListener("click",t=>{t.stopPropagation(),this.editSection(e)}),null==(i=d.querySelector(".lp-action-move-up"))||i.addEventListener("click",t=>{t.stopPropagation(),this.moveSectionUp(e)}),null==(n=d.querySelector(".lp-action-move-down"))||n.addEventListener("click",t=>{t.stopPropagation(),this.moveSectionDown(e)}),null==(s=d.querySelector(".lp-action-duplicate"))||s.addEventListener("click",t=>{t.stopPropagation(),this.duplicateSection(e)}),null==(l=d.querySelector(".lp-action-delete"))||l.addEventListener("click",t=>{t.stopPropagation(),this.deleteSection(e)})}removeFloatingMenu(){const e=document.getElementById("lp-section-action-menu");e&&e.remove()}editSection(e){const t=this.detectSectionType(e);"points"!==t?"faq"!==t?"carousel"!==t?"video"!==t?s(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`,"info"):this.openVideoEditor(e):this.openCarouselEditor(e):this.openFAQEditor():this.openPointsEditor()}openPointsEditor(){var e,t;this.closePointsEditor();const i=[];for(let l=1;l<=6;l++){const n=this.editedData[`pointTitle${l}`]??(null==(e=this.lpSettings)?void 0:e[`pointTitle${l}`])??"",s=this.editedData[`pointDesc${l}`]??(null==(t=this.lpSettings)?void 0:t[`pointDesc${l}`])??"";i.push({idx:l,title:n,desc:s})}const n=this.getPointsLayout(),s=document.createElement("div");s.className="lp-points-editor-overlay",s.id="lp-points-editor",s.innerHTML=`\n      <div class="lp-points-editor lp-points-editor--with-tabs">\n        <div class="lp-points-editor-header">\n          <h3>ãƒã‚¤ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-points-editor-close">&times;</button>\n        </div>\n\n        \x3c!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ --\x3e\n        <div class="lp-points-editor-tabs">\n          <button type="button" class="lp-points-editor-tab active" data-tab="content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>\n          <button type="button" class="lp-points-editor-tab" data-tab="style">ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š</button>\n        </div>\n\n        <div class="lp-points-editor-body">\n          \x3c!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ãƒ– --\x3e\n          <div class="lp-points-editor-tab-content active" data-tab-content="content">\n            <p class="lp-points-editor-hint">æœ€å¤§6ã¤ã®ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã§ãã¾ã™ã€‚ç©ºã®ãƒã‚¤ãƒ³ãƒˆã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>\n            <div class="lp-points-editor-list" id="lp-points-editor-list">\n              ${i.map(e=>this.renderPointEditorItem(e)).join("")}\n            </div>\n          </div>\n\n          \x3c!-- ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®šã‚¿ãƒ– --\x3e\n          <div class="lp-points-editor-tab-content" data-tab-content="style">\n            ${this.renderPointsStyleSettings(n)}\n          </div>\n        </div>\n\n        <div class="lp-points-editor-footer">\n          <button type="button" class="lp-points-editor-btn lp-points-editor-btn-secondary" id="lp-points-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-points-editor-btn lp-points-editor-btn-primary" id="lp-points-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(s),s.querySelectorAll(".lp-points-editor-tab").forEach(e=>{e.addEventListener("click",()=>{var t;const i=e.dataset.tab;s.querySelectorAll(".lp-points-editor-tab").forEach(e=>e.classList.remove("active")),s.querySelectorAll(".lp-points-editor-tab-content").forEach(e=>e.classList.remove("active")),e.classList.add("active"),null==(t=s.querySelector(`[data-tab-content="${i}"]`))||t.classList.add("active")})}),s.querySelector(".lp-points-editor-close").addEventListener("click",()=>this.closePointsEditor()),s.querySelector("#lp-points-editor-cancel").addEventListener("click",()=>this.closePointsEditor()),s.querySelector("#lp-points-editor-apply").addEventListener("click",()=>this.applyPointsChanges()),s.addEventListener("click",e=>{e.target===s&&this.closePointsEditor()}),s.querySelectorAll(".lp-point-editor-clear").forEach(e=>{e.addEventListener("click",t=>{const i=e.dataset.idx,n=s.querySelector(`.lp-point-editor-item[data-idx="${i}"]`);n&&(n.querySelector(".lp-point-editor-title").value="",n.querySelector(".lp-point-editor-desc").value="")})}),this.setupPointsStyleEvents(s)}getPointsLayout(){var e;const t={direction:"vertical",columns:3,gap:24,padding:32,cardBorderRadius:16,cardBackgroundColor:"#ffffff",cardBorderWidth:1,cardBorderColor:"#e5e7eb",cardShadow:"md",sectionTitleSize:"lg",titleColor:"#1f2937",titleSize:"md",descSize:"sm",titleAlign:"left",accentColor:"#6366f1"};if(this.editedData.pointsLayout)try{const e="string"==typeof this.editedData.pointsLayout?JSON.parse(this.editedData.pointsLayout):this.editedData.pointsLayout;return{...t,...e}}catch(i){console.error("editedData.pointsLayout parse error:",i)}if(null==(e=this.lpSettings)?void 0:e.pointsLayout)try{const e="string"==typeof this.lpSettings.pointsLayout?JSON.parse(this.lpSettings.pointsLayout):this.lpSettings.pointsLayout;return{...t,...e}}catch(i){console.error("pointsLayout parse error:",i)}return t}renderPointsStyleSettings(e){return`\n      <div class="points-style-settings">\n        \x3c!-- ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --\x3e\n        <div class="style-section">\n          <h4 class="style-section-title">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</h4>\n\n          <div class="style-field">\n            <label>æ–¹å‘</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${"vertical"===e.direction?"active":""}" data-field="direction" data-value="vertical">ç¸¦ä¸¦ã³</button>\n              <button type="button" class="style-btn ${"horizontal"===e.direction?"active":""}" data-field="direction" data-value="horizontal">æ¨ªä¸¦ã³</button>\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>åˆ—æ•°</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${2===e.columns?"active":""}" data-field="columns" data-value="2">2åˆ—</button>\n              <button type="button" class="style-btn ${3===e.columns?"active":""}" data-field="columns" data-value="3">3åˆ—</button>\n              <button type="button" class="style-btn ${4===e.columns?"active":""}" data-field="columns" data-value="4">4åˆ—</button>\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>é–“éš” <span class="style-value" id="gap-value">${e.gap}px</span></label>\n            <input type="range" class="style-slider" data-field="gap" min="8" max="48" step="4" value="${e.gap}">\n          </div>\n\n          <div class="style-field">\n            <label>å†…ä½™ç™½ <span class="style-value" id="padding-value">${e.padding}px</span></label>\n            <input type="range" class="style-slider" data-field="padding" min="16" max="64" step="8" value="${e.padding}">\n          </div>\n        </div>\n\n        \x3c!-- ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ« --\x3e\n        <div class="style-section">\n          <h4 class="style-section-title">ã‚«ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«</h4>\n\n          <div class="style-field">\n            <label>è§’ä¸¸ <span class="style-value" id="cardBorderRadius-value">${e.cardBorderRadius}px</span></label>\n            <input type="range" class="style-slider" data-field="cardBorderRadius" min="0" max="32" step="4" value="${e.cardBorderRadius}">\n          </div>\n\n          <div class="style-field">\n            <label>èƒŒæ™¯è‰²</label>\n            <div class="style-color-input">\n              <input type="color" class="style-color" data-field="cardBackgroundColor" value="${e.cardBackgroundColor}">\n              <input type="text" class="style-color-text" data-field="cardBackgroundColor" value="${e.cardBackgroundColor}" pattern="^#[0-9A-Fa-f]{6}$">\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>æ ç·š <span class="style-value" id="cardBorderWidth-value">${e.cardBorderWidth}px</span></label>\n            <div class="style-border-row">\n              <input type="range" class="style-slider style-slider-sm" data-field="cardBorderWidth" min="0" max="4" step="1" value="${e.cardBorderWidth}">\n              <input type="color" class="style-color style-color-sm" data-field="cardBorderColor" value="${e.cardBorderColor}">\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>å½±</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${"none"===e.cardShadow?"active":""}" data-field="cardShadow" data-value="none">ãªã—</button>\n              <button type="button" class="style-btn ${"sm"===e.cardShadow?"active":""}" data-field="cardShadow" data-value="sm">å°</button>\n              <button type="button" class="style-btn ${"md"===e.cardShadow?"active":""}" data-field="cardShadow" data-value="md">ä¸­</button>\n              <button type="button" class="style-btn ${"lg"===e.cardShadow?"active":""}" data-field="cardShadow" data-value="lg">å¤§</button>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ« --\x3e\n        <div class="style-section">\n          <h4 class="style-section-title">ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</h4>\n\n          <div class="style-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¦‹å‡ºã—ã‚µã‚¤ã‚º</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${"sm"===e.sectionTitleSize?"active":""}" data-field="sectionTitleSize" data-value="sm">å°</button>\n              <button type="button" class="style-btn ${"md"===e.sectionTitleSize?"active":""}" data-field="sectionTitleSize" data-value="md">ä¸­</button>\n              <button type="button" class="style-btn ${"lg"===e.sectionTitleSize?"active":""}" data-field="sectionTitleSize" data-value="lg">å¤§</button>\n              <button type="button" class="style-btn ${"xl"===e.sectionTitleSize?"active":""}" data-field="sectionTitleSize" data-value="xl">ç‰¹å¤§</button>\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«è‰²</label>\n            <div class="style-color-input">\n              <input type="color" class="style-color" data-field="titleColor" value="${e.titleColor}">\n              <input type="text" class="style-color-text" data-field="titleColor" value="${e.titleColor}" pattern="^#[0-9A-Fa-f]{6}$">\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>ã‚«ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ã‚µã‚¤ã‚º</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${"sm"===e.titleSize?"active":""}" data-field="titleSize" data-value="sm">å°</button>\n              <button type="button" class="style-btn ${"md"===e.titleSize?"active":""}" data-field="titleSize" data-value="md">ä¸­</button>\n              <button type="button" class="style-btn ${"lg"===e.titleSize?"active":""}" data-field="titleSize" data-value="lg">å¤§</button>\n              <button type="button" class="style-btn ${"xl"===e.titleSize?"active":""}" data-field="titleSize" data-value="xl">ç‰¹å¤§</button>\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>èª¬æ˜æ–‡ã‚µã‚¤ã‚º</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${"xs"===e.descSize?"active":""}" data-field="descSize" data-value="xs">æ¥µå°</button>\n              <button type="button" class="style-btn ${"sm"===e.descSize?"active":""}" data-field="descSize" data-value="sm">å°</button>\n              <button type="button" class="style-btn ${"md"===e.descSize?"active":""}" data-field="descSize" data-value="md">ä¸­</button>\n              <button type="button" class="style-btn ${"lg"===e.descSize?"active":""}" data-field="descSize" data-value="lg">å¤§</button>\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>é…ç½®</label>\n            <div class="style-button-group">\n              <button type="button" class="style-btn ${"left"===e.titleAlign?"active":""}" data-field="titleAlign" data-value="left">å·¦æƒãˆ</button>\n              <button type="button" class="style-btn ${"center"===e.titleAlign?"active":""}" data-field="titleAlign" data-value="center">ä¸­å¤®</button>\n            </div>\n          </div>\n\n          <div class="style-field">\n            <label>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼</label>\n            <div class="style-color-input">\n              <input type="color" class="style-color" data-field="accentColor" value="${e.accentColor}">\n              <input type="text" class="style-color-text" data-field="accentColor" value="${e.accentColor}" pattern="^#[0-9A-Fa-f]{6}$">\n            </div>\n          </div>\n        </div>\n      </div>\n    `}setupPointsStyleEvents(e){e.querySelectorAll(".style-btn[data-field]").forEach(t=>{t.addEventListener("click",()=>{const i=t.dataset.field;let n=t.dataset.value;"columns"===i&&(n=parseInt(n,10)),e.querySelectorAll(`.style-btn[data-field="${i}"]`).forEach(e=>e.classList.remove("active")),t.classList.add("active"),this._tempPointsLayout||(this._tempPointsLayout=this.getPointsLayout()),this._tempPointsLayout[i]=n})}),e.querySelectorAll(".style-slider[data-field]").forEach(t=>{t.addEventListener("input",()=>{const i=t.dataset.field,n=parseInt(t.value,10),s=e.querySelector(`#${i}-value`);s&&(s.textContent=`${n}px`),this._tempPointsLayout||(this._tempPointsLayout=this.getPointsLayout()),this._tempPointsLayout[i]=n})}),e.querySelectorAll(".style-color[data-field]").forEach(t=>{t.addEventListener("input",()=>{const i=t.dataset.field,n=t.value,s=e.querySelector(`.style-color-text[data-field="${i}"]`);s&&(s.value=n),this._tempPointsLayout||(this._tempPointsLayout=this.getPointsLayout()),this._tempPointsLayout[i]=n})}),e.querySelectorAll(".style-color-text[data-field]").forEach(t=>{t.addEventListener("change",()=>{const i=t.dataset.field;let n=t.value.trim();if(n&&!n.startsWith("#")&&(n="#"+n),/^#[0-9A-Fa-f]{6}$/.test(n)){const t=e.querySelector(`.style-color[data-field="${i}"]`);t&&(t.value=n),this._tempPointsLayout||(this._tempPointsLayout=this.getPointsLayout()),this._tempPointsLayout[i]=n}})})}renderPointEditorItem(e){return`\n      <div class="lp-point-editor-item ${e.title||e.desc?"has-content":""}" data-idx="${e.idx}">\n        <div class="lp-point-editor-header">\n          <span class="lp-point-editor-number">ãƒã‚¤ãƒ³ãƒˆ ${e.idx}</span>\n          <button type="button" class="lp-point-editor-clear" data-idx="${e.idx}" title="ã‚¯ãƒªã‚¢">\n            <span>ã‚¯ãƒªã‚¢</span>\n          </button>\n        </div>\n        <div class="lp-point-editor-fields">\n          <div class="lp-point-editor-field">\n            <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n            <input type="text" class="lp-point-editor-title" value="${i(e.title)}" placeholder="ä¾‹: å…¥ç¤¾ç‰¹å…¸å……å®Ÿ">\n          </div>\n          <div class="lp-point-editor-field">\n            <label>èª¬æ˜</label>\n            <textarea class="lp-point-editor-desc" rows="2" placeholder="ä¾‹: ç‰¹å…¸ç·é¡50ä¸‡å††ï¼å…¥ç¤¾ç¥ã„é‡‘ã‚„ãã®ä»–ç‰¹å…¸ãŒå……å®Ÿã€‚">${i(e.desc)}</textarea>\n          </div>\n        </div>\n      </div>\n    `}closePointsEditor(){const e=document.getElementById("lp-points-editor");e&&e.remove()}openFAQEditor(){var e;this.closeFAQEditor();const t=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",i=this.parseFAQString(t);0===i.length&&i.push({question:"",answer:""});const n=document.createElement("div");n.className="lp-faq-editor-overlay",n.id="lp-faq-editor",n.innerHTML=`\n      <div class="lp-faq-editor">\n        <div class="lp-faq-editor-header">\n          <h3>FAQã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-faq-editor-close">&times;</button>\n        </div>\n        <div class="lp-faq-editor-body">\n          <p class="lp-faq-editor-hint">ã‚ˆãã‚ã‚‹è³ªå•ã¨å›ç­”ã‚’è¿½åŠ ãƒ»ç·¨é›†ã§ãã¾ã™ã€‚ç©ºã®é …ç›®ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>\n          <div class="lp-faq-editor-list" id="lp-faq-editor-list">\n            ${i.map((e,t)=>this.renderFAQEditorItem(e,t)).join("")}\n          </div>\n          <button type="button" class="lp-faq-editor-add-btn" id="lp-faq-editor-add">\n            + è³ªå•ã‚’è¿½åŠ \n          </button>\n        </div>\n        <div class="lp-faq-editor-footer">\n          <button type="button" class="lp-faq-editor-btn lp-faq-editor-btn-secondary" id="lp-faq-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-faq-editor-btn lp-faq-editor-btn-primary" id="lp-faq-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(n),n.querySelector(".lp-faq-editor-close").addEventListener("click",()=>this.closeFAQEditor()),n.querySelector("#lp-faq-editor-cancel").addEventListener("click",()=>this.closeFAQEditor()),n.querySelector("#lp-faq-editor-apply").addEventListener("click",()=>this.applyFAQChanges()),n.querySelector("#lp-faq-editor-add").addEventListener("click",()=>this.addFAQItem()),n.addEventListener("click",e=>{e.target===n&&this.closeFAQEditor()}),this.setupFAQDeleteButtons()}renderFAQEditorItem(e,t){return`\n      <div class="lp-faq-editor-item ${e.question||e.answer?"has-content":""}" data-idx="${t}">\n        <div class="lp-faq-editor-item-header">\n          <span class="lp-faq-editor-number">Q${t+1}</span>\n          <button type="button" class="lp-faq-editor-delete" data-idx="${t}" title="å‰Šé™¤">\n            ğŸ—‘ï¸\n          </button>\n        </div>\n        <div class="lp-faq-editor-fields">\n          <div class="lp-faq-editor-field">\n            <label>è³ªå•</label>\n            <input type="text" class="lp-faq-editor-question" value="${i(e.question)}" placeholder="ä¾‹: æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ">\n          </div>\n          <div class="lp-faq-editor-field">\n            <label>å›ç­”</label>\n            <textarea class="lp-faq-editor-answer" rows="3" placeholder="ä¾‹: ã¯ã„ã€æœªçµŒé¨“ã®æ–¹ã‚‚å¤§æ­“è¿ã§ã™ã€‚ç ”ä¿®åˆ¶åº¦ãŒå……å®Ÿã—ã¦ã„ã‚‹ã®ã§å®‰å¿ƒã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã¾ã™ã€‚">${i(e.answer)}</textarea>\n          </div>\n        </div>\n      </div>\n    `}setupFAQDeleteButtons(){const e=document.getElementById("lp-faq-editor");e&&e.querySelectorAll(".lp-faq-editor-delete").forEach(e=>{e.addEventListener("click",t=>{const i=parseInt(e.dataset.idx);this.deleteFAQItem(i)})})}addFAQItem(){const e=document.getElementById("lp-faq-editor-list");if(!e)return;const t=e.querySelectorAll(".lp-faq-editor-item").length,i=document.createElement("div");i.innerHTML=this.renderFAQEditorItem({question:"",answer:""},t);const n=i.firstElementChild;e.appendChild(n),this.setupFAQDeleteButtons();const s=n.querySelector(".lp-faq-editor-question");s&&s.focus()}deleteFAQItem(e){const t=document.getElementById("lp-faq-editor-list");if(!t)return;const i=t.querySelectorAll(".lp-faq-editor-item");if(i.length<=1){const e=i[0];return e.querySelector(".lp-faq-editor-question").value="",void(e.querySelector(".lp-faq-editor-answer").value="")}i[e].remove(),this.renumberFAQItems()}renumberFAQItems(){const e=document.getElementById("lp-faq-editor-list");e&&(e.querySelectorAll(".lp-faq-editor-item").forEach((e,t)=>{e.dataset.idx=t,e.querySelector(".lp-faq-editor-number").textContent=`Q${t+1}`,e.querySelector(".lp-faq-editor-delete").dataset.idx=t}),this.setupFAQDeleteButtons())}closeFAQEditor(){const e=document.getElementById("lp-faq-editor");e&&e.remove()}openCarouselEditor(e){var t;this.closeCarouselEditor();const i=(null==(t=null==e?void 0:e.dataset)?void 0:t.sectionId)||"";let n=this.getCarouselData(i);n.images||(n.images=[]);const s=document.createElement("div");s.className="lp-carousel-editor-overlay",s.id="lp-carousel-editor",s.dataset.sectionId=i,s.innerHTML=`\n      <div class="lp-carousel-editor">\n        <div class="lp-carousel-editor-header">\n          <h3>ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-carousel-editor-close">&times;</button>\n        </div>\n        <div class="lp-carousel-editor-body">\n          <div class="lp-carousel-editor-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä»»æ„ï¼‰</label>\n            <input type="text" class="lp-carousel-editor-title" value="${this.escapeHtml(n.sectionTitle||"")}" placeholder="ä¾‹: è·å ´ã®æ§˜å­">\n          </div>\n          <p class="lp-carousel-editor-hint">ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ä¸¦ã³æ›¿ãˆã§ãã¾ã™ã€‚</p>\n          <div class="lp-carousel-editor-list" id="lp-carousel-editor-list">\n            ${n.images.map((e,t)=>this.renderCarouselEditorItem(e,t)).join("")}\n          </div>\n          <button type="button" class="lp-carousel-editor-add-btn" id="lp-carousel-editor-add">\n            + ç”»åƒã‚’è¿½åŠ \n          </button>\n        </div>\n        <div class="lp-carousel-editor-footer">\n          <button type="button" class="lp-carousel-editor-btn lp-carousel-editor-btn-secondary" id="lp-carousel-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-carousel-editor-btn lp-carousel-editor-btn-primary" id="lp-carousel-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(s),s.querySelector(".lp-carousel-editor-close").addEventListener("click",()=>this.closeCarouselEditor()),s.querySelector("#lp-carousel-editor-cancel").addEventListener("click",()=>this.closeCarouselEditor()),s.querySelector("#lp-carousel-editor-apply").addEventListener("click",()=>this.applyCarouselChanges(e)),s.querySelector("#lp-carousel-editor-add").addEventListener("click",()=>this.addCarouselItem()),s.addEventListener("click",e=>{e.target===s&&this.closeCarouselEditor()}),this.setupCarouselItemEvents()}getCarouselData(e){var t;if(this.editedData.carouselData&&this.editedData.carouselData[e])return this.editedData.carouselData[e];const i=this.sections.find(t=>t.id===e);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",images:i.data.images||[]};if(null==(t=this.lpSettings)?void 0:t.lpContent)try{const t="string"==typeof this.lpSettings.lpContent?JSON.parse(this.lpSettings.lpContent):this.lpSettings.lpContent;if(t.sections){const i=t.sections.find(t=>t.id===e||"carousel"===t.type);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",images:i.data.images||[]}}}catch(n){console.error("ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",n)}return{sectionTitle:"",images:[]}}renderCarouselEditorItem(e,t){return`\n      <div class="lp-carousel-editor-item ${e.url||e.alt?"has-content":""}" data-idx="${t}" draggable="true">\n        <div class="lp-carousel-editor-item-header">\n          <span class="lp-carousel-editor-handle">â‹®â‹®</span>\n          <span class="lp-carousel-editor-number">ç”»åƒ ${t+1}</span>\n          <button type="button" class="lp-carousel-editor-delete" data-idx="${t}" title="å‰Šé™¤">\n            ğŸ—‘ï¸\n          </button>\n        </div>\n        <div class="lp-carousel-editor-fields">\n          <div class="lp-carousel-editor-preview">\n            ${e.url?`<img src="${this.escapeHtml(e.url)}" alt="${this.escapeHtml(e.alt||"")}">`:'<div class="lp-carousel-no-image">ç”»åƒãªã—</div>'}\n          </div>\n          <div class="lp-carousel-editor-inputs">\n            <div class="lp-carousel-editor-field">\n              <label>ç”»åƒURL</label>\n              <input type="url" class="lp-carousel-editor-url" value="${this.escapeHtml(e.url||"")}" placeholder="https://example.com/image.jpg">\n            </div>\n            <div class="lp-carousel-editor-field">\n              <label>ä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä»»æ„ï¼‰</label>\n              <input type="text" class="lp-carousel-editor-alt" value="${this.escapeHtml(e.alt||"")}" placeholder="ç”»åƒã®èª¬æ˜">\n            </div>\n            <div class="lp-carousel-editor-field">\n              <label>ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ï¼ˆä»»æ„ï¼‰</label>\n              <input type="text" class="lp-carousel-editor-caption" value="${this.escapeHtml(e.caption||"")}" placeholder="ç”»åƒã®ä¸‹ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆ">\n            </div>\n          </div>\n        </div>\n      </div>\n    `}setupCarouselItemEvents(){const e=document.getElementById("lp-carousel-editor");e&&(e.querySelectorAll(".lp-carousel-editor-delete").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.idx);this.deleteCarouselItem(t)})}),e.querySelectorAll(".lp-carousel-editor-url").forEach(e=>{e.addEventListener("input",e=>{const t=e.target.closest(".lp-carousel-editor-item"),i=t.querySelector(".lp-carousel-editor-preview"),n=e.target.value.trim(),s=t.querySelector(".lp-carousel-editor-alt").value||"";i.innerHTML=n?`<img src="${this.escapeHtml(n)}" alt="${this.escapeHtml(s)}" onerror="this.parentElement.innerHTML='<div class=\\'lp-carousel-no-image\\'>èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</div>'">`:'<div class="lp-carousel-no-image">ç”»åƒãªã—</div>'})}),this.setupCarouselDragDrop())}setupCarouselDragDrop(){const e=document.getElementById("lp-carousel-editor-list");if(!e)return;let t=null;e.querySelectorAll(".lp-carousel-editor-item").forEach(i=>{i.addEventListener("dragstart",e=>{t=i,i.classList.add("lp-carousel-item-dragging"),e.dataTransfer.effectAllowed="move"}),i.addEventListener("dragend",()=>{i.classList.remove("lp-carousel-item-dragging"),t=null,this.renumberCarouselItems()}),i.addEventListener("dragover",n=>{if(n.preventDefault(),n.dataTransfer.dropEffect="move",t&&t!==i){const n=[...e.querySelectorAll(".lp-carousel-editor-item")];n.indexOf(t)<n.indexOf(i)?i.parentNode.insertBefore(t,i.nextSibling):i.parentNode.insertBefore(t,i)}})})}addCarouselItem(){const e=document.getElementById("lp-carousel-editor-list");if(!e)return;const t=e.querySelectorAll(".lp-carousel-editor-item").length,i=document.createElement("div");i.innerHTML=this.renderCarouselEditorItem({url:"",alt:"",caption:""},t);const n=i.firstElementChild;e.appendChild(n),this.setupCarouselItemEvents(),n.scrollIntoView({behavior:"smooth",block:"center"});const s=n.querySelector(".lp-carousel-editor-url");s&&s.focus()}deleteCarouselItem(e){const t=document.getElementById("lp-carousel-editor-list");if(!t)return;const i=t.querySelectorAll(".lp-carousel-editor-item");i.length<=0||(i[e].remove(),this.renumberCarouselItems())}renumberCarouselItems(){const e=document.getElementById("lp-carousel-editor-list");e&&(e.querySelectorAll(".lp-carousel-editor-item").forEach((e,t)=>{e.dataset.idx=t,e.querySelector(".lp-carousel-editor-number").textContent=`ç”»åƒ ${t+1}`,e.querySelector(".lp-carousel-editor-delete").dataset.idx=t}),this.setupCarouselItemEvents())}closeCarouselEditor(){const e=document.getElementById("lp-carousel-editor");e&&e.remove()}applyCarouselChanges(e){const t=document.getElementById("lp-carousel-editor");if(!t)return;const i=t.dataset.sectionId,n=t.querySelector(".lp-carousel-editor-title").value.trim(),s=t.querySelectorAll(".lp-carousel-editor-item"),l=[];s.forEach(e=>{const t=e.querySelector(".lp-carousel-editor-url").value.trim(),i=e.querySelector(".lp-carousel-editor-alt").value.trim(),n=e.querySelector(".lp-carousel-editor-caption").value.trim();t&&l.push({id:`img-${Date.now()}-${l.length}`,url:t,alt:i,caption:n})}),this.editedData.carouselData=this.editedData.carouselData||{},this.editedData.carouselData[i]={sectionTitle:n,images:l},console.log("[LPEditor] ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚’æ›´æ–°:",this.editedData.carouselData[i]),this.updateCarouselDisplay(e,n,l),this.closeCarouselEditor(),this.showSuccessMessage("ã‚«ãƒ«ãƒ¼ã‚»ãƒ«ã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updateCarouselDisplay(e,t,i){if(!e)return;const n=e.querySelector(".lp-section-inner");n&&(0===i.length?(e.classList.add("lp-carousel-empty"),n.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-carousel-placeholder">\n          <div class="lp-carousel-placeholder-icon">ğŸ </div>\n          <p>ç”»åƒãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n        </div>\n      `):(e.classList.remove("lp-carousel-empty"),n.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-carousel-container">\n          <div class="lp-carousel-track">\n            ${i.map((e,t)=>`\n              <div class="lp-carousel-slide ${0===t?"active":""}" data-index="${t}">\n                <img src="${this.escapeHtml(e.url)}" alt="${this.escapeHtml(e.alt||"")}">\n                ${e.caption?`<div class="lp-carousel-caption">${this.escapeHtml(e.caption)}</div>`:""}\n              </div>\n            `).join("")}\n          </div>\n          <button class="lp-carousel-btn lp-carousel-btn-prev" aria-label="å‰ã¸">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>\n          </button>\n          <button class="lp-carousel-btn lp-carousel-btn-next" aria-label="æ¬¡ã¸">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg>\n          </button>\n          <div class="lp-carousel-dots">\n            ${i.map((e,t)=>`\n              <button class="lp-carousel-dot ${0===t?"active":""}" data-index="${t}" aria-label="ã‚¹ãƒ©ã‚¤ãƒ‰ ${t+1}"></button>\n            `).join("")}\n          </div>\n          <div class="lp-carousel-counter">\n            <span class="lp-carousel-current">1</span> / <span class="lp-carousel-total">${i.length}</span>\n          </div>\n        </div>\n      `,l(()=>Promise.resolve().then(()=>O),void 0).then(e=>{e.initCarousels&&e.initCarousels()})),this.addSectionEditButtons())}openVideoEditor(e){var t;this.closeVideoEditor();const i=(null==(t=null==e?void 0:e.dataset)?void 0:t.sectionId)||"";let n=this.getVideoData(i);const s=document.createElement("div");s.className="lp-video-editor-overlay",s.id="lp-video-editor",s.dataset.sectionId=i,s.innerHTML=`\n      <div class="lp-video-editor">\n        <div class="lp-video-editor-header">\n          <h3>å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-video-editor-close">&times;</button>\n        </div>\n        <div class="lp-video-editor-body">\n          <div class="lp-video-editor-field">\n            <label>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä»»æ„ï¼‰</label>\n            <input type="text" class="lp-video-editor-title" value="${this.escapeHtml(n.sectionTitle||"")}" placeholder="ä¾‹: ä¼šç¤¾ç´¹ä»‹å‹•ç”»">\n          </div>\n          <div class="lp-video-editor-field">\n            <label>å‹•ç”»URL</label>\n            <input type="url" class="lp-video-editor-url" value="${this.escapeHtml(n.videoUrl||"")}" placeholder="YouTubeã€Vimeoã€ã¾ãŸã¯MP4ã®URL">\n            <p class="lp-video-editor-hint">å¯¾å¿œ: YouTubeã€Vimeoã€TikTokã€MP4/WebMç›´æ¥ãƒªãƒ³ã‚¯</p>\n          </div>\n          <div class="lp-video-editor-field">\n            <label>èª¬æ˜æ–‡ï¼ˆä»»æ„ï¼‰</label>\n            <textarea class="lp-video-editor-description" rows="2" placeholder="å‹•ç”»ã®ä¸‹ã«è¡¨ç¤ºã•ã‚Œã‚‹èª¬æ˜æ–‡">${this.escapeHtml(n.description||"")}</textarea>\n          </div>\n          <div class="lp-video-editor-preview-container">\n            <label>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</label>\n            <div class="lp-video-editor-preview" id="lp-video-editor-preview">\n              ${this.generateVideoPreview(n.videoUrl)}\n            </div>\n          </div>\n        </div>\n        <div class="lp-video-editor-footer">\n          <button type="button" class="lp-video-editor-btn lp-video-editor-btn-secondary" id="lp-video-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-video-editor-btn lp-video-editor-btn-primary" id="lp-video-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(s),s.querySelector(".lp-video-editor-close").addEventListener("click",()=>this.closeVideoEditor()),s.querySelector("#lp-video-editor-cancel").addEventListener("click",()=>this.closeVideoEditor()),s.querySelector("#lp-video-editor-apply").addEventListener("click",()=>this.applyVideoChanges(e));const l=s.querySelector(".lp-video-editor-url");l.addEventListener("input",()=>{const e=document.getElementById("lp-video-editor-preview");e&&(e.innerHTML=this.generateVideoPreview(l.value.trim()))}),s.addEventListener("click",e=>{e.target===s&&this.closeVideoEditor()})}getVideoData(e){var t;if(this.editedData.videoData&&this.editedData.videoData[e])return this.editedData.videoData[e];const i=this.sections.find(t=>t.id===e);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",videoUrl:i.data.videoUrl||"",description:i.data.description||""};if(null==(t=this.lpSettings)?void 0:t.lpContent)try{const t="string"==typeof this.lpSettings.lpContent?JSON.parse(this.lpSettings.lpContent):this.lpSettings.lpContent;if(t.sections){const i=t.sections.find(t=>t.id===e||"video"===t.type);if(i&&i.data)return{sectionTitle:i.data.sectionTitle||"",videoUrl:i.data.videoUrl||"",description:i.data.description||""}}}catch(n){console.error("å‹•ç”»ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",n)}return{sectionTitle:"",videoUrl:"",description:""}}generateVideoPreview(e){if(!e)return'<div class="lp-video-no-preview">URLã‚’å…¥åŠ›ã™ã‚‹ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>';if(e.includes("youtube.com")||e.includes("youtu.be")){const t=this.extractYouTubeId(e);if(t)return`<iframe src="https://www.youtube.com/embed/${t}" frameborder="0" allowfullscreen></iframe>`}if(e.includes("vimeo.com")){const t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);if(t)return`<iframe src="https://player.vimeo.com/video/${t[1]}" frameborder="0" allowfullscreen></iframe>`}return e.match(/\.(mp4|webm|ogg)$/i)?`<video src="${this.escapeHtml(e)}" controls></video>`:'<div class="lp-video-no-preview">å¯¾å¿œã—ã¦ã„ãªã„å½¢å¼ã§ã™</div>'}extractYouTubeId(e){let t=e.match(/[?&]v=([^&]+)/);return t?t[1]:(t=e.match(/youtu\.be\/([^?&]+)/),t?t[1]:(t=e.match(/youtube\.com\/embed\/([^?&]+)/),t?t[1]:(t=e.match(/youtube\.com\/shorts\/([^?&]+)/),t?t[1]:null)))}generateVideoPreviewCompact(e){if(!e)return"";const t=this.validateVideoUrl(e);if(!t.valid)return`<div class="video-preview-error">\n        <span class="video-preview-error-icon">âš </span>\n        <span>${this.escapeHtml(t.message)}</span>\n      </div>`;if(e.includes("youtube.com")||e.includes("youtu.be")){const t=this.extractYouTubeId(e);if(t)return`<div class="video-preview-thumbnail" data-service="youtube">\n          <img src="https://img.youtube.com/vi/${t}/mqdefault.jpg" alt="YouTubeå‹•ç”»" loading="lazy">\n          <div class="video-preview-overlay">\n            <span class="video-preview-play">â–¶</span>\n            <span class="video-preview-service">YouTube</span>\n          </div>\n        </div>`}if(e.includes("vimeo.com")){if(e.match(/vimeo\.com\/(?:video\/)?(\d+)/))return'<div class="video-preview-thumbnail" data-service="vimeo">\n          <div class="video-preview-placeholder vimeo">\n            <span class="video-preview-play">â–¶</span>\n            <span class="video-preview-service">Vimeo</span>\n          </div>\n        </div>'}return e.includes("tiktok.com")?'<div class="video-preview-thumbnail" data-service="tiktok">\n        <div class="video-preview-placeholder tiktok">\n          <span class="video-preview-play">â–¶</span>\n          <span class="video-preview-service">TikTok</span>\n        </div>\n      </div>':e.match(/\.(mp4|webm|ogg)$/i)?'<div class="video-preview-thumbnail" data-service="direct">\n        <div class="video-preview-placeholder direct">\n          <span class="video-preview-play">â–¶</span>\n          <span class="video-preview-service">å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«</span>\n        </div>\n      </div>':""}validateVideoUrl(e){if(!e)return{valid:!0,message:""};try{new URL(e)}catch{return{valid:!1,message:"æœ‰åŠ¹ãªURLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"}}const t=e.includes("youtube.com")||e.includes("youtu.be"),i=e.includes("vimeo.com"),n=e.includes("tiktok.com"),s=e.match(/\.(mp4|webm|ogg)$/i);if(!(t||i||n||s))return{valid:!1,message:"å¯¾å¿œã—ã¦ã„ãªã„å‹•ç”»ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ï¼ˆYouTube, Vimeo, TikTok, MP4/WebMï¼‰"};if(t){if(!this.extractYouTubeId(e))return{valid:!1,message:"YouTubeã®å‹•ç”»URLã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„"}}return{valid:!0,message:""}}closeVideoEditor(){const e=document.getElementById("lp-video-editor");e&&e.remove()}applyVideoChanges(e){const t=document.getElementById("lp-video-editor");if(!t)return;const i=t.dataset.sectionId,n=t.querySelector(".lp-video-editor-title").value.trim(),s=t.querySelector(".lp-video-editor-url").value.trim(),l=t.querySelector(".lp-video-editor-description").value.trim();this.editedData.videoData=this.editedData.videoData||{},this.editedData.videoData[i]={sectionTitle:n,videoUrl:s,description:l},console.log("[LPEditor] å‹•ç”»ã‚’æ›´æ–°:",this.editedData.videoData[i]),this.updateVideoDisplay(e,n,s,l),this.closeVideoEditor(),this.showSuccessMessage("å‹•ç”»ã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updateVideoDisplay(e,t,i,n){if(!e)return;const s=e.querySelector(".lp-section-inner");if(s){if(i){e.classList.remove("lp-video-empty");const l=this.generateVideoEmbed(i);s.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-video-wrapper lp-video-aspect-16-9">\n          ${l}\n        </div>\n        ${n?`<p class="lp-video-description">${this.escapeHtml(n)}</p>`:""}\n      `}else e.classList.add("lp-video-empty"),s.innerHTML=`\n        ${t?`<h2 class="lp-section-title">${this.escapeHtml(t)}</h2>`:""}\n        <div class="lp-video-placeholder">\n          <div class="lp-video-placeholder-icon">ğŸ¬</div>\n          <p>å‹•ç”»URLãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n        </div>\n      `;this.addSectionEditButtons()}}generateVideoEmbed(e){if(e.includes("youtube.com")||e.includes("youtu.be")){const t=this.extractYouTubeId(e);if(t)return`<iframe src="https://www.youtube.com/embed/${t}?rel=0&modestbranding=1" title="YouTubeå‹•ç”»" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen loading="lazy"></iframe>`}if(e.includes("vimeo.com")){const t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);if(t)return`<iframe src="https://player.vimeo.com/video/${t[1]}?title=0&byline=0&portrait=0" title="Vimeoå‹•ç”»" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen loading="lazy"></iframe>`}if(e.match(/\.(mp4|webm|ogg)$/i)){const t=e.split(".").pop().toLowerCase(),i={mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg"};return`<video controls preload="metadata" playsinline><source src="${this.escapeHtml(e)}" type="${i[t]||"video/mp4"}"></video>`}return`<iframe src="${this.escapeHtml(e)}" title="åŸ‹ã‚è¾¼ã¿å‹•ç”»" frameborder="0" allowfullscreen loading="lazy"></iframe>`}applyFAQChanges(){const e=document.getElementById("lp-faq-editor");if(!e)return;const t=e.querySelectorAll(".lp-faq-editor-item"),i=[];t.forEach(e=>{const t=e.querySelector(".lp-faq-editor-question").value.trim(),n=e.querySelector(".lp-faq-editor-answer").value.trim();t&&n&&i.push({question:t,answer:n})});const n=i.map(e=>`Q:${e.question}|A:${e.answer}`).join("\n");this.editedData.faq=n,console.log("[LPEditor] FAQã‚’æ›´æ–°:",n),this.updateFAQDisplay(),this.closeFAQEditor(),this.showSuccessMessage("FAQã‚’æ›´æ–°ã—ã¾ã—ãŸ")}parseFAQString(e){if(!e)return[];const t=[],i=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const n of i){const e=n.match(/Q[:ï¼š](.+?)\|A[:ï¼š](.+)/i);e&&t.push({question:e[1].trim(),answer:e[2].trim()})}return t}updateFAQDisplay(){var e;const t=document.querySelector(".lp-faq");if(!t)return;const n=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",s=this.parseFAQString(n),l=t.querySelector(".lp-faq-chat-container")||t.querySelector(".lp-faq-list");l&&(0!==s.length?(l.innerHTML=s.map((e,t)=>`\n      <div class="lp-faq-chat-pair">\n        \x3c!-- è³ªå•ï¼ˆå·¦å´ãƒ»ã‚µãƒãƒ¼ãƒˆï¼‰ --\x3e\n        <div class="lp-faq-chat-row lp-faq-chat-question">\n          <div class="lp-faq-chat-avatar lp-faq-chat-avatar-support">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>\n          </div>\n          <div class="lp-faq-chat-bubble lp-faq-chat-bubble-support">\n            <span class="lp-faq-chat-text">${i(e.question)}</span>\n          </div>\n        </div>\n        \x3c!-- å›ç­”ï¼ˆå³å´ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ --\x3e\n        <div class="lp-faq-chat-row lp-faq-chat-answer">\n          <div class="lp-faq-chat-bubble lp-faq-chat-bubble-user">\n            <span class="lp-faq-chat-text">${i(e.answer)}</span>\n          </div>\n          <div class="lp-faq-chat-avatar lp-faq-chat-avatar-user">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\n          </div>\n        </div>\n      </div>\n    `).join(""),this.addSectionEditButtons()):l.innerHTML='<p style="text-align: center; color: #666;">FAQãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>')}applyPointsChanges(){const e=document.getElementById("lp-points-editor");if(!e)return;e.querySelectorAll(".lp-point-editor-item").forEach(e=>{const t=e.dataset.idx,i=e.querySelector(".lp-point-editor-title").value.trim(),n=e.querySelector(".lp-point-editor-desc").value.trim();this.editedData[`pointTitle${t}`]=i,this.editedData[`pointDesc${t}`]=n}),this._tempPointsLayout&&(this.editedData.pointsLayout={...this._tempPointsLayout},this._tempPointsLayout=null),console.log("[LPEditor] ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°:",this.editedData),this.updatePointsDisplay(),this.trackChange(),this.closePointsEditor(),this.showSuccessMessage("ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updatePointsDisplay(){var e;const t=document.querySelector(".lp-points");if(!t||!this.company||!this.mainJob){for(let e=1;e<=6;e++){const t=this.editedData[`pointTitle${e}`]??"",i=this.editedData[`pointDesc${e}`]??"",n=document.querySelector(`[data-field="pointTitle${e}"]`),s=document.querySelector(`[data-field="pointDesc${e}"]`);n&&(n.textContent=t||`ãƒã‚¤ãƒ³ãƒˆ${e}ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ `,n.classList.toggle("lp-placeholder",!t)),s&&(s.textContent=i||`ãƒã‚¤ãƒ³ãƒˆ${e}èª¬æ˜ã‚’è¿½åŠ `,s.classList.toggle("lp-placeholder",!i))}return}const i=this.getMergedSettings(),n=this.getPointsLayout(),s=this.editedData.pointsLayout||(null==(e=this.lpSettings)?void 0:e.pointsLayout),l=m(this.company,this.mainJob,i,this.currentLayoutStyle,s?n:null),a=document.createElement("div");a.innerHTML=l;const o=a.querySelector(".lp-points");o&&(t.replaceWith(o),this.setupEditableElements(),this.setupSectionSelection(),this.addSectionEditButtons())}moveSectionUp(e){const t=e.previousElementSibling;t&&"SECTION"===t.tagName&&(e.parentNode.insertBefore(e,t),this.saveSectionOrder(),this.updateSidebarList())}moveSectionDown(e){const t=e.nextElementSibling;t&&"SECTION"===t.tagName&&(e.parentNode.insertBefore(t,e),this.saveSectionOrder(),this.updateSidebarList())}duplicateSection(e){const t=this.detectSectionType(e);s(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¤‡è£½ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`,"info")}async deleteSection(e){const t=this.detectSectionType(e);await a({title:"ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å‰Šé™¤",message:`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\nå®Ÿéš›ã®å‰Šé™¤ã¯ç®¡ç†ç”»é¢ã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`,confirmText:"å‰Šé™¤ã™ã‚‹",cancelText:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",danger:!0})&&(e.style.display="none",this.removeFloatingMenu(),this.selectedSection=null,this.updateSidebarList())}renderToolbar(){const e=document.createElement("div");e.className="lp-edit-toolbar",e.innerHTML='\n      <div class="lp-edit-toolbar-inner">\n        <span class="lp-edit-toolbar-title">ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</span>\n        <div class="lp-edit-toolbar-actions">\n          <button type="button" class="lp-edit-btn-preview" id="btn-preview-changes">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>\n          <button type="button" class="lp-edit-btn-save" id="btn-save-changes">ä¿å­˜</button>\n          <button type="button" class="lp-edit-btn-cancel" id="btn-cancel-edit">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        </div>\n      </div>\n    ',document.body.insertBefore(e,document.body.firstChild),e.querySelector("#btn-save-changes").addEventListener("click",()=>this.saveChanges()),e.querySelector("#btn-cancel-edit").addEventListener("click",()=>this.cancelEdit()),e.querySelector("#btn-preview-changes").addEventListener("click",()=>this.previewChanges())}setupEditableElements(){document.querySelectorAll(".lp-editable").forEach(e=>{const t=e.dataset.field,i=e.dataset.label||t;e.addEventListener("mouseenter",()=>this.showEditLabel(e,i)),e.addEventListener("mouseleave",()=>this.hideEditLabel()),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.startTextEditing(e,t,i)})}),document.querySelectorAll(".lp-editable-image").forEach(e=>{const t=e.dataset.field,i=e.dataset.label||t;e.addEventListener("mouseenter",()=>this.showEditLabel(e,i)),e.addEventListener("mouseleave",()=>this.hideEditLabel()),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),this.startImageEditing(e,t,i)})})}setupSectionSortable(){const e=document.getElementById("lp-content");if(!e)return;const t=e.querySelectorAll("section");0!==t.length&&t.forEach(t=>{const i=this.detectSectionType(t);t.dataset.section=i,t.classList.add("lp-sortable-section");const n=document.createElement("div");n.className="lp-section-drag-handle",n.innerHTML=`\n        <span class="lp-section-label">${this.getSectionLabel(i)}</span>\n        <span class="lp-section-drag-icon">â‹®â‹®</span>\n      `,t.insertBefore(n,t.firstChild),t.setAttribute("draggable","true"),t.addEventListener("dragstart",e=>{this.draggedSection=t,t.classList.add("lp-section-dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(t,50,30)}),t.addEventListener("dragend",()=>{t.classList.remove("lp-section-dragging"),this.draggedSection=null,this.saveSectionOrder()}),t.addEventListener("dragover",i=>{if(i.preventDefault(),i.dataTransfer.dropEffect="move",this.draggedSection&&this.draggedSection!==t){const i=[...e.querySelectorAll("section")];i.indexOf(this.draggedSection)<i.indexOf(t)?t.parentNode.insertBefore(this.draggedSection,t.nextSibling):t.parentNode.insertBefore(this.draggedSection,t)}})})}detectSectionType(e){return e.classList.contains("lp-hero")?"hero":e.classList.contains("lp-points")?"points":e.classList.contains("lp-jobs")?"jobs":e.classList.contains("lp-details")?"details":e.classList.contains("lp-faq")?"faq":e.classList.contains("lp-apply")?"apply":e.classList.contains("lp-carousel")?"carousel":e.classList.contains("lp-video")?"video":e.classList.contains("lp-gallery")?"gallery":e.classList.contains("lp-testimonial")?"testimonial":e.classList.contains("lp-custom")?"custom":"unknown"}getSectionLabel(e){return{hero:"ãƒ’ãƒ¼ãƒ­ãƒ¼",points:"ãƒã‚¤ãƒ³ãƒˆ",jobs:"æ±‚äººä¸€è¦§",details:"å‹Ÿé›†è¦é …",faq:"FAQ",apply:"å¿œå‹Ÿ",carousel:"ç”»åƒã‚«ãƒ«ãƒ¼ã‚»ãƒ«",video:"å‹•ç”»",gallery:"ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",testimonial:"ç¤¾å“¡ã®å£°",custom:"ã‚«ã‚¹ã‚¿ãƒ "}[e]||"ã‚»ã‚¯ã‚·ãƒ§ãƒ³"}saveSectionOrder(){const e=document.getElementById("lp-content");if(!e)return;const t=e.querySelectorAll("section"),i=Array.from(t).map(e=>e.dataset.section);this.editedData.sectionOrder=i.join(",")}showEditLabel(e,t){this.hideEditLabel();const i=document.createElement("div");i.className="lp-edit-label",i.textContent=`${t}ã‚’ç·¨é›†`,i.id="lp-edit-label-tooltip";const n=e.getBoundingClientRect();i.style.position="fixed",i.style.top=n.top-30+"px",i.style.left=`${n.left}px`,document.body.appendChild(i)}hideEditLabel(){const e=document.getElementById("lp-edit-label-tooltip");e&&e.remove()}startTextEditing(e,t,n){this.closeInlineEditor();const s=this.editedData[t]||e.textContent.trim(),l=document.createElement("div");l.className="lp-inline-editor",l.id="lp-active-editor",l.innerHTML=`\n      <label class="lp-inline-editor-label">${i(n)}</label>\n      <textarea class="lp-inline-editor-textarea" rows="3">${i(s)}</textarea>\n      <div class="lp-inline-editor-actions">\n        <button type="button" class="lp-inline-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        <button type="button" class="lp-inline-editor-apply">é©ç”¨</button>\n      </div>\n    `;const a=e.getBoundingClientRect();l.style.position="fixed",l.style.top=`${Math.min(a.bottom+10,window.innerHeight-250)}px`,l.style.left=`${Math.max(10,Math.min(a.left,window.innerWidth-320))}px`,document.body.appendChild(l);const o=l.querySelector("textarea");o.focus(),o.select();const d=()=>this.closeInlineEditor();l.querySelector(".lp-inline-editor-cancel").addEventListener("click",d),l.querySelector(".lp-inline-editor-apply").addEventListener("click",()=>{const i=o.value.trim();this.editedData[t]=i,e.textContent=i||`${n}ã‚’è¿½åŠ `,e.classList.toggle("lp-placeholder",!i),d()}),setTimeout(()=>{document.addEventListener("click",this.handleOutsideClick)},100)}closeInlineEditor(){const e=document.getElementById("lp-active-editor");e&&e.remove(),document.removeEventListener("click",this.handleOutsideClick)}startImageEditingForSidebar(e,t,i){this.startImageEditing(e,t,i,e=>{this.updateSidebarHeroImagePreview&&this.updateSidebarHeroImagePreview(e)})}startImageEditing(e,t,n,l=null){var a;this.closeInlineEditor();const d=this.editedData[t]||(null==(a=this.lpSettings)?void 0:a[t])||"",r=this.presetImages.map((e,t)=>`\n      <div class="lp-preset-image" data-url="${i(e.url)}" title="${i(e.label)}">\n        <img src="${i(e.url)}" alt="${i(e.label)}" loading="lazy">\n        <span class="lp-preset-label">${i(e.label)}</span>\n      </div>\n    `).join(""),c=document.createElement("div");c.className="lp-inline-editor lp-image-editor",c.id="lp-active-editor",c.innerHTML=`\n      <label class="lp-inline-editor-label">${i(n)}</label>\n\n      <div class="lp-image-tabs">\n        <button type="button" class="lp-image-tab active" data-tab="upload">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>\n        <button type="button" class="lp-image-tab" data-tab="preset">ãƒ—ãƒªã‚»ãƒƒãƒˆ</button>\n        <button type="button" class="lp-image-tab" data-tab="url">URLå…¥åŠ›</button>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="upload">\n        <div class="lp-image-upload-area" data-drop-zone>\n          <input type="file" accept="image/*" class="lp-image-file-input" style="display: none;">\n          <div class="lp-upload-placeholder">\n            <span class="lp-upload-icon">ğŸ“·</span>\n            <p>ã‚¯ãƒªãƒƒã‚¯ã¾ãŸã¯ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—</p>\n            <p class="lp-upload-hint">PNG, JPG, WebP (æœ€å¤§5MB)</p>\n          </div>\n          <div class="lp-upload-loading" style="display: none;">\n            <div class="loading-spinner"></div>\n            <p>ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...</p>\n          </div>\n        </div>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="preset" style="display: none;">\n        <div class="lp-preset-grid">\n          ${r}\n        </div>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="url" style="display: none;">\n        <div class="lp-image-url-input">\n          <input type="url" class="lp-inline-editor-input" placeholder="ç”»åƒURLã‚’å…¥åŠ›" value="${i(d)}">\n        </div>\n      </div>\n\n      <div class="lp-image-preview">\n        ${d?`<img src="${i(d)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"}\n      </div>\n\n      <div class="lp-inline-editor-actions">\n        <button type="button" class="lp-inline-editor-clear">ã‚¯ãƒªã‚¢</button>\n        <button type="button" class="lp-inline-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        <button type="button" class="lp-inline-editor-apply">é©ç”¨</button>\n      </div>\n    `,c.style.position="fixed",c.style.top="50%",c.style.left="50%",c.style.transform="translate(-50%, -50%)",c.style.maxWidth="500px",c.style.width="90%",c.style.maxHeight="80vh",c.style.overflowY="auto",document.body.appendChild(c);const p=c.querySelector("input"),u=c.querySelector(".lp-image-preview"),v=c.querySelectorAll(".lp-image-tab"),h=c.querySelectorAll(".lp-image-tab-content");let m=d;v.forEach(e=>{e.addEventListener("click",()=>{v.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.tab;h.forEach(e=>{e.style.display=e.dataset.content===t?"block":"none"})})});const b=c.querySelector(".lp-image-upload-area"),y=c.querySelector(".lp-image-file-input"),g=c.querySelector(".lp-upload-loading"),f=c.querySelector(".lp-upload-placeholder"),S=async e=>{if(e&&e.type.startsWith("image/"))if(e.size>5242880)s("ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯5MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„","error");else{g.style.display="flex",f.style.display="none";try{const t=this.currentCompanyDomain||"unknown",n=await o(e,t);m=n,p.value=n,u.innerHTML=`<img src="${i(n)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`,s("ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ","success")}catch(t){console.error("[LPEditor] Upload failed:",t),s("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: "+t.message,"error")}finally{g.style.display="none",f.style.display="block"}}else s("ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„","error")};b.addEventListener("click",e=>{e.target.closest(".lp-upload-loading")||y.click()}),y.addEventListener("change",e=>{const t=e.target.files[0];t&&S(t),y.value=""}),b.addEventListener("dragover",e=>{e.preventDefault(),b.classList.add("drag-over")}),b.addEventListener("dragleave",e=>{e.preventDefault(),b.classList.remove("drag-over")}),b.addEventListener("drop",e=>{e.preventDefault(),b.classList.remove("drag-over");const t=e.dataTransfer.files[0];t&&S(t)}),c.querySelectorAll(".lp-preset-image").forEach(e=>{e.addEventListener("click",()=>{c.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),m=e.dataset.url,p.value=m,u.innerHTML=`<img src="${i(m)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`})}),p.addEventListener("input",()=>{m=p.value.trim(),c.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),u.innerHTML=m?`<img src="${i(m)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"});const $=()=>this.closeInlineEditor();c.querySelector(".lp-inline-editor-clear").addEventListener("click",()=>{m="",p.value="",c.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),u.innerHTML="<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"}),c.querySelector(".lp-inline-editor-cancel").addEventListener("click",$),c.querySelector(".lp-inline-editor-apply").addEventListener("click",()=>{this.editedData[t]=m,console.log(`[LPEditor] ç”»åƒã‚’è¨­å®š: ${t} = ${m}`),e.style.backgroundImage=m?`url('${m}')`:"",l&&l(m),$()}),setTimeout(()=>{document.addEventListener("click",this.handleOutsideClick)},100)}async saveChanges(){this.showSaveModal()}showSaveModal(){const e=document.getElementById("lp-save-modal");e&&e.remove();const t=Object.keys(this.editedData).length>0,i=t?`<div class="lp-save-modal-changes">\n          <p class="lp-save-modal-hint">ç·¨é›†ã—ãŸå†…å®¹ï¼š</p>\n          <ul class="lp-save-modal-list">\n            ${Object.entries(this.editedData).map(([e,t])=>`<li><strong>${e}:</strong> ${"string"==typeof t&&t.length>50?t.substring(0,50)+"...":t}</li>`).join("")}\n          </ul>\n        </div>`:'<p class="lp-save-modal-empty">å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“</p>',n=document.createElement("div");n.className="lp-save-modal-overlay",n.id="lp-save-modal",n.innerHTML=`\n      <div class="lp-save-modal">\n        <div class="lp-save-modal-header">\n          <h3>å¤‰æ›´ã‚’ä¿å­˜</h3>\n          <button type="button" class="lp-save-modal-close">&times;</button>\n        </div>\n        <div class="lp-save-modal-body">\n          ${i}\n        </div>\n        <div class="lp-save-modal-footer">\n          <button type="button" class="lp-save-modal-btn lp-save-modal-btn-secondary" id="lp-save-modal-close">é–‰ã˜ã‚‹</button>\n          <button type="button" class="lp-save-modal-btn lp-save-modal-btn-primary" id="lp-save-modal-save" ${t?"":"disabled"}>\n            ä¿å­˜\n          </button>\n        </div>\n      </div>\n    `,document.body.appendChild(n),n.querySelector(".lp-save-modal-close").addEventListener("click",()=>n.remove()),n.querySelector("#lp-save-modal-close").addEventListener("click",()=>n.remove()),n.querySelector("#lp-save-modal-save").addEventListener("click",async()=>{await this.saveSettings(n)}),n.addEventListener("click",e=>{e.target===n&&n.remove()})}async saveSettings(e){if(!this.currentJobId)return void s("æ±‚äººIDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“","error");const t=e.querySelector("#lp-save-modal-save");t&&(t.disabled=!0,t.innerHTML='<span class="loading-spinner-small"></span> ä¿å­˜ä¸­...');try{const t=this.buildSaveSettings();console.log("[LPEditor] ä¿å­˜ã™ã‚‹è¨­å®š:",t),console.log("[LPEditor] ç·¨é›†ãƒ‡ãƒ¼ã‚¿:",this.editedData);const i=await d(t.companyDomain,this.currentJobId,t);if(!i.success)throw new Error(i.error||"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼");e.remove(),this.showSuccessMessage("ä¿å­˜ã—ã¾ã—ãŸï¼"),this.editedData={},this.hasChanges=!1,this.clearDraft(),this.undoStack=[JSON.stringify({})],this.redoStack=[],this.updateUndoRedoButtons(),this.updateChangesIndicator()}catch(i){console.error("ä¿å­˜ã‚¨ãƒ©ãƒ¼:",i),t&&(t.disabled=!1,t.textContent="ä¿å­˜");await a({title:"ä¿å­˜ã‚¨ãƒ©ãƒ¼",message:`ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nã‚¨ãƒ©ãƒ¼: ${i.message}\n\nãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ`,confirmText:"ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜",cancelText:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})&&(this.saveToLocalStorage(),e.remove())}}buildSaveSettings(){var e,t;const i=this.currentJobId.split("_"),n=i.length>1?i[0]:this.currentCompanyDomain;i.length>1?i.slice(1).join("_"):this.currentJobId;const s=this.lpSettings||{},l={jobId:this.currentJobId,companyDomain:n,company:(null==(e=this.currentJobInfo)?void 0:e.company)||s.company||"",jobTitle:(null==(t=this.currentJobInfo)?void 0:t.title)||s.jobTitle||"",designPattern:this.currentDesignPattern||s.designPattern||"modern",layoutStyle:this.currentLayoutStyle||s.layoutStyle||"modern",heroTitle:this.editedData.heroTitle??s.heroTitle??"",heroSubtitle:this.editedData.heroSubtitle??s.heroSubtitle??"",heroImage:this.editedData.heroImage??s.heroImage??"",ctaText:this.editedData.ctaText??s.ctaText??"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",faq:this.editedData.faq??s.faq??"",sectionOrder:this.editedData.sectionOrder??s.sectionOrder??"",sectionVisibility:s.sectionVisibility??""};for(let d=1;d<=6;d++)l[`pointTitle${d}`]=this.editedData[`pointTitle${d}`]??s[`pointTitle${d}`]??"",l[`pointDesc${d}`]=this.editedData[`pointDesc${d}`]??s[`pointDesc${d}`]??"";l.customPrimary=this.editedData.customPrimary??s.customPrimary??"",l.customAccent=this.editedData.customAccent??s.customAccent??"",l.customBg=this.editedData.customBg??s.customBg??"",l.customText=this.editedData.customText??s.customText??"",l.showVideoButton=this.editedData.showVideoButton??s.showVideoButton??"false",l.videoUrl=this.editedData.videoUrl??s.videoUrl??"",l.metaPixelId=this.editedData.metaPixelId??s.metaPixelId??"",l.tiktokPixelId=this.editedData.tiktokPixelId??s.tiktokPixelId??"",l.googleAdsId=this.editedData.googleAdsId??s.googleAdsId??"",l.googleAdsLabel=this.editedData.googleAdsLabel??s.googleAdsLabel??"",l.lineTagId=this.editedData.lineTagId??s.lineTagId??"",l.clarityProjectId=this.editedData.clarityProjectId??s.clarityProjectId??"",l.ogpTitle=this.editedData.ogpTitle??s.ogpTitle??"",l.ogpDescription=this.editedData.ogpDescription??s.ogpDescription??"",l.ogpImage=this.editedData.ogpImage??s.ogpImage??"",this.editedData.pointsLayout?l.pointsLayout=this.editedData.pointsLayout:s.pointsLayout&&(l.pointsLayout="string"==typeof s.pointsLayout?s.pointsLayout:JSON.stringify(s.pointsLayout));let a=null;if(s.lpContent)try{a="string"==typeof s.lpContent?JSON.parse(s.lpContent):{...s.lpContent}}catch(o){a={version:"2.0",sections:[],globalSettings:{}}}else a={version:"2.0",sections:[],globalSettings:{}};return this.editedData.carouselData&&Object.entries(this.editedData.carouselData).forEach(([e,t])=>{var i;const n=null==(i=a.sections)?void 0:i.find(t=>t.id===e);n?n.data={...n.data,sectionTitle:t.sectionTitle,images:t.images}:(a.sections=a.sections||[],a.sections.push({id:e,type:"carousel",order:a.sections.length,visible:!0,data:{sectionTitle:t.sectionTitle,images:t.images,autoPlay:!0,interval:5e3},layout:{style:"standard",showDots:!0,showArrows:!0}}))}),this.editedData.videoData&&Object.entries(this.editedData.videoData).forEach(([e,t])=>{var i;const n=null==(i=a.sections)?void 0:i.find(t=>t.id===e);n?n.data={...n.data,sectionTitle:t.sectionTitle,videoUrl:t.videoUrl,description:t.description}:(a.sections=a.sections||[],a.sections.push({id:e,type:"video",order:a.sections.length,visible:!0,data:{sectionTitle:t.sectionTitle,videoUrl:t.videoUrl,videoType:"auto",description:t.description},layout:{aspectRatio:"16:9",fullWidth:!1}}))}),this.editedData.addedSections&&this.editedData.addedSections.forEach(e=>{var t;(null==(t=a.sections)?void 0:t.some(t=>t.id===e.id))||(a.sections=a.sections||[],a.sections.push(e))}),l.lpContent=JSON.stringify(a),l}saveToLocalStorage(){const e=this.buildSaveSettings(),t=`lp_settings_${this.currentJobId}`;localStorage.setItem(t,JSON.stringify(e)),this.showSuccessMessage("ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã—ãŸã€‚æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«åæ˜ ã•ã‚Œã¾ã™ã€‚"),this.editedData={}}showSuccessMessage(e){const t=document.createElement("div");t.className="lp-save-toast",t.innerHTML=`\n      <span class="lp-save-toast-icon">âœ“</span>\n      <span class="lp-save-toast-message">${i(e)}</span>\n    `,document.body.appendChild(t),setTimeout(()=>{t.classList.add("lp-save-toast-hide"),setTimeout(()=>t.remove(),300)},3e3)}async cancelEdit(){if(await a({title:"ç·¨é›†ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«",message:"ç·¨é›†å†…å®¹ã‚’ç ´æ£„ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ",confirmText:"ç ´æ£„ã™ã‚‹",cancelText:"ç·¨é›†ã‚’ç¶šã‘ã‚‹",danger:!0})){const e=new URL(window.location.href);e.searchParams.delete("edit"),window.location.href=e.toString()}}previewChanges(){const e={lpSettings:this.getMergedSettings(),timestamp:Date.now()},t=`lp_preview_${this.currentJobId}`;sessionStorage.setItem(t,JSON.stringify(e)),console.log("[LPEditor] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜:",e);const i=new URL(window.location.href);i.searchParams.delete("edit"),i.searchParams.set("preview","1"),window.open(i.toString(),"_blank")}}export{_ as C,W as D,R as L,J as S,ie as a,X as b,Y as c,Z as d,G as g};
