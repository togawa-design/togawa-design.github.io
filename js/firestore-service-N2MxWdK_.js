const e={ADMIN:"admin",COMPANY:"company"},t={credentials:{username:"admin",password:"receco2025"},sessionKey:"rikueco_admin_session",userRoleKey:"rikueco_user_role",userCompanyKey:"rikueco_user_company",gaPropertyId:"G-E1XC94EG05",gaApiKey:"AIzaSyAIC2WGg5dnvMh6TO4sivpbk4HtpYw4tbo",apiEndpoint:"https://asia-northeast1-generated-area-484613-e3.cloudfunctions.net/getAnalyticsData",firebaseConfig:{apiKey:"AIzaSyB3eXZoFkXOwnHxPvaHiWO7csmZK4KGqAQ",authDomain:"generated-area-484613-e3-90bd4.firebaseapp.com",projectId:"generated-area-484613-e3-90bd4"}},s={sheetId:"1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0",companySheetName:"会社一覧",lpSettingsSheetName:"LP設定",gasApiUrl:"https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec"},o=!0;function r(e){return{standard:"スタンダード",modern:"モダン",classic:"クラシック",minimal:"ミニマル",colorful:"カラフル"}[e]||"スタンダード"}const c=[{id:"teamwork-1",name:"チームミーティング",url:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=400&q=60"},{id:"teamwork-2",name:"オフィスワーク",url:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&q=60"},{id:"teamwork-3",name:"コラボレーション",url:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=400&q=60"},{id:"teamwork-4",name:"ビジネス握手",url:"https://images.unsplash.com/photo-1521791136064-7986c2920216?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1521791136064-7986c2920216?w=400&q=60"},{id:"teamwork-5",name:"ワークショップ",url:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=400&q=60"},{id:"work-1",name:"作業風景",url:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&q=60"},{id:"work-2",name:"倉庫作業",url:"https://images.unsplash.com/photo-1553413077-190dd305871c?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1553413077-190dd305871c?w=400&q=60"},{id:"work-3",name:"建設現場",url:"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&q=60"},{id:"work-4",name:"技術職",url:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=400&q=60"},{id:"work-5",name:"チームワーク",url:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400&q=60"}];let i=null,a=null;function n(){return i||("undefined"!=typeof window&&window.firebase?(a=window.firebase,a.apps.length||a.initializeApp(t.firebaseConfig),i=a.firestore(),i):(console.warn("[FirestoreService] Firebase not loaded"),null))}function l(){return i||n(),i}async function m(){const e=l();if(!e)throw new Error("Firestore not initialized");try{const t=await e.collection("companies").orderBy("order","asc").get(),s=[];return t.forEach(e=>{s.push({id:e.id,companyDomain:e.id,...e.data()})}),{success:!0,companies:s}}catch(t){return console.error("[FirestoreService] getCompanies error:",t),{success:!1,error:t.message}}}async function d(e){const t=l();if(!t)throw new Error("Firestore not initialized");try{const s=await t.collection("companies").doc(e).get();return s.exists?{success:!0,company:{id:s.id,companyDomain:s.id,...s.data()}}:{success:!1,error:"会社が見つかりません"}}catch(s){return console.error("[FirestoreService] getCompany error:",s),{success:!1,error:s.message}}}async function u(e,t){const s=l();if(!s)throw new Error("Firestore not initialized");try{const o=s.collection("companies").doc(e),r=!(await o.get()).exists,c={...t,updatedAt:a.firestore.FieldValue.serverTimestamp()};return r&&(c.createdAt=a.firestore.FieldValue.serverTimestamp()),await o.set(c,{merge:!0}),{success:!0,message:r?"会社を作成しました":"会社情報を更新しました",companyDomain:e}}catch(o){return console.error("[FirestoreService] saveCompany error:",o),{success:!1,error:o.message}}}async function p(e){const t=l();if(!t)throw new Error("Firestore not initialized");try{const s=t.batch();(await t.collection("companies").doc(e).collection("jobs").get()).forEach(e=>s.delete(e.ref));(await t.collection("companies").doc(e).collection("lpSettings").get()).forEach(e=>s.delete(e.ref));return(await t.collection("companies").doc(e).collection("recruitSettings").get()).forEach(e=>s.delete(e.ref)),s.delete(t.collection("companies").doc(e)),await s.commit(),{success:!0,message:"会社を削除しました"}}catch(s){return console.error("[FirestoreService] deleteCompany error:",s),{success:!1,error:s.message}}}async function h(e){const t=l();if(!t)throw new Error("Firestore not initialized");try{const s=await t.collection("companies").doc(e).collection("jobs").orderBy("order","asc").get(),o=[];let r=3;return s.forEach(e=>{o.push({...e.data(),_rowIndex:r,_docId:e.id}),r++}),{success:!0,jobs:o}}catch(s){return console.error("[FirestoreService] getJobs error:",s),{success:!1,error:s.message,jobs:[]}}}async function g(e,t,s=null){const o=l();if(!o)throw new Error("Firestore not initialized");try{const r=o.collection("companies").doc(e).collection("jobs");let c,i,n=!1;if(s)c=r.doc(String(s)),i=s;else if(t.id){c=r.doc(String(t.id));n=!(await c.get()).exists,i=t.id}else{const e=await r.orderBy("id","desc").limit(1).get();let t=0;e.forEach(e=>{const s=parseInt(e.data().id)||0;s>t&&(t=s)}),i=t+1,c=r.doc(String(i)),n=!0}const l={...t,id:String(i),updatedAt:a.firestore.FieldValue.serverTimestamp()};return n&&(l.createdAt=a.firestore.FieldValue.serverTimestamp()),delete l._rowIndex,delete l._docId,await c.set(l,{merge:!0}),{success:!0,message:n?"求人を作成しました":"求人情報を更新しました",jobId:i,rowIndex:null}}catch(r){return console.error("[FirestoreService] saveJob error:",r),{success:!1,error:r.message}}}async function w(e,t){const s=l();if(!s)throw new Error("Firestore not initialized");try{return await s.collection("companies").doc(e).collection("jobs").doc(String(t)).delete(),{success:!0,message:"求人を削除しました"}}catch(o){return console.error("[FirestoreService] deleteJob error:",o),{success:!1,error:o.message}}}async function f(e,t="default"){const s=l();if(!s)throw new Error("Firestore not initialized");try{const o=await s.collection("companies").doc(e).collection("lpSettings").doc(String(t)).get();return o.exists?{success:!0,settings:o.data()}:{success:!0,settings:{}}}catch(o){return console.error("[FirestoreService] getLPSettings error:",o),{success:!1,error:o.message}}}async function b(e,t,s){const o=l();if(!o)throw new Error("Firestore not initialized");try{const r=o.collection("companies").doc(e).collection("lpSettings").doc(String(t||"default")),c={...s,companyDomain:e,jobId:String(t||"default"),updatedAt:a.firestore.FieldValue.serverTimestamp()};return await r.set(c,{merge:!0}),{success:!0,message:"LP設定を保存しました"}}catch(r){return console.error("[FirestoreService] saveLPSettings error:",r),{success:!1,error:r.message}}}async function y(e){const t=l();if(!t)throw new Error("Firestore not initialized");try{const s=await t.collection("companies").doc(e).collection("recruitSettings").doc("main").get();return s.exists?{success:!0,settings:s.data()}:{success:!0,settings:{}}}catch(s){return console.error("[FirestoreService] getRecruitSettings error:",s),{success:!1,error:s.message}}}async function S(e,t){const s=l();if(!s)throw new Error("Firestore not initialized");try{const o=s.collection("companies").doc(e).collection("recruitSettings").doc("main"),r={...t,companyDomain:e,updatedAt:a.firestore.FieldValue.serverTimestamp()};return await o.set(r,{merge:!0}),{success:!0,message:"採用ページ設定を保存しました"}}catch(o){return console.error("[FirestoreService] saveRecruitSettings error:",o),{success:!1,error:o.message}}}export{e as U,h as a,r as b,t as c,w as d,s as e,b as f,f as g,u as h,n as i,S as j,p as k,d as l,m,c as n,y as o,g as s,o as u};
