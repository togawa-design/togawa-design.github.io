import"./modulepreload-polyfill-YP0FEG5d.js";import{f as e,e as t}from"./utils-BE8OECDH.js";import{D as n,S as o,C as a,c as s,b as i,g as l,d as c}from"./LPEditor-Czlt2EG3.js";import{c as r,u as d}from"./image-uploader-BbO_OXWy.js";import{d as u,a as p,b as m,c as y}from"./job-feed-generator-BunZ_8BQ.js";import{f as v,i as g}from"./jobs-loader-Foiii4G8.js";const f="admin",h="company",b={credentials:{username:"admin",password:"receco2025"},sessionKey:"rikueco_admin_session",userRoleKey:"rikueco_user_role",userCompanyKey:"rikueco_user_company",gaPropertyId:"G-E1XC94EG05",gaApiKey:"AIzaSyAIC2WGg5dnvMh6TO4sivpbk4HtpYw4tbo",apiEndpoint:"https://asia-northeast1-generated-area-484613-e3.cloudfunctions.net/getAnalyticsData",firebaseConfig:{apiKey:"AIzaSyB3eXZoFkXOwnHxPvaHiWO7csmZK4KGqAQ",authDomain:"generated-area-484613-e3-90bd4.firebaseapp.com",projectId:"generated-area-484613-e3-90bd4"}},E="1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0",$="ä¼šç¤¾ä¸€è¦§",w="https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec";function I(e){return{standard:"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰",modern:"ãƒ¢ãƒ€ãƒ³",classic:"ã‚¯ãƒ©ã‚·ãƒƒã‚¯",minimal:"ãƒŸãƒ‹ãƒãƒ«",colorful:"ã‚«ãƒ©ãƒ•ãƒ«"}[e]||"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰"}const L=[{id:"teamwork-1",name:"ãƒãƒ¼ãƒ ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°",url:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=400&q=60"},{id:"teamwork-2",name:"ã‚ªãƒ•ã‚£ã‚¹ãƒ¯ãƒ¼ã‚¯",url:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&q=60"},{id:"teamwork-3",name:"ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",url:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=400&q=60"},{id:"teamwork-4",name:"ãƒ“ã‚¸ãƒã‚¹æ¡æ‰‹",url:"https://images.unsplash.com/photo-1521791136064-7986c2920216?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1521791136064-7986c2920216?w=400&q=60"},{id:"teamwork-5",name:"ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—",url:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=400&q=60"},{id:"work-1",name:"è£½é€ ãƒ©ã‚¤ãƒ³",url:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&q=60"},{id:"work-2",name:"å€‰åº«ä½œæ¥­",url:"https://images.unsplash.com/photo-1553413077-190dd305871c?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1553413077-190dd305871c?w=400&q=60"},{id:"work-3",name:"å»ºè¨­ç¾å ´",url:"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&q=60"},{id:"work-4",name:"å·¥å ´ä½œæ¥­",url:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=400&q=60"},{id:"work-5",name:"ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯",url:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400&q=60"}];let q=null,k=null,S=null,B=null,x=null,A=null;async function T(e,t){if(k)try{const n=await k.collection("admin_users").doc(e).get();if(n.exists){const e=n.data();x=e.role||h,A=e.companyDomain||null,sessionStorage.setItem(b.userRoleKey,x),A&&sessionStorage.setItem(b.userCompanyKey,A),console.log("[Admin] User role loaded:",x,A)}else{const e=await k.collection("admin_users").where("email","==",t).limit(1).get();if(e.empty)x=null,A=null,console.log("[Admin] User not registered in admin_users");else{const t=e.docs[0].data();x=t.role||h,A=t.companyDomain||null,sessionStorage.setItem(b.userRoleKey,x),A&&sessionStorage.setItem(b.userCompanyKey,A),console.log("[Admin] User role loaded by email:",x,A)}}}catch(n){console.error("[Admin] Failed to load user role:",n)}}function j(){return B}function D(){return x||sessionStorage.getItem(b.userRoleKey)}function M(){return A||sessionStorage.getItem(b.userCompanyKey)}function C(){return D()===f}async function H(e,t,n,o=""){if(!C())return{success:!1,error:"æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“"};if(!k)return{success:!1,error:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"};try{if(!(await k.collection("company_users").where("username","==",e).where("companyDomain","==",n).get()).empty)return{success:!1,error:"ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™"};return{success:!0,id:(await k.collection("company_users").add({username:e,password:t,companyDomain:n,name:o,createdAt:firebase.firestore.FieldValue.serverTimestamp()})).id}}catch(a){return console.error("Failed to add company user:",a),{success:!1,error:a.message}}}function P(e=12){const t="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ23456789!@#$%";let n="";for(let o=0;o<e;o++)n+=t.charAt(Math.floor(62*Math.random()));return n}function U(e){return`${e}_user_${Math.random().toString(36).substring(2,6)}`}async function O(e){if(!k)return!1;try{return!(await k.collection("company_users").where("companyDomain","==",e).limit(1).get()).empty}catch(t){return console.error("Failed to check company user:",t),!1}}let R=[];async function N(){const n=document.getElementById("date-range"),o=(null==n?void 0:n.value)||7,a=b.apiEndpoint;if(a)try{await async function(n,o){try{_(!0),function(e){const t='<div class="section-loading"><div class="loading-spinner"></div><span>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</span></div>';document.querySelectorAll(".stat-value").forEach(e=>{e.dataset.originalText=e.textContent,e.innerHTML='<span class="loading-dots">...</span>'});const n=document.getElementById("daily-chart");n&&e&&(n.innerHTML=t);const o=document.querySelector(".data-table tbody");o&&e&&(o.innerHTML=`<tr><td colspan="5" style="text-align:center;padding:2rem;">${t}</td></tr>`);const a=document.getElementById("company-cards");a&&e&&(a.innerHTML=t);const s=document.querySelector("#applications-section .data-table tbody");s&&e&&(s.innerHTML=`<tr><td colspan="4" style="text-align:center;padding:2rem;">${t}</td></tr>`)}(!0);const a={},s=j();s&&(a.Authorization=`Bearer ${s}`);const i=await fetch(`${o}?days=${n}`,{headers:a});if(!i.ok)throw new Error(`API Error: ${i.status}`);const l=await i.json();if(!l.success)throw new Error(l.error||"Unknown error");const c=l.data;c.overview&&(F("total-pageviews",e(c.overview.pageViews)),F("total-users",e(c.overview.users)),F("company-views",e(c.overview.companyViews)),F("apply-clicks",e(c.overview.applyClicks))),c.daily&&function(e){const t=document.getElementById("daily-chart");if(!t)return;if(!e||0===e.length)return void(t.innerHTML="<p>ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>");const n=Math.max(...e.map(e=>e.views)),o=e.length>30?e.filter((e,t)=>t%3==0):e;t.innerHTML=`\n    <div class="simple-chart">\n      <div class="chart-bars">\n        ${o.map(e=>`\n            <div class="chart-bar-wrapper">\n              <div class="chart-bar" style="height: ${n>0?e.views/n*100:0}%">\n                <span class="bar-value">${e.views}</span>\n              </div>\n              <span class="bar-label">${e.date}</span>\n            </div>\n          `).join("")}\n      </div>\n    </div>\n  `}(c.daily),c.companies&&(R=c.companies.filter(e=>e.domain&&"(not set)"!==e.domain&&e.name&&"(not set)"!==e.name).map(e=>({name:e.name,domain:e.domain,views:e.views,clicks:e.clicks,pattern:"standard"})),G(),V()),c.applications&&function(e){const n=document.querySelector("#applications-table tbody");if(!n)return;const o={apply:"å¿œå‹Ÿãƒœã‚¿ãƒ³",line:"LINEç›¸è«‡",consult:"ç›¸è«‡ãƒ•ã‚©ãƒ¼ãƒ "};if(!e||0===e.length)return void(n.innerHTML='<tr><td colspan="4" class="loading-cell">å¿œå‹Ÿãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>');n.innerHTML=e.map(e=>`\n    <tr>\n      <td>${t(e.date)}</td>\n      <td>${t(e.company)}</td>\n      <td><span class="type-badge ${t(e.type)}">${o[e.type]||t(e.type)}</span></td>\n      <td>${t(e.source)}</td>\n    </tr>\n  `).join("")}(c.applications),_(!1)}catch(a){console.error("[Admin] API fetch error:",a),_(!1),z(n)}}(o,a)}catch(s){console.error("[Admin] API fetch failed, loading mock data:",s),z(o)}else z(o)}function _(e){const t=document.getElementById("refresh-btn");t&&(t.textContent=e?"èª­ã¿è¾¼ã¿ä¸­...":"æ›´æ–°",t.disabled=e)}function F(e,t){const n=document.getElementById(e);n&&(n.textContent=t)}function z(n){const o=80*n,a=45*n,s=12*n;F("total-pageviews",e(150*n+Math.floor(500*Math.random()))),F("total-users",e(o+Math.floor(200*Math.random()))),F("company-views",e(a+Math.floor(100*Math.random()))),F("apply-clicks",e(s+Math.floor(30*Math.random()))),function(e){const t=document.getElementById("daily-chart");if(!t)return;const n=[],o=new Date;for(let i=e-1;i>=0;i--){const e=new Date(o);e.setDate(e.getDate()-i),n.push({date:`${e.getMonth()+1}/${e.getDate()}`,views:Math.floor(100+200*Math.random()),clicks:Math.floor(5+20*Math.random())})}const a=Math.max(...n.map(e=>e.views)),s=e>30?n.filter((e,t)=>t%3==0):n;t.innerHTML=`\n    <div class="simple-chart">\n      <div class="chart-bars">\n        ${s.map(e=>`\n            <div class="chart-bar-wrapper">\n              <div class="chart-bar" style="height: ${e.views/a*100}%">\n                <span class="bar-value">${e.views}</span>\n              </div>\n              <span class="bar-label">${e.date}</span>\n            </div>\n          `).join("")}\n      </div>\n    </div>\n  `}(n),R=[{name:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",domain:"toyota",views:1250,clicks:89,pattern:"modern"},{name:"æ—¥ç”£è‡ªå‹•è»Š",domain:"nissan",views:980,clicks:67,pattern:"classic"},{name:"æœ¬ç”°æŠ€ç ”å·¥æ¥­",domain:"honda",views:856,clicks:54,pattern:"colorful"},{name:"ã‚¹ãƒãƒ«",domain:"subaru",views:654,clicks:43,pattern:"minimal"},{name:"ãƒãƒ„ãƒ€",domain:"mazda",views:523,clicks:32,pattern:"standard"},{name:"ã‚¹ã‚ºã‚­",domain:"suzuki",views:412,clicks:28,pattern:"modern"},{name:"ãƒ€ã‚¤ãƒãƒ„",domain:"daihatsu",views:387,clicks:24,pattern:"classic"},{name:"ä¸‰è±è‡ªå‹•è»Š",domain:"mitsubishi",views:298,clicks:18,pattern:"standard"}],G(),V(),function(){const e=document.querySelector("#applications-table tbody");if(!e)return;const n=[{date:"2025/01/17 14:32",company:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",type:"apply",source:"Googleæ¤œç´¢"},{date:"2025/01/17 13:15",company:"æ—¥ç”£è‡ªå‹•è»Š",type:"line",source:"ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹"},{date:"2025/01/17 11:48",company:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",type:"apply",source:"Yahooæ¤œç´¢"},{date:"2025/01/17 10:22",company:"æœ¬ç”°æŠ€ç ”å·¥æ¥­",type:"apply",source:"ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹"},{date:"2025/01/16 18:45",company:"ã‚¹ãƒãƒ«",type:"line",source:"Googleæ¤œç´¢"},{date:"2025/01/16 16:30",company:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",type:"apply",source:"SNS"},{date:"2025/01/16 14:12",company:"ãƒãƒ„ãƒ€",type:"apply",source:"Googleæ¤œç´¢"},{date:"2025/01/16 11:55",company:"æ—¥ç”£è‡ªå‹•è»Š",type:"apply",source:"ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹"}],o={apply:"å¿œå‹Ÿãƒœã‚¿ãƒ³",line:"LINEç›¸è«‡",consult:"ç›¸è«‡ãƒ•ã‚©ãƒ¼ãƒ "};e.innerHTML=n.map(e=>`\n    <tr>\n      <td>${t(e.date)}</td>\n      <td>${t(e.company)}</td>\n      <td><span class="type-badge ${t(e.type)}">${o[e.type]}</span></td>\n      <td>${t(e.source)}</td>\n    </tr>\n  `).join("")}()}function G(){const n=document.querySelector("#overview-company-table tbody");if(!n)return;const o=[...R].sort((e,t)=>t.views-e.views);n.innerHTML=o.slice(0,5).map((n,o)=>{const a=(n.clicks/n.views*100).toFixed(1);return`\n      <tr>\n        <td>${o+1}</td>\n        <td>${t(n.name)}</td>\n        <td>${e(n.views)}</td>\n        <td>${n.clicks}</td>\n        <td>${a}%</td>\n      </tr>\n    `}).join("")}function V(){const n=document.getElementById("company-cards");n&&(n.innerHTML=R.map(n=>{const o=(n.clicks/n.views*100).toFixed(1),a=I(n.pattern);return`\n      <div class="company-card" data-domain="${t(n.domain)}" data-name="${t(n.name)}" data-views="${n.views}" data-clicks="${n.clicks}">\n        <div class="company-card-header">\n          <h4>${t(n.name)}</h4>\n          <span class="pattern-badge ${t(n.pattern)}">${a}</span>\n        </div>\n        <div class="company-card-stats">\n          <div class="card-stat">\n            <span class="stat-value">${e(n.views)}</span>\n            <span class="stat-label">ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼</span>\n          </div>\n          <div class="card-stat">\n            <span class="stat-value">${n.clicks}</span>\n            <span class="stat-label">å¿œå‹Ÿã‚¯ãƒªãƒƒã‚¯</span>\n          </div>\n          <div class="card-stat">\n            <span class="stat-value">${o}%</span>\n            <span class="stat-label">CVR</span>\n          </div>\n        </div>\n        <button class="btn-view-status" data-domain="${t(n.domain)}" data-name="${t(n.name)}">ä¼šç¤¾ã®çŠ¶æ³ã‚’ç¢ºèª</button>\n      </div>\n    `}).join(""),n.querySelectorAll(".btn-view-status").forEach(t=>{t.addEventListener("click",t=>{!async function(t,n){const o=document.getElementById("company-detail-title");o&&(o.textContent=`${n} ã®åˆ†æ`);const a=document.getElementById("detail-view-page-btn");a&&(a.href=`company.html?c=${t}`);document.querySelectorAll(".admin-section").forEach(e=>{e.classList.remove("active")});const s=document.getElementById("section-company-detail");s&&s.classList.add("active");const i=document.getElementById("page-title");i&&(i.textContent="ä¼æ¥­è©³ç´°åˆ†æ");document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.classList.remove("active")}),function(){const e='<div class="loading-placeholder">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>';document.querySelectorAll(".detail-stat-value").forEach(e=>{e.textContent="-"}),document.querySelectorAll(".detail-chart").forEach(t=>{t.innerHTML=e}),document.querySelectorAll(".detail-table-container tbody").forEach(e=>{e.innerHTML='<tr><td colspan="4" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</td></tr>'})}();const l=document.getElementById("date-range"),c=(null==l?void 0:l.value)||30;try{await async function(t,n){const o=b.apiEndpoint,a={},s=j();s&&(a.Authorization=`Bearer ${s}`);const i=await fetch(`${o}?type=company-detail&domain=${t}&days=${n}`,{headers:a}),l=await i.json();if(!l.success)throw new Error(l.error||"API Error");!async function(t,n){var o,a;const s=R.find(e=>e.domain===n)||{},i=(null==(o=t.summary)?void 0:o.totalViews)||s.views||0,l=s.clicks||0,c=i>0?(l/i*100).toFixed(1):0,r=(null==(a=t.summary)?void 0:a.avgDailyViews)||0;F("detail-total-views",e(i)),F("detail-total-clicks",e(l)),F("detail-cvr",`${c}%`),F("detail-avg-daily",e(Math.round(r))),te(t.daily||[]),oe(t.traffic||[]);const d=t.gender||{};ae({male:d.male||0,female:d.female||0,other:d.unknown||0});const u=t.age||{};se((p=u,{"20s":(p["18-24"]||0)+(p["25-34"]||0),"30s":p["35-44"]||0,"40s":p["45-54"]||0,"50s":(p["55-64"]||0)+(p["65+"]||0)})),ne([]),ie([]),await le(n);var p}(l.data,t)}(t,c)}catch(r){console.error("[Admin] Company detail error:",r),function(t){const n=R.find(e=>e.domain===t)||{views:1e3,clicks:50},o=n.views,a=n.clicks,s=(a/o*100).toFixed(1);F("detail-total-views",e(o)),F("detail-total-clicks",e(a)),F("detail-cvr",`${s}%`),F("detail-avg-daily",e(Math.round(o/30)));const i=[],l=new Date;for(let e=29;e>=0;e--){const t=new Date(l);t.setDate(t.getDate()-e),i.push({date:`${t.getMonth()+1}/${t.getDate()}`,views:Math.floor(20+60*Math.random())})}te(i);const c=[{title:"è£½é€ ã‚¹ã‚¿ãƒƒãƒ•",applications:23},{title:"çµ„ç«‹ä½œæ¥­å“¡",applications:18},{title:"æ¤œæŸ»ãƒ»æ¤œå“",applications:12},{title:"æ©Ÿæ¢°ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼",applications:8},{title:"ãƒ•ã‚©ãƒ¼ã‚¯ãƒªãƒ•ãƒˆ",applications:5}];ne(c);oe([{channel:"Organic Search",count:Math.floor(.45*o)},{channel:"Direct",count:Math.floor(.28*o)},{channel:"Social",count:Math.floor(.18*o)},{channel:"Referral",count:Math.floor(.09*o)}]);ae({male:Math.floor(.72*a),female:Math.floor(.25*a),other:Math.floor(.03*a)});se({"20s":Math.floor(.35*a),"30s":Math.floor(.32*a),"40s":Math.floor(.23*a),"50s":Math.floor(.1*a)}),ie(c.map(e=>({...e,views:Math.floor(o*(e.applications/a)),cvr:(e.applications/(o*(e.applications/a))*100).toFixed(1)}))),le(t)}(t)}}(t.target.dataset.domain,t.target.dataset.name)})}))}function K(e){const t=document.querySelectorAll(".company-card"),n=e.toLowerCase();t.forEach(e=>{const t=e.dataset.name.toLowerCase(),o=e.dataset.domain.toLowerCase();t.includes(n)||o.includes(n)?e.style.display="":e.style.display="none"})}function J(){const e=document.getElementById("sort-by"),t=(null==e?void 0:e.value)||"views",n=document.getElementById("company-cards");if(!n)return;const o=Array.from(n.querySelectorAll(".company-card"));o.sort((e,n)=>{switch(t){case"views":return parseInt(n.dataset.views)-parseInt(e.dataset.views);case"clicks":return parseInt(n.dataset.clicks)-parseInt(e.dataset.clicks);case"cvr":const t=parseInt(e.dataset.clicks)/parseInt(e.dataset.views);return parseInt(n.dataset.clicks)/parseInt(n.dataset.views)-t;case"name":return e.dataset.name.localeCompare(n.dataset.name,"ja");default:return 0}}),o.forEach(e=>n.appendChild(e))}function Y(){const n=document.querySelectorAll(".analytics-tab"),o=document.querySelectorAll(".analytics-tab-content");n.forEach(a=>{a.addEventListener("click",()=>{const s=a.dataset.tab;n.forEach(e=>e.classList.remove("active")),a.classList.add("active"),o.forEach(e=>e.classList.remove("active"));const i=document.getElementById(s);i&&(i.classList.add("active"),async function(n){const o=document.getElementById("date-range"),a=(null==o?void 0:o.value)||30,s=b.apiEndpoint;switch(n){case"engagement-tab":await async function(n,o){try{const a={},s=j();s&&(a.Authorization=`Bearer ${s}`);const i=await fetch(`${o}?type=engagement&days=${n}`,{headers:a}),l=await i.json();l.success&&l.data?function(n){const o=n.overall||{};F("avg-session-duration",`${o.avgSessionDuration||0}ç§’`),F("engagement-rate",`${o.engagementRate||0}%`),F("bounce-rate",`${o.bounceRate||0}%`);const a=document.querySelector("#engagement-company-table tbody");a&&n.byCompany&&n.byCompany.length>0?a.innerHTML=n.byCompany.map(n=>`\n      <tr>\n        <td>${t(n.name||n.domain)}</td>\n        <td>${e(n.views)}</td>\n        <td>${Math.round(n.engagementTime)}ç§’</td>\n        <td>${n.avgTimePerView}ç§’</td>\n      </tr>\n    `).join(""):a&&(a.innerHTML='<tr><td colspan="4" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>')}(l.data):W()}catch(a){console.error("[Admin] Engagement data error:",a),W()}}(a,s);break;case"traffic-tab":await async function(n,o){try{const a={},s=j();s&&(a.Authorization=`Bearer ${s}`);const i=await fetch(`${o}?type=traffic&days=${n}`,{headers:a}),l=await i.json();l.success&&l.data?function(n){const o=document.getElementById("channel-chart");if(o&&n.channels&&n.channels.length>0){const a=Math.max(...n.channels.map(e=>e.sessions));o.innerHTML=`\n      <div class="horizontal-bar-chart">\n        ${n.channels.map(n=>{const o=a>0?n.sessions/a*100:0;return`\n            <div class="bar-row">\n              <span class="bar-label">${t(n.channel)}</span>\n              <div class="bar-track">\n                <div class="bar-fill" style="width: ${o}%"></div>\n                <span class="bar-value">${e(n.sessions)}</span>\n              </div>\n            </div>\n          `}).join("")}\n      </div>\n    `}const a=document.querySelector("#source-table tbody");a&&n.sources&&n.sources.length>0?a.innerHTML=n.sources.map(n=>`\n      <tr>\n        <td>${t(n.source)}</td>\n        <td>${t(n.medium)}</td>\n        <td>${e(n.sessions)}</td>\n        <td>${e(n.users)}</td>\n      </tr>\n    `).join(""):a&&(a.innerHTML='<tr><td colspan="4" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>')}(l.data):Q()}catch(a){console.error("[Admin] Traffic data error:",a),Q()}}(a,s);break;case"funnel-tab":await async function(n,o){try{const a={},s=j();s&&(a.Authorization=`Bearer ${s}`);const i=await fetch(`${o}?type=funnel&days=${n}`,{headers:a}),l=await i.json();l.success&&l.data?function(n){const o=document.getElementById("funnel-chart");o&&n.funnel&&n.funnel.length>0&&(o.innerHTML=n.funnel.map(n=>`\n      <div class="funnel-stage">\n        <span class="funnel-stage-name">${t(n.stage)}</span>\n        <span class="funnel-stage-count">${e(n.count)}</span>\n        <span class="funnel-stage-rate">${n.rate}%</span>\n      </div>\n    `).join(""));const a=document.getElementById("action-breakdown-chart");if(a&&n.actionBreakdown&&n.actionBreakdown.length>0){const o=Math.max(...n.actionBreakdown.map(e=>e.count));a.innerHTML=`\n      <div class="horizontal-bar-chart">\n        ${n.actionBreakdown.map(n=>{const a=o>0?n.count/o*100:0;return`\n            <div class="bar-row">\n              <span class="bar-label">${t(n.label)}</span>\n              <div class="bar-track">\n                <div class="bar-fill" style="width: ${a}%"></div>\n                <span class="bar-value">${e(n.count)}</span>\n              </div>\n            </div>\n          `}).join("")}\n      </div>\n    `}const s=document.querySelector("#company-funnel-table tbody");s&&n.byCompany&&n.byCompany.length>0?s.innerHTML=n.byCompany.map(n=>`\n      <tr>\n        <td>${t(n.domain)}</td>\n        <td>${e(n.views)}</td>\n        <td>${e(n.clicks)}</td>\n        <td>${n.cvr}%</td>\n      </tr>\n    `).join(""):s&&(s.innerHTML='<tr><td colspan="4" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>')}(l.data):X()}catch(a){console.error("[Admin] Funnel data error:",a),X()}}(a,s);break;case"trends-tab":await async function(n,o){try{const a={},s=j();s&&(a.Authorization=`Bearer ${s}`);const i=await fetch(`${o}?type=trends&days=${n}`,{headers:a}),l=await i.json();l.success&&l.data?function(n){n.insights&&(F("peak-day",n.insights.peakDay||"-"),F("peak-hour",n.insights.peakHour||"-"));const o=document.getElementById("day-of-week-chart");if(o&&n.byDayOfWeek&&n.byDayOfWeek.length>0){const a=Math.max(...n.byDayOfWeek.map(e=>e.sessions));o.innerHTML=`\n      <div class="day-chart">\n        ${n.byDayOfWeek.map(n=>`\n            <div class="day-bar" style="height: ${a>0?n.sessions/a*100:0}%" data-day="${t(n.day)}">\n              <span class="day-value">${e(n.sessions)}</span>\n            </div>\n          `).join("")}\n      </div>\n    `}const a=document.getElementById("hour-chart");if(a&&n.byHour&&n.byHour.length>0){const e=Math.max(...n.byHour.map(e=>e.sessions));a.innerHTML=`\n      <div class="hour-chart">\n        ${n.byHour.map(t=>`\n            <div class="hour-bar" style="height: ${e>0?t.sessions/e*100:0}%" data-hour="${t.hour}"></div>\n          `).join("")}\n      </div>\n    `}}(l.data):Z()}catch(a){console.error("[Admin] Trend data error:",a),Z()}}(a,s)}}(s))})})}function W(){F("avg-session-duration","45.2ç§’"),F("engagement-rate","68.5%"),F("bounce-rate","31.5%");const t=document.querySelector("#engagement-company-table tbody");if(t){const n=[{name:"ãƒˆãƒ¨ã‚¿è‡ªå‹•è»Š",views:1250,time:4500,avg:"3.6"},{name:"æ—¥ç”£è‡ªå‹•è»Š",views:980,time:3200,avg:"3.3"},{name:"æœ¬ç”°æŠ€ç ”å·¥æ¥­",views:856,time:2800,avg:"3.3"}];t.innerHTML=n.map(t=>`\n      <tr>\n        <td>${t.name}</td>\n        <td>${e(t.views)}</td>\n        <td>${t.time}ç§’</td>\n        <td>${t.avg}ç§’</td>\n      </tr>\n    `).join("")}}function Q(){const t=document.getElementById("channel-chart");if(t){const n=[{channel:"Organic Search",sessions:1250},{channel:"Direct",sessions:890},{channel:"Social",sessions:456},{channel:"Referral",sessions:234}],o=1250;t.innerHTML=`\n      <div class="horizontal-bar-chart">\n        ${n.map(t=>{const n=t.sessions/o*100;return`\n            <div class="bar-row">\n              <span class="bar-label">${t.channel}</span>\n              <div class="bar-track">\n                <div class="bar-fill" style="width: ${n}%"></div>\n                <span class="bar-value">${e(t.sessions)}</span>\n              </div>\n            </div>\n          `}).join("")}\n      </div>\n    `}const n=document.querySelector("#source-table tbody");if(n){const t=[{source:"google",medium:"organic",sessions:890,users:756},{source:"(direct)",medium:"(none)",sessions:456,users:412},{source:"yahoo",medium:"organic",sessions:234,users:198}];n.innerHTML=t.map(t=>`\n      <tr>\n        <td>${t.source}</td>\n        <td>${t.medium}</td>\n        <td>${e(t.sessions)}</td>\n        <td>${e(t.users)}</td>\n      </tr>\n    `).join("")}}function X(){const t=document.getElementById("funnel-chart");if(t){const n=[{stage:"ã‚µã‚¤ãƒˆè¨ªå•",count:5e3,rate:"100"},{stage:"ä¼æ¥­ãƒšãƒ¼ã‚¸é–²è¦§",count:2500,rate:"50.0"},{stage:"ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«",count:1800,rate:"36.0"},{stage:"ã‚¢ã‚¯ã‚·ãƒ§ãƒ³",count:150,rate:"6.0"}];t.innerHTML=n.map(t=>`\n      <div class="funnel-stage">\n        <span class="funnel-stage-name">${t.stage}</span>\n        <span class="funnel-stage-count">${e(t.count)}</span>\n        <span class="funnel-stage-rate">${t.rate}%</span>\n      </div>\n    `).join("")}const n=document.getElementById("action-breakdown-chart");if(n){const e=[{label:"å¿œå‹Ÿãƒœã‚¿ãƒ³",count:89},{label:"LINEç›¸è«‡",count:45},{label:"ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡",count:16}],t=89;n.innerHTML=`\n      <div class="horizontal-bar-chart">\n        ${e.map(e=>{const n=e.count/t*100;return`\n            <div class="bar-row">\n              <span class="bar-label">${e.label}</span>\n              <div class="bar-track">\n                <div class="bar-fill" style="width: ${n}%"></div>\n                <span class="bar-value">${e.count}</span>\n              </div>\n            </div>\n          `}).join("")}\n      </div>\n    `}const o=document.querySelector("#company-funnel-table tbody");if(o){const t=[{domain:"toyota",views:1250,clicks:89,cvr:"7.1"},{domain:"nissan",views:980,clicks:67,cvr:"6.8"},{domain:"honda",views:856,clicks:54,cvr:"6.3"}];o.innerHTML=t.map(t=>`\n      <tr>\n        <td>${t.domain}</td>\n        <td>${e(t.views)}</td>\n        <td>${t.clicks}</td>\n        <td>${t.cvr}%</td>\n      </tr>\n    `).join("")}}function Z(){F("peak-day","æœ¨"),F("peak-hour","14æ™‚");const e=document.getElementById("day-of-week-chart");if(e){const t=[{day:"æ—¥",sessions:120},{day:"æœˆ",sessions:180},{day:"ç«",sessions:220},{day:"æ°´",sessions:250},{day:"æœ¨",sessions:280},{day:"é‡‘",sessions:240},{day:"åœŸ",sessions:150}],n=280;e.innerHTML=`\n      <div class="day-chart">\n        ${t.map(e=>`\n            <div class="day-bar" style="height: ${e.sessions/n*100}%" data-day="${e.day}">\n              <span class="day-value">${e.sessions}</span>\n            </div>\n          `).join("")}\n      </div>\n    `}const t=document.getElementById("hour-chart");if(t){const e=[];for(let t=0;t<24;t++){let n=10;t>=9&&t<=18&&(n=30+Math.floor(50*Math.random())),t>=12&&t<=15&&(n=50+Math.floor(40*Math.random())),e.push({hour:t,sessions:n})}const n=Math.max(...e.map(e=>e.sessions));t.innerHTML=`\n      <div class="hour-chart">\n        ${e.map(e=>`\n            <div class="hour-bar" style="height: ${e.sessions/n*100}%" data-hour="${e.hour}"></div>\n          `).join("")}\n      </div>\n    `}}function ee(){document.querySelectorAll(".admin-section").forEach(e=>{e.classList.remove("active")});const e=document.getElementById("section-companies");e&&e.classList.add("active"),document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.classList.remove("active")});const t=document.querySelector('[data-section="companies"]');t&&t.parentElement.classList.add("active");const n=document.getElementById("page-title");n&&(n.textContent="ä¼æ¥­åˆ¥ãƒ‡ãƒ¼ã‚¿")}function te(e){const t=document.getElementById("detail-daily-chart");if(!t||!e.length)return void(t&&(t.innerHTML='<div class="loading-placeholder">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>'));const n=Math.max(...e.map(e=>e.views));t.innerHTML=`\n    <div class="detail-line-chart">\n      ${e.map((e,t)=>{const o=n>0?e.views/n*100:0;return`\n          <div class="detail-line-bar" style="height: ${Math.max(o,2)}%" data-date="${e.date}">\n            <span class="bar-tooltip">${e.date}: ${e.views}ä»¶</span>\n          </div>\n        `}).join("")}\n    </div>\n  `}function ne(e){const n=document.getElementById("detail-job-chart");if(!n)return;if(!e.length)return void(n.innerHTML='<div class="loading-placeholder">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>');const o=Math.max(...e.map(e=>e.applications));n.innerHTML=`\n    <div class="detail-bar-chart">\n      ${e.slice(0,5).map((e,n)=>{const a=o>0?e.applications/o*100:0;return`\n          <div class="detail-bar-row">\n            <span class="detail-bar-label" title="${t(e.title)}">${t(e.title)}</span>\n            <div class="detail-bar-track">\n              <div class="detail-bar-fill job-${n+1}" style="width: ${a}%"></div>\n              <span class="detail-bar-value">${e.applications}ä»¶</span>\n            </div>\n          </div>\n        `}).join("")}\n    </div>\n  `}function oe(e){const n=document.getElementById("detail-traffic-chart");if(!n)return;if(!e.length)return void(n.innerHTML='<div class="loading-placeholder">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>');const o=e.reduce((e,t)=>e+t.count,0),a=["organic","direct","social","referral"];let s=[],i=0;e.forEach((e,t)=>{const n=e.count/o*100,l=a[t%a.length];s.push(`${{organic:"#10b981",direct:"#6366f1",social:"#f59e0b",referral:"#8b5cf6"}[l]} ${i}deg ${i+3.6*n}deg`),i+=3.6*n}),n.innerHTML=`\n    <div class="detail-pie-chart">\n      <div class="pie-visual" style="background: conic-gradient(${s.join(", ")});"></div>\n      <div class="pie-legend">\n        ${e.map((e,n)=>{const s=(e.count/o*100).toFixed(1);return`\n            <div class="pie-legend-item">\n              <span class="pie-color ${a[n%a.length]}"></span>\n              <span class="pie-label">${t(e.channel)}</span>\n              <span class="pie-value">${s}%</span>\n            </div>\n          `}).join("")}\n      </div>\n    </div>\n  `}function ae(e){const t=document.getElementById("detail-gender-chart");if(!t)return;const n=e.male+e.female+e.other;if(0===n)return void(t.innerHTML='<div class="loading-placeholder">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>');const o=(e.male/n*100).toFixed(1),a=(e.female/n*100).toFixed(1),s=(e.other/n*100).toFixed(1),i=e.male/n*360,l=e.female/n*360;t.innerHTML=`\n    <div class="detail-pie-chart">\n      <div class="pie-visual" style="background: conic-gradient(#3b82f6 0deg ${i}deg, #ec4899 ${i}deg ${i+l}deg, #94a3b8 ${i+l}deg 360deg);"></div>\n      <div class="pie-legend">\n        <div class="pie-legend-item">\n          <span class="pie-color male"></span>\n          <span class="pie-label">ç”·æ€§</span>\n          <span class="pie-value">${e.male}äºº (${o}%)</span>\n        </div>\n        <div class="pie-legend-item">\n          <span class="pie-color female"></span>\n          <span class="pie-label">å¥³æ€§</span>\n          <span class="pie-value">${e.female}äºº (${a}%)</span>\n        </div>\n        <div class="pie-legend-item">\n          <span class="pie-color other"></span>\n          <span class="pie-label">ãã®ä»–</span>\n          <span class="pie-value">${e.other}äºº (${s}%)</span>\n        </div>\n      </div>\n    </div>\n  `}function se(e){const t=document.getElementById("detail-age-chart");if(!t)return;const n=e["20s"]+e["30s"]+e["40s"]+e["50s"];if(0===n)return void(t.innerHTML='<div class="loading-placeholder">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>');const o=[{key:"20s",label:"20ä»£",color:"age-20s",colorCode:"#3b82f6"},{key:"30s",label:"30ä»£",color:"age-30s",colorCode:"#10b981"},{key:"40s",label:"40ä»£",color:"age-40s",colorCode:"#f59e0b"},{key:"50s",label:"50ä»£ä»¥ä¸Š",color:"age-50s",colorCode:"#ef4444"}];let a=[],s=0;o.forEach(t=>{const o=e[t.key]/n*100;a.push(`${t.colorCode} ${s}deg ${s+3.6*o}deg`),s+=3.6*o}),t.innerHTML=`\n    <div class="detail-pie-chart">\n      <div class="pie-visual" style="background: conic-gradient(${a.join(", ")});"></div>\n      <div class="pie-legend">\n        ${o.map(t=>{const o=(e[t.key]/n*100).toFixed(1);return`\n            <div class="pie-legend-item">\n              <span class="pie-color ${t.color}"></span>\n              <span class="pie-label">${t.label}</span>\n              <span class="pie-value">${e[t.key]}äºº (${o}%)</span>\n            </div>\n          `}).join("")}\n      </div>\n    </div>\n  `}function ie(n){const o=document.querySelector("#detail-job-table tbody");o&&(n.length?o.innerHTML=n.map(n=>`\n    <tr>\n      <td>${t(n.title)}</td>\n      <td>${e(n.views)}</td>\n      <td>${n.applications}</td>\n      <td>${n.cvr}%</td>\n    </tr>\n  `).join(""):o.innerHTML='<tr><td colspan="4" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>')}async function le(e){const t=b.apiEndpoint,n={},o=j();o&&(n.Authorization=`Bearer ${o}`);try{const o=await fetch(`${t}?type=recent-applications&domain=${e}&limit=10`,{headers:n}),a=await o.json();if(a.success&&a.data&&a.data.applications){ce(a.data.applications.map(e=>({date:e.date,job:e.jobTitle||"-",type:e.type||"apply",source:e.source||"Direct"})))}else ce([])}catch(a){console.error("[Admin] Recent applications error:",a),ce([])}}function ce(e){const n=document.querySelector("#detail-recent-applications tbody");if(!n)return;const o={apply:"å¿œå‹Ÿ",line:"LINE",consult:"ç›¸è«‡"};e.length?n.innerHTML=e.map(e=>`\n    <tr>\n      <td>${t(e.date)}</td>\n      <td>${t(e.job)}</td>\n      <td><span class="type-badge ${e.type}">${o[e.type]||e.type}</span></td>\n      <td>${t(e.source)}</td>\n    </tr>\n  `).join(""):n.innerHTML='<tr><td colspan="4" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>'}function re(e){const t=[];let n="",o=!1;for(let a=0;a<e.length;a++){const s=e[a];'"'===s?o&&'"'===e[a+1]?(n+='"',a++):o=!o:","!==s||o?n+=s:(t.push(n.trim()),n="")}return t.push(n.trim()),t}function de(e){const t=e.replace(/"/g,"").trim();return{"ä¼šç¤¾å":"company",company:"company","ä¼šç¤¾ãƒ‰ãƒ¡ã‚¤ãƒ³":"companyDomain",companyDomain:"companyDomain",company_domain:"companyDomain","ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³":"designPattern",designPattern:"designPattern",design_pattern:"designPattern","è¡¨ç¤ºã™ã‚‹":"showCompany",showCompany:"showCompany",visible:"showCompany","ç”»åƒURL":"imageUrl",imageUrl:"imageUrl",image_url:"imageUrl","èª¬æ˜":"description",description:"description","ä¸¦ã³é †":"order",order:"order","ç®¡ç†ã‚·ãƒ¼ãƒˆ":"manageSheetUrl","ç®¡ç†ã‚·ãƒ¼ãƒˆURL":"manageSheetUrl",manageSheetUrl:"manageSheetUrl","æ±‚äººã‚·ãƒ¼ãƒˆ":"jobsSheet","æ±‚äººç®¡ç†ã‚·ãƒ¼ãƒˆ":"jobsSheet","æ±‚äººä¸€è¦§ã‚·ãƒ¼ãƒˆ":"jobsSheet",jobs_sheet:"jobsSheet",jobsSheet:"jobsSheet"}[t]||t}let ue=[],pe=!1;function me(){return ue}async function ye(){const e=document.getElementById("company-manage-tbody");e&&(e.innerHTML='<tr><td colspan="6" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</td></tr>');try{const t=`https://docs.google.com/spreadsheets/d/${E}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent($)}`,n=await fetch(t);if(!n.ok)throw new Error("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");let o=function(e){const t=e.split("\n"),n=re(t[0]||""),o=[];for(let a=1;a<t.length;a++){if(!t[a].trim())continue;const e=re(t[a]),s={};n.forEach((t,n)=>{const o=de(t);s[o]=e[n]||""}),o.push(s)}return o}(await n.text());if(o=o.map(e=>{if(e.companyDomain){const n=localStorage.getItem(`company_data_${e.companyDomain}`);if(n)try{const t=JSON.parse(n);return{...e,...t}}catch(t){console.error("ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",t)}}return e}),ue=o,e){if(0===o.length)return void(e.innerHTML='<tr><td colspan="6" class="loading-cell">ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>');he()}}catch(t){console.error("ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:",t),e&&(e.innerHTML='<tr><td colspan="6" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</td></tr>')}}function ve(e){window.location.href=`company-edit.html?domain=${encodeURIComponent(e)}`}function ge(){window.location.href="company-edit.html"}function fe(){const e=document.getElementById("company-modal");e&&(e.style.display="none"),pe=!1}function he(){const e=document.getElementById("company-manage-tbody");if(!e)return;const n=ue||[];0!==n.length?(e.innerHTML=n.map(e=>`\n    <tr data-domain="${t(e.companyDomain||"")}">\n      <td>${t(e.company||"")}</td>\n      <td><code>${t(e.companyDomain||"")}</code></td>\n      <td><span class="badge ${e.designPattern||"standard"}">${I(e.designPattern||"standard")}</span></td>\n      <td>${"â—‹"===e.showCompany||"â—¯"===e.showCompany?'<span class="badge success">è¡¨ç¤º</span>':'<span class="badge">éè¡¨ç¤º</span>'}</td>\n      <td>\n        <div class="action-buttons">\n          <button class="btn-small btn-edit" data-action="edit" data-domain="${t(e.companyDomain||"")}">ç·¨é›†</button>\n          <button class="btn-small btn-primary" data-action="jobs" data-domain="${t(e.companyDomain||"")}">æ±‚äººç®¡ç†</button>\n          <a href="lp.html?c=${t(e.companyDomain||"")}" target="_blank" class="btn-small btn-view">LPç¢ºèª</a>\n        </div>\n      </td>\n    </tr>\n  `).join(""),e.addEventListener("click",e=>{const t=e.target.closest("[data-action]");if(!t)return;const n=t.dataset.action,o=t.dataset.domain;"edit"===n?ve(o):"jobs"===n&&be(o)})):e.innerHTML='<tr><td colspan="5" class="loading-cell">ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>'}function be(e){const t=null==ue?void 0:ue.find(t=>t.companyDomain===e);if(!t)return void alert("ä¼šç¤¾æƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");const n=new URLSearchParams;n.set("domain",e),n.set("company",t.company||e),t.manageSheetUrl&&n.set("sheetUrl",t.manageSheetUrl),window.location.href=`job-manage.html?${n.toString()}`}function Ee(e){if(!e)return[];const t=[],n=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const o of n){const e=o.match(/Q[:ï¼š](.+?)(?=\|A[:ï¼š]|$)/i),n=o.match(/A[:ï¼š](.+)/i);e&&n&&t.push({id:`faq-${t.length+1}`,question:e[1].trim(),answer:n[1].trim()})}return t}let $e=[],we={},Ie=null,Le=null,qe=null,ke={};function Se(e,t={}){Le=e,qe=t.getCompanyDomain||(()=>null),function(){const e=document.getElementById("btn-add-section");e&&e.addEventListener("click",Te);const t=document.getElementById("add-section-modal-close");t&&t.addEventListener("click",je);const n=document.getElementById("section-editor-close");n&&n.addEventListener("click",He);const o=document.getElementById("section-editor-cancel");o&&o.addEventListener("click",He);const a=document.getElementById("section-editor-save");a&&a.addEventListener("click",Pe);const s=document.getElementById("section-delete-btn");s&&s.addEventListener("click",()=>{Ie&&(De(Ie.id),He())});const i=document.getElementById("lp-sections-list");i&&i.addEventListener("click",Ae);document.querySelectorAll(".modal-overlay").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.style.display="none")})})}(),function(){const e=document.getElementById("template-selector-container");if(!e)return;const t=we.layoutStyle||"default";e.innerHTML=function(e="default"){return`\n    <div class="lp-admin-layout-selector">\n      ${i.map(t=>{const n=e===t.id;return`\n      <div class="lp-admin-layout-option ${n?"selected":""}"\n           data-layout="${t.id}"\n           title="${t.description}">\n        <div class="lp-admin-layout-preview">\n          <span class="lp-admin-layout-preview-text">${t.preview}</span>\n        </div>\n        <div class="lp-admin-layout-info">\n          <span class="lp-admin-layout-name">${t.name}</span>\n          <span class="lp-admin-layout-desc">${t.description}</span>\n        </div>\n        ${n?'<span class="lp-admin-layout-check">âœ“</span>':""}\n      </div>\n    `}).join("")}\n    </div>\n  `}(t),function(e){e.querySelectorAll(".lp-admin-layout-option").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.layout;e.querySelectorAll(".lp-admin-layout-option").forEach(e=>{e.classList.toggle("selected",e===t);const n=e.querySelector(".lp-admin-layout-check");if(e===t){if(!n){const t=document.createElement("span");t.className="lp-admin-layout-check",t.textContent="âœ“",e.appendChild(t)}}else n&&n.remove()}),we.layoutStyle=n,Le&&Le()})})}(e)}()}function Be(e){const t=function(e){if(!e)return{version:"2.0",sections:[{id:"hero-1",type:"hero",order:0,visible:!0,data:{title:"",subtitle:"",image:""},layout:{}},{id:"points-1",type:"points",order:1,visible:!0,data:{sectionTitle:"ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ",points:[]},layout:{columns:3,style:"cards"}},{id:"jobs-1",type:"jobs",order:2,visible:!0,data:{sectionTitle:"å‹Ÿé›†ä¸­ã®æ±‚äºº"},layout:{}},{id:"details-1",type:"details",order:3,visible:!0,data:{sectionTitle:"å‹Ÿé›†è¦é …"},layout:{}},{id:"faq-1",type:"faq",order:4,visible:!0,data:{sectionTitle:"ã‚ˆãã‚ã‚‹è³ªå•",items:[]},layout:{style:"accordion"}},{id:"apply-1",type:"apply",order:5,visible:!0,data:{},layout:{}}],globalSettings:{designPattern:"standard",layoutStyle:"default",ctaText:"ä»Šã™ãå¿œå‹Ÿã™ã‚‹"}};if(e.lpContent)try{const t=JSON.parse(e.lpContent);if("2.0"===t.version){if(e.faq){const n=Ee(e.faq),o=t.sections.find(e=>"faq"===e.type);o&&(o.data=o.data||{},o.data.items=n,o.visible=n.length>0)}return t}}catch(l){}const t=[];let o={points:!0,jobs:!0,details:!0,faq:!0};try{e.sectionVisibility&&(o={...o,...JSON.parse(e.sectionVisibility)})}catch(l){console.warn("sectionVisibility parse error:",l)}let a=n;if(e.sectionOrder){const t=e.sectionOrder.split(",").map(e=>e.trim()).filter(e=>e);if(t.length>0){const e=n.filter(e=>!t.includes(e));a=[...t,...e]}}t.push({id:"hero-1",type:"hero",order:a.indexOf("hero"),visible:!0,data:{title:e.heroTitle||"",subtitle:e.heroSubtitle||"",image:e.heroImage||""},layout:{}});const s=[];for(let n=1;n<=6;n++){const t=e[`pointTitle${n}`],o=e[`pointDesc${n}`];t&&s.push({id:`p${n}`,title:t,description:o||""})}t.push({id:"points-1",type:"points",order:a.indexOf("points"),visible:o.points,data:{sectionTitle:"ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ",points:s},layout:{columns:3,style:"cards"}}),t.push({id:"jobs-1",type:"jobs",order:a.indexOf("jobs"),visible:o.jobs,data:{sectionTitle:"å‹Ÿé›†ä¸­ã®æ±‚äºº"},layout:{}}),t.push({id:"details-1",type:"details",order:a.indexOf("details"),visible:o.details,data:{sectionTitle:"å‹Ÿé›†è¦é …"},layout:{}});const i=Ee(e.faq);return t.push({id:"faq-1",type:"faq",order:a.indexOf("faq"),visible:o.faq&&i.length>0,data:{sectionTitle:"ã‚ˆãã‚ã‚‹è³ªå•",items:i},layout:{style:"accordion"}}),t.push({id:"apply-1",type:"apply",order:a.indexOf("apply"),visible:!0,data:{},layout:{}}),t.sort((e,t)=>e.order-t.order),{version:"2.0",sections:t,globalSettings:{designPattern:e.designPattern||"standard",layoutStyle:e.layoutStyle||"default",ctaText:e.ctaText||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",tiktokPixelId:e.tiktokPixelId||"",googleAdsId:e.googleAdsId||"",googleAdsLabel:e.googleAdsLabel||"",ogpTitle:e.ogpTitle||"",ogpDescription:e.ogpDescription||"",ogpImage:e.ogpImage||""}}}(e);$e=t.sections||[],we=t.globalSettings||{},e.layoutStyle&&(we.layoutStyle=e.layoutStyle),xe(),function(){const e=document.getElementById("template-selector-container");if(!e)return;const t=we.layoutStyle||"default";e.querySelectorAll(".lp-admin-layout-option").forEach(e=>{const n=e.dataset.layout===t;e.classList.toggle("selected",n);let o=e.querySelector(".lp-admin-layout-check");if(n){if(!o){const t=document.createElement("span");t.className="lp-admin-layout-check",t.textContent="âœ“",e.appendChild(t)}}else o&&o.remove()})}()}function xe(){const e=document.getElementById("lp-sections-list");if(!e)return;const t=[...$e].sort((e,t)=>(e.order||0)-(t.order||0));e.innerHTML=t.map(e=>function(e){var t,n;const s=o[e.type],i=null==s?void 0:s.required,l=!1!==e.visible,c="custom"===e.type&&(null==(t=e.layout)?void 0:t.variant)&&(null==(n=a[e.layout.variant])?void 0:n.name)||"";return`\n    <li class="section-item ${l?"":"hidden"}"\n        data-section-id="${e.id}"\n        data-type="${e.type}"\n        draggable="true">\n      <span class="section-drag-handle">â‹®â‹®</span>\n      <span class="section-icon">${(null==s?void 0:s.icon)||"ğŸ“„"}</span>\n      <div class="section-info">\n        <div class="section-name">${(null==s?void 0:s.name)||e.type}</div>\n        ${c?`<div class="section-type-label">${c}</div>`:""}\n      </div>\n      <div class="section-actions">\n        <button type="button" class="section-btn btn-edit" title="ç·¨é›†" data-section-id="${e.id}">\n          âœï¸\n        </button>\n        ${i?"":`\n          <button type="button" class="section-btn btn-duplicate" title="è¤‡è£½" data-section-id="${e.id}">\n            ğŸ“‹\n          </button>\n        `}\n        <button type="button" class="section-btn btn-visibility ${l?"":"hidden"}" title="${l?"éè¡¨ç¤ºã«ã™ã‚‹":"è¡¨ç¤ºã™ã‚‹"}" data-section-id="${e.id}">\n          ${l?"ğŸ‘ï¸":"ğŸ‘ï¸â€ğŸ—¨ï¸"}\n        </button>\n        ${i?"":`\n          <button type="button" class="section-btn btn-delete" title="å‰Šé™¤" data-section-id="${e.id}">\n            ğŸ—‘ï¸\n          </button>\n        `}\n      </div>\n    </li>\n  `}(e)).join(""),function(){const e=document.getElementById("lp-sections-list");if(!e)return;let t=null;e.querySelectorAll(".section-item").forEach(n=>{n.addEventListener("dragstart",e=>{t=n,n.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","")}),n.addEventListener("dragend",()=>{n.classList.remove("dragging"),t=null,e.querySelectorAll(".section-item").forEach(e=>{e.classList.remove("drag-over")}),function(){const e=document.getElementById("lp-sections-list");if(!e)return;const t=e.querySelectorAll(".section-item");t.forEach((e,t)=>{const n=e.dataset.sectionId,o=$e.find(e=>e.id===n);o&&(o.order=t)})}(),Fe()}),n.addEventListener("dragover",o=>{if(o.preventDefault(),o.dataTransfer.dropEffect="move",!t||t===n)return;const a=function(e,t){const n=[...e.querySelectorAll(".section-item:not(.dragging)")];return n.reduce((e,n)=>{const o=n.getBoundingClientRect(),a=t-o.top-o.height/2;return a<0&&a>(e.offset||Number.NEGATIVE_INFINITY)?{offset:a,element:n}:e},{offset:Number.NEGATIVE_INFINITY}).element||null}(e,o.clientY);e.querySelectorAll(".section-item").forEach(e=>{e.classList.remove("drag-over")}),a&&a!==t&&a.classList.add("drag-over"),null==a?e.appendChild(t):e.insertBefore(t,a)}),n.addEventListener("dragleave",()=>{n.classList.remove("drag-over")})})}()}function Ae(e){const t=e.target.closest("button");if(!t)return;const n=t.dataset.sectionId;n&&(t.classList.contains("btn-edit")?Ce(n):t.classList.contains("btn-duplicate")?function(e){var t;const n=$e.find(t=>t.id===e);if(!n)return;if(!s(n.type,$e))return void alert(`${(null==(t=o[n.type])?void 0:t.name)||n.type}ã¯ã“ã‚Œä»¥ä¸Šè¿½åŠ ã§ãã¾ã›ã‚“`);const a={...JSON.parse(JSON.stringify(n)),id:l(n.type),order:n.order+.5};$e.push(a),Me(),xe(),Fe()}(n):t.classList.contains("btn-visibility")?function(e){const t=$e.find(t=>t.id===e);if(!t)return;t.visible=!t.visible,xe(),Fe()}(n):t.classList.contains("btn-delete")&&De(n))}function Te(){const e=document.getElementById("add-section-modal"),t=document.getElementById("section-type-grid");e&&t&&(t.innerHTML=Object.entries(o).filter(([e])=>!o[e].required||s(e,$e)).map(([e,t])=>`\n      <div class="section-type-card" data-type="${e}" ${s(e,$e)?"":"disabled"}>\n        <span class="type-icon">${t.icon}</span>\n        <span class="type-name">${t.name}</span>\n        ${1!==t.maxInstances||s(e,$e)?"":'<span class="type-limit">è¿½åŠ æ¸ˆã¿</span>'}\n      </div>\n    `).join(""),t.querySelectorAll(".section-type-card:not([disabled])").forEach(e=>{e.addEventListener("click",()=>{!function(e){const t=o[e];if(!t)return;if(!s(e,$e))return void alert(`${t.name}ã¯ã“ã‚Œä»¥ä¸Šè¿½åŠ ã§ãã¾ã›ã‚“`);const n={id:l(e),type:e,order:$e.length,visible:!0,data:JSON.parse(JSON.stringify(t.defaultData)),layout:JSON.parse(JSON.stringify(t.defaultLayout))};$e.push(n),xe(),Ce(n.id),Fe()}(e.dataset.type),je()})}),e.style.display="flex")}function je(){const e=document.getElementById("add-section-modal");e&&(e.style.display="none")}function De(e){var t;if(!c(e,$e))return void alert("ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯å‰Šé™¤ã§ãã¾ã›ã‚“");const n=$e.find(t=>t.id===e),a=(null==(t=o[null==n?void 0:n.type])?void 0:t.name)||(null==n?void 0:n.type);confirm(`ã€Œ${a}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ`)&&($e=$e.filter(t=>t.id!==e),Me(),xe(),Fe())}function Me(){$e.sort((e,t)=>(e.order||0)-(t.order||0)),$e.forEach((e,t)=>{e.order=t})}function Ce(e){if(Ie=$e.find(t=>t.id===e),!Ie)return;const n=document.getElementById("section-editor-modal"),s=document.getElementById("section-editor-title"),i=document.getElementById("section-editor-content"),l=document.getElementById("section-delete-btn"),c=o[Ie.type];s.textContent=`${(null==c?void 0:c.name)||Ie.type}ã‚’ç·¨é›†`,l&&(l.style.display=(null==c?void 0:c.required)?"none":"inline-block"),i.innerHTML=function(e){switch(e.type){case"hero":return function(e){var n,o,a,s;return`\n    <div class="editor-section">\n      <div class="form-group">\n        <label for="editor-hero-title">ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n        <input type="text" id="editor-hero-title" value="${t((null==(n=e.data)?void 0:n.title)||"")}" placeholder="ä¾‹: æœˆå32ä¸‡å††ä»¥ä¸Šå¯ï¼å…¥ç¤¾ç‰¹å…¸ã‚ã‚Š">\n      </div>\n      <div class="form-group">\n        <label for="editor-hero-subtitle">ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«</label>\n        <input type="text" id="editor-hero-subtitle" value="${t((null==(o=e.data)?void 0:o.subtitle)||"")}" placeholder="ä¾‹: æœªçµŒé¨“è€…æ­“è¿ï¼å……å®Ÿã®ç ”ä¿®åˆ¶åº¦">\n      </div>\n      <div class="form-group">\n        <label>èƒŒæ™¯ç”»åƒ</label>\n        <div id="hero-image-uploader-container" data-current-url="${t((null==(a=e.data)?void 0:a.image)||"")}"></div>\n        <input type="hidden" id="editor-hero-image" value="${t((null==(s=e.data)?void 0:s.image)||"")}">\n      </div>\n    </div>\n  `}(e);case"points":return function(e){var t,n,o,a;const s=(null==(t=e.data)?void 0:t.points)||[];return`\n    <div class="editor-section">\n      <h4>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š</h4>\n      <div class="form-group">\n        <label for="editor-points-columns">ã‚«ãƒ©ãƒ æ•°</label>\n        <select id="editor-points-columns">\n          <option value="2" ${2===(null==(n=e.layout)?void 0:n.columns)?"selected":""}>2åˆ—</option>\n          <option value="3" ${3===(null==(o=e.layout)?void 0:o.columns)?"selected":""}>3åˆ—</option>\n          <option value="4" ${4===(null==(a=e.layout)?void 0:a.columns)?"selected":""}>4åˆ—</option>\n        </select>\n      </div>\n    </div>\n\n    <div class="editor-section">\n      <h4>ãƒã‚¤ãƒ³ãƒˆä¸€è¦§</h4>\n      <div id="editor-points-list" class="editor-items-list">\n        ${s.map((e,t)=>Ue(e,t)).join("")}\n      </div>\n      <button type="button" id="editor-add-point" class="btn-add-item">\n        <span>+</span> ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ \n      </button>\n    </div>\n  `}(e);case"faq":return function(e){var t;const n=(null==(t=e.data)?void 0:t.items)||[];return`\n    <div class="editor-section">\n      <h4>ã‚ˆãã‚ã‚‹è³ªå•</h4>\n      <div id="editor-faq-list" class="editor-items-list">\n        ${n.map((e,t)=>Oe(e,t)).join("")}\n      </div>\n      <button type="button" id="editor-add-faq" class="btn-add-item">\n        <span>+</span> Q&Aã‚’è¿½åŠ \n      </button>\n    </div>\n  `}(e);case"custom":return function(e){var n,o,s,i,l,c,r,d,u,p;const m=(null==(n=e.layout)?void 0:n.variant)||"text-only",y=!!(null==(o=e.data)?void 0:o.button);return`\n    <div class="editor-section">\n      <h4>ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ</h4>\n      <div class="variant-selector">\n        ${Object.entries(a).map(([e,t])=>`\n          <label class="variant-option ${m===e?"selected":""}">\n            <input type="radio" name="custom-variant" value="${e}" ${m===e?"checked":""}>\n            <span class="variant-icon">${t.icon}</span>\n            <span class="variant-name">${t.name}</span>\n          </label>\n        `).join("")}\n      </div>\n    </div>\n\n    <div class="editor-section">\n      <h4>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h4>\n      <div class="form-group">\n        <label for="editor-custom-title">ã‚¿ã‚¤ãƒˆãƒ«</label>\n        <input type="text" id="editor-custom-title" value="${t((null==(s=e.data)?void 0:s.title)||"")}">\n      </div>\n      <div class="form-group">\n        <label for="editor-custom-content">æœ¬æ–‡</label>\n        <div id="editor-custom-content" class="rich-editor" contenteditable="true">${(null==(i=e.data)?void 0:i.content)||""}</div>\n        <p class="form-hint">**å¤ªå­—** ã‚„ *æ–œä½“* ãŒä½¿ãˆã¾ã™</p>\n      </div>\n      <div class="form-group" id="custom-image-field">\n        <label>ç”»åƒ</label>\n        <div id="custom-image-uploader-container" data-current-url="${t((null==(l=e.data)?void 0:l.image)||"")}"></div>\n        <input type="hidden" id="editor-custom-image" value="${t((null==(c=e.data)?void 0:c.image)||"")}">\n      </div>\n    </div>\n\n    <div class="editor-section">\n      <h4>ãƒœã‚¿ãƒ³</h4>\n      <div class="form-group">\n        <label class="checkbox-label">\n          <input type="checkbox" id="editor-custom-has-button" ${y?"checked":""}>\n          ãƒœã‚¿ãƒ³ã‚’è¿½åŠ \n        </label>\n      </div>\n      <div id="button-fields" style="${y?"":"display:none"}">\n        <div class="form-group">\n          <label for="editor-button-text">ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</label>\n          <input type="text" id="editor-button-text" value="${t((null==(d=null==(r=e.data)?void 0:r.button)?void 0:d.text)||"")}">\n        </div>\n        <div class="form-group">\n          <label for="editor-button-url">ãƒªãƒ³ã‚¯å…ˆURL</label>\n          <input type="text" id="editor-button-url" value="${t((null==(p=null==(u=e.data)?void 0:u.button)?void 0:p.url)||"#")}">\n        </div>\n      </div>\n    </div>\n  `}(e);case"gallery":return function(e){var n,o,a,s,i,l,c,r;const d=(null==(n=e.data)?void 0:n.images)||[];return`\n    <div class="editor-section">\n      <h4>è¨­å®š</h4>\n      <div class="form-row">\n        <div class="form-group">\n          <label for="editor-gallery-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n          <input type="text" id="editor-gallery-title" value="${t((null==(o=e.data)?void 0:o.sectionTitle)||"")}">\n        </div>\n      </div>\n      <div class="form-row">\n        <div class="form-group">\n          <label for="editor-gallery-columns">ã‚«ãƒ©ãƒ æ•°</label>\n          <select id="editor-gallery-columns">\n            <option value="2" ${2===(null==(a=e.layout)?void 0:a.columns)?"selected":""}>2åˆ—</option>\n            <option value="3" ${3===(null==(s=e.layout)?void 0:s.columns)?"selected":""}>3åˆ—</option>\n            <option value="4" ${4===(null==(i=e.layout)?void 0:i.columns)?"selected":""}>4åˆ—</option>\n          </select>\n        </div>\n        <div class="form-group">\n          <label for="editor-gallery-style">ã‚¹ã‚¿ã‚¤ãƒ«</label>\n          <select id="editor-gallery-style">\n            <option value="grid" ${"grid"===(null==(l=e.layout)?void 0:l.style)?"selected":""}>ã‚°ãƒªãƒƒãƒ‰</option>\n            <option value="masonry" ${"masonry"===(null==(c=e.layout)?void 0:c.style)?"selected":""}>ãƒ¡ã‚¤ã‚½ãƒ³ãƒªãƒ¼</option>\n            <option value="slider" ${"slider"===(null==(r=e.layout)?void 0:r.style)?"selected":""}>ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <div class="editor-section">\n      <h4>ç”»åƒä¸€è¦§</h4>\n      <div id="editor-gallery-list" class="editor-items-list gallery-items">\n        ${d.map((e,t)=>Re(e,t)).join("")}\n      </div>\n      <button type="button" id="editor-add-gallery-image" class="btn-add-item">\n        <span>+</span> ç”»åƒã‚’è¿½åŠ \n      </button>\n    </div>\n  `}(e);case"testimonial":return function(e){var n,o,a,s,i;const l=(null==(n=e.data)?void 0:n.testimonials)||[];return`\n    <div class="editor-section">\n      <h4>è¨­å®š</h4>\n      <div class="form-row">\n        <div class="form-group">\n          <label for="editor-testimonial-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n          <input type="text" id="editor-testimonial-title" value="${t((null==(o=e.data)?void 0:o.sectionTitle)||"ç¤¾å“¡ã®å£°")}">\n        </div>\n        <div class="form-group">\n          <label for="editor-testimonial-style">ã‚¹ã‚¿ã‚¤ãƒ«</label>\n          <select id="editor-testimonial-style">\n            <option value="cards" ${"cards"===(null==(a=e.layout)?void 0:a.style)?"selected":""}>ã‚«ãƒ¼ãƒ‰</option>\n            <option value="list" ${"list"===(null==(s=e.layout)?void 0:s.style)?"selected":""}>ãƒªã‚¹ãƒˆ</option>\n            <option value="slider" ${"slider"===(null==(i=e.layout)?void 0:i.style)?"selected":""}>ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <div class="editor-section">\n      <h4>ç¤¾å“¡ä¸€è¦§</h4>\n      <div id="editor-testimonial-list" class="editor-items-list">\n        ${l.map((e,t)=>Ne(e,t)).join("")}\n      </div>\n      <button type="button" id="editor-add-testimonial" class="btn-add-item">\n        <span>+</span> ç¤¾å“¡ã‚’è¿½åŠ \n      </button>\n    </div>\n  `}(e);case"jobs":case"details":case"apply":return function(e){const t=o[e.type];return`\n    <div class="editor-section">\n      <p class="editor-info">\n        ã€Œ${(null==t?void 0:t.name)||e.type}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ã‚„æ±‚äººãƒ‡ãƒ¼ã‚¿ã‹ã‚‰è‡ªå‹•ç”Ÿæˆã•ã‚Œã¾ã™ã€‚<br>\n        è¡¨ç¤º/éè¡¨ç¤ºã®åˆ‡ã‚Šæ›¿ãˆã¨ä¸¦ã³é †ã®å¤‰æ›´ã®ã¿å¯èƒ½ã§ã™ã€‚\n      </p>\n    </div>\n  `}(e);default:return"<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯ç·¨é›†ã§ãã¾ã›ã‚“</p>"}}(Ie),function(){ke={},function(){const e=document.getElementById("hero-image-uploader-container");if(!e)return;const t=e.dataset.currentUrl||"",n=document.getElementById("editor-hero-image"),o=(null==qe?void 0:qe())||"default",a=r({id:"hero-image-uploader",label:"",currentUrl:t,uploadFn:e=>d(e,o),onUpload:e=>{n&&(n.value=e),Ie&&(Ie.data.image=e),Fe()}});e.innerHTML="",e.appendChild(a),ke.hero=a}(),function(){const e=document.getElementById("custom-image-uploader-container");if(!e)return;const t=e.dataset.currentUrl||"",n=document.getElementById("editor-custom-image"),o=(null==qe?void 0:qe())||"default",a=r({id:"custom-image-uploader",label:"",currentUrl:t,uploadFn:e=>d(e,o),onUpload:e=>{n&&(n.value=e),Ie&&(Ie.data.image=e),Fe()}});e.innerHTML="",e.appendChild(a),ke.custom=a}(),function(){const e=document.getElementById("editor-gallery-list");if(!e)return;const t=(null==qe?void 0:qe())||"default";e.querySelectorAll(".gallery-item").forEach((e,n)=>{const o=e.querySelector(".gallery-image-uploader-container");if(!o)return;const a=o.dataset.currentUrl||"",s=e.querySelector(".gallery-url"),i=r({id:`gallery-image-uploader-${n}`,label:"",currentUrl:a,uploadFn:e=>d(e,t),onUpload:e=>{s&&(s.value=e),Fe()}});o.innerHTML="",o.appendChild(i),ke[`gallery-${n}`]=i})}();const e=document.getElementById("editor-add-point");e&&e.addEventListener("click",()=>{const e=document.getElementById("editor-points-list"),t=e.querySelectorAll(".editor-item").length;e.insertAdjacentHTML("beforeend",Ue({title:"",description:""},t)),_e()});const t=document.getElementById("editor-add-faq");t&&t.addEventListener("click",()=>{const e=document.getElementById("editor-faq-list"),t=e.querySelectorAll(".editor-item").length;e.insertAdjacentHTML("beforeend",Oe({question:"",answer:""},t)),_e()});const n=document.getElementById("editor-add-gallery-image");n&&n.addEventListener("click",()=>{const e=document.getElementById("editor-gallery-list"),t=e.querySelectorAll(".editor-item").length;e.insertAdjacentHTML("beforeend",Re("",t)),_e(),function(e){const t=document.getElementById("editor-gallery-list");if(!t)return;const n=t.querySelectorAll(".gallery-item")[e];if(!n)return;const o=n.querySelector(".gallery-image-uploader-container");if(!o)return;const a=o.dataset.currentUrl||"",s=n.querySelector(".gallery-url"),i=(null==qe?void 0:qe())||"default",l=r({id:`gallery-image-uploader-${e}`,label:"",currentUrl:a,uploadFn:e=>d(e,i),onUpload:e=>{s&&(s.value=e),Fe()}});o.innerHTML="",o.appendChild(l),ke[`gallery-${e}`]=l}(t)});const o=document.getElementById("editor-add-testimonial");o&&o.addEventListener("click",()=>{const e=document.getElementById("editor-testimonial-list"),t=e.querySelectorAll(".editor-item").length;e.insertAdjacentHTML("beforeend",Ne({name:"",role:"",quote:""},t)),_e()});const a=document.getElementById("editor-custom-has-button");a&&a.addEventListener("change",()=>{const e=document.getElementById("button-fields");e&&(e.style.display=a.checked?"":"none")});document.querySelectorAll('input[name="custom-variant"]').forEach(e=>{e.addEventListener("change",()=>{document.querySelectorAll(".variant-option").forEach(e=>{e.classList.toggle("selected",e.querySelector("input").checked)})})}),_e()}(),n.style.display="flex"}function He(){const e=document.getElementById("section-editor-modal");e&&(e.style.display="none"),Ie=null}function Pe(){Ie&&(!function(){var e,t,n,o,a,s,i,l,c,r,d,u,p,m,y,v;if(!Ie)return;switch(Ie.type){case"hero":Ie.data.title=(null==(e=document.getElementById("editor-hero-title"))?void 0:e.value)||"",Ie.data.subtitle=(null==(t=document.getElementById("editor-hero-subtitle"))?void 0:t.value)||"",Ie.data.image=(null==(n=document.getElementById("editor-hero-image"))?void 0:n.value)||"";break;case"points":Ie.layout.columns=parseInt((null==(o=document.getElementById("editor-points-columns"))?void 0:o.value)||"3"),Ie.data.points=function(){const e=[];return document.querySelectorAll("#editor-points-list .editor-item").forEach((t,n)=>{var o,a;const s=(null==(o=t.querySelector(".point-title"))?void 0:o.value)||"",i=(null==(a=t.querySelector(".point-desc"))?void 0:a.value)||"";(s||i)&&e.push({id:`p${n+1}`,title:s,description:i})}),e}();break;case"faq":Ie.data.items=function(){const e=[];return document.querySelectorAll("#editor-faq-list .editor-item").forEach((t,n)=>{var o,a;const s=(null==(o=t.querySelector(".faq-question"))?void 0:o.value)||"",i=(null==(a=t.querySelector(".faq-answer"))?void 0:a.value)||"";s&&i&&e.push({id:`faq-${n+1}`,question:s,answer:i})}),e}();break;case"custom":Ie.layout.variant=(null==(a=document.querySelector('input[name="custom-variant"]:checked'))?void 0:a.value)||"text-only",Ie.data.title=(null==(s=document.getElementById("editor-custom-title"))?void 0:s.value)||"",Ie.data.content=(null==(i=document.getElementById("editor-custom-content"))?void 0:i.innerHTML)||"",Ie.data.image=(null==(l=document.getElementById("editor-custom-image"))?void 0:l.value)||"";const g=null==(c=document.getElementById("editor-custom-has-button"))?void 0:c.checked;Ie.data.button=g?{text:(null==(r=document.getElementById("editor-button-text"))?void 0:r.value)||"",url:(null==(d=document.getElementById("editor-button-url"))?void 0:d.value)||"#",style:"primary"}:null;break;case"gallery":Ie.layout.columns=parseInt((null==(u=document.getElementById("editor-gallery-columns"))?void 0:u.value)||"3"),Ie.layout.style=(null==(p=document.getElementById("editor-gallery-style"))?void 0:p.value)||"grid",Ie.data.sectionTitle=(null==(m=document.getElementById("editor-gallery-title"))?void 0:m.value)||"",Ie.data.images=function(){const e=[];return document.querySelectorAll("#editor-gallery-list .editor-item").forEach(t=>{var n,o;const a=(null==(n=t.querySelector(".gallery-url"))?void 0:n.value)||"",s=(null==(o=t.querySelector(".gallery-caption"))?void 0:o.value)||"";a&&e.push({url:a,caption:s})}),e}();break;case"testimonial":Ie.layout.style=(null==(y=document.getElementById("editor-testimonial-style"))?void 0:y.value)||"cards",Ie.data.sectionTitle=(null==(v=document.getElementById("editor-testimonial-title"))?void 0:v.value)||"ç¤¾å“¡ã®å£°",Ie.data.testimonials=function(){const e=[];return document.querySelectorAll("#editor-testimonial-list .editor-item").forEach(t=>{var n,o,a,s;const i=(null==(n=t.querySelector(".testimonial-name"))?void 0:n.value)||"",l=(null==(o=t.querySelector(".testimonial-role"))?void 0:o.value)||"",c=(null==(a=t.querySelector(".testimonial-quote"))?void 0:a.value)||"",r=(null==(s=t.querySelector(".testimonial-avatar"))?void 0:s.value)||"";(i||c)&&e.push({name:i,role:l,quote:c,avatar:r})}),e}()}}(),xe(),Fe(),He())}function Ue(e,n){return`\n    <div class="editor-item" data-index="${n}">\n      <div class="editor-item-header">\n        <span class="drag-handle">â‹®â‹®</span>\n        <span>ãƒã‚¤ãƒ³ãƒˆ ${n+1}</span>\n        <button type="button" class="btn-remove-item" data-index="${n}">Ã—</button>\n      </div>\n      <div class="form-group">\n        <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n        <input type="text" class="point-title" value="${t(e.title||"")}">\n      </div>\n      <div class="form-group">\n        <label>èª¬æ˜</label>\n        <textarea class="point-desc" rows="2">${t(e.description||"")}</textarea>\n      </div>\n    </div>\n  `}function Oe(e,n){return`\n    <div class="editor-item" data-index="${n}">\n      <div class="editor-item-header">\n        <span class="drag-handle">â‹®â‹®</span>\n        <span>Q&A ${n+1}</span>\n        <button type="button" class="btn-remove-item" data-index="${n}">Ã—</button>\n      </div>\n      <div class="form-group">\n        <label>è³ªå•</label>\n        <input type="text" class="faq-question" value="${t(e.question||"")}">\n      </div>\n      <div class="form-group">\n        <label>å›ç­”</label>\n        <textarea class="faq-answer" rows="3">${t(e.answer||"")}</textarea>\n      </div>\n    </div>\n  `}function Re(e,n){const o="string"==typeof e?e:e.url,a="object"==typeof e?e.caption:"";return`\n    <div class="editor-item gallery-item" data-index="${n}">\n      <div class="editor-item-header">\n        <span class="drag-handle">â‹®â‹®</span>\n        <span>ç”»åƒ ${n+1}</span>\n        <button type="button" class="btn-remove-item" data-index="${n}">Ã—</button>\n      </div>\n      <div class="form-group">\n        <label>ç”»åƒ</label>\n        <div class="gallery-image-uploader-container" data-current-url="${t(o||"")}"></div>\n        <input type="hidden" class="gallery-url" value="${t(o||"")}">\n      </div>\n      <div class="form-group">\n        <label>ã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ï¼ˆä»»æ„ï¼‰</label>\n        <input type="text" class="gallery-caption" value="${t(a||"")}">\n      </div>\n    </div>\n  `}function Ne(e,n){return`\n    <div class="editor-item" data-index="${n}">\n      <div class="editor-item-header">\n        <span class="drag-handle">â‹®â‹®</span>\n        <span>ç¤¾å“¡ ${n+1}</span>\n        <button type="button" class="btn-remove-item" data-index="${n}">Ã—</button>\n      </div>\n      <div class="form-row">\n        <div class="form-group">\n          <label>åå‰</label>\n          <input type="text" class="testimonial-name" value="${t(e.name||"")}">\n        </div>\n        <div class="form-group">\n          <label>å½¹è·ãƒ»éƒ¨ç½²</label>\n          <input type="text" class="testimonial-role" value="${t(e.role||"")}">\n        </div>\n      </div>\n      <div class="form-group">\n        <label>ã‚³ãƒ¡ãƒ³ãƒˆ</label>\n        <textarea class="testimonial-quote" rows="3">${t(e.quote||"")}</textarea>\n      </div>\n      <div class="form-group">\n        <label>å†™çœŸURLï¼ˆä»»æ„ï¼‰</label>\n        <input type="text" class="testimonial-avatar" value="${t(e.avatar||"")}">\n      </div>\n    </div>\n  `}function _e(){document.querySelectorAll(".btn-remove-item").forEach(e=>{e.onclick=e=>{const t=e.target.closest(".editor-item");if(t){t.remove();const e=t.parentElement||document.querySelector(".editor-items-list");e&&e.querySelectorAll(".editor-item").forEach((e,t)=>{e.dataset.index=t;const n=e.querySelector(".editor-item-header span:nth-child(2)");n&&(n.textContent=n.textContent.replace(/\d+/,t+1))})}}})}function Fe(){"function"==typeof Le&&Le()}let ze=null;let Ge=!1,Ve=[],Ke=null,Je=[],Ye=null;function We(e){const n=document.getElementById("lp-company-grid");n&&(0!==e.length?(n.innerHTML=e.map(e=>{const n=(e.company||e.companyDomain||"?").charAt(0).toUpperCase();return`\n      <div class="lp-company-card" data-domain="${t(e.companyDomain)}">\n        <div class="lp-company-icon">${t(n)}</div>\n        <div class="lp-company-name">${t(e.company||e.companyDomain)}</div>\n        <div class="lp-company-domain">${t(e.companyDomain)}</div>\n      </div>\n    `}).join(""),n.querySelectorAll(".lp-company-card").forEach(e=>{e.addEventListener("click",async()=>{const t=e.dataset.domain;Ye=t,n.querySelectorAll(".lp-company-card").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),await Xe(t);const o=document.getElementById("lp-company-select-group"),a=document.getElementById("lp-job-select-group");o&&(o.style.display="none"),a&&(a.style.display="block"),Qe("job");const s=document.getElementById("lp-selected-company-name");if(s){const e=Je.find(e=>e.companyDomain===t);s.textContent=`${(null==e?void 0:e.company)||t} ã®æ±‚äºº`}})})):n.innerHTML='<div class="lp-no-results"><p>è©²å½“ã™ã‚‹ä¼šç¤¾ãŒã‚ã‚Šã¾ã›ã‚“</p></div>')}function Qe(e){const t=document.querySelectorAll(".lp-step"),n=["company","job","edit"],o=n.indexOf(e);t.forEach(e=>{const t=e.dataset.step,a=n.indexOf(t);e.classList.remove("active","completed"),a<o?e.classList.add("completed"):a===o&&e.classList.add("active")})}async function Xe(e){var n,o;const a=document.getElementById("lp-job-grid"),s=document.getElementById("lp-job-select"),i=Je.find(t=>t.companyDomain===e);if(!i)return void console.warn(`[LPè¨­å®š] ä¼šç¤¾ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${e}`);a&&(a.innerHTML='<div class="lp-loading-placeholder">æ±‚äººã‚’èª­ã¿è¾¼ã¿ä¸­...</div>');const l=null==(n=i.jobsSheet)?void 0:n.trim(),c=null==(o=i.manageSheetUrl)?void 0:o.trim();let r="";if(l)r=`https://docs.google.com/spreadsheets/d/${E}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent(l)}`;else if(c){const e=c.match(/\/d\/([a-zA-Z0-9_-]+)/);if(e){r=`https://docs.google.com/spreadsheets/d/${e[1]}/gviz/tq?tqx=out:csv`}}if(!r)return console.warn(`[LPè¨­å®š] æ±‚äººã‚·ãƒ¼ãƒˆURLãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: ${e}`),void(a&&(a.innerHTML='<div class="lp-no-results"><p>æ±‚äººã‚·ãƒ¼ãƒˆãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“</p></div>'));try{const e=await fetch(r);if(!e.ok)return console.warn(`[LPè¨­å®š] æ±‚äººã‚·ãƒ¼ãƒˆã®èª­ã¿è¾¼ã¿ã«å¤±æ•—: ${e.status}`),void(a&&(a.innerHTML='<div class="lp-no-results"><p>æ±‚äººãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</p></div>'));const n=function(e,t){const n=e.split("\n"),o=re(n[0]||""),a=[];for(let s=1;s<n.length;s++){if(!n[s].trim())continue;const e=re(n[s]),i={};if(o.forEach((t,n)=>{const o=t.replace(/"/g,"").trim(),a=o.split(" ")[0]||o;i[a]=e[n]||""}),"false"===i.visible||"FALSE"===i.visible)continue;const l=i.jobId||i["æ±‚äººID"]||i.id||i.ID||`job-${s}`,c=i.title||i["ã‚¿ã‚¤ãƒˆãƒ«"]||i["æ±‚äººã‚¿ã‚¤ãƒˆãƒ«"]||i["å‹Ÿé›†ã‚¿ã‚¤ãƒˆãƒ«"]||i["æ±‚äººå"]||i["å‹Ÿé›†å"]||"(ã‚¿ã‚¤ãƒˆãƒ«ãªã—)";a.push({id:`${t.companyDomain}_${l}`,jobId:l,title:c,company:t.company,companyDomain:t.companyDomain,jobsSheet:t.jobsSheet,manageSheetUrl:t.manageSheetUrl,rawData:i})}return a}(await e.text(),i);if(Ve=n,function(e){const n=document.getElementById("lp-job-grid");if(!n)return;if(0===e.length)return void(n.innerHTML='<div class="lp-no-results"><p>ã“ã®ä¼šç¤¾ã«ã¯æ±‚äººãŒã‚ã‚Šã¾ã›ã‚“</p></div>');n.innerHTML=e.map(e=>`\n    <div class="lp-job-card" data-job-id="${t(e.id)}">\n      <div class="lp-job-title">${t(e.title)}</div>\n      <div class="lp-job-id">ID: ${t(e.jobId)}</div>\n      <div class="lp-job-actions">\n        <button type="button" class="lp-job-action-btn primary lp-select-job-btn">LPè¨­å®šã‚’ç·¨é›†</button>\n        <a href="lp.html?j=${encodeURIComponent(e.id)}" target="_blank" class="lp-job-action-btn secondary">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</a>\n      </div>\n    </div>\n  `).join(""),n.querySelectorAll(".lp-select-job-btn").forEach(e=>{e.addEventListener("click",async t=>{t.stopPropagation();const o=e.closest(".lp-job-card"),a=o.dataset.jobId;n.querySelectorAll(".lp-job-card").forEach(e=>e.classList.remove("selected")),o.classList.add("selected");const s=document.getElementById("lp-job-select");s&&(s.value=a),await et(a),Qe("edit")})})}(n),s){let e='<option value="">-- æ±‚äººã‚’é¸æŠ --</option>';for(const o of n)e+=`<option value="${t(o.id)}">${t(o.title)}</option>`;s.innerHTML=e}}catch(d){console.warn(`[LPè¨­å®š] æ±‚äººèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼: ${e}`,d),a&&(a.innerHTML='<div class="lp-no-results"><p>æ±‚äººãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</p></div>')}}async function Ze(){return async function(){const e=document.getElementById("lp-company-select-group"),t=document.getElementById("lp-job-select-group"),n=document.getElementById("lp-selection-steps");let o=me();if(o&&0!==o.length||(await ye(),o=me()),Je=o.filter(e=>e.companyDomain&&("â—‹"===e.showCompany||"â—¯"===e.showCompany)),C()){e&&(e.style.display="block"),t&&(t.style.display="none"),n&&(n.style.display="flex"),We(Je);const o=document.getElementById("lp-company-search");o&&o.addEventListener("input",e=>{const t=e.target.value.toLowerCase().trim();We(t?Je.filter(e=>{var n,o;return(null==(n=e.company)?void 0:n.toLowerCase().includes(t))||(null==(o=e.companyDomain)?void 0:o.toLowerCase().includes(t))}):Je)});const a=document.getElementById("lp-back-to-companies");a&&a.addEventListener("click",()=>{e&&(e.style.display="block"),t&&(t.style.display="none");const n=document.getElementById("lp-editor");n&&(n.style.display="none"),Qe("company")})}else{const o=M();e&&(e.style.display="none"),n&&(n.style.display="none"),o?(Ye=o,await Xe(o),t&&(t.style.display="block")):(console.warn("[LPè¨­å®š] ä¼šç¤¾ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“"),t&&(t.style.display="none"))}}()}async function et(e){var t,n;const o=document.getElementById("lp-editor"),a=document.getElementById("lp-preview-btn"),s=document.getElementById("lp-edit-mode-btn");if(!e)return o&&(o.style.display="none"),void(Ke=null);if(Ke=Ve.find(t=>t.id===e),!Ke)return void(o&&(o.style.display="none"));o&&(o.style.display="block");const i=Ke.id;a&&(a.href=`lp.html?j=${encodeURIComponent(i)}`),s&&(s.href=`lp.html?j=${encodeURIComponent(i)}&edit`),mt();const l=document.querySelector('input[name="design-pattern"][value="standard"]');l&&(l.checked=!0);try{const o=(null==(t=Ke.manageSheetUrl)?void 0:t.trim())||(null==(n=Ke.jobsSheet)?void 0:n.trim());if(console.log("[LPè¨­å®š] ç®¡ç†ã‚·ãƒ¼ãƒˆURL:",o),!o)return console.log("[LPè¨­å®š] ç®¡ç†ã‚·ãƒ¼ãƒˆURLãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"),void pt();let a=null;const s=o.match(/\/d\/([a-zA-Z0-9_-]+)/);if(s?a=s[1]:/^[a-zA-Z0-9_-]+$/.test(o)&&(a=o),!a)return console.log("[LPè¨­å®š] ç®¡ç†ã‚·ãƒ¼ãƒˆIDã‚’æŠ½å‡ºã§ãã¾ã›ã‚“"),void pt();const i=`https://docs.google.com/spreadsheets/d/${a}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent("LPè¨­å®š")}`;console.log("[LPè¨­å®š] LPè¨­å®šã‚·ãƒ¼ãƒˆURL:",i);const l=await fetch(i);if(l.ok){const t=function(e,t){const n=function(e){const t=[];let n="",o=!1;for(let a=0;a<e.length;a++){const s=e[a];if('"'===s)'"'===e[a+1]?(n+='""',a++):(o=!o,n+=s);else if("\n"!==s||o){if("\r"===s)continue;n+=s}else n.trim()&&t.push(n),n=""}n.trim()&&t.push(n);return t}(e),o=re(n[0]||"");for(let a=1;a<n.length;a++){if(!n[a].trim())continue;const e=re(n[a]),s={};o.forEach((t,n)=>{const o=t.replace(/"/g,"").trim();s[o]=e[n]||""});if((s.jobId||s["æ±‚äººID"]||"")===t){const e={heroTitle:s.heroTitle||s["ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¿ã‚¤ãƒˆãƒ«"]||"",heroSubtitle:s.heroSubtitle||s["ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«"]||"",heroImage:s.heroImage||s["ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ"]||"",ctaText:s.ctaText||s["CTAãƒ†ã‚­ã‚¹ãƒˆ"]||"",faq:s.faq||s.FAQ||"",designPattern:s.designPattern||s["ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³"]||"",layoutStyle:s.layoutStyle||s["ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¹ã‚¿ã‚¤ãƒ«"]||"default",sectionOrder:s.sectionOrder||s["ã‚»ã‚¯ã‚·ãƒ§ãƒ³é †åº"]||"",sectionVisibility:s.sectionVisibility||s["ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤º"]||"",tiktokPixelId:s.tiktokPixelId||s["TikTok Pixel ID"]||"",googleAdsId:s.googleAdsId||s["Google Ads ID"]||"",googleAdsLabel:s.googleAdsLabel||s["Google Ads ãƒ©ãƒ™ãƒ«"]||"",ogpTitle:s.ogpTitle||s["OGPã‚¿ã‚¤ãƒˆãƒ«"]||"",ogpDescription:s.ogpDescription||s["OGPèª¬æ˜æ–‡"]||"",ogpImage:s.ogpImage||s["OGPç”»åƒ"]||"",lpContent:s.lpContent||s["LPæ§‹æˆ"]||""};for(let t=1;t<=6;t++)e[`pointTitle${t}`]=s[`pointTitle${t}`]||s[`ãƒã‚¤ãƒ³ãƒˆ${t}ã‚¿ã‚¤ãƒˆãƒ«`]||"",e[`pointDesc${t}`]=s[`pointDesc${t}`]||s[`ãƒã‚¤ãƒ³ãƒˆ${t}èª¬æ˜`]||"";return e}}return null}(await l.text(),e);if(t){tt("lp-hero-title",t.heroTitle),tt("lp-hero-subtitle",t.heroSubtitle),tt("lp-hero-image",t.heroImage);const e=[];for(let n=1;n<=6;n++){const o=t[`pointTitle${n}`]||"",a=t[`pointDesc${n}`]||"";(o||a)&&e.push({title:o,desc:a})}ot(e.length>0?e:[{title:"",desc:""},{title:"",desc:""},{title:"",desc:""}]),tt("lp-cta-text",t.ctaText||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹"),tt("lp-faq",t.faq);if(ct(function(e){if(!e)return[{question:"",answer:""}];const t=[],n=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const o of n){const e=o.match(/Q[:ï¼š](.+?)\|A[:ï¼š](.+)/i);e&&t.push({question:e[1].trim(),answer:e[2].trim()})}return t.length>0?t:[{question:"",answer:""}]}(t.faq)),t.designPattern){const e=document.querySelector(`input[name="design-pattern"][value="${t.designPattern}"]`);e&&(e.checked=!0)}return t.sectionOrder&&function(e){const t=document.getElementById("lp-section-order");if(!t||!e)return;const n=e.split(",").map(e=>e.trim()).filter(e=>e);if(0===n.length)return;const o=Array.from(t.querySelectorAll(".section-order-item")),a={};o.forEach(e=>{a[e.dataset.section]=e}),n.forEach(e=>{const n=a[e];n&&t.appendChild(n)})}(t.sectionOrder),t.sectionVisibility&&function(e){if(!e)return;try{const t=JSON.parse(e);["points","jobs","details","faq"].forEach(e=>{if(void 0!==t[e]){const n=document.getElementById(`section-${e}-visible`);n&&(n.checked=t[e])}})}catch(t){console.error("ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºçŠ¶æ…‹ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼:",t)}}(t.sectionVisibility),tt("lp-tiktok-pixel",t.tiktokPixelId),tt("lp-google-ads-id",t.googleAdsId),tt("lp-google-ads-label",t.googleAdsLabel),tt("lp-ogp-title",t.ogpTitle),tt("lp-ogp-description",t.ogpDescription),tt("lp-ogp-image",t.ogpImage),yt(t.heroImage||""),nt(),Be(t),void xe()}}}catch(c){console.log("LPè¨­å®šã‚·ãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")}pt()}function tt(e,t){const n=document.getElementById(e);n&&(n.value=t||"")}function nt(){Ge||(Se($t,{getCompanyDomain:()=>(null==Ke?void 0:Ke.companyDomain)||null}),Ge=!0)}function ot(e=[{title:"",desc:""},{title:"",desc:""},{title:"",desc:""}]){const n=document.getElementById("point-inputs-container");n&&(n.innerHTML=e.map((e,n)=>`\n    <div class="point-input-group" data-point-index="${n}">\n      <label>ãƒã‚¤ãƒ³ãƒˆ${n+1}</label>\n      <input type="text" class="point-title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" value="${t(e.title||"")}">\n      <input type="text" class="point-desc" placeholder="èª¬æ˜æ–‡" value="${t(e.desc||"")}">\n      <button type="button" class="btn-remove-point" title="å‰Šé™¤">&times;</button>\n    </div>\n  `).join(""),n.querySelectorAll(".btn-remove-point").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.closest(".point-input-group");t&&n.children.length>1&&(t.remove(),at(),st(),ht())})}),n.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>ht())}),st())}function at(){const e=document.getElementById("point-inputs-container");e&&e.querySelectorAll(".point-input-group").forEach((e,t)=>{e.dataset.pointIndex=t;const n=e.querySelector("label");n&&(n.textContent=`ãƒã‚¤ãƒ³ãƒˆ${t+1}`)})}function st(){const e=document.getElementById("point-inputs-container"),t=document.getElementById("btn-add-point");if(!e||!t)return;const n=e.children.length;t.disabled=n>=6}function it(){const e=document.getElementById("point-inputs-container");if(!e)return;const t=e.children.length;if(t>=6)return;const n=t,o=document.createElement("div");o.className="point-input-group",o.dataset.pointIndex=n,o.innerHTML=`\n    <label>ãƒã‚¤ãƒ³ãƒˆ${n+1}</label>\n    <input type="text" class="point-title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" value="">\n    <input type="text" class="point-desc" placeholder="èª¬æ˜æ–‡" value="">\n    <button type="button" class="btn-remove-point" title="å‰Šé™¤">&times;</button>\n  `,o.querySelector(".btn-remove-point").addEventListener("click",()=>{e.children.length>1&&(o.remove(),at(),st(),ht())}),o.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>ht())}),e.appendChild(o),st(),o.querySelector(".point-title").focus()}function lt(){const e=document.getElementById("point-inputs-container");if(!e)return[];const t=[];return e.querySelectorAll(".point-input-group").forEach(e=>{var n,o;const a=(null==(n=e.querySelector(".point-title"))?void 0:n.value)||"",s=(null==(o=e.querySelector(".point-desc"))?void 0:o.value)||"";t.push({title:a,desc:s})}),t}function ct(e=[{question:"",answer:""}]){const n=document.getElementById("faq-list");n&&(n.innerHTML=e.map((e,n)=>`\n    <div class="faq-item" data-index="${n}">\n      <div class="faq-item-header">\n        <span class="faq-item-number">Q${n+1}</span>\n        <div class="faq-item-actions">\n          <button type="button" class="faq-action-btn delete" data-index="${n}" title="å‰Šé™¤">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>\n          </button>\n        </div>\n      </div>\n      <div class="faq-fields">\n        <div class="faq-field">\n          <label>\n            <span class="faq-label-icon q">Q</span>\n            è³ªå•\n          </label>\n          <input type="text" class="faq-question-input" value="${t(e.question)}" placeholder="ä¾‹: æœªçµŒé¨“ã§ã‚‚å¿œå‹Ÿã§ãã¾ã™ã‹ï¼Ÿ">\n        </div>\n        <div class="faq-field">\n          <label>\n            <span class="faq-label-icon a">A</span>\n            å›ç­”\n          </label>\n          <textarea class="faq-answer-input" rows="2" placeholder="ä¾‹: ã¯ã„ã€æœªçµŒé¨“ã®æ–¹ã‚‚å¤§æ­“è¿ã§ã™ã€‚ä¸å¯§ã«æŒ‡å°ã„ãŸã—ã¾ã™ã€‚">${t(e.answer)}</textarea>\n        </div>\n      </div>\n    </div>\n  `).join(""),n.querySelectorAll(".faq-action-btn.delete").forEach(e=>{e.addEventListener("click",()=>{!function(e){const t=dt();t.length<=1?ct([{question:"",answer:""}]):(t.splice(e,1),ct(t));ut(),ht()}(parseInt(e.dataset.index))})}),n.querySelectorAll(".faq-question-input, .faq-answer-input").forEach(e=>{e.addEventListener("input",()=>{ut(),ht()})}),ut())}function rt(){const e=dt();e.push({question:"",answer:""}),ct(e),ut(),setTimeout(()=>{const e=document.querySelector(".faq-item:last-child .faq-question-input");e&&e.focus()},100)}function dt(){const e=document.getElementById("faq-list");if(!e)return[];const t=[];return e.querySelectorAll(".faq-item").forEach(e=>{var n,o,a,s;const i=(null==(o=null==(n=e.querySelector(".faq-question-input"))?void 0:n.value)?void 0:o.trim())||"",l=(null==(s=null==(a=e.querySelector(".faq-answer-input"))?void 0:a.value)?void 0:s.trim())||"";t.push({question:i,answer:l})}),t}function ut(){const e=dt(),t=document.getElementById("lp-faq");if(t){const n=e.filter(e=>e.question||e.answer).map(e=>`Q:${e.question}|A:${e.answer}`).join("\n");t.value=n}}function pt(){["lp-hero-title","lp-hero-subtitle","lp-hero-image","lp-faq","lp-tiktok-pixel","lp-google-ads-id","lp-google-ads-label","lp-ogp-title","lp-ogp-description","lp-ogp-image"].forEach(e=>tt(e,"")),tt("lp-cta-text","ä»Šã™ãå¿œå‹Ÿã™ã‚‹"),ot(),ct([{question:"",answer:""}]);const e=document.querySelector('input[name="design-pattern"][value="standard"]');e&&(e.checked=!0),yt(""),nt(),Be({}),xe()}function mt(){const e=document.getElementById("hero-image-presets");e&&(e.innerHTML=L.map(e=>`\n    <div class="hero-image-preset" data-url="${t(e.url)}" title="${t(e.name)}">\n      <img src="${t(e.thumbnail)}" alt="${t(e.name)}" loading="lazy">\n      <span class="preset-name">${t(e.name)}</span>\n      <span class="preset-check">âœ“</span>\n    </div>\n  `).join(""),e.querySelectorAll(".hero-image-preset").forEach(e=>{e.addEventListener("click",()=>{!function(e){const t=document.getElementById("lp-hero-image");t&&(t.value=e,t.dispatchEvent(new Event("input",{bubbles:!0})));yt(e)}(e.dataset.url)})}))}function yt(e){const t=document.getElementById("hero-image-presets");t&&t.querySelectorAll(".hero-image-preset").forEach(t=>{const n=t.dataset.url,o=(null==e?void 0:e.split("?")[0])||"",a=(null==n?void 0:n.split("?")[0])||"";o&&a&&o===a?t.classList.add("selected"):t.classList.remove("selected")})}async function vt(){var e,t,n,o,a,s,i,l,c,r,d,u,p,m,y,v;console.log("[LPä¿å­˜] saveLPSettings é–‹å§‹");const g=null==(e=document.getElementById("lp-job-select"))?void 0:e.value;if(console.log("[LPä¿å­˜] jobId:",g),!g)return alert("æ±‚äººã‚’é¸æŠã—ã¦ãã ã•ã„"),void console.log("[LPä¿å­˜] jobIdãŒãªã„ãŸã‚ä¸­æ–­");const f=Ke||Ve.find(e=>e.id===g);if(console.log("[LPä¿å­˜] jobData:",f),!f)return alert("æ±‚äººãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"),void console.log("[LPä¿å­˜] jobDataãŒãªã„ãŸã‚ä¸­æ–­");const h=lt(),b=document.querySelector(".lp-admin-layout-option.selected"),E=(null==(t=null==b?void 0:b.dataset)?void 0:t.layout)||"default",$={jobId:g,companyDomain:f.companyDomain,company:f.company,jobTitle:f.title,designPattern:(null==(n=document.querySelector('input[name="design-pattern"]:checked'))?void 0:n.value)||"standard",layoutStyle:E,heroTitle:(null==(o=document.getElementById("lp-hero-title"))?void 0:o.value)||"",heroSubtitle:(null==(a=document.getElementById("lp-hero-subtitle"))?void 0:a.value)||"",heroImage:(null==(s=document.getElementById("lp-hero-image"))?void 0:s.value)||"",ctaText:(null==(i=document.getElementById("lp-cta-text"))?void 0:i.value)||"",faq:(null==(l=document.getElementById("lp-faq"))?void 0:l.value)||"",sectionOrder:gt().join(","),sectionVisibility:JSON.stringify(ft())};for(let w=0;w<6;w++)$[`pointTitle${w+1}`]=(null==(c=h[w])?void 0:c.title)||"",$[`pointDesc${w+1}`]=(null==(r=h[w])?void 0:r.desc)||"";$.tiktokPixelId=(null==(d=document.getElementById("lp-tiktok-pixel"))?void 0:d.value)||"",$.googleAdsId=(null==(u=document.getElementById("lp-google-ads-id"))?void 0:u.value)||"",$.googleAdsLabel=(null==(p=document.getElementById("lp-google-ads-label"))?void 0:p.value)||"",$.ogpTitle=(null==(m=document.getElementById("lp-ogp-title"))?void 0:m.value)||"",$.ogpDescription=(null==(y=document.getElementById("lp-ogp-description"))?void 0:y.value)||"",$.ogpImage=(null==(v=document.getElementById("lp-ogp-image"))?void 0:v.value)||"";const I={version:"2.0",sections:$e,globalSettings:we};I&&($.lpContent=JSON.stringify(I)),console.log("[LPä¿å­˜] é€ä¿¡ã™ã‚‹è¨­å®š:",$),console.log("[LPä¿å­˜] layoutStyle:",$.layoutStyle),console.log("[LPä¿å­˜] faq:",$.faq),console.log("[LPä¿å­˜] lpContent:",$.lpContent?"ã‚ã‚Š":"ãªã—");const L=w;try{const e=document.getElementById("btn-save-lp-settings");e&&(e.disabled=!0,e.textContent="ä¿å­˜ä¸­...");const t=btoa(unescape(encodeURIComponent(JSON.stringify({action:"saveLPSettings",settings:$})))),n=`${L}?action=post&data=${encodeURIComponent(t)}`,o=await fetch(n,{method:"GET",redirect:"follow"}),a=await o.text();let s;console.log("[LPä¿å­˜] GASãƒ¬ã‚¹ãƒãƒ³ã‚¹:",a);try{s=JSON.parse(a),console.log("[LPä¿å­˜] ãƒ‘ãƒ¼ã‚¹æ¸ˆã¿ãƒ¬ã‚¹ãƒãƒ³ã‚¹:",s)}catch(q){throw e&&(e.disabled=!1,e.textContent="LPè¨­å®šã‚’ä¿å­˜"),new Error(`GASã‹ã‚‰ã®å¿œç­”ãŒä¸æ­£ã§ã™: ${a.substring(0,200)}`)}if(e&&(e.disabled=!1,e.textContent="LPè¨­å®šã‚’ä¿å­˜"),!s.success)return void alert("ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: "+(s.error||"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼"));localStorage.removeItem(`lp_settings_${g}`),alert(`LPè¨­å®šã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ä¿å­˜ã—ã¾ã—ãŸã€‚\n\næ±‚äºº: ${f.title}\nä¼šç¤¾: ${f.company}\nãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³: ${$.designPattern}`)}catch(k){console.error("GAS APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼:",k),alert("ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®ä¿å­˜ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚"),function(e,t,n){const o=`lp_settings_${t}`;localStorage.setItem(o,JSON.stringify(e)),alert(`LPè¨­å®šã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã—ãŸã€‚\n\næ³¨æ„: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è‡ªå‹•ä¿å­˜ã™ã‚‹ã«ã¯ã€è¨­å®šç”»é¢ã§GAS API URLã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\næ±‚äºº: ${(null==n?void 0:n.title)||t}\nãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³: ${e.designPattern}`)}($,g,f)}}function gt(){const e=document.getElementById("lp-section-order");return e?Array.from(e.querySelectorAll("li")).map(e=>e.dataset.section):["hero","points","jobs","details","faq","apply"]}function ft(){var e,t,n,o;return{points:(null==(e=document.getElementById("section-points-visible"))?void 0:e.checked)??!0,jobs:(null==(t=document.getElementById("section-jobs-visible"))?void 0:t.checked)??!0,details:(null==(n=document.getElementById("section-details-visible"))?void 0:n.checked)??!0,faq:(null==(o=document.getElementById("section-faq-visible"))?void 0:o.checked)??!0}}function ht(){ze&&clearTimeout(ze),ze=setTimeout(()=>{$t()},300)}function bt(){const e=document.getElementById("lp-preview-container"),t=document.getElementById("btn-toggle-preview");e&&("none"===e.style.display?(e.style.display="flex",t&&(t.textContent="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’éš ã™"),$t()):(e.style.display="none",t&&(t.textContent="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º")))}function Et(){const e=document.getElementById("lp-preview-container"),t=document.getElementById("btn-toggle-preview");e&&(e.style.display="none"),t&&(t.textContent="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤º")}function $t(){const e=document.getElementById("lp-preview-frame"),n=document.getElementById("lp-preview-container");if(!e||!n||"none"===n.style.display)return;const o=Ye;if(!o)return;const a=me(),s=function(e,n){const o=`lp-pattern-${n.designPattern||"standard"}`;let a={points:!0,jobs:!0,details:!0,faq:!0};try{n.sectionVisibility&&(a={...a,...JSON.parse(n.sectionVisibility)})}catch(c){}const s=["hero","points","jobs","details","faq","apply"];let i=s;if(n.sectionOrder){const e=n.sectionOrder.split(",").map(e=>e.trim()).filter(e=>e);if(e.length>0){const t=s.filter(t=>!e.includes(t));i=[...e,...t]}}const l=i.map(o=>{switch(o){case"hero":return function(e,n){const o=n.heroTitle||`${e.company||"ä¼šç¤¾å"}ã§åƒã“ã†`,a=n.heroSubtitle||"",s=n.heroImage||"";return`\n    <section class="lp-hero">\n      <div class="lp-hero-bg" style="${s?`background-image: url('${t(s)}')`:"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        <p class="lp-hero-company">${t(e.company||"")}</p>\n        <h1 class="lp-hero-title">${t(o)}</h1>\n        ${a?`<p class="lp-hero-subtitle">${t(a)}</p>`:""}\n        <div class="lp-hero-cta">\n          <a href="#lp-apply" class="lp-btn-apply-hero">ä»Šã™ãå¿œå‹Ÿã™ã‚‹</a>\n        </div>\n      </div>\n    </section>\n  `}(e,n);case"points":return a.points?function(e){const n=[];for(let t=1;t<=6;t++){const o=e[`pointTitle${t}`],a=e[`pointDesc${t}`]||"";o&&n.push({title:o,desc:a,idx:t})}return 0===n.length?"":`\n    <section class="lp-points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${n.map((e,n)=>`\n            <div class="lp-point-card">\n              <div class="lp-point-number">${n+1}</div>\n              <h3 class="lp-point-title">${t(e.title)}</h3>\n              <p class="lp-point-desc">${t(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(n):"";case"jobs":return a.jobs?'\n    <section class="lp-jobs">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">å‹Ÿé›†ä¸­ã®æ±‚äºº</h2>\n        <div class="lp-jobs-placeholder">\n          <p>æ±‚äººæƒ…å ±ã¯å®Ÿéš›ã®ãƒšãƒ¼ã‚¸ã§ã”ç¢ºèªãã ã•ã„</p>\n        </div>\n      </div>\n    </section>\n  ':"";case"details":return a.details?'\n    <section class="lp-details">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">å‹Ÿé›†è¦é …</h2>\n        <div class="lp-details-placeholder">\n          <p>è©³ç´°ãªå‹Ÿé›†è¦é …ã¯å®Ÿéš›ã®ãƒšãƒ¼ã‚¸ã§ã”ç¢ºèªãã ã•ã„</p>\n        </div>\n      </div>\n    </section>\n  ':"";case"faq":return a.faq&&n.faq?function(e){if(!e)return"";const n=e.split(/\|\||[\n\r]+/).filter(e=>e.trim()).map(e=>{const t=e.match(/Q[:ï¼š](.+?)\|A[:ï¼š](.+)/i);return t?{question:t[1].trim(),answer:t[2].trim()}:null}).filter(e=>e&&e.question&&e.answer);return 0===n.length?"":`\n    <section class="lp-faq">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">ã‚ˆãã‚ã‚‹è³ªå•</h2>\n        <div class="lp-faq-list">\n          ${n.map(e=>`\n            <div class="lp-faq-item">\n              <div class="lp-faq-question">\n                <span class="lp-faq-q">Q</span>\n                <span>${t(e.question)}</span>\n              </div>\n              <div class="lp-faq-answer">\n                <span class="lp-faq-a">A</span>\n                <span>${t(e.answer)}</span>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(n.faq):"";case"apply":return function(e,n){const o=n.ctaText||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹";return`\n    <section class="lp-apply" id="lp-apply">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">å¿œå‹Ÿã™ã‚‹</h2>\n        <p class="lp-apply-text">ã”å¿œå‹ŸãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™</p>\n        <div class="lp-apply-buttons">\n          <button class="lp-btn-apply-main">${t(o)}</button>\n        </div>\n      </div>\n    </section>\n  `}(0,n);default:return""}}).join("");return`\n<!DOCTYPE html>\n<html lang="ja">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap" rel="stylesheet">\n  <style>\n    \n    * { margin: 0; padding: 0; box-sizing: border-box; }\n    body { font-family: 'Noto Sans JP', sans-serif; line-height: 1.6; color: #333; }\n\n    .lp-hero { position: relative; min-height: 400px; display: flex; align-items: center; justify-content: center; }\n    .lp-hero-bg { position: absolute; inset: 0; background-size: cover; background-position: center; }\n    .lp-hero-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.4); }\n    .lp-hero-content { position: relative; z-index: 1; text-align: center; color: #fff; padding: 40px 20px; }\n    .lp-hero-company { font-size: 14px; margin-bottom: 10px; opacity: 0.9; }\n    .lp-hero-title { font-size: 28px; font-weight: 900; margin-bottom: 15px; }\n    .lp-hero-subtitle { font-size: 16px; opacity: 0.9; margin-bottom: 20px; }\n    .lp-hero-cta { margin-top: 20px; }\n    .lp-btn-apply-hero { display: inline-block; padding: 15px 40px; background: #ff6b35; color: #fff; text-decoration: none; border-radius: 50px; font-weight: 700; font-size: 16px; }\n\n    .lp-section-inner { max-width: 800px; margin: 0 auto; padding: 40px 20px; }\n    .lp-section-title { font-size: 24px; font-weight: 700; text-align: center; margin-bottom: 30px; }\n\n    .lp-points { background: #f8f9fa; }\n    .lp-points-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }\n    .lp-point-card { background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }\n    .lp-point-number { width: 36px; height: 36px; background: #667eea; color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; margin-bottom: 15px; }\n    .lp-point-title { font-size: 18px; font-weight: 700; margin-bottom: 10px; }\n    .lp-point-desc { font-size: 14px; color: #666; }\n\n    .lp-jobs, .lp-details { background: #fff; }\n    .lp-jobs-placeholder, .lp-details-placeholder { text-align: center; padding: 40px; background: #f8f9fa; border-radius: 8px; color: #888; }\n\n    .lp-faq { background: #f8f9fa; }\n    .lp-faq-list { display: flex; flex-direction: column; gap: 15px; }\n    .lp-faq-item { background: #fff; border-radius: 8px; padding: 20px; }\n    .lp-faq-question { display: flex; gap: 12px; font-weight: 600; margin-bottom: 10px; }\n    .lp-faq-answer { display: flex; gap: 12px; color: #666; }\n    .lp-faq-q, .lp-faq-a { width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 700; flex-shrink: 0; }\n    .lp-faq-q { background: #667eea; color: #fff; }\n    .lp-faq-a { background: #e9ecef; color: #333; }\n\n    .lp-apply { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #fff; text-align: center; }\n    .lp-apply .lp-section-title { color: #fff; }\n    .lp-apply-text { margin-bottom: 25px; opacity: 0.9; }\n    .lp-btn-apply-main { padding: 18px 50px; background: #ff6b35; color: #fff; border: none; border-radius: 50px; font-size: 18px; font-weight: 700; cursor: pointer; }\n\n    /* ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ */\n    .lp-pattern-modern .lp-point-number { background: #10b981; }\n    .lp-pattern-modern .lp-btn-apply-hero, .lp-pattern-modern .lp-btn-apply-main { background: #10b981; }\n    .lp-pattern-modern .lp-apply { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }\n    .lp-pattern-modern .lp-faq-q { background: #10b981; }\n\n    .lp-pattern-classic .lp-point-number { background: #92400e; }\n    .lp-pattern-classic .lp-btn-apply-hero, .lp-pattern-classic .lp-btn-apply-main { background: #b45309; }\n    .lp-pattern-classic .lp-apply { background: linear-gradient(135deg, #92400e 0%, #78350f 100%); }\n    .lp-pattern-classic .lp-faq-q { background: #92400e; }\n\n    .lp-pattern-minimal .lp-point-number { background: #374151; }\n    .lp-pattern-minimal .lp-btn-apply-hero, .lp-pattern-minimal .lp-btn-apply-main { background: #111827; }\n    .lp-pattern-minimal .lp-apply { background: #111827; }\n    .lp-pattern-minimal .lp-faq-q { background: #374151; }\n\n    .lp-pattern-colorful .lp-point-number { background: #ec4899; }\n    .lp-pattern-colorful .lp-btn-apply-hero, .lp-pattern-colorful .lp-btn-apply-main { background: linear-gradient(90deg, #ec4899, #8b5cf6); }\n    .lp-pattern-colorful .lp-apply { background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%); }\n    .lp-pattern-colorful .lp-faq-q { background: #ec4899; }\n  \n  </style>\n</head>\n<body class="lp-body ${o}">\n  <div id="lp-content">\n    ${l}\n  </div>\n</body>\n</html>\n  `}((null==a?void 0:a.find(e=>e.companyDomain===o))||{company:o},function(){var e,t,n,o,a,s,i,l,c;const r=lt(),d=document.querySelector(".lp-admin-layout-option.selected"),u=(null==(e=null==d?void 0:d.dataset)?void 0:e.layout)||"default",p={designPattern:(null==(t=document.querySelector('input[name="design-pattern"]:checked'))?void 0:t.value)||"standard",layoutStyle:u,heroTitle:(null==(n=document.getElementById("lp-hero-title"))?void 0:n.value)||"",heroSubtitle:(null==(o=document.getElementById("lp-hero-subtitle"))?void 0:o.value)||"",heroImage:(null==(a=document.getElementById("lp-hero-image"))?void 0:a.value)||"",ctaText:(null==(s=document.getElementById("lp-cta-text"))?void 0:s.value)||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",faq:(null==(i=document.getElementById("lp-faq"))?void 0:i.value)||"",sectionOrder:gt().join(","),sectionVisibility:JSON.stringify(ft())};for(let m=0;m<6;m++)p[`pointTitle${m+1}`]=(null==(l=r[m])?void 0:l.title)||"",p[`pointDesc${m+1}`]=(null==(c=r[m])?void 0:c.desc)||"";return p}());e.srcdoc=s}function wt(){const e=document.getElementById("lp-section-order");if(!e)return;let t=null,n=null;e.querySelectorAll(".section-order-item").forEach(o=>{o.setAttribute("draggable","true"),o.addEventListener("dragstart",e=>{t=o,o.classList.add("dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",""),setTimeout(()=>{o.style.opacity="0.4"},0)}),o.addEventListener("dragend",()=>{o.classList.remove("dragging"),o.style.opacity="",t=null,e.querySelectorAll(".section-order-item").forEach(e=>{e.classList.remove("drag-over")}),$t(),o.style.animation="none",o.offsetHeight,o.style.animation="sortableDropped 0.3s ease"}),o.addEventListener("dragover",n=>{if(n.preventDefault(),n.dataTransfer.dropEffect="move",!t||t===o)return;const a=It(e,n.clientY);e.querySelectorAll(".section-order-item").forEach(e=>{e.classList.remove("drag-over")}),a&&a!==t&&a.classList.add("drag-over"),null==a?e.appendChild(t):e.insertBefore(t,a)}),o.addEventListener("dragleave",()=>{o.classList.remove("drag-over")}),o.addEventListener("touchstart",e=>{e.touches[0].clientY,n=o,o.classList.add("dragging")},{passive:!0}),o.addEventListener("touchmove",t=>{if(!n)return;const o=t.touches[0].clientY,a=It(e,o);null==a?e.appendChild(n):a!==n&&e.insertBefore(n,a)},{passive:!0}),o.addEventListener("touchend",()=>{n&&(n.classList.remove("dragging"),$t()),n=null})})}function It(e,t){return[...e.querySelectorAll(".section-order-item:not(.dragging)")].reduce((e,n)=>{const o=n.getBoundingClientRect(),a=t-o.top-o.height/2;return a<0&&a>e.offset?{offset:a,element:n}:e},{offset:Number.NEGATIVE_INFINITY}).element}function Lt(){const e=document.getElementById("login-screen"),t=document.getElementById("admin-dashboard");e&&(e.style.display="flex"),t&&(t.style.display="none")}function qt(){const e=document.getElementById("login-screen"),t=document.getElementById("admin-dashboard");e&&(e.style.display="none"),t&&(t.style.display="flex"),function(){const e=D(),t=M();if(console.log("[Admin] Applying role-based UI:",e,t),!C()){["overview","companies","applications","company-manage","lp-settings","settings"].forEach(e=>{const t=document.querySelector(`[data-section="${e}"]`);t&&(t.parentElement.style.display="none")});document.querySelectorAll(".nav-section").forEach(e=>{const t=e.querySelectorAll('li[style*="display: none"]'),n=e.querySelectorAll("li");t.length===n.length&&(e.style.display="none")}),St("applicant-select");const e=document.querySelector(".sidebar-header p");e&&t&&(e.textContent=`${t} ç®¡ç†ç”»é¢`)}}()}function kt(){const e=document.getElementById("admin-sidebar"),t=document.getElementById("mobile-overlay"),n=document.getElementById("mobile-menu-btn");e&&e.classList.remove("open"),t&&t.classList.remove("active"),n&&n.classList.remove("active"),document.body.style.overflow=""}function St(e){kt(),document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.classList.remove("active")});const n=document.querySelector(`[data-section="${e}"]`);n&&n.parentElement.classList.add("active"),document.querySelectorAll(".admin-section").forEach(e=>{e.classList.remove("active")});const o=document.getElementById(`section-${e}`);o&&o.classList.add("active");const a={overview:"æ¦‚è¦",companies:"ä¼æ¥­åˆ¥ãƒ‡ãƒ¼ã‚¿","company-manage":"ä¼šç¤¾ç®¡ç†","lp-settings":"LPè¨­å®š",applications:"å¿œå‹Ÿãƒ‡ãƒ¼ã‚¿","applicant-select":"å¿œå‹Ÿè€…ç®¡ç†","company-users":"ä¼šç¤¾ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†",settings:"è¨­å®š"},s=document.getElementById("page-title");s&&(s.textContent=a[e]||e),"company-manage"===e&&ye(),"lp-settings"===e&&(Ze(),mt());const i=document.querySelector(".header-actions");i&&(i.style.display="lp-settings"===e?"none":""),document.body.classList.toggle("lp-settings-active","lp-settings"===e),"applicant-select"===e&&async function(){const e=document.getElementById("applicant-company-grid");if(!e)return;if(e.innerHTML='<div class="loading-cell">ä¼šç¤¾ä¸€è¦§ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>',!C()){const e=M();if(e)return void(window.location.href=`job-manage.html?domain=${encodeURIComponent(e)}`)}try{const n=await v();if(!n||0===n.length)return void(e.innerHTML='<div class="loading-cell">ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</div>');let o=n.filter(e=>g(e));if(!C()){const e=M();o=o.filter(t=>t.companyDomain===e)}if(0===o.length)return void(e.innerHTML='<div class="loading-cell">è¡¨ç¤ºå¯èƒ½ãªä¼šç¤¾ãŒã‚ã‚Šã¾ã›ã‚“</div>');e.innerHTML=o.map(e=>`\n      <a href="job-manage.html?domain=${encodeURIComponent(e.companyDomain)}" class="company-select-card">\n        <div class="company-select-icon">ğŸ¢</div>\n        <div class="company-select-info">\n          <h4>${t(e.company)}</h4>\n          <p>${t(e.companyDomain)}</p>\n        </div>\n        <div class="company-select-arrow">â†’</div>\n      </a>\n    `).join("")}catch(n){console.error("ä¼šç¤¾ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼:",n),e.innerHTML='<div class="loading-cell">ä¼šç¤¾ä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</div>'}}(),"company-users"===e&&jt()}function Bt(){console.log("[Admin] bindEvents é–‹å§‹");const e=document.getElementById("mobile-menu-btn");e&&e.addEventListener("click",()=>{const e=document.getElementById("admin-sidebar");e&&e.classList.contains("open")?kt():function(){const e=document.getElementById("admin-sidebar"),t=document.getElementById("mobile-overlay"),n=document.getElementById("mobile-menu-btn");e&&e.classList.add("open"),t&&t.classList.add("active"),n&&n.classList.add("active"),document.body.style.overflow="hidden"}()});const t=document.getElementById("sidebar-close-btn");t&&t.addEventListener("click",kt);const n=document.getElementById("mobile-overlay");n&&n.addEventListener("click",kt),document.querySelectorAll(".login-tab").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.tab;document.querySelectorAll(".login-tab").forEach(e=>e.classList.remove("active")),e.classList.add("active");const n=document.getElementById("company-login-form"),o=document.getElementById("login-form");"company"===t?(n&&(n.style.display="block"),o&&(o.style.display="none")):(n&&(n.style.display="none"),o&&(o.style.display="block"))})});const o=document.getElementById("company-login-form");o&&o.addEventListener("submit",async e=>{var t,n;e.preventDefault();const o=(null==(t=document.getElementById("company-username"))?void 0:t.value)||"",a=(null==(n=document.getElementById("company-password"))?void 0:n.value)||"",s=document.getElementById("company-login-error");s&&(s.style.display="none");const i=await async function(t,n){if(!k)return{success:!1,error:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"};try{const o=await k.collection("company_users").where("username","==",t).limit(1).get();if(o.empty)return{success:!1,error:"ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"};const a=o.docs[0],s=a.data();if(!1===s.isActive)return{success:!1,error:"ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™"};if(s.password!==n)return{success:!1,error:"ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"};const i=s.companyDomain;sessionStorage.setItem(b.sessionKey,"authenticated"),sessionStorage.setItem(b.userRoleKey,h),sessionStorage.setItem(b.userCompanyKey,i),sessionStorage.setItem("auth_method","company"),sessionStorage.setItem("company_user_id",t),x=h,A=i;try{await k.collection("company_users").doc(a.id).update({lastLogin:firebase.firestore.FieldValue.serverTimestamp()})}catch(e){console.warn("Failed to update last login:",e)}return{success:!0,role:h,companyDomain:i,companyName:s.companyName||i,userName:s.name||t,userId:a.id}}catch(o){return console.error("Company login error:",o),{success:!1,error:"ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: "+o.message}}}(o,a);i.success?window.location.href=`job-manage.html?domain=${encodeURIComponent(i.companyDomain)}&company=${encodeURIComponent(i.companyName||i.companyDomain)}`:s&&(s.textContent=i.error,s.style.display="block")});const a=document.getElementById("login-form");a&&a.addEventListener("submit",e=>{var t,n;e.preventDefault();const o=(null==(t=document.getElementById("username"))?void 0:t.value)||"",a=(null==(n=document.getElementById("password"))?void 0:n.value)||"",s=document.getElementById("login-error"),i=function(e,t){return e===b.credentials.username&&t===b.credentials.password?(sessionStorage.setItem(b.sessionKey,"authenticated"),sessionStorage.setItem(b.userRoleKey,f),x=f,A=null,{success:!0,role:f}):{success:!1,error:"ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"}}(o,a);i.success?(s&&(s.style.display="none"),qt(),N()):s&&(s.textContent=i.error,s.style.display="block")});const s=document.getElementById("logout-btn");s&&s.addEventListener("click",()=>{sessionStorage.removeItem(b.sessionKey),sessionStorage.removeItem(b.userRoleKey),sessionStorage.removeItem(b.userCompanyKey),sessionStorage.removeItem("auth_method"),sessionStorage.removeItem("company_user_id"),x=null,A=null,q&&q.signOut(),Lt()}),document.querySelectorAll(".sidebar-nav a").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();St(e.currentTarget.dataset.section)})});const i=document.getElementById("date-range");i&&i.addEventListener("change",()=>N());const l=document.getElementById("refresh-btn");l&&l.addEventListener("click",()=>N());const c=document.getElementById("company-search");c&&c.addEventListener("input",e=>K(e.target.value));const r=document.getElementById("sort-by");r&&r.addEventListener("change",()=>J());const d=document.getElementById("google-login-btn");d&&d.addEventListener("click",async()=>{const e=document.getElementById("login-error"),t=await async function(){if(!q)return{success:!1,error:"Firebaseèªè¨¼ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"};try{const e=new firebase.auth.GoogleAuthProvider,t=await q.signInWithPopup(e);return S=t.user,B=await t.user.getIdToken(),await T(t.user.uid,t.user.email),x?(sessionStorage.setItem(b.sessionKey,"authenticated"),sessionStorage.setItem("auth_method","google"),{success:!0,user:S,idToken:B,role:x,companyDomain:A}):(await q.signOut(),{success:!1,error:"ã“ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ç®¡ç†ç”»é¢ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚"})}catch(e){return console.error("Google login error:",e),{success:!1,error:"Googleãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: "+e.message}}}();t.success?(e&&(e.style.display="none"),qt(),N()):e&&(e.textContent=t.error,e.style.display="block")});const v=document.getElementById("btn-add-company");v&&v.addEventListener("click",()=>ge());const E=document.getElementById("lp-job-select");E&&E.addEventListener("change",e=>et(e.target.value));const $=document.getElementById("btn-save-lp-settings");console.log("[Admin] ä¿å­˜ãƒœã‚¿ãƒ³è¦ç´ :",$),$?($.addEventListener("click",()=>{console.log("[Admin] ä¿å­˜ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ"),vt()}),console.log("[Admin] ä¿å­˜ãƒœã‚¿ãƒ³ã«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¨­å®šã—ã¾ã—ãŸ")):console.warn("[Admin] ä¿å­˜ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“: btn-save-lp-settings");const w=document.getElementById("btn-reset-lp-settings");w&&w.addEventListener("click",()=>{var e;const t=null==(e=document.getElementById("lp-job-select"))?void 0:e.value;t&&et(t)});const I=document.getElementById("btn-toggle-preview");I&&I.addEventListener("click",()=>bt());const L=document.getElementById("btn-close-preview");L&&L.addEventListener("click",()=>Et()),document.querySelectorAll(".preview-device-btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.dataset.device,n=document.querySelector(".lp-preview-frame-wrapper");document.querySelectorAll(".preview-device-btn").forEach(e=>{e.classList.toggle("active",e.dataset.device===t)}),n&&n.setAttribute("data-device",t)})});document.querySelectorAll("#lp-editor input, #lp-editor textarea").forEach(e=>{e.addEventListener("input",()=>ht())}),document.querySelectorAll('input[name="design-pattern"]').forEach(e=>{e.addEventListener("change",()=>$t())}),wt(),function(){const e=document.getElementById("btn-add-point");e&&e.addEventListener("click",it),ot()}(),function(){const e=document.getElementById("btn-add-faq");e&&e.addEventListener("click",rt),ct([{question:"",answer:""}])}(),document.querySelectorAll('#lp-section-order input[type="checkbox"]').forEach(e=>{e.addEventListener("change",()=>$t())}),document.querySelectorAll(".collapsible-header").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".collapsible");t&&t.classList.toggle("collapsed")})}),document.querySelectorAll("#ad-tracking-section, #ogp-section").forEach(e=>{e.classList.add("collapsed")});const j=document.getElementById("save-password");j&&j.addEventListener("click",()=>{var e;const t=null==(e=document.getElementById("new-password"))?void 0:e.value;t&&t.length>=4?(localStorage.setItem("admin_password",t),alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¾ã—ãŸ")):alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯4æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„")});const D=document.getElementById("feed-status"),M=()=>{D&&(D.style.display="flex")},R=()=>{D&&(D.style.display="none")},_=document.getElementById("btn-download-indeed");_&&_.addEventListener("click",async()=>{try{M(),await u(),alert("Indeed XMLãƒ•ã‚£ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ")}catch(e){alert("ãƒ•ã‚£ãƒ¼ãƒ‰ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ: "+e.message)}finally{R()}});const F=document.getElementById("btn-download-google");F&&F.addEventListener("click",async()=>{try{M(),await p(),alert("Google JSON-LDã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ")}catch(e){alert("ãƒ•ã‚£ãƒ¼ãƒ‰ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ: "+e.message)}finally{R()}});const z=document.getElementById("btn-download-jobbox");z&&z.addEventListener("click",async()=>{try{M(),await m(),alert("æ±‚äººãƒœãƒƒã‚¯ã‚¹XMLã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ")}catch(e){alert("ãƒ•ã‚£ãƒ¼ãƒ‰ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ: "+e.message)}finally{R()}});const G=document.getElementById("btn-download-csv");G&&G.addEventListener("click",async()=>{try{M(),await y(),alert("CSVã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ")}catch(e){alert("ãƒ•ã‚£ãƒ¼ãƒ‰ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ: "+e.message)}finally{R()}});const V=document.getElementById("btn-add-company-user");V&&V.addEventListener("click",()=>{Dt(null,"")});const Y=document.getElementById("btn-bulk-generate");Y&&Y.addEventListener("click",()=>async function(){if(!confirm("æœªç™ºè¡Œã®å…¨ä¼šç¤¾ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç™ºè¡Œã—ã¾ã™ã‹ï¼Ÿ"))return;const e=xt.filter(e=>g(e)),t=[];for(const i of e){if(await O(i.companyDomain))continue;const e=U(i.companyDomain),n=P();(await H(e,n,i.companyDomain,i.company)).success&&t.push({company:i.company,domain:i.companyDomain,username:e,password:n})}if(0===t.length)return void alert("ç™ºè¡Œå¯¾è±¡ã®ä¼šç¤¾ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚");let n=`${t.length}ç¤¾ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç™ºè¡Œã—ã¾ã—ãŸã€‚\n\n`;t.forEach(e=>{n+=`ã€${e.company}ã€‘\nID: ${e.username}\nPW: ${e.password}\n\n`});const o=new Blob([n],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(o),s=document.createElement("a");s.href=a,s.download=`company-users-${(new Date).toISOString().split("T")[0]}.txt`,s.click(),URL.revokeObjectURL(a),alert(`${t.length}ç¤¾ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’ç™ºè¡Œã—ã¾ã—ãŸã€‚\nãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚`),await jt()}());const W=document.getElementById("company-user-modal-close");W&&W.addEventListener("click",Mt);const Q=document.getElementById("company-user-modal-cancel");Q&&Q.addEventListener("click",Mt);const X=document.getElementById("company-user-form");X&&X.addEventListener("submit",e=>{e.preventDefault(),async function(){var e,t,n,o,a;const s=null==(e=document.getElementById("cu-company-select"))?void 0:e.value,i=null==(n=null==(t=document.getElementById("cu-username"))?void 0:t.value)?void 0:n.trim(),l=null==(o=document.getElementById("cu-password"))?void 0:o.value,c=null==(a=document.getElementById("cu-is-active"))?void 0:a.checked;if(!s||!i)return void alert("å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");const r=document.getElementById("company-user-modal-save");r&&(r.disabled=!0,r.textContent="ä¿å­˜ä¸­...");try{if(Tt){const e={username:i,isActive:c};l&&(e.password=l);const t=await async function(e,t){if(!C())return{success:!1,error:"æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“"};if(!k)return{success:!1,error:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"};try{const n={...t};return delete n.id,await k.collection("company_users").doc(e).update({...n,updatedAt:firebase.firestore.FieldValue.serverTimestamp()}),{success:!0}}catch(n){return console.error("Failed to update company user:",n),{success:!1,error:n.message}}}(Tt,e);if(!t.success)throw new Error(t.error);alert("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ"),Mt()}else{if(!l)return void alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");const e=await H(i,l,s);if(!e.success)throw new Error(e.error);document.getElementById("cu-issued-username").textContent=i,document.getElementById("cu-issued-password").textContent=l,document.getElementById("cu-credentials-display").style.display="block",r&&(r.textContent="å®Œäº†",r.onclick=()=>{Mt(),jt()}),alert("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸã€‚ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’æ§ãˆã¦ãã ã•ã„ã€‚")}await jt()}catch(d){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿å­˜ã‚¨ãƒ©ãƒ¼:",d),alert("ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: "+d.message)}finally{r&&!Tt||r&&(r.disabled=!1,r.textContent="ä¿å­˜")}}()});const Z=document.getElementById("company-user-delete");Z&&Z.addEventListener("click",Ct);const ee=document.getElementById("cu-generate-password");ee&&ee.addEventListener("click",()=>{const e=document.getElementById("cu-password");e&&(e.value=P())});const te=document.getElementById("cu-copy-credentials");te&&te.addEventListener("click",Ht);const ne=document.getElementById("company-user-modal");ne&&ne.addEventListener("click",e=>{e.target===ne&&Mt()})}let xt=[],At=[],Tt=null;async function jt(){const e=document.getElementById("company-users-tbody");if(e){e.innerHTML='<tr><td colspan="6" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</td></tr>';try{xt=await v(),At=await async function(){if(!k||!C())return[];try{return(await k.collection("company_users").orderBy("createdAt","desc").get()).docs.map(e=>{var t,n,o,a;return{id:e.id,...e.data(),password:void 0,createdAt:(null==(n=null==(t=e.data().createdAt)?void 0:t.toDate)?void 0:n.call(t))||null,lastLogin:(null==(a=null==(o=e.data().lastLogin)?void 0:o.toDate)?void 0:a.call(o))||null}})}catch(e){return console.error("Failed to get all company users:",e),[]}}();const n={};At.forEach(e=>{n[e.companyDomain]||(n[e.companyDomain]=[]),n[e.companyDomain].push(e)});const o=xt.filter(e=>g(e));if(0===o.length)return void(e.innerHTML='<tr><td colspan="6" class="loading-cell">ä¼šç¤¾ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</td></tr>');let a="";o.forEach(e=>{const o=n[e.companyDomain]||[];0===o.length?a+=`\n          <tr data-company-domain="${t(e.companyDomain)}">\n            <td>${t(e.company)}</td>\n            <td><span class="badge warning">æœªç™ºè¡Œ</span></td>\n            <td><span class="badge">-</span></td>\n            <td>-</td>\n            <td>-</td>\n            <td>\n              <button class="btn-small btn-primary btn-issue-user" data-domain="${t(e.companyDomain)}" data-company="${t(e.company)}">\n                IDç™ºè¡Œ\n              </button>\n            </td>\n          </tr>\n        `:o.forEach((n,s)=>{const i=!1!==n.isActive,l=n.createdAt?new Date(n.createdAt).toLocaleDateString("ja-JP"):"-",c=n.lastLogin?new Date(n.lastLogin).toLocaleString("ja-JP"):"æœªãƒ­ã‚°ã‚¤ãƒ³";a+=`\n            <tr data-user-id="${t(n.id)}">\n              ${0===s?`<td rowspan="${o.length}">${t(e.company)}</td>`:""}\n              <td><code>${t(n.username)}</code></td>\n              <td>${i?'<span class="badge success">æœ‰åŠ¹</span>':'<span class="badge">ç„¡åŠ¹</span>'}</td>\n              <td>${l}</td>\n              <td>${c}</td>\n              <td>\n                <div class="action-buttons">\n                  <button class="btn-small btn-secondary btn-reset-password" data-user-id="${t(n.id)}" data-username="${t(n.username)}">\n                    PWå†ç™ºè¡Œ\n                  </button>\n                  <button class="btn-small btn-edit-user" data-user-id="${t(n.id)}">ç·¨é›†</button>\n                </div>\n              </td>\n            </tr>\n          `})}),e.innerHTML=a,document.querySelectorAll(".btn-issue-user").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.domain;e.dataset.company,Dt(null,t)})}),document.querySelectorAll(".btn-edit-user").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.userId,n=At.find(e=>e.id===t);if(n){const e=xt.find(e=>e.companyDomain===n.companyDomain);Dt(n,n.companyDomain,(null==e?void 0:e.company)||n.companyDomain)}})}),document.querySelectorAll(".btn-reset-password").forEach(e=>{e.addEventListener("click",async()=>{const t=e.dataset.userId,n=e.dataset.username;await async function(e,t){if(!confirm(`${t} ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†ç™ºè¡Œã—ã¾ã™ã‹ï¼Ÿ`))return;const n=P();try{const o=await async function(e,t){if(!C())return{success:!1,error:"æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“"};if(!k)return{success:!1,error:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"};try{return await k.collection("company_users").doc(e).update({password:t,passwordResetAt:firebase.firestore.FieldValue.serverTimestamp()}),{success:!0}}catch(n){return console.error("Failed to reset password:",n),{success:!1,error:n.message}}}(e,n);if(!o.success)throw new Error(o.error);const a=`æ–°ã—ã„ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç™ºè¡Œã—ã¾ã—ãŸã€‚\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ${t}\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: ${n}\n\nâ€»ã“ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯å†è¡¨ç¤ºã§ãã¾ã›ã‚“ã€‚å¿…ãšæ§ãˆã¦ãã ã•ã„ã€‚`;try{await navigator.clipboard.writeText(`ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ${t}\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: ${n}`),alert(a+"\n\nï¼ˆã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼‰")}catch{alert(a)}}catch(o){console.error("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†ç™ºè¡Œã‚¨ãƒ©ãƒ¼:",o),alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å†ç™ºè¡Œã«å¤±æ•—ã—ã¾ã—ãŸ: "+o.message)}}(t,n)})})}catch(n){console.error("ä¼šç¤¾ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—ã‚¨ãƒ©ãƒ¼:",n),e.innerHTML='<tr><td colspan="6" class="loading-cell">ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</td></tr>'}}}function Dt(e,n,o){const a=document.getElementById("company-user-modal"),s=document.getElementById("company-user-modal-title"),i=document.getElementById("cu-company-select"),l=document.getElementById("cu-username"),c=document.getElementById("cu-password"),r=document.getElementById("cu-is-active"),d=document.getElementById("company-user-delete"),u=document.getElementById("cu-credentials-display");if(!a)return;const p=xt.filter(e=>g(e));i.innerHTML=p.map(e=>`\n    <option value="${t(e.companyDomain)}" ${e.companyDomain===n?"selected":""}>\n      ${t(e.company)}\n    </option>\n  `).join(""),e?(s.textContent="ä¼šç¤¾ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç·¨é›†",l.value=e.username||"",c.value="",c.placeholder="å¤‰æ›´ã™ã‚‹å ´åˆã®ã¿å…¥åŠ›",c.required=!1,r.checked=!1!==e.isActive,d.style.display="",Tt=e.id):(s.textContent="ä¼šç¤¾ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¿½åŠ ",l.value=U(n),c.value=P(),c.placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",c.required=!0,r.checked=!0,d.style.display="none",Tt=null),u.style.display="none",a.style.display="flex"}function Mt(){const e=document.getElementById("company-user-modal");e&&(e.style.display="none"),Tt=null}async function Ct(){if(Tt&&confirm("ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ"))try{const e=await async function(e){if(!C())return{success:!1,error:"æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“"};if(!k)return{success:!1,error:"ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"};try{return await k.collection("company_users").doc(e).delete(),{success:!0}}catch(t){return console.error("Failed to delete company user:",t),{success:!1,error:t.message}}}(Tt);if(!e.success)throw new Error(e.error);alert("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã—ãŸ"),Mt(),await jt()}catch(e){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ã‚¨ãƒ©ãƒ¼:",e),alert("å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ: "+e.message)}}function Ht(){var e,t;const n=null==(e=document.getElementById("cu-issued-username"))?void 0:e.textContent,o=null==(t=document.getElementById("cu-issued-password"))?void 0:t.textContent;if(n&&o){const e=`ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ${n}\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: ${o}`;navigator.clipboard.writeText(e).then(()=>{alert("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ")}).catch(()=>{alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ")})}}function Pt(){console.log("[Admin] initAdminDashboard é–‹å§‹");const e=localStorage.getItem("admin_password");e&&(b.credentials.password=e),"undefined"!=typeof firebase&&(firebase.apps.length||firebase.initializeApp(b.firebaseConfig),q=firebase.auth(),k=firebase.firestore(),q.onAuthStateChanged(async e=>{if(e){S=e;try{if(B=await e.getIdToken(),console.log("[Admin] Firebase ID token obtained"),await T(e.uid,e.email),sessionStorage.getItem(b.sessionKey)){const t=new CustomEvent("authReady",{detail:{user:e,idToken:B,userRole:x,userCompanyDomain:A}});document.dispatchEvent(t)}}catch(t){console.error("[Admin] Failed to get ID token:",t)}}else S=null,B=null,x=null,A=null})),sessionStorage.getItem(b.sessionKey)?(qt(),document.addEventListener("authReady",()=>{N()},{once:!0}),setTimeout(()=>{j()||(console.log("[Admin] Auth timeout, loading with mock data"),N())},3e3)):Lt(),Bt(),Y(),function(){const e=document.getElementById("btn-back-to-companies");e&&e.addEventListener("click",ee)}()}"undefined"!=typeof window&&(window.AdminDashboard={config:b,spreadsheetConfig:{sheetId:"1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0",companySheetName:"ä¼šç¤¾ä¸€è¦§",lpSettingsSheetName:"LPè¨­å®š",gasApiUrl:"https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec"},init:Pt,switchSection:St,getIdToken:j},window.AdminAnalytics={loadDashboardData:N,filterCompanies:K,sortCompanies:J},window.AdminCompany={loadCompanyManageData:ye,editCompany:ve,showCompanyModal:ge,closeCompanyModal:fe,saveCompanyData:async function(){var e,t,n,o,a,s,i;const l=document.getElementById("edit-company-domain"),c=(null==l?void 0:l.value.trim().toLowerCase())||"",r={company:(null==(e=document.getElementById("edit-company-name"))?void 0:e.value.trim())||"",company_domain:c,companyDomain:c,designPattern:(null==(t=document.getElementById("edit-design-pattern"))?void 0:t.value)||"standard",imageUrl:(null==(n=document.getElementById("edit-image-url"))?void 0:n.value.trim())||"",order:(null==(o=document.getElementById("edit-order"))?void 0:o.value)||"",description:(null==(a=document.getElementById("edit-description"))?void 0:a.value.trim())||"",showCompany:(null==(s=document.getElementById("edit-show-company"))?void 0:s.checked)?"â—‹":"",visible:(null==(i=document.getElementById("edit-show-company"))?void 0:i.checked)?"â—‹":""};if(!r.company||!r.companyDomain)return void alert("ä¼šç¤¾åã¨ä¼šç¤¾ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯å¿…é ˆã§ã™");if(!/^[a-z0-9-]+$/.test(r.companyDomain))return void alert("ä¼šç¤¾ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯åŠè§’è‹±æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ã®ã¿ä½¿ç”¨ã§ãã¾ã™");if(pe&&(null==ue?void 0:ue.find(e=>e.companyDomain===r.companyDomain)))return void alert("ã“ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã¯æ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™");const d=w;try{const e=document.getElementById("company-modal-save");e&&(e.disabled=!0,e.textContent="ä¿å­˜ä¸­...");const t=btoa(unescape(encodeURIComponent(JSON.stringify({action:"saveCompany",company:r})))),n=`${d}?action=post&data=${encodeURIComponent(t)}`,o=await fetch(n,{method:"GET",redirect:"follow"}),a=await o.json();if(e&&(e.disabled=!1,e.textContent="ä¿å­˜"),!a.success)return void alert("ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: "+(a.error||"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼"));if(localStorage.removeItem(`company_data_${r.companyDomain}`),pe)ue.push(r);else{const e=ue.findIndex(e=>e.companyDomain===r.companyDomain);-1!==e&&(ue[e]=r)}fe(),he(),alert(`ä¼šç¤¾æƒ…å ±ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ä¿å­˜ã—ã¾ã—ãŸã€‚\n\nä¼šç¤¾å: ${r.company}\nãƒ‰ãƒ¡ã‚¤ãƒ³: ${r.companyDomain}`)}catch(u){console.error("GAS APIå‘¼ã³å‡ºã—ã‚¨ãƒ©ãƒ¼:",u),alert("ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®ä¿å­˜ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚"),function(e){const t=`company_data_${e.companyDomain}`;if(localStorage.setItem(t,JSON.stringify(e)),pe)ue.push(e);else{const t=ue.findIndex(t=>t.companyDomain===e.companyDomain);-1!==t&&(ue[t]=e)}fe(),he(),alert(`ä¼šç¤¾æƒ…å ±ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã—ãŸã€‚\n\næ³¨æ„: ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è‡ªå‹•ä¿å­˜ã™ã‚‹ã«ã¯ã€è¨­å®šç”»é¢ã§GAS API URLã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\nä¼šç¤¾å: ${e.company}\nãƒ‰ãƒ¡ã‚¤ãƒ³: ${e.companyDomain}`)}(r)}},renderCompanyTable:he,openJobsArea:be,loadCompanyListForLP:Ze,loadLPSettings:et,saveLPSettings:vt,renderHeroImagePresets:mt,toggleLPPreview:bt,closeLPPreview:Et,debouncedUpdatePreview:ht,initSectionSortable:wt,updateLPPreview:$t,getPatternLabel:e=>({standard:"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰",modern:"ãƒ¢ãƒ€ãƒ³",classic:"ã‚¯ãƒ©ã‚·ãƒƒã‚¯",minimal:"ãƒŸãƒ‹ãƒãƒ«",colorful:"ã‚«ãƒ©ãƒ•ãƒ«"}[e]||"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰")}),document.addEventListener("DOMContentLoaded",()=>{Pt()});
