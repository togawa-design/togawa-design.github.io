import{escapeHtml as e}from"./utils-BB91om2o.js";import{k as t,a as n,l as o,h as a,m as c}from"./jobs-loader-Bze9ecER.js";import{L as i,J as s,b as r}from"./index-BTXzcPwu.js";function l(){const e=document.querySelectorAll(".search-card"),t=document.querySelectorAll(".search-panel");e.forEach(n=>{n.addEventListener("click",function(){const n=this.dataset.method;e.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.classList.remove("active")),this.classList.add("active");const o=document.getElementById("panel-"+n);o&&o.classList.add("active"),"location"===n&&async function(){const e=document.querySelector(".location-modal");e&&e.remove();const t=document.createElement("div");t.className="location-modal",t.innerHTML=`\n    <div class="location-modal-overlay"></div>\n    <div class="location-modal-content">\n      <button class="location-modal-close">&times;</button>\n      <h3>å‹¤å‹™åœ°ã‹ã‚‰æ¢ã™</h3>\n      <p>åƒããŸã„ã‚¨ãƒªã‚¢ã‚’é¸æŠã—ã¦ãã ã•ã„</p>\n      <div class="location-list">\n        ${i({message:"å‹¤å‹™åœ°ã‚’èª­ã¿è¾¼ã¿ä¸­..."})}\n      </div>\n    </div>\n  `,document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("active")});const n=()=>{t.classList.remove("active"),setTimeout(()=>t.remove(),300)};t.querySelector(".location-modal-close").addEventListener("click",n),t.querySelector(".location-modal-overlay").addEventListener("click",n);try{const e=await a(),o=t.querySelector(".location-list");if(0===e.length)return void(o.innerHTML='<p class="no-data">å‹¤å‹™åœ°ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>');o.innerHTML=e.map(e=>r({location:e})).join(""),o.querySelectorAll(".location-item").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.dataset.prefecture;n(),window.location.href=`location.html?prefecture=${encodeURIComponent(o)}`})})}catch(o){console.error("å‹¤å‹™åœ°ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",o),t.querySelector(".location-list").innerHTML='<p class="error">å‹¤å‹™åœ°ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</p>'}}(),"occupation"===n&&function(){const e=document.querySelector(".occupation-modal");e&&e.remove();const t=[{id:"office",name:"äº‹å‹™ãƒ»ç®¡ç†ãƒ»ä¼ç”»",icon:"ğŸ’¼"},{id:"sales",name:"å–¶æ¥­ãƒ»è²©å£²ãƒ»ã‚µãƒ¼ãƒ“ã‚¹",icon:"ğŸ¤"},{id:"it",name:"ITãƒ»ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",icon:"ğŸ’»"},{id:"manufacturing",name:"è£½é€ ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°",icon:"ğŸ”§"},{id:"medical",name:"åŒ»ç™‚ãƒ»ç¦ç¥‰ãƒ»æ•™è‚²",icon:"ğŸ¥"},{id:"logistics",name:"ç‰©æµãƒ»é‹è¼¸",icon:"ğŸšš"},{id:"other",name:"ãã®ä»–",icon:"ğŸ“‹"}],n=document.createElement("div");n.className="occupation-modal",n.innerHTML=`\n    <div class="occupation-modal-overlay"></div>\n    <div class="occupation-modal-content">\n      <button class="occupation-modal-close">&times;</button>\n      <h3>è·ç¨®ã‹ã‚‰æ¢ã™</h3>\n      <p>å¸Œæœ›ã®è·ç¨®ã‚’é¸æŠã—ã¦ãã ã•ã„</p>\n      <div class="occupation-list">\n        ${t.map(e=>`\n          <a href="jobs.html?occupation=${encodeURIComponent(e.name)}" class="occupation-item" data-occupation="${e.id}">\n            <span class="occupation-icon">${e.icon}</span>\n            <span class="occupation-name">${e.name}</span>\n          </a>\n        `).join("")}\n      </div>\n    </div>\n  `,document.body.appendChild(n),requestAnimationFrame(()=>{n.classList.add("active")});const o=()=>{n.classList.remove("active"),setTimeout(()=>n.remove(),300)};n.querySelector(".occupation-modal-close").addEventListener("click",o),n.querySelector(".occupation-modal-overlay").addEventListener("click",o)}()})});const n=document.getElementById("keyword-search-form");n&&n.addEventListener("submit",function(e){var t,n;e.preventDefault();const o=null==(n=null==(t=document.getElementById("keyword-input"))?void 0:t.value)?void 0:n.trim();o&&(window.location.href=`jobs.html?keyword=${encodeURIComponent(o)}`)})}function d(){const e=document.querySelector(".mobile-menu-btn");if(!e)return;if(document.querySelector(".mobile-nav"))return;const t=document.createElement("nav");t.className="mobile-nav",t.innerHTML='\n    <ul>\n      <li><a href="#jobs">ãŠä»•äº‹ç´¹ä»‹</a></li>\n      <li><a href="#content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a></li>\n      <li><a href="#about">å½“ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a></li>\n      <li><a href="#contact">ãŠå•ã„åˆã‚ã›</a></li>\n      <li><a href="admin.html">ç®¡ç†è€…</a></li>\n    </ul>\n  ';const n=document.querySelector(".header");n&&n.after(t),e.addEventListener("click",function(){this.classList.toggle("active"),t.classList.toggle("active")}),t.querySelectorAll("a").forEach(n=>{n.addEventListener("click",()=>{e.classList.remove("active"),t.classList.remove("active")})})}function u(){const e=document.querySelectorAll(".stat-number"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target,o=parseInt(n.dataset.value)||0;o>0&&function(e,t){const n=2e3,o=0,a=performance.now(),c=e.querySelector(".stat-value")||e;function i(e){const s=e-a,r=Math.min(s/n,1),l=1-Math.pow(1-r,3),d=Math.floor(o+(t-o)*l);c.textContent=d.toLocaleString(),r<1&&requestAnimationFrame(i)}requestAnimationFrame(i)}(n,o),t.unobserve(n)}})},{threshold:.5});e.forEach(e=>t.observe(e))}function m(e){if(!e)return new Date(0);const t=e.replace(/\//g,"-"),n=new Date(t);return isNaN(n.getTime())?new Date(0):n}function f(){document.addEventListener("click",e=>{const t=e.target.closest(".btn-job-video");if(t){e.preventDefault();const n=t.dataset.videoUrl;n&&function(e){const t=function(e){if(!e)return null;const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/];for(const n of t){const t=e.match(n);if(t)return`https://www.youtube.com/embed/${t[1]}?autoplay=1&rel=0`}return null}(e);if(!t)return void console.error("[JobVideo] YouTube URLã®è§£æã«å¤±æ•—:",e);const n=document.querySelector(".job-video-modal");n&&n.remove();const o=document.createElement("div");o.className="job-video-modal",o.innerHTML=`\n    <div class="job-video-modal-overlay"></div>\n    <div class="job-video-modal-content">\n      <button class="job-video-modal-close">&times;</button>\n      <iframe\n        class="job-video-modal-iframe"\n        src="${t}"\n        frameborder="0"\n        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"\n        allowfullscreen\n      ></iframe>\n    </div>\n  `,document.body.appendChild(o),requestAnimationFrame(()=>{o.classList.add("active")}),document.body.style.overflow="hidden"}(n)}const n=e.target.closest(".job-video-modal-close"),o=e.target.closest(".job-video-modal-overlay");(n||o)&&v()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&v()})}function v(){const e=document.querySelector(".job-video-modal");e&&(e.classList.remove("active"),setTimeout(()=>{e.remove(),document.body.style.overflow=""},300))}function p(){l(),d(),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){var t;const n=this.getAttribute("href");if("#"===n)return;const o=document.querySelector(n);if(o){e.preventDefault();const n=(null==(t=document.querySelector(".header"))?void 0:t.offsetHeight)||0,a=o.getBoundingClientRect().top+window.pageYOffset-n;window.scrollTo({top:a,behavior:"smooth"})}})}),function(){const e=document.querySelector(".header");e&&window.addEventListener("scroll",()=>{window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")})}(),f(),document.getElementById("jobs-container")&&async function(o="jobs-container"){const a=document.getElementById(o);if(!a)return;const c=new URLSearchParams(window.location.search).get("location");if(a.innerHTML=i({message:c?`${c}ã®æ±‚äººã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...`:"æ±‚äººæƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™..."}),c){const n=await t(c);if(!n||0===n.length)return void(a.innerHTML=`\n        <div class="jobs-error">\n          <p>${e(c)}ã®æ±‚äººãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>\n          <a href="/" class="btn-more">ã™ã¹ã¦ã®æ±‚äººã‚’è¦‹ã‚‹</a>\n        </div>\n      `);const o=document.createElement("div");return o.className="location-filter-header",o.innerHTML=`\n      <div class="filter-info">\n        <span class="filter-label">${e(c)}ã®æ±‚äºº</span>\n        <span class="filter-count">${n.length}ä»¶</span>\n      </div>\n      <a href="/" class="btn-clear-filter">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è§£é™¤</a>\n    `,a.before(o),void(a.innerHTML=n.map(e=>s({job:e,showCompanyName:!0})).join(""))}const r=await n();if(!r||0===r.length)return void(a.innerHTML='\n      <div class="jobs-error">\n        <p>æ±‚äººæƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>\n        <button onclick="location.reload()">å†èª­ã¿è¾¼ã¿</button>\n      </div>\n    ');const l=r.sort((e,t)=>{const n=m(e.createdAt||e.publishStart||"");return m(t.createdAt||t.publishStart||"")-n}).slice(0,6);a.classList.add("jobs-grid-featured"),a.innerHTML=l.map(e=>s({job:e,showCompanyName:!0})).join("")}(),document.querySelector(".hero-stats")&&async function(){const t=document.querySelector(".hero-stats");if(t)try{const n=await o();if(!n)return void console.warn("çµ±è¨ˆæƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ");const a=[{value:n.avgHourlyWage||0,label:"å¹³å‡æ™‚çµ¦",suffix:"å††"},{value:n.avgMonthlySalary||0,label:"å¹³å‡æœˆå",suffix:"å††"}];t.innerHTML=a.map(t=>`\n      <div class="stat-item">\n        <span class="stat-number" data-value="${t.value}">\n          ${t.prefix?`<span class="stat-prefix">${t.prefix}</span>`:""}\n          <span class="stat-value">${t.value.toLocaleString()}</span>\n          ${t.suffix?`<span class="stat-suffix">${t.suffix}</span>`:""}\n        </span>\n        <span class="stat-label">${e(t.label)}</span>\n      </div>\n    `).join("")}catch(n){console.error("çµ±è¨ˆæƒ…å ±ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",n)}}(),document.getElementById("footer-locations")&&async function(){const t=document.getElementById("footer-locations");if(t)try{const n=(await a()).slice(0,4);if(0===n.length)return void(t.innerHTML='<li><a href="location.html">ã™ã¹ã¦ã®ã‚¨ãƒªã‚¢</a></li>');t.innerHTML=n.map(t=>`<li><a href="location.html?prefecture=${encodeURIComponent(t.prefecture)}">${e(t.prefecture)}ã®æ±‚äºº</a></li>`).join("")+'<li><a href="location.html">ã™ã¹ã¦ã®ã‚¨ãƒªã‚¢</a></li>'}catch(n){console.error("ãƒ•ãƒƒã‚¿ãƒ¼å‹¤å‹™åœ°ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",n)}}(),document.getElementById("footer-job-types")&&async function(){const t=document.getElementById("footer-job-types");if(t)try{const n=(await c()).slice(0,5);if(0===n.length)return void(t.innerHTML='<li><a href="jobs.html">ã™ã¹ã¦ã®æ±‚äºº</a></li>');t.innerHTML=n.map(t=>`<li><a href="jobs.html?occupation=${encodeURIComponent(t.jobType)}">${e(t.jobType)}ã®æ±‚äºº</a></li>`).join("")+'<li><a href="jobs.html">ã™ã¹ã¦ã®æ±‚äºº</a></li>'}catch(n){console.error("ãƒ•ãƒƒã‚¿ãƒ¼è·ç¨®åã®å–å¾—ã‚¨ãƒ©ãƒ¼:",n)}}(),window.addEventListener("load",u)}export{d as a,p as i};
