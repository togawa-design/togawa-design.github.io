import{e as n}from"./utils-BbQaLTsI.js";function e(e,l){const{data:t,layout:s}=e,o=(null==t?void 0:t.images)||[],a=(null==t?void 0:t.sectionTitle)||"",c=!1!==(null==t?void 0:t.autoPlay),i=(null==t?void 0:t.interval)||5e3,r=(null==s?void 0:s.style)||"standard",u=!1!==(null==s?void 0:s.showDots),d=!1!==(null==s?void 0:s.showArrows);return 0===o.length?`\n      <section class="lp-carousel lp-carousel-empty" data-section-id="${e.id}">\n        <div class="lp-section-inner">\n          ${a?`<h2 class="lp-section-title">${n(a)}</h2>`:""}\n          <div class="lp-carousel-placeholder">\n            <p>画像が登録されていません</p>\n          </div>\n        </div>\n      </section>\n    `:`\n    <section class="lp-carousel lp-carousel-${r}" data-section-id="${e.id}">\n      <div class="lp-section-inner">\n        ${a?`<h2 class="lp-section-title">${n(a)}</h2>`:""}\n        <div class="lp-carousel-container"\n             data-autoplay="${c}"\n             data-interval="${i}">\n          <div class="lp-carousel-track">\n            ${o.map((e,l)=>function(e,l){const t="string"==typeof e?e:e.url,s="object"==typeof e&&(e.alt||e.caption)||`画像 ${l+1}`,o="object"==typeof e?e.caption:"";return`\n    <div class="lp-carousel-slide ${0===l?"active":""}" data-index="${l}">\n      <div class="lp-carousel-slide-inner">\n        <img src="${n(t)}" alt="${n(s)}" loading="${0===l?"eager":"lazy"}">\n        ${o?`<div class="lp-carousel-caption">${n(o)}</div>`:""}\n      </div>\n    </div>\n  `}(e,l,o.length)).join("")}\n          </div>\n          ${d&&o.length>1?'\n            <button type="button" class="lp-carousel-btn lp-carousel-prev" aria-label="前の画像">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <polyline points="15,18 9,12 15,6"></polyline>\n              </svg>\n            </button>\n            <button type="button" class="lp-carousel-btn lp-carousel-next" aria-label="次の画像">\n              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                <polyline points="9,6 15,12 9,18"></polyline>\n              </svg>\n            </button>\n          ':""}\n        </div>\n        ${u&&o.length>1?`\n          <div class="lp-carousel-dots">\n            ${o.map((n,e)=>`\n              <button type="button"\n                      class="lp-carousel-dot ${0===e?"active":""}"\n                      data-index="${e}"\n                      aria-label="画像${e+1}を表示">\n              </button>\n            `).join("")}\n          </div>\n        `:""}\n        <div class="lp-carousel-counter">\n          <span class="lp-carousel-current">1</span> / <span class="lp-carousel-total">${o.length}</span>\n        </div>\n      </div>\n    </section>\n  `}function l(){document.querySelectorAll(".lp-carousel-container").forEach(n=>{n.querySelector(".lp-carousel-track");const e=n.querySelectorAll(".lp-carousel-slide"),l=n.querySelector(".lp-carousel-prev"),t=n.querySelector(".lp-carousel-next"),s=n.closest(".lp-carousel"),o=null==s?void 0:s.querySelectorAll(".lp-carousel-dot"),a=null==s?void 0:s.querySelector(".lp-carousel-current");if(e.length<=1)return;let c=0,i=null;const r="true"===n.dataset.autoplay,u=parseInt(n.dataset.interval)||5e3;function d(n){n<0&&(n=e.length-1),n>=e.length&&(n=0),e.forEach((e,l)=>{e.classList.toggle("active",l===n)}),null==o||o.forEach((e,l)=>{e.classList.toggle("active",l===n)}),a&&(a.textContent=n+1),c=n}function p(){d(c+1)}function v(){d(c-1)}function h(){r&&!i&&(i=setInterval(p,u))}function $(){i&&(clearInterval(i),i=null)}null==l||l.addEventListener("click",()=>{v(),$(),h()}),null==t||t.addEventListener("click",()=>{p(),$(),h()}),null==o||o.forEach((n,e)=>{n.addEventListener("click",()=>{d(e),$(),h()})});let y=0,g=0;n.addEventListener("touchstart",n=>{y=n.changedTouches[0].screenX,$()},{passive:!0}),n.addEventListener("touchend",n=>{g=n.changedTouches[0].screenX;const e=y-g;Math.abs(e)>50&&(e>0?p():v()),h()},{passive:!0}),n.addEventListener("mouseenter",$),n.addEventListener("mouseleave",h),h()})}export{e as default,l as initCarousels,e as renderCarouselSection};
