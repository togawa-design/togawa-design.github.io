import"./modulepreload-polyfill-YP0FEG5d.js";import{trackEvent as n,escapeHtml as a}from"./utils-BB91om2o.js";import{f as e,i as o,d as t,c as i,D as c,j as r,J as s}from"./jobs-loader-Bb-hzmH0.js";import{L as l,a as d,C as m,J as p}from"./index-CMZR5pAg.js";import{i as y}from"./layout-B7134WG6.js";async function v(){var v;const u=document.getElementById("job-detail-container");if(!u)return;const b=new URLSearchParams(window.location.search).get("id");if(!b)return void(u.innerHTML='\n      <div class="jobs-error">\n        <p>求人が見つかりませんでした。</p>\n        <a href="/" class="btn-more">トップページに戻る</a>\n      </div>\n    ');u.innerHTML=l({message:"会社情報を読み込んでいます..."});const f=await e();if(!f)return void(u.innerHTML='\n      <div class="jobs-error">\n        <p>会社情報を取得できませんでした。</p>\n        <button onclick="location.reload()">再読み込み</button>\n      </div>\n    ');const h=f.find(n=>{var a;return(null==(a=n.companyDomain)?void 0:a.trim())===b&&o(n)});if(!h)return void(u.innerHTML='\n      <div class="jobs-error">\n        <p>会社が見つかりませんでした。</p>\n        <a href="/" class="btn-more">トップページに戻る</a>\n      </div>\n    ');let g=[];if(null==(v=h.jobsSheet)?void 0:v.trim()){const n=await t(h.jobsSheet.trim());n&&n.length>0&&(g=n.filter(n=>"false"!==n.visible&&"FALSE"!==n.visible).filter(n=>i(n)).sort((n,a)=>(parseInt(n.order)||999)-(parseInt(a.order)||999)).map(n=>({...n,company:h.company,companyDomain:h.companyDomain})))}0===g.length&&(g=[h]),document.title=`${h.company}の求人一覧 | L-SET`;const j=document.querySelector('meta[name="description"]');j&&(j.content=`${h.company}の求人一覧。${g.length}件の求人を掲載中。`);const L=document.getElementById("breadcrumb-current");L&&(L.textContent=h.company),u.innerHTML=function(n,e){var o;const t=(null==(o=n.imageUrl)?void 0:o.trim())||c,i=r(n.designPattern),l=n.description?s.sanitizeHtml(n.description):"";return`\n    <div class="company-page ${i}">\n      <div class="company-header">\n        <div class="company-header-image">\n          ${d({src:t,alt:n.company,className:""})}\n        </div>\n        <div class="company-header-info">\n          <h1 class="company-name">${a(n.company)}</h1>\n          <p class="company-job-count">${e.length}件の求人を掲載中</p>\n        </div>\n      </div>\n\n      ${l?`\n      <div class="company-description">\n        <h2>会社について</h2>\n        <div class="company-description-content">${l}</div>\n      </div>\n      `:""}\n\n      <div class="company-jobs">\n        <h2>募集中の求人</h2>\n        <div class="company-jobs-list">\n          ${e.map(n=>m({job:n})).join("")}\n        </div>\n      </div>\n\n      <div class="company-cta">\n        <p>お仕事選びでお困りですか？</p>\n        <div class="company-cta-buttons">\n          <a href="#" class="btn-apply-large">無料で相談する</a>\n          <a href="#" class="btn-line-large">LINEで相談する</a>\n        </div>\n      </div>\n    </div>\n  `}(h,g),n("view_company_page",{company_domain:h.companyDomain||"",company_name:h.company||"",design_pattern:h.designPattern||"standard",page_location:window.location.href,page_title:document.title}),function(a){document.querySelectorAll(".btn-apply-job, .btn-apply-large").forEach(e=>{e.addEventListener("click",()=>{n("click_apply",{company_domain:a,button_type:"apply"})})}),document.querySelectorAll(".btn-line-large").forEach(e=>{e.addEventListener("click",()=>{n("click_apply",{company_domain:a,button_type:"line"})})})}(h.companyDomain),async function(n,a){const e=document.getElementById("related-jobs-container");if(!e)return;const t=n.filter(n=>n.companyDomain!==a&&o(n)).sort((n,a)=>(parseInt(n.order)||999)-(parseInt(a.order)||999)).slice(0,3);0!==t.length?e.innerHTML=t.map(n=>p({job:n})).join(""):e.innerHTML="<p>他の求人がありません。</p>"}(f,b),y()}document.addEventListener("DOMContentLoaded",()=>{v()});
