const e={ADMIN:"admin",COMPANY:"company"},t={credentials:{username:"admin",password:"receco2025"},sessionKey:"rikueco_admin_session",userRoleKey:"rikueco_user_role",userCompanyKey:"rikueco_user_company",gaPropertyId:"G-E1XC94EG05",gaApiKey:"AIzaSyAIC2WGg5dnvMh6TO4sivpbk4HtpYw4tbo",apiEndpoint:"https://asia-northeast1-generated-area-484613-e3.cloudfunctions.net/getAnalyticsData",firebaseConfig:{apiKey:"AIzaSyB3eXZoFkXOwnHxPvaHiWO7csmZK4KGqAQ",authDomain:"generated-area-484613-e3-90bd4.firebaseapp.com",projectId:"generated-area-484613-e3-90bd4"}},r={sheetId:"1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0",companySheetName:"会社一覧",lpSettingsSheetName:"LP設定",gasApiUrl:"https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec"},o=!0;function s(e){return{standard:"スタンダード",modern:"モダン",classic:"クラシック",minimal:"ミニマル",colorful:"カラフル"}[e]||"スタンダード"}const i=[{id:"teamwork-1",name:"チームミーティング",url:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=400&q=60"},{id:"teamwork-2",name:"オフィスワーク",url:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&q=60"},{id:"teamwork-3",name:"コラボレーション",url:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=400&q=60"},{id:"teamwork-4",name:"ビジネス握手",url:"https://images.unsplash.com/photo-1521791136064-7986c2920216?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1521791136064-7986c2920216?w=400&q=60"},{id:"teamwork-5",name:"ワークショップ",url:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?w=400&q=60"},{id:"work-1",name:"作業風景",url:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400&q=60"},{id:"work-2",name:"倉庫作業",url:"https://images.unsplash.com/photo-1553413077-190dd305871c?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1553413077-190dd305871c?w=400&q=60"},{id:"work-3",name:"建設現場",url:"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=400&q=60"},{id:"work-4",name:"技術職",url:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1573164713988-8665fc963095?w=400&q=60"},{id:"work-5",name:"チームワーク",url:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=1920&q=80",thumbnail:"https://images.unsplash.com/photo-1529156069898-49953e39b3ac?w=400&q=60"}];let a=null,n=null,c=null;function l(){return a||("undefined"!=typeof window&&window.firebase?(n=window.firebase,n.apps.length||n.initializeApp(t.firebaseConfig),a=n.firestore(),a):(console.warn("[FirestoreService] Firebase not loaded"),null))}async function d(){return a||(c||(c=(async()=>{try{return n=await function(e=5e3){return new Promise((t,r)=>{if("undefined"!=typeof window&&window.firebase)return void t(window.firebase);const o=Date.now(),s=()=>{"undefined"!=typeof window&&window.firebase?t(window.firebase):Date.now()-o>=e?r(new Error("Firebase SDK load timeout")):setTimeout(s,50)};s()})}(),n.apps.length||n.initializeApp(t.firebaseConfig),a=n.firestore(),console.log("[FirestoreService] Firestore initialized successfully"),a}catch(e){throw console.error("[FirestoreService] Firebase initialization error:",e),c=null,e}})(),c))}async function u(){return a||await d(),a}async function m(){const e=await u();if(!e)throw new Error("Firestore not initialized");try{const t=await e.collection("companies").orderBy("order","asc").get(),r=[];return t.forEach(e=>{r.push({id:e.id,companyDomain:e.id,...e.data()})}),{success:!0,companies:r}}catch(t){return console.error("[FirestoreService] getCompanies error:",t),{success:!1,error:t.message}}}async function p(e){const t=await u();if(!t)throw new Error("Firestore not initialized");try{const r=await t.collection("companies").doc(e).get();return r.exists?{success:!0,company:{id:r.id,companyDomain:r.id,...r.data()}}:{success:!1,error:"会社が見つかりません"}}catch(r){return console.error("[FirestoreService] getCompany error:",r),{success:!1,error:r.message}}}async function h(e,t){const r=await u();if(!r)throw new Error("Firestore not initialized");try{const o=r.collection("companies").doc(e),s=!(await o.get()).exists,i={...t,updatedAt:n.firestore.FieldValue.serverTimestamp()};return s&&(i.createdAt=n.firestore.FieldValue.serverTimestamp()),await o.set(i,{merge:!0}),{success:!0,message:s?"会社を作成しました":"会社情報を更新しました",companyDomain:e}}catch(o){return console.error("[FirestoreService] saveCompany error:",o),{success:!1,error:o.message}}}async function w(e){const t=await u();if(!t)throw new Error("Firestore not initialized");try{const r=t.batch();(await t.collection("companies").doc(e).collection("jobs").get()).forEach(e=>r.delete(e.ref));(await t.collection("companies").doc(e).collection("lpSettings").get()).forEach(e=>r.delete(e.ref));return(await t.collection("companies").doc(e).collection("recruitSettings").get()).forEach(e=>r.delete(e.ref)),r.delete(t.collection("companies").doc(e)),await r.commit(),{success:!0,message:"会社を削除しました"}}catch(r){return console.error("[FirestoreService] deleteCompany error:",r),{success:!1,error:r.message}}}async function g(e){const t=await u();if(!t)throw new Error("Firestore not initialized");try{const r=await t.collection("companies").doc(e).collection("jobs").orderBy("order","asc").get(),o=[];let s=3;return r.forEach(e=>{o.push({...e.data(),_rowIndex:s,_docId:e.id}),s++}),{success:!0,jobs:o}}catch(r){return console.error("[FirestoreService] getJobs error:",r),{success:!1,error:r.message,jobs:[]}}}async function f(e,t,r=null){const o=await u();if(!o)throw new Error("Firestore not initialized");try{const s=o.collection("companies").doc(e).collection("jobs");let i,a,c=!1;if(r)i=s.doc(String(r)),a=r;else if(t.id){i=s.doc(String(t.id));c=!(await i.get()).exists,a=t.id}else{const e=await s.orderBy("id","desc").limit(1).get();let t=0;e.forEach(e=>{const r=parseInt(e.data().id)||0;r>t&&(t=r)}),a=t+1,i=s.doc(String(a)),c=!0}const l={...t,id:String(a),updatedAt:n.firestore.FieldValue.serverTimestamp()};return c&&(l.createdAt=n.firestore.FieldValue.serverTimestamp()),delete l._rowIndex,delete l._docId,await i.set(l,{merge:!0}),{success:!0,message:c?"求人を作成しました":"求人情報を更新しました",jobId:a,rowIndex:null}}catch(s){return console.error("[FirestoreService] saveJob error:",s),{success:!1,error:s.message}}}async function b(e,t){const r=await u();if(!r)throw new Error("Firestore not initialized");try{return await r.collection("companies").doc(e).collection("jobs").doc(String(t)).delete(),{success:!0,message:"求人を削除しました"}}catch(o){return console.error("[FirestoreService] deleteJob error:",o),{success:!1,error:o.message}}}async function y(e,t="default"){const r=await u();if(!r)throw new Error("Firestore not initialized");try{const o=await r.collection("companies").doc(e).collection("lpSettings").doc(String(t)).get();return o.exists?{success:!0,settings:o.data()}:{success:!0,settings:{}}}catch(o){return console.error("[FirestoreService] getLPSettings error:",o),{success:!1,error:o.message}}}async function S(e,t,r){const o=await u();if(!o)throw new Error("Firestore not initialized");try{const s=o.collection("companies").doc(e).collection("lpSettings").doc(String(t||"default")),i={...r,companyDomain:e,jobId:String(t||"default"),updatedAt:n.firestore.FieldValue.serverTimestamp()};return await s.set(i,{merge:!0}),{success:!0,message:"LP設定を保存しました"}}catch(s){return console.error("[FirestoreService] saveLPSettings error:",s),{success:!1,error:s.message}}}async function F(e){const t=await u();if(!t)throw new Error("Firestore not initialized");try{const r=await t.collection("companies").doc(e).collection("recruitSettings").doc("main").get();return r.exists?{success:!0,settings:r.data()}:{success:!0,settings:{}}}catch(r){return console.error("[FirestoreService] getRecruitSettings error:",r),{success:!1,error:r.message}}}async function v(e,t){const r=await u();if(!r)throw new Error("Firestore not initialized");try{const o=r.collection("companies").doc(e).collection("recruitSettings").doc("main"),s={...t,companyDomain:e,updatedAt:n.firestore.FieldValue.serverTimestamp()};return await o.set(s,{merge:!0}),{success:!0,message:"採用ページ設定を保存しました"}}catch(o){return console.error("[FirestoreService] saveRecruitSettings error:",o),{success:!1,error:o.message}}}export{e as U,g as a,s as b,t as c,b as d,p as e,h as f,y as g,r as h,l as i,w as j,S as k,v as l,m,i as n,F as o,f as s,o as u};
