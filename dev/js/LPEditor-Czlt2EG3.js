var e=Object.defineProperty,t=(t,n,i)=>((t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i)(t,"symbol"!=typeof n?n+"":n,i);import{e as n}from"./utils-BE8OECDH.js";function i(e,t,i,s="default"){const l=i.heroTitle||t.title||`${e.company}ã§åƒã“ã†`,a=i.heroSubtitle||"",o=i.heroImage||e.imageUrl||"",d=[];switch(t.totalBonus&&d.push({label:"ç‰¹å…¸ç·é¡",value:t.totalBonus,icon:"bonus"}),t.monthlySalary&&d.push({label:"æœˆåä¾‹",value:t.monthlySalary,icon:"salary"}),s){case"yellow":return function(e,t,i,s,l){return`\n    <section class="lp-hero lp-hero--yellow">\n      <div class="lp-hero-bg lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" style="${s?`background-image: url('${n(s)}')`:""}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        ${i?`<p class="lp-hero-pretitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-pretitle">æœªçµŒé¨“ã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã‚‹ï¼</p>'}\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        <p class="lp-hero-company">${n(e.company)}</p>\n\n        ${l.length>0?`\n        <div class="lp-hero-highlights">\n          ${l.map(e=>`\n            <div class="lp-highlight-item ${e.icon}">\n              <span class="lp-highlight-label">${n(e.label)}</span>\n              <span class="lp-highlight-value">${n(e.value)}</span>\n            </div>\n          `).join("")}\n        </div>\n        `:""}\n\n        <div class="lp-hero-cta">\n          <a href="#lp-apply" class="lp-btn-apply-hero">ä»Šã™ãå¿œå‹Ÿã™ã‚‹</a>\n          <span class="lp-cta-microcopy">1åˆ†ã§å…¥åŠ›å®Œäº†</span>\n        </div>\n      </div>\n    </section>\n  `}(e,l,a,o,d);case"impact":return function(e,t,i,s){return`\n    <section class="lp-hero lp-hero--impact" style="${s?`background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('${n(s)}')`:""}">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-subtitle">é™ç•Œã‚’è¶…ãˆã‚ã€‚å¸¸è­˜ã‚’å¤‰ãˆã‚ã€‚</p>'}\n      </div>\n    </section>\n  `}(0,l,a,o);case"trust":return function(e,t,i){return`\n    <section class="lp-hero lp-hero--trust">\n      <div class="lp-hero-content">\n        <p class="lp-hero-pretitle">Expertise & Growth</p>\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:""}\n      </div>\n    </section>\n  `}(0,l,a);case"athome":return function(e,t,i,s){return`\n    <section class="lp-hero lp-hero--athome">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-subtitle">ã‚¹ã‚­ãƒ«ã‚ˆã‚Šã‚‚ã€ã‚ãªãŸã®ç¬‘é¡”ã‚’é‡è¦è¦–ã—ã¾ã™ï¼</p>'}\n        ${s?`<div class="lp-hero-image-container"><img src="${n(s)}" alt="" class="lp-hero-image lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ"></div>`:""}\n      </div>\n    </section>\n  `}(0,l,a,o);case"local":return function(e,t,i,s){return`\n    <section class="lp-hero lp-hero--local" style="${s?`background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('${n(s)}')`:""}">\n      <div class="lp-hero-content">\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:""}\n      </div>\n    </section>\n  `}(0,l,a,o);default:return function(e,t,i,s,l){return`\n    <section class="lp-hero">\n      <div class="lp-hero-bg lp-editable-image" data-field="heroImage" data-label="ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ" style="${s?`background-image: url('${n(s)}')`:""}"></div>\n      <div class="lp-hero-overlay"></div>\n      <div class="lp-hero-content">\n        <p class="lp-hero-company">${n(e.company)}</p>\n        <h1 class="lp-hero-title lp-editable" data-field="heroTitle" data-label="ãƒ¡ã‚¤ãƒ³ã‚¿ã‚¤ãƒˆãƒ«">${n(t)}</h1>\n        ${i?`<p class="lp-hero-subtitle lp-editable" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">${n(i)}</p>`:'<p class="lp-hero-subtitle lp-editable lp-placeholder" data-field="heroSubtitle" data-label="ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«">ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ </p>'}\n\n        ${l.length>0?`\n        <div class="lp-hero-highlights">\n          ${l.map(e=>`\n            <div class="lp-highlight-item ${e.icon}">\n              <span class="lp-highlight-label">${n(e.label)}</span>\n              <span class="lp-highlight-value">${n(e.value)}</span>\n            </div>\n          `).join("")}\n        </div>\n        `:""}\n\n        <div class="lp-hero-cta">\n          <a href="#lp-apply" class="lp-btn-apply-hero">ä»Šã™ãå¿œå‹Ÿã™ã‚‹</a>\n        </div>\n      </div>\n    </section>\n  `}(e,l,a,o,d)}}function s(e,t,i,s="default"){const l=[];if(i.pointTitle1&&l.push({title:i.pointTitle1,desc:i.pointDesc1||"",idx:1}),i.pointTitle2&&l.push({title:i.pointTitle2,desc:i.pointDesc2||"",idx:2}),i.pointTitle3&&l.push({title:i.pointTitle3,desc:i.pointDesc3||"",idx:3}),0===l.length&&(t.totalBonus&&l.push({title:"å…¥ç¤¾ç‰¹å…¸",desc:`ç‰¹å…¸ç·é¡${t.totalBonus}ï¼å…¥ç¤¾ç¥ã„é‡‘ã‚„ãã®ä»–ç‰¹å…¸ãŒå……å®Ÿã€‚`,idx:1}),t.monthlySalary&&l.push({title:"é«˜åå…¥",desc:`æœˆåä¾‹${t.monthlySalary}å¯èƒ½ï¼å®‰å®šã—ãŸåå…¥ã‚’å®Ÿç¾ã€‚`,idx:2}),t.benefits&&l.push({title:"å……å®Ÿã®å¾…é‡",desc:"ç¤¾ä¼šä¿é™ºå®Œå‚™ã€å¯®å®Œå‚™ãªã©ç¦åˆ©åšç”ŸãŒå……å®Ÿã€‚",idx:3})),0===l.length)return"";switch(s){case"yellow":return function(e){return`\n    <section class="lp-points lp-points--yellow">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">åƒãé­…åŠ›ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">\n                <span class="lp-point-number">${String(t+1).padStart(2,"0")}.</span>\n                ${n(e.title)}\n              </h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"impact":return function(e){return`\n    <section class="lp-points lp-points--impact">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">WHY JOIN US?</h2>\n        <div class="lp-points-list">\n          ${e.map(e=>`\n            <div class="lp-point-box">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"trust":return function(e){return`\n    <section class="lp-points lp-points--trust">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">åŠ ã‚ã‚‹ä¾¡å€¤</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-item">\n              <span class="lp-point-number">${String(t+1).padStart(2,"0")}</span>\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"athome":return function(e){return`\n    <section class="lp-points lp-points--athome">\n      <div class="lp-section-inner">\n        <div class="lp-points-grid">\n          ${e.map(e=>`\n            <div class="lp-point-card">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);case"local":return function(e){return`\n    <section class="lp-points lp-points--local">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">\n          <span class="lp-section-title-label">OUR VALUES</span>\n          ç§ãŸã¡ãŒå¤§åˆ‡ã«ã—ã¦ã„ã‚‹ã“ã¨\n        </h2>\n        <div class="lp-points-grid">\n          ${e.map(e=>`\n            <div class="lp-point-box">\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l);default:return function(e){return`\n    <section class="lp-points">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ</h2>\n        <div class="lp-points-grid">\n          ${e.map((e,t)=>`\n            <div class="lp-point-card">\n              <div class="lp-point-number">${t+1}</div>\n              <h3 class="lp-point-title lp-editable" data-field="pointTitle${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}ã‚¿ã‚¤ãƒˆãƒ«">${n(e.title)}</h3>\n              <p class="lp-point-desc lp-editable" data-field="pointDesc${e.idx}" data-label="ãƒã‚¤ãƒ³ãƒˆ${e.idx}èª¬æ˜">${n(e.desc)}</p>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}(l)}}const l={hero:{id:"hero",name:"ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ¯",required:!0,maxInstances:1,defaultData:{title:"",subtitle:"",image:""},defaultLayout:{}},points:{id:"points",name:"ãƒã‚¤ãƒ³ãƒˆï¼ˆç‰¹å¾´ï¼‰",icon:"âœ¨",required:!1,maxInstances:null,defaultData:{sectionTitle:"ã“ã®æ±‚äººã®ãƒã‚¤ãƒ³ãƒˆ",points:[]},defaultLayout:{columns:3,style:"cards"}},jobs:{id:"jobs",name:"æ±‚äººä¸€è¦§",icon:"ğŸ’¼",required:!1,maxInstances:1,defaultData:{sectionTitle:"å‹Ÿé›†ä¸­ã®æ±‚äºº"},defaultLayout:{}},details:{id:"details",name:"å‹Ÿé›†è¦é …",icon:"ğŸ“‹",required:!1,maxInstances:1,defaultData:{sectionTitle:"å‹Ÿé›†è¦é …"},defaultLayout:{}},faq:{id:"faq",name:"ã‚ˆãã‚ã‚‹è³ªå•",icon:"â“",required:!1,maxInstances:null,defaultData:{sectionTitle:"ã‚ˆãã‚ã‚‹è³ªå•",items:[]},defaultLayout:{style:"accordion"}},apply:{id:"apply",name:"å¿œå‹Ÿã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ“",required:!0,maxInstances:1,defaultData:{},defaultLayout:{}},custom:{id:"custom",name:"ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ¨",required:!1,maxInstances:null,defaultData:{title:"",content:"",image:"",button:null},defaultLayout:{variant:"text-only"}},gallery:{id:"gallery",name:"ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",icon:"ğŸ–¼ï¸",required:!1,maxInstances:null,defaultData:{sectionTitle:"",images:[]},defaultLayout:{columns:3,style:"grid"}},testimonial:{id:"testimonial",name:"ç¤¾å“¡ã®å£°",icon:"ğŸ’¬",required:!1,maxInstances:null,defaultData:{sectionTitle:"ç¤¾å“¡ã®å£°",testimonials:[]},defaultLayout:{style:"cards"}}},a={"text-only":{name:"ãƒ†ã‚­ã‚¹ãƒˆã®ã¿",icon:"ğŸ“",description:"ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿ã‚’è¡¨ç¤º"},"image-only":{name:"ç”»åƒã®ã¿",icon:"ğŸ–¼ï¸",description:"ç”»åƒã‚’å¤§ããè¡¨ç¤º"},"text-left-image-right":{name:"ãƒ†ã‚­ã‚¹ãƒˆå·¦ãƒ»ç”»åƒå³",icon:"â—§",description:"å·¦ã«ãƒ†ã‚­ã‚¹ãƒˆã€å³ã«ç”»åƒã‚’é…ç½®"},"text-right-image-left":{name:"ãƒ†ã‚­ã‚¹ãƒˆå³ãƒ»ç”»åƒå·¦",icon:"â—¨",description:"å·¦ã«ç”»åƒã€å³ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’é…ç½®"},"centered-with-button":{name:"ä¸­å¤®æƒãˆï¼ˆãƒœã‚¿ãƒ³ä»˜ãï¼‰",icon:"ğŸ”˜",description:"ä¸­å¤®æƒãˆã®ãƒ†ã‚­ã‚¹ãƒˆã¨ãƒœã‚¿ãƒ³"},"full-width-banner":{name:"ãƒ•ãƒ«ãƒ¯ã‚¤ãƒ‰ãƒãƒŠãƒ¼",icon:"â–¬",description:"èƒŒæ™¯ç”»åƒä»˜ãã®å…¨å¹…ãƒãƒŠãƒ¼"}},o=["hero","points","jobs","details","faq","apply"];function d(e){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function c(e,t){const n=l[e];if(!n)return!1;if(null===n.maxInstances)return!0;return t.filter(t=>t.type===e).length<n.maxInstances}function r(e,t){const n=t.find(t=>t.id===e);if(!n)return!1;const i=l[n.type];return!(null==i?void 0:i.required)}const p=[{id:"standard",name:"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰",description:"ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ¨™æº–ãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#667eea",secondary:"#764ba2",accent:"#ff6b35",text:"#333333"}},{id:"modern",name:"ãƒ¢ãƒ€ãƒ³",description:"ã‚°ãƒªãƒ¼ãƒ³ç³»ã®ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#10b981",secondary:"#059669",accent:"#10b981",text:"#1f2937"}},{id:"classic",name:"ã‚¯ãƒ©ã‚·ãƒƒã‚¯",description:"ãƒ–ãƒ©ã‚¦ãƒ³ç³»ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#92400e",secondary:"#78350f",accent:"#b45309",text:"#44403c"}},{id:"minimal",name:"ãƒŸãƒ‹ãƒãƒ«",description:"ãƒ¢ãƒãƒˆãƒ¼ãƒ³ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#374151",secondary:"#1f2937",accent:"#111827",text:"#111827"}},{id:"colorful",name:"ã‚«ãƒ©ãƒ•ãƒ«",description:"ãƒ”ãƒ³ã‚¯ã€œãƒ‘ãƒ¼ãƒ—ãƒ«ã®è¯ã‚„ã‹ãªãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#ec4899",secondary:"#8b5cf6",accent:"#ec4899",text:"#581c87"}},{id:"blue",name:"ãƒ–ãƒ«ãƒ¼",description:"ä¿¡é ¼æ„Ÿã®ã‚ã‚‹ãƒ–ãƒ«ãƒ¼ç³»ãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#3b82f6",secondary:"#1d4ed8",accent:"#0ea5e9",text:"#1e3a8a"}},{id:"orange",name:"ã‚ªãƒ¬ãƒ³ã‚¸",description:"æ´»æ°—ã®ã‚ã‚‹ã‚ªãƒ¬ãƒ³ã‚¸ç³»ãƒ‡ã‚¶ã‚¤ãƒ³",colors:{primary:"#f97316",secondary:"#ea580c",accent:"#fb923c",text:"#9a3412"}}],u=[{id:"default",name:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ",description:"æ¨™æº–çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ",preview:"ä¸­å¤®æƒãˆãƒ»ã‚·ãƒ³ãƒ—ãƒ«",features:["title-center","card-shadow","rounded-md"]},{id:"yellow",name:"ã‚¤ã‚¨ãƒ­ãƒ¼",description:"è¦ªã—ã¿ã‚„ã™ã„æ˜ã‚‹ã„ãƒ‡ã‚¶ã‚¤ãƒ³",preview:"ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»è§’ä¸¸",features:["hero-gradient","rounded-lg","card-border-bottom","friendly"]},{id:"impact",name:"ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ",description:"é»’èƒŒæ™¯ã®å¼·çƒˆãªãƒ‡ã‚¶ã‚¤ãƒ³",preview:"å¤§æ–‡å­—ãƒ»æ–œã‚ãƒœã‚¿ãƒ³",features:["dark-bg","uppercase","skew-btn","neon"]},{id:"trust",name:"ä¿¡é ¼",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ",preview:"å·¦ãƒœãƒ¼ãƒ€ãƒ¼ãƒ»ã‚·ãƒ³ãƒ—ãƒ«",features:["left-border","minimal","corporate"]},{id:"bold",name:"ãƒœãƒ¼ãƒ«ãƒ‰",description:"å¤§ããªæ–‡å­—ã§å°è±¡çš„ã«",preview:"å¤§æ–‡å­—ãƒ»ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆé‡è¦–",features:["title-large","title-center","hero-overlay-dark","text-bold"]},{id:"elegant",name:"ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ",description:"æ´—ç·´ã•ã‚ŒãŸä¸Šå“ãªãƒ‡ã‚¶ã‚¤ãƒ³",preview:"å·¦æƒãˆãƒ»ä¸‹ç·šè£…é£¾",features:["title-left","title-underline","card-border","section-wide-padding"]},{id:"playful",name:"ãƒãƒƒãƒ—",description:"æ˜ã‚‹ãæ¥½ã—ã„é›°å›²æ°—",preview:"è§’ä¸¸ãƒ»ã‚«ãƒ©ãƒ•ãƒ«",features:["title-center","rounded-lg","card-colorful","section-wave"]},{id:"corporate",name:"ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆ",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ",preview:"å·¦æƒãˆãƒ»ç›´ç·šçš„",features:["title-left","title-badge","card-flat","section-striped"]},{id:"magazine",name:"ãƒã‚¬ã‚¸ãƒ³",description:"é›‘èªŒé¢¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ",preview:"å¤§ããªç”»åƒãƒ»é‡ãªã‚Š",features:["title-overlap","hero-full","card-overlap","section-overlap"]},{id:"athome",name:"ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ",description:"ä¸¸ã¿ã®ã‚ã‚‹ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ‡ã‚¶ã‚¤ãƒ³",preview:"è§’ä¸¸ãƒ»å¹ãå‡ºã—é¢¨",features:["rounded-xl","bubble-card","friendly","soft-colors"]},{id:"local",name:"åœ°åŸŸå¯†ç€",description:"å’Œé¢¨ãƒ¢ãƒ€ãƒ³ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³",preview:"å‰µæ¥­â—‹å¹´ãƒ»å®‰å®šæ„Ÿ",features:["japanese-modern","stable","earth-tone","traditional"]}],h=[{url:"https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1200&q=80",label:"å·¥å ´ãƒ»è£½é€ ãƒ©ã‚¤ãƒ³"},{url:"https://images.unsplash.com/photo-1565043666747-69f6646db940?w=1200&q=80",label:"è‡ªå‹•è»Šå·¥å ´"},{url:"https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?w=1200&q=80",label:"æº¶æ¥ä½œæ¥­"},{url:"https://images.unsplash.com/photo-1581092160607-ee22621dd758?w=1200&q=80",label:"ç”£æ¥­ãƒ­ãƒœãƒƒãƒˆ"},{url:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=1200&q=80",label:"å€‰åº«ãƒ»ç‰©æµ"},{url:"https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=1200&q=80",label:"è£½é€ æ¥­ãƒãƒ¼ãƒ "},{url:"https://images.unsplash.com/photo-1567789884554-0b844b597180?w=1200&q=80",label:"é›»å­éƒ¨å“çµ„ç«‹"},{url:"https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=1200&q=80",label:"å»ºè¨­ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©"}];class m{constructor(){t(this,"handleAddPanelOutsideClick",e=>{const t=document.getElementById("lp-add-section-panel");!t||t.contains(e.target)||e.target.closest("#lp-btn-add-section")||this.closeAddSectionPanel()}),t(this,"handleOutsideClick",e=>{const t=document.getElementById("lp-active-editor");!t||t.contains(e.target)||e.target.closest(".lp-editable")||this.closeInlineEditor()}),this.editedData={},this.currentCompanyDomain=null,this.draggedSection=null,this.isActive=!1,this.presetImages=h,this.selectedSection=null,this.sections=[],this.sidebarCollapsed=!1,this.currentJobId=null,this.currentJobInfo=null,this.lpSettings=null,this.currentDesignPattern="standard",this.currentLayoutStyle="default",this.company=null,this.mainJob=null}enable(e,t,n=null,i=null,s=null){this.isActive=!0,this.currentCompanyDomain=t,this.editedData={},this.sections=e.sections||[],this.lpSettings=e,this.currentJobInfo=n,this.company=i,this.mainJob=s,this.currentDesignPattern=e.designPattern||"standard",this.currentLayoutStyle=e.layoutStyle||"default";const l=new URLSearchParams(window.location.search);this.currentJobId=l.get("j")||"",document.body.classList.add("lp-edit-mode"),this.renderToolbar(),this.renderSidebar(),this.setupEditableElements(),this.setupSectionSortable(),this.setupSectionSelection(),this.addSectionEditButtons()}addSectionEditButtons(){const e=document.querySelector(".lp-points");if(e){const t=e.querySelector(".lp-section-quick-edit-btn");t&&t.remove();const n=document.createElement("button");n.type="button",n.className="lp-section-quick-edit-btn",n.innerHTML="âœï¸ ãƒã‚¤ãƒ³ãƒˆã‚’ç·¨é›†ãƒ»è¿½åŠ ",n.addEventListener("click",e=>{e.stopPropagation(),this.openPointsEditor()});(e.querySelector(".lp-section-inner")||e).appendChild(n)}const t=document.querySelector(".lp-faq");if(t){const e=t.querySelector(".lp-section-quick-edit-btn");e&&e.remove();const n=document.createElement("button");n.type="button",n.className="lp-section-quick-edit-btn",n.innerHTML="âœï¸ FAQã‚’ç·¨é›†ãƒ»è¿½åŠ ",n.addEventListener("click",e=>{e.stopPropagation(),this.openFAQEditor()});(t.querySelector(".lp-section-inner")||t).appendChild(n)}}renderSidebar(){const e=document.createElement("div");e.className="lp-editor-sidebar",e.id="lp-editor-sidebar",e.innerHTML=`\n      <div class="lp-sidebar-header">\n        <span class="lp-sidebar-title">ç·¨é›†</span>\n        <button type="button" class="lp-sidebar-toggle" title="ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’é–‰ã˜ã‚‹">\n          <span class="lp-sidebar-toggle-icon">â—€</span>\n        </button>\n      </div>\n      <div class="lp-sidebar-content">\n        \x3c!-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ã‚¶ã‚¤ãƒ³é¸æŠ --\x3e\n        <div class="lp-sidebar-section">\n          <div class="lp-sidebar-section-header">\n            <span class="lp-sidebar-section-title">ğŸ“ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>\n          </div>\n          <div class="lp-layout-selector" id="lp-layout-selector">\n            ${this.renderLayoutStyleOptions()}\n          </div>\n        </div>\n\n        \x3c!-- ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒé¸æŠ --\x3e\n        <div class="lp-sidebar-section">\n          <div class="lp-sidebar-section-header">\n            <span class="lp-sidebar-section-title">ğŸ¨ ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ</span>\n          </div>\n          <div class="lp-design-selector" id="lp-design-selector">\n            ${this.renderDesignPatternOptions()}\n          </div>\n        </div>\n\n        \x3c!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§ --\x3e\n        <div class="lp-sidebar-section">\n          <div class="lp-sidebar-section-header">\n            <span class="lp-sidebar-section-title">ğŸ“„ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</span>\n          </div>\n          <div class="lp-sidebar-sections" id="lp-sidebar-sections">\n            ${this.renderSidebarSectionList()}\n          </div>\n          <button type="button" class="lp-btn-add-section" id="lp-btn-add-section">\n            <span class="lp-btn-add-icon">+</span>\n            ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ \n          </button>\n        </div>\n      </div>\n      <div class="lp-sidebar-footer">\n        <button type="button" class="lp-sidebar-btn lp-sidebar-btn-preview" id="lp-sidebar-preview">\n          ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼\n        </button>\n        <button type="button" class="lp-sidebar-btn lp-sidebar-btn-save" id="lp-sidebar-save">\n          ä¿å­˜\n        </button>\n      </div>\n    `,document.body.appendChild(e),e.querySelector(".lp-sidebar-toggle").addEventListener("click",()=>{this.toggleSidebar()}),e.querySelector("#lp-btn-add-section").addEventListener("click",()=>{this.openAddSectionPanel()}),e.querySelector("#lp-sidebar-save").addEventListener("click",()=>this.saveChanges()),e.querySelector("#lp-sidebar-preview").addEventListener("click",()=>this.previewChanges()),this.setupLayoutStyleEvents(),this.setupDesignPatternEvents(),this.applyLayoutStyle(this.currentLayoutStyle);const t=document.getElementById("lp-content");t&&t.classList.add("lp-content-with-sidebar")}renderLayoutStyleOptions(){return u.map(e=>{const t=this.currentLayoutStyle===e.id;return`\n        <div class="lp-layout-option ${t?"selected":""}"\n             data-layout="${e.id}"\n             title="${e.description}">\n          <div class="lp-layout-option-preview">\n            <span class="lp-layout-preview-text">${e.preview}</span>\n          </div>\n          <span class="lp-layout-option-name">${e.name}</span>\n          ${t?'<span class="lp-layout-option-check">âœ“</span>':""}\n        </div>\n      `}).join("")}setupLayoutStyleEvents(){const e=document.getElementById("lp-layout-selector");e&&e.querySelectorAll(".lp-layout-option").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.layout;this.changeLayoutStyle(t)})})}changeLayoutStyle(e){if(!u.find(t=>t.id===e))return;this.currentLayoutStyle=e,this.editedData.layoutStyle=e;const t=document.getElementById("lp-layout-selector");t&&(t.innerHTML=this.renderLayoutStyleOptions(),this.setupLayoutStyleEvents()),this.applyLayoutStyle(e),this.rerenderSections()}rerenderSections(){if(!this.company||!this.mainJob)return void console.log("[LPEditor] company/mainJob ãŒãªã„ãŸã‚å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ã‚¹ã‚­ãƒƒãƒ—");const e=this.getMergedSettings();this.rerenderHeroSection(e),this.updatePointsDisplay(),console.log("[LPEditor] ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¾ã—ãŸ")}rerenderHeroSection(e){const t=document.querySelector(".lp-hero");if(!t)return;const n=i(this.company,this.mainJob,e,this.currentLayoutStyle),s=document.createElement("div");s.innerHTML=n;const l=s.querySelector(".lp-hero");l&&(t.replaceWith(l),this.setupEditableElements(),this.setupSectionSelection())}getMergedSettings(){const e={...this.lpSettings};return Object.keys(this.editedData).forEach(t=>{void 0!==this.editedData[t]&&(e[t]=this.editedData[t])}),e}applyLayoutStyle(e){const t=document.body,n=document.getElementById("lp-content");u.forEach(e=>{t.classList.remove(`lp-layout-${e.id}`),n&&n.classList.remove(`lp-layout-${e.id}`)}),t.classList.add(`lp-layout-${e}`),n&&n.classList.add(`lp-layout-${e}`)}renderDesignPatternOptions(){return p.map(e=>{const t=this.currentDesignPattern===e.id;return`\n        <div class="lp-design-option ${t?"selected":""}"\n             data-pattern="${e.id}"\n             title="${e.description}">\n          <div class="lp-design-option-colors">\n            <span class="lp-design-color" style="background: ${e.colors.primary}"></span>\n            <span class="lp-design-color" style="background: ${e.colors.secondary}"></span>\n            <span class="lp-design-color" style="background: ${e.colors.accent}"></span>\n          </div>\n          <span class="lp-design-option-name">${e.name}</span>\n          ${t?'<span class="lp-design-option-check">âœ“</span>':""}\n        </div>\n      `}).join("")}setupDesignPatternEvents(){const e=document.getElementById("lp-design-selector");e&&e.querySelectorAll(".lp-design-option").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.pattern;this.changeDesignPattern(t)})})}changeDesignPattern(e){if(!p.find(t=>t.id===e))return;this.currentDesignPattern=e,this.editedData.designPattern=e;const t=document.getElementById("lp-design-selector");t&&(t.innerHTML=this.renderDesignPatternOptions(),this.setupDesignPatternEvents()),this.applyDesignPattern(e)}applyDesignPattern(e){const t=document.body,n=document.getElementById("lp-content");p.forEach(e=>{t.classList.remove(`lp-pattern-${e.id}`),n&&n.classList.remove(`lp-pattern-${e.id}`)}),t.classList.add(`lp-pattern-${e}`),n&&n.classList.add(`lp-pattern-${e}`)}renderSidebarSectionList(){const e=document.getElementById("lp-content");if(!e)return'<p class="lp-sidebar-empty">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“</p>';const t=e.querySelectorAll("section");return 0===t.length?'<p class="lp-sidebar-empty">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã›ã‚“</p>':Array.from(t).map((e,t)=>{const n=e.dataset.sectionId||`section-${t}`,i=this.detectSectionType(e),s=l[i]||{name:"ã‚»ã‚¯ã‚·ãƒ§ãƒ³",icon:"ğŸ“„"};return`\n        <div class="lp-sidebar-section-item ${this.selectedSection===e?"selected":""}"\n             data-section-id="${n}"\n             data-section-type="${i}">\n          <span class="lp-sidebar-section-handle">â‹®â‹®</span>\n          <span class="lp-sidebar-section-icon">${s.icon}</span>\n          <span class="lp-sidebar-section-name">${s.name}</span>\n          <div class="lp-sidebar-section-actions">\n            <button type="button" class="lp-sidebar-section-btn lp-btn-visibility" title="è¡¨ç¤º/éè¡¨ç¤º">\n              ğŸ‘ï¸\n            </button>\n          </div>\n        </div>\n      `}).join("")}updateSidebarList(){const e=document.getElementById("lp-sidebar-sections");e&&(e.innerHTML=this.renderSidebarSectionList(),this.setupSidebarSectionEvents())}setupSidebarSectionEvents(){const e=document.getElementById("lp-sidebar-sections");e&&e.querySelectorAll(".lp-sidebar-section-item").forEach(e=>{e.addEventListener("click",t=>{if(t.target.closest(".lp-sidebar-section-actions"))return;const n=e.dataset.sectionId;this.selectSectionById(n)})})}toggleSidebar(){const e=document.getElementById("lp-editor-sidebar"),t=document.getElementById("lp-content");if(e){this.sidebarCollapsed=!this.sidebarCollapsed,e.classList.toggle("collapsed",this.sidebarCollapsed);const t=e.querySelector(".lp-sidebar-toggle-icon");t&&(t.textContent=this.sidebarCollapsed?"â–¶":"â—€")}t&&t.classList.toggle("lp-content-sidebar-collapsed",this.sidebarCollapsed)}openAddSectionPanel(){this.closeAddSectionPanel();const e=document.createElement("div");e.className="lp-add-section-panel",e.id="lp-add-section-panel",e.innerHTML=`\n      <div class="lp-add-section-header">\n        <span>ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ </span>\n        <button type="button" class="lp-add-section-close">Ã—</button>\n      </div>\n      <div class="lp-add-section-grid">\n        ${Object.entries(l).map(([e,t])=>`\n          <div class="lp-add-section-card" data-type="${e}">\n            <span class="lp-add-section-icon">${t.icon}</span>\n            <span class="lp-add-section-name">${t.name}</span>\n          </div>\n        `).join("")}\n      </div>\n    `,document.body.appendChild(e),e.querySelector(".lp-add-section-close").addEventListener("click",()=>{this.closeAddSectionPanel()}),e.querySelectorAll(".lp-add-section-card").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.type;this.addNewSection(t),this.closeAddSectionPanel()})}),setTimeout(()=>{document.addEventListener("click",this.handleAddPanelOutsideClick)},100)}closeAddSectionPanel(){const e=document.getElementById("lp-add-section-panel");e&&e.remove(),document.removeEventListener("click",this.handleAddPanelOutsideClick)}addNewSection(e){const t=l[e];t&&alert(`ã€Œ${t.name}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`)}setupSectionSelection(){const e=document.getElementById("lp-content");e&&(e.querySelectorAll("section").forEach((e,t)=>{e.dataset.sectionId=e.dataset.sectionId||`section-${t}`,e.addEventListener("click",t=>{t.target.closest(".lp-editable, .lp-editable-image, .lp-section-action-menu, .lp-inline-editor")||this.selectSection(e)})}),this.setupSidebarSectionEvents())}selectSection(e){if(document.querySelectorAll("section.lp-section-selected").forEach(e=>{e.classList.remove("lp-section-selected")}),document.querySelectorAll(".lp-sidebar-section-item.selected").forEach(e=>{e.classList.remove("selected")}),this.removeFloatingMenu(),e===this.selectedSection)return void(this.selectedSection=null);this.selectedSection=e,e.classList.add("lp-section-selected");const t=e.dataset.sectionId,n=document.querySelector(`.lp-sidebar-section-item[data-section-id="${t}"]`);n&&n.classList.add("selected"),this.showFloatingMenu(e),e.scrollIntoView({behavior:"smooth",block:"center"})}selectSectionById(e){const t=document.querySelector(`section[data-section-id="${e}"]`);t&&this.selectSection(t)}showFloatingMenu(e){var t,n,i,s,a;this.removeFloatingMenu();const o=this.detectSectionType(e),d=l[o]||{required:!1},c=document.createElement("div");c.className="lp-section-action-menu",c.id="lp-section-action-menu",c.innerHTML=`\n      <button type="button" class="lp-action-btn lp-action-edit" title="ç·¨é›†">\n        âœï¸\n      </button>\n      <button type="button" class="lp-action-btn lp-action-move-up" title="ä¸Šã«ç§»å‹•">\n        â¬†ï¸\n      </button>\n      <button type="button" class="lp-action-btn lp-action-move-down" title="ä¸‹ã«ç§»å‹•">\n        â¬‡ï¸\n      </button>\n      ${d.required?"":'\n        <button type="button" class="lp-action-btn lp-action-duplicate" title="è¤‡è£½">\n          ğŸ“‹\n        </button>\n        <button type="button" class="lp-action-btn lp-action-delete" title="å‰Šé™¤">\n          ğŸ—‘ï¸\n        </button>\n      '}\n    `,e.appendChild(c),null==(t=c.querySelector(".lp-action-edit"))||t.addEventListener("click",t=>{t.stopPropagation(),this.editSection(e)}),null==(n=c.querySelector(".lp-action-move-up"))||n.addEventListener("click",t=>{t.stopPropagation(),this.moveSectionUp(e)}),null==(i=c.querySelector(".lp-action-move-down"))||i.addEventListener("click",t=>{t.stopPropagation(),this.moveSectionDown(e)}),null==(s=c.querySelector(".lp-action-duplicate"))||s.addEventListener("click",t=>{t.stopPropagation(),this.duplicateSection(e)}),null==(a=c.querySelector(".lp-action-delete"))||a.addEventListener("click",t=>{t.stopPropagation(),this.deleteSection(e)})}removeFloatingMenu(){const e=document.getElementById("lp-section-action-menu");e&&e.remove()}editSection(e){const t=this.detectSectionType(e);"points"!==t?"faq"!==t?alert(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`):this.openFAQEditor():this.openPointsEditor()}openPointsEditor(){var e,t;this.closePointsEditor();const n=[];for(let s=1;s<=6;s++){const i=this.editedData[`pointTitle${s}`]??(null==(e=this.lpSettings)?void 0:e[`pointTitle${s}`])??"",l=this.editedData[`pointDesc${s}`]??(null==(t=this.lpSettings)?void 0:t[`pointDesc${s}`])??"";n.push({idx:s,title:i,desc:l})}const i=document.createElement("div");i.className="lp-points-editor-overlay",i.id="lp-points-editor",i.innerHTML=`\n      <div class="lp-points-editor">\n        <div class="lp-points-editor-header">\n          <h3>ãƒã‚¤ãƒ³ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-points-editor-close">&times;</button>\n        </div>\n        <div class="lp-points-editor-body">\n          <p class="lp-points-editor-hint">æœ€å¤§6ã¤ã®ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã§ãã¾ã™ã€‚ç©ºã®ãƒã‚¤ãƒ³ãƒˆã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>\n          <div class="lp-points-editor-list" id="lp-points-editor-list">\n            ${n.map(e=>this.renderPointEditorItem(e)).join("")}\n          </div>\n        </div>\n        <div class="lp-points-editor-footer">\n          <button type="button" class="lp-points-editor-btn lp-points-editor-btn-secondary" id="lp-points-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-points-editor-btn lp-points-editor-btn-primary" id="lp-points-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(i),i.querySelector(".lp-points-editor-close").addEventListener("click",()=>this.closePointsEditor()),i.querySelector("#lp-points-editor-cancel").addEventListener("click",()=>this.closePointsEditor()),i.querySelector("#lp-points-editor-apply").addEventListener("click",()=>this.applyPointsChanges()),i.addEventListener("click",e=>{e.target===i&&this.closePointsEditor()}),i.querySelectorAll(".lp-point-editor-clear").forEach(e=>{e.addEventListener("click",t=>{const n=e.dataset.idx,s=i.querySelector(`.lp-point-editor-item[data-idx="${n}"]`);s&&(s.querySelector(".lp-point-editor-title").value="",s.querySelector(".lp-point-editor-desc").value="")})})}renderPointEditorItem(e){return`\n      <div class="lp-point-editor-item ${e.title||e.desc?"has-content":""}" data-idx="${e.idx}">\n        <div class="lp-point-editor-header">\n          <span class="lp-point-editor-number">ãƒã‚¤ãƒ³ãƒˆ ${e.idx}</span>\n          <button type="button" class="lp-point-editor-clear" data-idx="${e.idx}" title="ã‚¯ãƒªã‚¢">\n            <span>ã‚¯ãƒªã‚¢</span>\n          </button>\n        </div>\n        <div class="lp-point-editor-fields">\n          <div class="lp-point-editor-field">\n            <label>ã‚¿ã‚¤ãƒˆãƒ«</label>\n            <input type="text" class="lp-point-editor-title" value="${n(e.title)}" placeholder="ä¾‹: å…¥ç¤¾ç‰¹å…¸å……å®Ÿ">\n          </div>\n          <div class="lp-point-editor-field">\n            <label>èª¬æ˜</label>\n            <textarea class="lp-point-editor-desc" rows="2" placeholder="ä¾‹: ç‰¹å…¸ç·é¡50ä¸‡å††ï¼å…¥ç¤¾ç¥ã„é‡‘ã‚„ãã®ä»–ç‰¹å…¸ãŒå……å®Ÿã€‚">${n(e.desc)}</textarea>\n          </div>\n        </div>\n      </div>\n    `}closePointsEditor(){const e=document.getElementById("lp-points-editor");e&&e.remove()}openFAQEditor(){var e;this.closeFAQEditor();const t=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",n=this.parseFAQString(t);0===n.length&&n.push({question:"",answer:""});const i=document.createElement("div");i.className="lp-faq-editor-overlay",i.id="lp-faq-editor",i.innerHTML=`\n      <div class="lp-faq-editor">\n        <div class="lp-faq-editor-header">\n          <h3>FAQã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†</h3>\n          <button type="button" class="lp-faq-editor-close">&times;</button>\n        </div>\n        <div class="lp-faq-editor-body">\n          <p class="lp-faq-editor-hint">ã‚ˆãã‚ã‚‹è³ªå•ã¨å›ç­”ã‚’è¿½åŠ ãƒ»ç·¨é›†ã§ãã¾ã™ã€‚ç©ºã®é …ç›®ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚</p>\n          <div class="lp-faq-editor-list" id="lp-faq-editor-list">\n            ${n.map((e,t)=>this.renderFAQEditorItem(e,t)).join("")}\n          </div>\n          <button type="button" class="lp-faq-editor-add-btn" id="lp-faq-editor-add">\n            + è³ªå•ã‚’è¿½åŠ \n          </button>\n        </div>\n        <div class="lp-faq-editor-footer">\n          <button type="button" class="lp-faq-editor-btn lp-faq-editor-btn-secondary" id="lp-faq-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n          <button type="button" class="lp-faq-editor-btn lp-faq-editor-btn-primary" id="lp-faq-editor-apply">é©ç”¨</button>\n        </div>\n      </div>\n    `,document.body.appendChild(i),i.querySelector(".lp-faq-editor-close").addEventListener("click",()=>this.closeFAQEditor()),i.querySelector("#lp-faq-editor-cancel").addEventListener("click",()=>this.closeFAQEditor()),i.querySelector("#lp-faq-editor-apply").addEventListener("click",()=>this.applyFAQChanges()),i.querySelector("#lp-faq-editor-add").addEventListener("click",()=>this.addFAQItem()),i.addEventListener("click",e=>{e.target===i&&this.closeFAQEditor()}),this.setupFAQDeleteButtons()}renderFAQEditorItem(e,t){return`\n      <div class="lp-faq-editor-item ${e.question||e.answer?"has-content":""}" data-idx="${t}">\n        <div class="lp-faq-editor-item-header">\n          <span class="lp-faq-editor-number">Q${t+1}</span>\n          <button type="button" class="lp-faq-editor-delete" data-idx="${t}" title="å‰Šé™¤">\n            ğŸ—‘ï¸\n          </button>\n        </div>\n        <div class="lp-faq-editor-fields">\n          <div class="lp-faq-editor-field">\n            <label>è³ªå•</label>\n            <input type="text" class="lp-faq-editor-question" value="${n(e.question)}" placeholder="ä¾‹: æœªçµŒé¨“ã§ã‚‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿ">\n          </div>\n          <div class="lp-faq-editor-field">\n            <label>å›ç­”</label>\n            <textarea class="lp-faq-editor-answer" rows="3" placeholder="ä¾‹: ã¯ã„ã€æœªçµŒé¨“ã®æ–¹ã‚‚å¤§æ­“è¿ã§ã™ã€‚ç ”ä¿®åˆ¶åº¦ãŒå……å®Ÿã—ã¦ã„ã‚‹ã®ã§å®‰å¿ƒã—ã¦ã‚¹ã‚¿ãƒ¼ãƒˆã§ãã¾ã™ã€‚">${n(e.answer)}</textarea>\n          </div>\n        </div>\n      </div>\n    `}setupFAQDeleteButtons(){const e=document.getElementById("lp-faq-editor");e&&e.querySelectorAll(".lp-faq-editor-delete").forEach(e=>{e.addEventListener("click",t=>{const n=parseInt(e.dataset.idx);this.deleteFAQItem(n)})})}addFAQItem(){const e=document.getElementById("lp-faq-editor-list");if(!e)return;const t=e.querySelectorAll(".lp-faq-editor-item").length,n=document.createElement("div");n.innerHTML=this.renderFAQEditorItem({question:"",answer:""},t);const i=n.firstElementChild;e.appendChild(i),this.setupFAQDeleteButtons();const s=i.querySelector(".lp-faq-editor-question");s&&s.focus()}deleteFAQItem(e){const t=document.getElementById("lp-faq-editor-list");if(!t)return;const n=t.querySelectorAll(".lp-faq-editor-item");if(n.length<=1){const e=n[0];return e.querySelector(".lp-faq-editor-question").value="",void(e.querySelector(".lp-faq-editor-answer").value="")}n[e].remove(),this.renumberFAQItems()}renumberFAQItems(){const e=document.getElementById("lp-faq-editor-list");e&&(e.querySelectorAll(".lp-faq-editor-item").forEach((e,t)=>{e.dataset.idx=t,e.querySelector(".lp-faq-editor-number").textContent=`Q${t+1}`,e.querySelector(".lp-faq-editor-delete").dataset.idx=t}),this.setupFAQDeleteButtons())}closeFAQEditor(){const e=document.getElementById("lp-faq-editor");e&&e.remove()}applyFAQChanges(){const e=document.getElementById("lp-faq-editor");if(!e)return;const t=e.querySelectorAll(".lp-faq-editor-item"),n=[];t.forEach(e=>{const t=e.querySelector(".lp-faq-editor-question").value.trim(),i=e.querySelector(".lp-faq-editor-answer").value.trim();t&&i&&n.push({question:t,answer:i})});const i=n.map(e=>`Q:${e.question}|A:${e.answer}`).join("\n");this.editedData.faq=i,console.log("[LPEditor] FAQã‚’æ›´æ–°:",i),this.updateFAQDisplay(),this.closeFAQEditor(),this.showSuccessMessage("FAQã‚’æ›´æ–°ã—ã¾ã—ãŸ")}parseFAQString(e){if(!e)return[];const t=[],n=e.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(e=>e.trim());for(const i of n){const e=i.match(/Q[:ï¼š](.+?)\|A[:ï¼š](.+)/i);e&&t.push({question:e[1].trim(),answer:e[2].trim()})}return t}updateFAQDisplay(){var e;const t=document.querySelector(".lp-faq");if(!t)return;const i=this.editedData.faq??(null==(e=this.lpSettings)?void 0:e.faq)??"",s=this.parseFAQString(i),l=t.querySelector(".lp-faq-chat-container")||t.querySelector(".lp-faq-list");l&&(0!==s.length?(l.innerHTML=s.map((e,t)=>`\n      <div class="lp-faq-chat-pair">\n        \x3c!-- è³ªå•ï¼ˆå·¦å´ãƒ»ã‚µãƒãƒ¼ãƒˆï¼‰ --\x3e\n        <div class="lp-faq-chat-row lp-faq-chat-question">\n          <div class="lp-faq-chat-avatar lp-faq-chat-avatar-support">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>\n          </div>\n          <div class="lp-faq-chat-bubble lp-faq-chat-bubble-support">\n            <span class="lp-faq-chat-text">${n(e.question)}</span>\n          </div>\n        </div>\n        \x3c!-- å›ç­”ï¼ˆå³å´ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ --\x3e\n        <div class="lp-faq-chat-row lp-faq-chat-answer">\n          <div class="lp-faq-chat-bubble lp-faq-chat-bubble-user">\n            <span class="lp-faq-chat-text">${n(e.answer)}</span>\n          </div>\n          <div class="lp-faq-chat-avatar lp-faq-chat-avatar-user">\n            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\n          </div>\n        </div>\n      </div>\n    `).join(""),this.addSectionEditButtons()):l.innerHTML='<p style="text-align: center; color: #666;">FAQãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>')}applyPointsChanges(){const e=document.getElementById("lp-points-editor");if(!e)return;e.querySelectorAll(".lp-point-editor-item").forEach(e=>{const t=e.dataset.idx,n=e.querySelector(".lp-point-editor-title").value.trim(),i=e.querySelector(".lp-point-editor-desc").value.trim();this.editedData[`pointTitle${t}`]=n,this.editedData[`pointDesc${t}`]=i}),console.log("[LPEditor] ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°:",this.editedData),this.updatePointsDisplay(),this.closePointsEditor(),this.showSuccessMessage("ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ")}updatePointsDisplay(){const e=document.querySelector(".lp-points");if(!e||!this.company||!this.mainJob){for(let e=1;e<=6;e++){const t=this.editedData[`pointTitle${e}`]??"",n=this.editedData[`pointDesc${e}`]??"",i=document.querySelector(`[data-field="pointTitle${e}"]`),s=document.querySelector(`[data-field="pointDesc${e}"]`);i&&(i.textContent=t||`ãƒã‚¤ãƒ³ãƒˆ${e}ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¿½åŠ `,i.classList.toggle("lp-placeholder",!t)),s&&(s.textContent=n||`ãƒã‚¤ãƒ³ãƒˆ${e}èª¬æ˜ã‚’è¿½åŠ `,s.classList.toggle("lp-placeholder",!n))}return}const t=this.getMergedSettings(),n=s(this.company,this.mainJob,t,this.currentLayoutStyle),i=document.createElement("div");i.innerHTML=n;const l=i.querySelector(".lp-points");l&&(e.replaceWith(l),this.setupEditableElements(),this.setupSectionSelection(),this.addSectionEditButtons())}moveSectionUp(e){const t=e.previousElementSibling;t&&"SECTION"===t.tagName&&(e.parentNode.insertBefore(e,t),this.saveSectionOrder(),this.updateSidebarList())}moveSectionDown(e){const t=e.nextElementSibling;t&&"SECTION"===t.tagName&&(e.parentNode.insertBefore(t,e),this.saveSectionOrder(),this.updateSidebarList())}duplicateSection(e){const t=this.detectSectionType(e);alert(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¤‡è£½ã™ã‚‹ã«ã¯ã€ç®¡ç†ç”»é¢ã®LPè¨­å®šã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`)}deleteSection(e){const t=this.detectSectionType(e);confirm(`ã€Œ${this.getSectionLabel(t)}ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ\n\nå®Ÿéš›ã®å‰Šé™¤ã¯ç®¡ç†ç”»é¢ã‹ã‚‰è¡Œã£ã¦ãã ã•ã„ã€‚`)&&(e.style.display="none",this.removeFloatingMenu(),this.selectedSection=null,this.updateSidebarList())}renderToolbar(){const e=document.createElement("div");e.className="lp-edit-toolbar",e.innerHTML='\n      <div class="lp-edit-toolbar-inner">\n        <span class="lp-edit-toolbar-title">ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</span>\n        <div class="lp-edit-toolbar-actions">\n          <button type="button" class="lp-edit-btn-preview" id="btn-preview-changes">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>\n          <button type="button" class="lp-edit-btn-save" id="btn-save-changes">ä¿å­˜</button>\n          <button type="button" class="lp-edit-btn-cancel" id="btn-cancel-edit">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        </div>\n      </div>\n    ',document.body.insertBefore(e,document.body.firstChild),e.querySelector("#btn-save-changes").addEventListener("click",()=>this.saveChanges()),e.querySelector("#btn-cancel-edit").addEventListener("click",()=>this.cancelEdit()),e.querySelector("#btn-preview-changes").addEventListener("click",()=>this.previewChanges())}setupEditableElements(){document.querySelectorAll(".lp-editable").forEach(e=>{const t=e.dataset.field,n=e.dataset.label||t;e.addEventListener("mouseenter",()=>this.showEditLabel(e,n)),e.addEventListener("mouseleave",()=>this.hideEditLabel()),e.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.startTextEditing(e,t,n)})}),document.querySelectorAll(".lp-editable-image").forEach(e=>{const t=e.dataset.field,n=e.dataset.label||t;e.addEventListener("mouseenter",()=>this.showEditLabel(e,n)),e.addEventListener("mouseleave",()=>this.hideEditLabel()),e.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),this.startImageEditing(e,t,n)})})}setupSectionSortable(){const e=document.getElementById("lp-content");if(!e)return;const t=e.querySelectorAll("section");0!==t.length&&t.forEach(t=>{const n=this.detectSectionType(t);t.dataset.section=n,t.classList.add("lp-sortable-section");const i=document.createElement("div");i.className="lp-section-drag-handle",i.innerHTML=`\n        <span class="lp-section-label">${this.getSectionLabel(n)}</span>\n        <span class="lp-section-drag-icon">â‹®â‹®</span>\n      `,t.insertBefore(i,t.firstChild),t.setAttribute("draggable","true"),t.addEventListener("dragstart",e=>{this.draggedSection=t,t.classList.add("lp-section-dragging"),e.dataTransfer.effectAllowed="move",e.dataTransfer.setDragImage(t,50,30)}),t.addEventListener("dragend",()=>{t.classList.remove("lp-section-dragging"),this.draggedSection=null,this.saveSectionOrder()}),t.addEventListener("dragover",n=>{if(n.preventDefault(),n.dataTransfer.dropEffect="move",this.draggedSection&&this.draggedSection!==t){const n=[...e.querySelectorAll("section")];n.indexOf(this.draggedSection)<n.indexOf(t)?t.parentNode.insertBefore(this.draggedSection,t.nextSibling):t.parentNode.insertBefore(this.draggedSection,t)}})})}detectSectionType(e){return e.classList.contains("lp-hero")?"hero":e.classList.contains("lp-points")?"points":e.classList.contains("lp-jobs")?"jobs":e.classList.contains("lp-details")?"details":e.classList.contains("lp-faq")?"faq":e.classList.contains("lp-apply")?"apply":"unknown"}getSectionLabel(e){return{hero:"ãƒ’ãƒ¼ãƒ­ãƒ¼",points:"ãƒã‚¤ãƒ³ãƒˆ",jobs:"æ±‚äººä¸€è¦§",details:"å‹Ÿé›†è¦é …",faq:"FAQ",apply:"å¿œå‹Ÿ"}[e]||"ã‚»ã‚¯ã‚·ãƒ§ãƒ³"}saveSectionOrder(){const e=document.getElementById("lp-content");if(!e)return;const t=e.querySelectorAll("section"),n=Array.from(t).map(e=>e.dataset.section);this.editedData.sectionOrder=n.join(",")}showEditLabel(e,t){this.hideEditLabel();const n=document.createElement("div");n.className="lp-edit-label",n.textContent=`${t}ã‚’ç·¨é›†`,n.id="lp-edit-label-tooltip";const i=e.getBoundingClientRect();n.style.position="fixed",n.style.top=i.top-30+"px",n.style.left=`${i.left}px`,document.body.appendChild(n)}hideEditLabel(){const e=document.getElementById("lp-edit-label-tooltip");e&&e.remove()}startTextEditing(e,t,i){this.closeInlineEditor();const s=this.editedData[t]||e.textContent.trim(),l=document.createElement("div");l.className="lp-inline-editor",l.id="lp-active-editor",l.innerHTML=`\n      <label class="lp-inline-editor-label">${n(i)}</label>\n      <textarea class="lp-inline-editor-textarea" rows="3">${n(s)}</textarea>\n      <div class="lp-inline-editor-actions">\n        <button type="button" class="lp-inline-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        <button type="button" class="lp-inline-editor-apply">é©ç”¨</button>\n      </div>\n    `;const a=e.getBoundingClientRect();l.style.position="fixed",l.style.top=`${Math.min(a.bottom+10,window.innerHeight-250)}px`,l.style.left=`${Math.max(10,Math.min(a.left,window.innerWidth-320))}px`,document.body.appendChild(l);const o=l.querySelector("textarea");o.focus(),o.select();const d=()=>this.closeInlineEditor();l.querySelector(".lp-inline-editor-cancel").addEventListener("click",d),l.querySelector(".lp-inline-editor-apply").addEventListener("click",()=>{const n=o.value.trim();this.editedData[t]=n,e.textContent=n||`${i}ã‚’è¿½åŠ `,e.classList.toggle("lp-placeholder",!n),d()}),setTimeout(()=>{document.addEventListener("click",this.handleOutsideClick)},100)}closeInlineEditor(){const e=document.getElementById("lp-active-editor");e&&e.remove(),document.removeEventListener("click",this.handleOutsideClick)}startImageEditing(e,t,i){this.closeInlineEditor();const s=this.editedData[t]||"",l=this.presetImages.map((e,t)=>`\n      <div class="lp-preset-image" data-url="${n(e.url)}" title="${n(e.label)}">\n        <img src="${n(e.url)}" alt="${n(e.label)}" loading="lazy">\n        <span class="lp-preset-label">${n(e.label)}</span>\n      </div>\n    `).join(""),a=document.createElement("div");a.className="lp-inline-editor lp-image-editor",a.id="lp-active-editor",a.innerHTML=`\n      <label class="lp-inline-editor-label">${n(i)}</label>\n\n      <div class="lp-image-tabs">\n        <button type="button" class="lp-image-tab active" data-tab="preset">ãƒ—ãƒªã‚»ãƒƒãƒˆ</button>\n        <button type="button" class="lp-image-tab" data-tab="url">URLå…¥åŠ›</button>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="preset">\n        <div class="lp-preset-grid">\n          ${l}\n        </div>\n      </div>\n\n      <div class="lp-image-tab-content" data-content="url" style="display: none;">\n        <div class="lp-image-url-input">\n          <input type="url" class="lp-inline-editor-input" placeholder="ç”»åƒURLã‚’å…¥åŠ›" value="${n(s)}">\n        </div>\n      </div>\n\n      <div class="lp-image-preview">\n        ${s?`<img src="${n(s)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"}\n      </div>\n\n      <div class="lp-inline-editor-actions">\n        <button type="button" class="lp-inline-editor-clear">ã‚¯ãƒªã‚¢</button>\n        <button type="button" class="lp-inline-editor-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>\n        <button type="button" class="lp-inline-editor-apply">é©ç”¨</button>\n      </div>\n    `,a.style.position="fixed",a.style.top="50%",a.style.left="50%",a.style.transform="translate(-50%, -50%)",a.style.maxWidth="500px",a.style.width="90%",a.style.maxHeight="80vh",a.style.overflowY="auto",document.body.appendChild(a);const o=a.querySelector("input"),d=a.querySelector(".lp-image-preview"),c=a.querySelectorAll(".lp-image-tab"),r=a.querySelectorAll(".lp-image-tab-content");let p=s;c.forEach(e=>{e.addEventListener("click",()=>{c.forEach(e=>e.classList.remove("active")),e.classList.add("active");const t=e.dataset.tab;r.forEach(e=>{e.style.display=e.dataset.content===t?"block":"none"})})}),a.querySelectorAll(".lp-preset-image").forEach(e=>{e.addEventListener("click",()=>{a.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),e.classList.add("selected"),p=e.dataset.url,o.value=p,d.innerHTML=`<img src="${n(p)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`})}),o.addEventListener("input",()=>{p=o.value.trim(),a.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),d.innerHTML=p?`<img src="${n(p)}" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:"<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"});const u=()=>this.closeInlineEditor();a.querySelector(".lp-inline-editor-clear").addEventListener("click",()=>{p="",o.value="",a.querySelectorAll(".lp-preset-image").forEach(e=>e.classList.remove("selected")),d.innerHTML="<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã—</p>"}),a.querySelector(".lp-inline-editor-cancel").addEventListener("click",u),a.querySelector(".lp-inline-editor-apply").addEventListener("click",()=>{this.editedData[t]=p,console.log(`[LPEditor] ç”»åƒã‚’è¨­å®š: ${t} = ${p}`),e.style.backgroundImage=p?`url('${p}')`:"",u()}),setTimeout(()=>{document.addEventListener("click",this.handleOutsideClick)},100)}async saveChanges(){this.showSaveModal()}showSaveModal(){const e=document.getElementById("lp-save-modal");e&&e.remove();const t=Object.keys(this.editedData).length>0,n=t?`<div class="lp-save-modal-changes">\n          <p class="lp-save-modal-hint">ç·¨é›†ã—ãŸå†…å®¹ï¼š</p>\n          <ul class="lp-save-modal-list">\n            ${Object.entries(this.editedData).map(([e,t])=>`<li><strong>${e}:</strong> ${"string"==typeof t&&t.length>50?t.substring(0,50)+"...":t}</li>`).join("")}\n          </ul>\n        </div>`:'<p class="lp-save-modal-empty">å¤‰æ›´ã¯ã‚ã‚Šã¾ã›ã‚“</p>',i=document.createElement("div");i.className="lp-save-modal-overlay",i.id="lp-save-modal",i.innerHTML=`\n      <div class="lp-save-modal">\n        <div class="lp-save-modal-header">\n          <h3>å¤‰æ›´ã‚’ä¿å­˜</h3>\n          <button type="button" class="lp-save-modal-close">&times;</button>\n        </div>\n        <div class="lp-save-modal-body">\n          ${n}\n          <p class="lp-save-modal-message" style="margin-top: 16px; font-size: 13px; color: #666;">\n            â€» ç›´æ¥ä¿å­˜ã™ã‚‹ã¨ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«å¤‰æ›´ãŒåæ˜ ã•ã‚Œã¾ã™\n          </p>\n        </div>\n        <div class="lp-save-modal-footer">\n          <button type="button" class="lp-save-modal-btn lp-save-modal-btn-secondary" id="lp-save-modal-close">é–‰ã˜ã‚‹</button>\n          <a href="/admin.html#lp-settings" class="lp-save-modal-btn lp-save-modal-btn-secondary" target="_blank" style="text-decoration: none;">\n            ç®¡ç†ç”»é¢ã‚’é–‹ã\n          </a>\n          <button type="button" class="lp-save-modal-btn lp-save-modal-btn-primary" id="lp-save-modal-save" ${t?"":"disabled"}>\n            ç›´æ¥ä¿å­˜\n          </button>\n        </div>\n      </div>\n    `,document.body.appendChild(i),i.querySelector(".lp-save-modal-close").addEventListener("click",()=>i.remove()),i.querySelector("#lp-save-modal-close").addEventListener("click",()=>i.remove()),i.querySelector("#lp-save-modal-save").addEventListener("click",async()=>{await this.saveToSpreadsheet(i)}),i.addEventListener("click",e=>{e.target===i&&i.remove()})}async saveToSpreadsheet(e){if(!this.currentJobId)return void alert("æ±‚äººIDãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");const t=e.querySelector("#lp-save-modal-save");t&&(t.disabled=!0,t.textContent="ä¿å­˜ä¸­...");try{const t=this.buildSaveSettings();console.log("[LPEditor] ä¿å­˜ã™ã‚‹è¨­å®š:",t),console.log("[LPEditor] ç·¨é›†ãƒ‡ãƒ¼ã‚¿:",this.editedData);const i=btoa(unescape(encodeURIComponent(JSON.stringify({action:"saveLPSettings",settings:t})))),s=`https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec?action=post&data=${encodeURIComponent(i)}`,l=await fetch(s,{method:"GET",redirect:"follow"}),a=await l.text();let o;try{o=JSON.parse(a)}catch(n){throw new Error(`GASã‹ã‚‰ã®å¿œç­”ãŒä¸æ­£ã§ã™: ${a.substring(0,200)}`)}if(!o.success)throw new Error(o.error||"ä¸æ˜ãªã‚¨ãƒ©ãƒ¼");e.remove(),this.showSuccessMessage("ä¿å­˜ã—ã¾ã—ãŸï¼å¤‰æ›´ãŒã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«åæ˜ ã•ã‚Œã¾ã—ãŸã€‚"),this.editedData={}}catch(i){console.error("ä¿å­˜ã‚¨ãƒ©ãƒ¼:",i),t&&(t.disabled=!1,t.textContent="ç›´æ¥ä¿å­˜");confirm(`ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nã‚¨ãƒ©ãƒ¼: ${i.message}\n\nãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ`)&&(this.saveToLocalStorage(),e.remove())}}buildSaveSettings(){var e,t;const n=this.currentJobId.split("_"),i=n.length>1?n[0]:this.currentCompanyDomain;n.length>1?n.slice(1).join("_"):this.currentJobId;const s=this.lpSettings||{},l={jobId:this.currentJobId,companyDomain:i,company:(null==(e=this.currentJobInfo)?void 0:e.company)||s.company||"",jobTitle:(null==(t=this.currentJobInfo)?void 0:t.title)||s.jobTitle||"",designPattern:this.currentDesignPattern||s.designPattern||"standard",layoutStyle:this.currentLayoutStyle||s.layoutStyle||"default",heroTitle:this.editedData.heroTitle??s.heroTitle??"",heroSubtitle:this.editedData.heroSubtitle??s.heroSubtitle??"",heroImage:this.editedData.heroImage??s.heroImage??"",ctaText:this.editedData.ctaText??s.ctaText??"ä»Šã™ãå¿œå‹Ÿã™ã‚‹",faq:this.editedData.faq??s.faq??"",sectionOrder:this.editedData.sectionOrder??s.sectionOrder??"",sectionVisibility:s.sectionVisibility??""};for(let a=1;a<=6;a++)l[`pointTitle${a}`]=this.editedData[`pointTitle${a}`]??s[`pointTitle${a}`]??"",l[`pointDesc${a}`]=this.editedData[`pointDesc${a}`]??s[`pointDesc${a}`]??"";return l.tiktokPixelId=s.tiktokPixelId??"",l.googleAdsId=s.googleAdsId??"",l.googleAdsLabel=s.googleAdsLabel??"",l.ogpTitle=s.ogpTitle??"",l.ogpDescription=s.ogpDescription??"",l.ogpImage=s.ogpImage??"",s.lpContent&&(l.lpContent="string"==typeof s.lpContent?s.lpContent:JSON.stringify(s.lpContent)),l}saveToLocalStorage(){const e=this.buildSaveSettings(),t=`lp_settings_${this.currentJobId}`;localStorage.setItem(t,JSON.stringify(e)),this.showSuccessMessage("ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã—ã¾ã—ãŸã€‚æ¬¡å›ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«åæ˜ ã•ã‚Œã¾ã™ã€‚"),this.editedData={}}showSuccessMessage(e){const t=document.createElement("div");t.className="lp-save-toast",t.innerHTML=`\n      <span class="lp-save-toast-icon">âœ“</span>\n      <span class="lp-save-toast-message">${n(e)}</span>\n    `,document.body.appendChild(t),setTimeout(()=>{t.classList.add("lp-save-toast-hide"),setTimeout(()=>t.remove(),300)},3e3)}cancelEdit(){if(confirm("ç·¨é›†å†…å®¹ã‚’ç ´æ£„ã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ")){const e=new URL(window.location.href);e.searchParams.delete("edit"),window.location.href=e.toString()}}previewChanges(){const e={lpSettings:this.getMergedSettings(),timestamp:Date.now()},t=`lp_preview_${this.currentJobId}`;sessionStorage.setItem(t,JSON.stringify(e)),console.log("[LPEditor] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜:",e);const n=new URL(window.location.href);n.searchParams.delete("edit"),n.searchParams.set("preview","1"),window.open(n.toString(),"_blank")}}export{a as C,o as D,m as L,l as S,i as a,u as b,c,r as d,d as g,s as r};
