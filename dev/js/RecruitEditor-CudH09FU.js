import{escapeHtml as e,showToast as t}from"./utils-BB91om2o.js";import{s as n}from"./modal-gG-182nw.js";import{s as i,d as s}from"./image-uploader-gAKnoYUY.js";import{m as o}from"./core-BCtgUYfq.js";import{s as a}from"./api-Dk4Kctww.js";const l=[{id:"standard",name:"ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰",description:"ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸæ¨™æº–ãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"modern",name:"ãƒ¢ãƒ€ãƒ³",description:"ã‚°ãƒªãƒ¼ãƒ³ç³»ã®ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"classic",name:"ã‚¯ãƒ©ã‚·ãƒƒã‚¯",description:"ãƒ–ãƒ©ã‚¦ãƒ³ç³»ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"minimal",name:"ãƒŸãƒ‹ãƒãƒ«",description:"ãƒ¢ãƒãƒˆãƒ¼ãƒ³ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"colorful",name:"ã‚«ãƒ©ãƒ•ãƒ«",description:"ãƒ”ãƒ³ã‚¯ã€œãƒ‘ãƒ¼ãƒ—ãƒ«ã®è¯ã‚„ã‹ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"blue",name:"ãƒ–ãƒ«ãƒ¼",description:"ä¿¡é ¼æ„Ÿã®ã‚ã‚‹ãƒ–ãƒ«ãƒ¼ç³»ãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"orange",name:"ã‚ªãƒ¬ãƒ³ã‚¸",description:"æ´»æ°—ã®ã‚ã‚‹ã‚ªãƒ¬ãƒ³ã‚¸ç³»ãƒ‡ã‚¶ã‚¤ãƒ³"}],d=[{id:"default",name:"ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ",description:"æ¨™æº–çš„ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ"},{id:"yellow",name:"ã‚¤ã‚¨ãƒ­ãƒ¼",description:"è¦ªã—ã¿ã‚„ã™ã„æ˜ã‚‹ã„ãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"impact",name:"ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆ",description:"é»’èƒŒæ™¯ã®å¼·çƒˆãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"trust",name:"ä¿¡é ¼",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ"},{id:"bold",name:"ãƒœãƒ¼ãƒ«ãƒ‰",description:"å¤§ããªæ–‡å­—ã§å°è±¡çš„ã«"},{id:"elegant",name:"ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆ",description:"æ´—ç·´ã•ã‚ŒãŸä¸Šå“ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"playful",name:"ãƒãƒƒãƒ—",description:"æ˜ã‚‹ãæ¥½ã—ã„é›°å›²æ°—"},{id:"corporate",name:"ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆ",description:"ãƒ“ã‚¸ãƒã‚¹å‘ã‘ã®ä¿¡é ¼æ„Ÿ"},{id:"athome",name:"ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ ",description:"ä¸¸ã¿ã®ã‚ã‚‹ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒ‡ã‚¶ã‚¤ãƒ³"},{id:"local",name:"åœ°åŸŸå¯†ç€",description:"å’Œé¢¨ãƒ¢ãƒ€ãƒ³ã®è½ã¡ç€ã„ãŸãƒ‡ã‚¶ã‚¤ãƒ³"}];class r{constructor(){this.settings={},this.companyDomain=null,this.company=null,this.isEnabled=!1,this.hasChanges=!1,this.onSettingsChange=null,this.previewDebounceTimer=null}debouncedPreview(){this.previewDebounceTimer&&clearTimeout(this.previewDebounceTimer),this.previewDebounceTimer=setTimeout(()=>{this.applyPreview()},300)}async enable(e,t,n,i){this.companyDomain=e,this.company=t,this.settings=n||{},this.onSettingsChange=i,this.isEnabled=!0,this.createEditorPanel(),this.populateForm(),this.setupEventListeners(),document.body.classList.add("recruit-edit-mode"),console.log("[RecruitEditor] ç·¨é›†ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–")}createEditorPanel(){const t=document.getElementById("recruit-editor-panel");t&&t.remove();const n=document.createElement("div");n.id="recruit-editor-panel",n.className="recruit-editor-panel",n.innerHTML=`\n      <div class="recruit-editor-header">\n        <h2 class="recruit-editor-title">æ¡ç”¨ãƒšãƒ¼ã‚¸ç·¨é›†</h2>\n        <div class="recruit-editor-actions">\n          <div class="preview-mode-toggle" id="preview-mode-toggle">\n            <button type="button" class="btn-preview-mode active" data-mode="pc" title="PCè¡¨ç¤º">\n              ğŸ–¥ï¸\n            </button>\n            <button type="button" class="btn-preview-mode" data-mode="mobile" title="ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º">\n              ğŸ“±\n            </button>\n          </div>\n          <button type="button" class="btn-close-editor" id="btn-close-editor" title="é–‰ã˜ã‚‹">\n            âœ•\n          </button>\n        </div>\n      </div>\n\n      <div class="recruit-editor-body">\n        \x3c!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ --\x3e\n        <div class="recruit-editor-tabs">\n          <button type="button" class="recruit-editor-tab active" data-tab="settings">è¨­å®š</button>\n          <button type="button" class="recruit-editor-tab" data-tab="design">ãƒ‡ã‚¶ã‚¤ãƒ³</button>\n          <button type="button" class="recruit-editor-tab" data-tab="content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</button>\n          <button type="button" class="recruit-editor-tab" data-tab="header">ãƒ˜ãƒƒãƒ€ãƒ¼</button>\n          <button type="button" class="recruit-editor-tab" data-tab="sns">SNS</button>\n          <button type="button" class="recruit-editor-tab" data-tab="seo">SEO</button>\n          <button type="button" class="recruit-editor-tab" data-tab="embed">åŸ‹è¾¼</button>\n        </div>\n\n        \x3c!-- è¨­å®šã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content active" data-tab-content="settings">\n          <div class="editor-section">\n            <h3 class="editor-section-title">å…¬é–‹è¨­å®š</h3>\n            <div class="form-group">\n              <label class="toggle-switch">\n                <input type="checkbox" id="edit-is-published" ${this.settings.isPublished?"checked":""}>\n                <span class="toggle-slider"></span>\n                <span class="toggle-label-text">æ¡ç”¨ãƒšãƒ¼ã‚¸ã‚’å…¬é–‹ã™ã‚‹</span>\n              </label>\n              <p class="form-hint">éå…¬é–‹ã«ã™ã‚‹ã¨ã€URLã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚æ¡ç”¨ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“</p>\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">URLè¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-custom-slug">ã‚«ã‚¹ã‚¿ãƒ URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰</label>\n              <div class="input-with-prefix">\n                <span class="input-prefix">${window.location.origin}/r/</span>\n                <input type="text" id="edit-custom-slug" placeholder="company-name" pattern="[a-z0-9-]+" title="å°æ–‡å­—è‹±æ•°å­—ã¨ãƒã‚¤ãƒ•ãƒ³ã®ã¿ä½¿ç”¨å¯">\n              </div>\n              <p class="form-hint">ç©ºæ¬„ã®å ´åˆã¯ä¼šç¤¾IDãŒURLã«ãªã‚Šã¾ã™</p>\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">æ±‚äººä¸€è¦§ã®è¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-jobs-limit">æ±‚äººã®è¡¨ç¤ºä»¶æ•°</label>\n              <select id="edit-jobs-limit">\n                <option value="0">ã™ã¹ã¦è¡¨ç¤º</option>\n                <option value="3">3ä»¶</option>\n                <option value="5">5ä»¶</option>\n                <option value="10">10ä»¶</option>\n                <option value="20">20ä»¶</option>\n              </select>\n              <p class="form-hint">æ¡ç”¨ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã™ã‚‹æ±‚äººã®æœ€å¤§ä»¶æ•°</p>\n            </div>\n            <div class="form-group">\n              <label for="edit-jobs-sort">æ±‚äººã®ä¸¦ã³é †</label>\n              <select id="edit-jobs-sort">\n                <option value="newest">æ–°ã—ã„é †</option>\n                <option value="oldest">å¤ã„é †</option>\n                <option value="salary-high">çµ¦ä¸é«˜ã„é †</option>\n                <option value="salary-low">çµ¦ä¸ä½ã„é †</option>\n              </select>\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒªãƒ³ã‚¯ãƒ»ãƒãƒŠãƒ¼è¨­å®š</h3>\n            <div class="custom-links-list" id="edit-custom-links">\n              \x3c!-- å‹•çš„ã«è¿½åŠ  --\x3e\n            </div>\n            <button type="button" class="btn-add-link" id="btn-add-custom-link">+ ãƒªãƒ³ã‚¯ã‚’è¿½åŠ </button>\n          </div>\n        </div>\n\n        \x3c!-- ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="design">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¹ã‚¿ã‚¤ãƒ«</h3>\n            <div class="layout-style-grid" id="layout-style-grid">\n              ${d.map(t=>`\n                <label class="layout-style-item" data-style="${t.id}">\n                  <input type="radio" name="layoutStyle" value="${t.id}" ${this.settings.layoutStyle===t.id?"checked":""}>\n                  <span class="layout-style-name">${e(t.name)}</span>\n                  <span class="layout-style-desc">${e(t.description)}</span>\n                </label>\n              `).join("")}\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚«ãƒ©ãƒ¼ãƒ†ãƒ¼ãƒ</h3>\n            <div class="design-pattern-grid" id="design-pattern-grid">\n              ${l.map(t=>`\n                <label class="design-pattern-item" data-pattern="${t.id}">\n                  <input type="radio" name="designPattern" value="${t.id}" ${this.settings.designPattern===t.id?"checked":""}>\n                  <span class="design-pattern-preview pattern-${t.id}"></span>\n                  <span class="design-pattern-name">${e(t.name)}</span>\n                </label>\n              `).join("")}\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="content">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼</h3>\n            <div class="form-group">\n              <label for="edit-hero-title">ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-hero-title" placeholder="ã€‡ã€‡ã§åƒã“ã†">\n            </div>\n            <div class="form-group">\n              <label for="edit-hero-subtitle">ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-hero-subtitle" placeholder="ç§ãŸã¡ã¨ä¸€ç·’ã«åƒãã¾ã›ã‚“ã‹ï¼Ÿ">\n            </div>\n            <div class="form-group">\n              <label>ãƒ’ãƒ¼ãƒ­ãƒ¼ç”»åƒ</label>\n              <div class="hero-image-presets" id="hero-image-presets">\n                ${o.map(t=>`\n                  <div class="hero-preset-item" data-url="${e(t.url)}">\n                    <img src="${e(t.thumbnail)}" alt="${e(t.name)}" loading="lazy">\n                  </div>\n                `).join("")}\n              </div>\n              <input type="text" id="edit-hero-image" placeholder="ã¾ãŸã¯ç”»åƒURLã‚’å…¥åŠ›" class="mt-2">\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">æ±‚äººã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n            <div class="form-group">\n              <label for="edit-jobs-title">ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-jobs-title" placeholder="å‹Ÿé›†ä¸­ã®æ±‚äºº">\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">CTAã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n            <div class="form-group">\n              <label for="edit-cta-title">ã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-cta-title" placeholder="ã‚ãªãŸã®å¿œå‹Ÿã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™">\n            </div>\n            <div class="form-group">\n              <label for="edit-cta-text">èª¬æ˜æ–‡</label>\n              <textarea id="edit-cta-text" rows="2" placeholder="æ°—ã«ãªã‚‹æ±‚äººãŒã‚ã‚Œã°ã€ãœã²ãŠæ°—è»½ã«ã”å¿œå‹Ÿãã ã•ã„ã€‚"></textarea>\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">ã‚«ã‚¹ã‚¿ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³</h3>\n            <p class="section-description">ãƒšãƒ¼ã‚¸ã«ç‹¬è‡ªã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã§ãã¾ã™</p>\n            <div class="custom-sections-list" id="edit-custom-sections">\n              \x3c!-- å‹•çš„ã«è¿½åŠ  --\x3e\n            </div>\n            <div class="add-section-buttons">\n              <button type="button" class="btn-add-section" data-type="text">+ ãƒ†ã‚­ã‚¹ãƒˆ</button>\n              <button type="button" class="btn-add-section" data-type="heading">+ è¦‹å‡ºã—</button>\n              <button type="button" class="btn-add-section" data-type="image">+ ç”»åƒ</button>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="header">\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒ­ã‚´è¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-logo-url">ãƒ­ã‚´ç”»åƒ</label>\n              <div class="logo-preview-small" id="edit-logo-preview">\n                <span class="logo-placeholder">ãƒ­ã‚´æœªè¨­å®š</span>\n              </div>\n              <div class="input-with-button">\n                <input type="text" id="edit-logo-url" placeholder="https://example.com/logo.png">\n                <button type="button" id="btn-upload-logo-edit" class="btn-upload-small">ğŸ“·</button>\n              </div>\n            </div>\n            <div class="form-group">\n              <label for="edit-company-name-display">è¡¨ç¤ºä¼šç¤¾å</label>\n              <input type="text" id="edit-company-name-display" placeholder="æ ªå¼ä¼šç¤¾ã€‡ã€‡">\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">CTAãƒãƒ¼è¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-phone-number">é›»è©±ç•ªå·</label>\n              <input type="text" id="edit-phone-number" placeholder="0120-XXX-XXX">\n            </div>\n            <div class="form-group">\n              <label for="edit-cta-button-text">ãƒœã‚¿ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ</label>\n              <input type="text" id="edit-cta-button-text" placeholder="ä»Šã™ãå¿œå‹Ÿã™ã‚‹">\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- SNSã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="sns">\n          <div class="editor-section">\n            <h3 class="editor-section-title">SNSãƒªãƒ³ã‚¯è¨­å®š</h3>\n            <p class="section-description">å…¥åŠ›ã—ãŸSNSã¯ãƒ•ãƒƒã‚¿ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã¾ã™</p>\n            <div class="form-group">\n              <label for="edit-sns-twitter">\n                <span class="sns-icon">ğ•</span> X (Twitter)\n              </label>\n              <input type="url" id="edit-sns-twitter" placeholder="https://x.com/yourcompany">\n            </div>\n            <div class="form-group">\n              <label for="edit-sns-instagram">\n                <span class="sns-icon">ğŸ“·</span> Instagram\n              </label>\n              <input type="url" id="edit-sns-instagram" placeholder="https://instagram.com/yourcompany">\n            </div>\n            <div class="form-group">\n              <label for="edit-sns-facebook">\n                <span class="sns-icon">f</span> Facebook\n              </label>\n              <input type="url" id="edit-sns-facebook" placeholder="https://facebook.com/yourcompany">\n            </div>\n            <div class="form-group">\n              <label for="edit-sns-youtube">\n                <span class="sns-icon">â–¶</span> YouTube\n              </label>\n              <input type="url" id="edit-sns-youtube" placeholder="https://youtube.com/@yourcompany">\n            </div>\n            <div class="form-group">\n              <label for="edit-sns-line">\n                <span class="sns-icon">ğŸ’¬</span> LINE\n              </label>\n              <input type="url" id="edit-sns-line" placeholder="https://line.me/yourcompany">\n            </div>\n            <div class="form-group">\n              <label for="edit-sns-tiktok">\n                <span class="sns-icon">â™ª</span> TikTok\n              </label>\n              <input type="url" id="edit-sns-tiktok" placeholder="https://tiktok.com/@yourcompany">\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- SEOã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="seo">\n          <div class="editor-section">\n            <h3 class="editor-section-title">OGPè¨­å®š</h3>\n            <div class="form-group">\n              <label for="edit-ogp-title">OGPã‚¿ã‚¤ãƒˆãƒ«</label>\n              <input type="text" id="edit-ogp-title" placeholder="ã€‡ã€‡æ¡ç”¨æƒ…å ±">\n            </div>\n            <div class="form-group">\n              <label for="edit-ogp-description">OGPèª¬æ˜æ–‡</label>\n              <textarea id="edit-ogp-description" rows="2" placeholder="æ¡ç”¨æƒ…å ±ãƒšãƒ¼ã‚¸ã®èª¬æ˜"></textarea>\n            </div>\n            <div class="form-group">\n              <label for="edit-ogp-image">OGPç”»åƒURL</label>\n              <input type="text" id="edit-ogp-image" placeholder="https://example.com/ogp.jpg">\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- åŸ‹è¾¼ã‚¿ãƒ– --\x3e\n        <div class="recruit-editor-tab-content" data-tab-content="embed">\n          <div class="editor-section">\n            <h3 class="editor-section-title">æ¡ç”¨ãƒšãƒ¼ã‚¸ãƒªãƒ³ã‚¯</h3>\n            <p class="section-description">æ¡ç”¨ãƒšãƒ¼ã‚¸ã®URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ç”¨ã§ãã¾ã™</p>\n            <div class="embed-link-box">\n              <input type="text" id="embed-page-url" readonly class="embed-url-input">\n              <button type="button" class="btn-copy-embed" data-target="embed-page-url" title="ã‚³ãƒ”ãƒ¼">ğŸ“‹</button>\n            </div>\n          </div>\n\n          <div class="editor-section">\n            <h3 class="editor-section-title">ãƒãƒŠãƒ¼å–å¾—</h3>\n            <p class="section-description">è‡ªç¤¾ã‚µã‚¤ãƒˆã«è²¼ã‚Šä»˜ã‘ã¦æ¡ç”¨ãƒšãƒ¼ã‚¸ã¸èª˜å°ã§ãã¾ã™</p>\n            <div class="embed-banners-list" id="embed-banners-list">\n              \x3c!-- ãƒãƒŠãƒ¼1: ã‚·ãƒ³ãƒ—ãƒ«ãƒœã‚¿ãƒ³ --\x3e\n              <div class="embed-banner-item">\n                <div class="embed-banner-preview banner-style-button">\n                  <a href="#">æ¡ç”¨æƒ…å ±ã¯ã“ã¡ã‚‰</a>\n                </div>\n                <div class="embed-banner-actions">\n                  <button type="button" class="btn-copy-banner" data-banner="button">ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</button>\n                </div>\n              </div>\n\n              \x3c!-- ãƒãƒŠãƒ¼2: å¤§ãã‚ãƒœã‚¿ãƒ³ --\x3e\n              <div class="embed-banner-item">\n                <div class="embed-banner-preview banner-style-button-large">\n                  <a href="#">æ¡ç”¨æƒ…å ±ã¯ã“ã¡ã‚‰ â†’</a>\n                </div>\n                <div class="embed-banner-actions">\n                  <button type="button" class="btn-copy-banner" data-banner="button-large">ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</button>\n                </div>\n              </div>\n\n              \x3c!-- ãƒãƒŠãƒ¼3: ã‚«ãƒ¼ãƒ‰å‹ --\x3e\n              <div class="embed-banner-item">\n                <div class="embed-banner-preview banner-style-card">\n                  <div class="banner-card-inner">\n                    <span class="banner-card-label">æ¡ç”¨æƒ…å ±</span>\n                    <span class="banner-card-title">æ¡ç”¨æƒ…å ±ã¯ã“ã¡ã‚‰</span>\n                    <span class="banner-card-arrow">â†’</span>\n                  </div>\n                </div>\n                <div class="embed-banner-actions">\n                  <button type="button" class="btn-copy-banner" data-banner="card">ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</button>\n                </div>\n              </div>\n\n              \x3c!-- ãƒãƒŠãƒ¼4: æ±‚äººå‹Ÿé›†ä¸­ --\x3e\n              <div class="embed-banner-item">\n                <div class="embed-banner-preview banner-style-recruiting">\n                  <div class="banner-recruiting-inner">\n                    <span class="banner-recruiting-badge">ãŸã ã„ã¾</span>\n                    <span class="banner-recruiting-title">æ±‚äººå‹Ÿé›†ä¸­ï¼</span>\n                  </div>\n                </div>\n                <div class="embed-banner-actions">\n                  <button type="button" class="btn-copy-banner" data-banner="recruiting">ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</button>\n                </div>\n              </div>\n\n              \x3c!-- ãƒãƒŠãƒ¼5: ç‰¹è¨­ãƒšãƒ¼ã‚¸å…¬é–‹ä¸­ --\x3e\n              <div class="embed-banner-item">\n                <div class="embed-banner-preview banner-style-special">\n                  <div class="banner-special-inner">\n                    <span class="banner-special-title">æ¡ç”¨ç‰¹è¨­ãƒšãƒ¼ã‚¸</span>\n                    <span class="banner-special-subtitle">å…¬é–‹ä¸­ï¼ï¼</span>\n                  </div>\n                </div>\n                <div class="embed-banner-actions">\n                  <button type="button" class="btn-copy-banner" data-banner="special">ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="recruit-editor-footer">\n        <button type="button" class="btn-save-recruit" id="btn-save-recruit">\n          <span>ğŸ’¾</span> ä¿å­˜\n        </button>\n      </div>\n    `,document.body.appendChild(n)}populateForm(){var e;const t=this.settings,n=(null==(e=this.company)?void 0:e.company)||"";this.setCheckboxValue("edit-is-published",!1!==t.isPublished),this.setInputValue("edit-custom-slug",t.customSlug||""),this.setSelectValue("edit-jobs-limit",t.jobsLimit||"0"),this.setSelectValue("edit-jobs-sort",t.jobsSort||"newest");let i=t.customLinks||[];if("string"==typeof i)try{i=JSON.parse(i)}catch{i=[]}this.renderCustomLinks(i),this.setRadioValue("layoutStyle",t.layoutStyle||"default"),this.setRadioValue("designPattern",t.designPattern||"standard"),this.setInputValue("edit-hero-title",t.heroTitle||`${n}ã§åƒã“ã†`),this.setInputValue("edit-hero-subtitle",t.heroSubtitle||"ç§ãŸã¡ã¨ä¸€ç·’ã«åƒãã¾ã›ã‚“ã‹ï¼Ÿ"),this.setInputValue("edit-hero-image",t.heroImage||""),this.setInputValue("edit-jobs-title",t.jobsTitle||"å‹Ÿé›†ä¸­ã®æ±‚äºº"),this.setInputValue("edit-cta-title",t.ctaTitle||"ã‚ãªãŸã®å¿œå‹Ÿã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™"),this.setInputValue("edit-cta-text",t.ctaText||"æ°—ã«ãªã‚‹æ±‚äººãŒã‚ã‚Œã°ã€ãœã²ãŠæ°—è»½ã«ã”å¿œå‹Ÿãã ã•ã„ã€‚");let s=t.customSections||[];if("string"==typeof s)try{s=JSON.parse(s)}catch{s=[]}this.renderCustomSections(s),this.setInputValue("edit-logo-url",t.logoUrl||""),this.setInputValue("edit-company-name-display",t.companyNameDisplay||n),this.setInputValue("edit-phone-number",t.phoneNumber||""),this.setInputValue("edit-cta-button-text",t.ctaButtonText||"ä»Šã™ãå¿œå‹Ÿã™ã‚‹"),this.setInputValue("edit-sns-twitter",t.snsTwitter||""),this.setInputValue("edit-sns-instagram",t.snsInstagram||""),this.setInputValue("edit-sns-facebook",t.snsFacebook||""),this.setInputValue("edit-sns-youtube",t.snsYoutube||""),this.setInputValue("edit-sns-line",t.snsLine||""),this.setInputValue("edit-sns-tiktok",t.snsTiktok||""),this.setInputValue("edit-ogp-title",t.ogpTitle||""),this.setInputValue("edit-ogp-description",t.ogpDescription||""),this.setInputValue("edit-ogp-image",t.ogpImage||""),this.updateLogoPreview(t.logoUrl||""),this.updateHeroPresetSelection(t.heroImage||""),this.updateEmbedUrl()}setupEventListeners(){var e,t,n,i,s,o;document.querySelectorAll(".recruit-editor-tab").forEach(e=>{e.addEventListener("click",()=>this.switchTab(e.dataset.tab))}),null==(e=document.getElementById("btn-close-editor"))||e.addEventListener("click",()=>{this.close()}),document.querySelectorAll(".btn-preview-mode").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.mode;this.setPreviewMode(t)})}),null==(t=document.getElementById("btn-save-recruit"))||t.addEventListener("click",()=>{this.save()}),document.querySelectorAll('input[name="layoutStyle"]').forEach(e=>{e.addEventListener("change",()=>{this.settings.layoutStyle=e.value,this.hasChanges=!0,this.applyPreview()})}),document.querySelectorAll('input[name="designPattern"]').forEach(e=>{e.addEventListener("change",()=>{this.settings.designPattern=e.value,this.hasChanges=!0,this.applyPreview()})});["edit-hero-title","edit-hero-subtitle","edit-hero-image","edit-jobs-title","edit-cta-title","edit-cta-text","edit-logo-url","edit-company-name-display","edit-phone-number","edit-cta-button-text","edit-ogp-title","edit-ogp-description","edit-ogp-image","edit-custom-slug","edit-sns-twitter","edit-sns-instagram","edit-sns-facebook","edit-sns-youtube","edit-sns-line","edit-sns-tiktok"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("input",()=>{this.hasChanges=!0,this.updateSettingsFromForm(),this.debouncedPreview()})}),null==(n=document.getElementById("edit-is-published"))||n.addEventListener("change",()=>{this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()}),["edit-jobs-limit","edit-jobs-sort"].forEach(e=>{var t;null==(t=document.getElementById(e))||t.addEventListener("change",()=>{this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()})}),null==(i=document.getElementById("btn-add-custom-link"))||i.addEventListener("click",()=>{this.addCustomLink()}),document.querySelectorAll(".btn-add-section").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.type;this.addCustomSection(t)})}),document.querySelectorAll("#hero-image-presets .hero-preset-item").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.url;this.setInputValue("edit-hero-image",t),this.updateHeroPresetSelection(t),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()})}),null==(s=document.getElementById("btn-upload-logo-edit"))||s.addEventListener("click",async()=>{await this.uploadLogo()}),null==(o=document.getElementById("edit-logo-url"))||o.addEventListener("input",e=>{this.updateLogoPreview(e.target.value)}),document.querySelectorAll(".btn-copy-embed").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.target,n=document.getElementById(t);n&&this.copyToClipboard(n.value)})}),document.querySelectorAll(".btn-copy-banner").forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.banner,n=this.generateBannerCode(t);this.copyToClipboard(n)})})}switchTab(e){document.querySelectorAll(".recruit-editor-tab").forEach(t=>{t.classList.toggle("active",t.dataset.tab===e)}),document.querySelectorAll(".recruit-editor-tab-content").forEach(t=>{t.classList.toggle("active",t.dataset.tabContent===e)})}updateSettingsFromForm(){var e,t,n,i,s,o,a,l,d,r,c,u,p,m,b,h,v,g,y,f,x,k,E;this.settings={...this.settings,companyDomain:this.companyDomain,isPublished:(null==(e=document.getElementById("edit-is-published"))?void 0:e.checked)??!0,customSlug:(null==(t=document.getElementById("edit-custom-slug"))?void 0:t.value)||"",jobsLimit:(null==(n=document.getElementById("edit-jobs-limit"))?void 0:n.value)||"0",jobsSort:(null==(i=document.getElementById("edit-jobs-sort"))?void 0:i.value)||"newest",customLinks:JSON.stringify(this.getCustomLinks()),layoutStyle:this.getRadioValue("layoutStyle")||"default",designPattern:this.getRadioValue("designPattern")||"standard",heroTitle:(null==(s=document.getElementById("edit-hero-title"))?void 0:s.value)||"",heroSubtitle:(null==(o=document.getElementById("edit-hero-subtitle"))?void 0:o.value)||"",heroImage:(null==(a=document.getElementById("edit-hero-image"))?void 0:a.value)||"",jobsTitle:(null==(l=document.getElementById("edit-jobs-title"))?void 0:l.value)||"",ctaTitle:(null==(d=document.getElementById("edit-cta-title"))?void 0:d.value)||"",ctaText:(null==(r=document.getElementById("edit-cta-text"))?void 0:r.value)||"",customSections:JSON.stringify(this.getCustomSections()),logoUrl:(null==(c=document.getElementById("edit-logo-url"))?void 0:c.value)||"",companyNameDisplay:(null==(u=document.getElementById("edit-company-name-display"))?void 0:u.value)||"",phoneNumber:(null==(p=document.getElementById("edit-phone-number"))?void 0:p.value)||"",ctaButtonText:(null==(m=document.getElementById("edit-cta-button-text"))?void 0:m.value)||"",snsTwitter:(null==(b=document.getElementById("edit-sns-twitter"))?void 0:b.value)||"",snsInstagram:(null==(h=document.getElementById("edit-sns-instagram"))?void 0:h.value)||"",snsFacebook:(null==(v=document.getElementById("edit-sns-facebook"))?void 0:v.value)||"",snsYoutube:(null==(g=document.getElementById("edit-sns-youtube"))?void 0:g.value)||"",snsLine:(null==(y=document.getElementById("edit-sns-line"))?void 0:y.value)||"",snsTiktok:(null==(f=document.getElementById("edit-sns-tiktok"))?void 0:f.value)||"",ogpTitle:(null==(x=document.getElementById("edit-ogp-title"))?void 0:x.value)||"",ogpDescription:(null==(k=document.getElementById("edit-ogp-description"))?void 0:k.value)||"",ogpImage:(null==(E=document.getElementById("edit-ogp-image"))?void 0:E.value)||""}}applyPreview(){this.updateSettingsFromForm(),this.onSettingsChange&&this.onSettingsChange(this.settings)}setPreviewMode(e){document.querySelectorAll(".btn-preview-mode").forEach(t=>{t.classList.toggle("active",t.dataset.mode===e)}),"mobile"===e?(document.body.classList.add("preview-mode-mobile"),document.body.classList.remove("preview-mode-pc")):(document.body.classList.add("preview-mode-pc"),document.body.classList.remove("preview-mode-mobile"))}async save(){const e=document.getElementById("btn-save-recruit");if(e)try{e.disabled=!0,e.innerHTML='<span class="loading-spinner-small"></span> ä¿å­˜ä¸­...',this.updateSettingsFromForm(),await a(this.settings),this.hasChanges=!1,t("è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ","success")}catch(n){console.error("[RecruitEditor] ä¿å­˜ã‚¨ãƒ©ãƒ¼:",n),t("ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ: "+n.message,"error")}finally{e.disabled=!1,e.innerHTML="<span>ğŸ’¾</span> ä¿å­˜"}}async uploadLogo(){const e=document.getElementById("btn-upload-logo-edit");if(e&&this.companyDomain)try{const n=await i({accept:"image/png,image/jpeg,image/webp,image/svg+xml"});e.disabled=!0,e.textContent="...";const o=await s(n,this.companyDomain);this.setInputValue("edit-logo-url",o),this.updateLogoPreview(o),this.hasChanges=!0,this.updateSettingsFromForm(),t("ãƒ­ã‚´ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ","success")}catch(n){"ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ"!==n.message&&t("ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ: "+n.message,"error")}finally{e&&(e.disabled=!1,e.textContent="ğŸ“·")}}updateLogoPreview(t){const n=document.getElementById("edit-logo-preview");n&&(n.innerHTML=t?`<img src="${e(t)}" alt="ãƒ­ã‚´ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">`:'<span class="logo-placeholder">ãƒ­ã‚´æœªè¨­å®š</span>')}updateHeroPresetSelection(e){document.querySelectorAll("#hero-image-presets .hero-preset-item").forEach(t=>{const n=t.dataset.url,i=null==e?void 0:e.split("?")[0],s=null==n?void 0:n.split("?")[0];t.classList.toggle("selected",i&&s&&i===s)})}async close(){if(this.hasChanges){if(!(await n({title:"å¤‰æ›´ã®ç ´æ£„",message:"ä¿å­˜ã•ã‚Œã¦ã„ãªã„å¤‰æ›´ãŒã‚ã‚Šã¾ã™ã€‚é–‰ã˜ã¾ã™ã‹ï¼Ÿ",confirmText:"é–‰ã˜ã‚‹",cancelText:"ç·¨é›†ã‚’ç¶šã‘ã‚‹",danger:!0})))return}window.location.href=`company-recruit.html?id=${encodeURIComponent(this.companyDomain)}`}setInputValue(e,t){const n=document.getElementById(e);n&&(n.value=t||"")}setCheckboxValue(e,t){const n=document.getElementById(e);n&&(n.checked=!!t)}setSelectValue(e,t){const n=document.getElementById(e);n&&(n.value=t||"")}setRadioValue(e,t){const n=document.querySelector(`input[name="${e}"][value="${t}"]`);n&&(n.checked=!0)}getRadioValue(e){var t;return(null==(t=document.querySelector(`input[name="${e}"]:checked`))?void 0:t.value)||""}renderCustomLinks(t){const n=document.getElementById("edit-custom-links");n&&(n.innerHTML=t.map((t,n)=>`\n      <div class="custom-link-item" data-index="${n}">\n        <div class="custom-link-inputs">\n          <input type="text" class="custom-link-label" placeholder="ãƒªãƒ³ã‚¯ãƒ†ã‚­ã‚¹ãƒˆ" value="${e(t.label||"")}">\n          <input type="url" class="custom-link-url" placeholder="https://..." value="${e(t.url||"")}">\n        </div>\n        <button type="button" class="btn-remove-link" data-index="${n}">âœ•</button>\n      </div>\n    `).join(""),n.querySelectorAll(".btn-remove-link").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.index,10),n=this.getCustomLinks();n.splice(t,1),this.renderCustomLinks(n),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()})}),n.querySelectorAll("input").forEach(e=>{e.addEventListener("input",()=>{this.hasChanges=!0,this.updateSettingsFromForm(),this.debouncedPreview()})}))}getCustomLinks(){const e=document.getElementById("edit-custom-links");if(!e)return[];const t=[];return e.querySelectorAll(".custom-link-item").forEach(e=>{var n,i;const s=(null==(n=e.querySelector(".custom-link-label"))?void 0:n.value)||"",o=(null==(i=e.querySelector(".custom-link-url"))?void 0:i.value)||"";(s||o)&&t.push({label:s,url:o})}),t}addCustomLink(){const e=this.getCustomLinks();e.push({label:"",url:""}),this.renderCustomLinks(e),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()}renderCustomSections(t){const n=document.getElementById("edit-custom-sections");n&&(n.innerHTML=t.map((n,i)=>{const s={text:"ãƒ†ã‚­ã‚¹ãƒˆ",heading:"è¦‹å‡ºã—",image:"ç”»åƒ"}[n.type]||n.type;let o="";return"text"===n.type?o=`<textarea class="section-content" rows="3" placeholder="ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›">${e(n.content||"")}</textarea>`:"heading"===n.type?o=`<input type="text" class="section-content" placeholder="è¦‹å‡ºã—ãƒ†ã‚­ã‚¹ãƒˆ" value="${e(n.content||"")}">`:"image"===n.type&&(o=`<input type="url" class="section-content" placeholder="ç”»åƒURLï¼ˆhttps://...ï¼‰" value="${e(n.content||"")}">`),`\n        <div class="custom-section-item" data-index="${i}" data-type="${n.type}">\n          <div class="section-item-header">\n            <span class="section-type-badge">${e(s)}</span>\n            <div class="section-item-actions">\n              <button type="button" class="btn-move-section" data-direction="up" data-index="${i}" ${0===i?"disabled":""}>â†‘</button>\n              <button type="button" class="btn-move-section" data-direction="down" data-index="${i}" ${i===t.length-1?"disabled":""}>â†“</button>\n              <button type="button" class="btn-remove-section" data-index="${i}">âœ•</button>\n            </div>\n          </div>\n          <div class="section-item-content">\n            ${o}\n          </div>\n        </div>\n      `}).join(""),n.querySelectorAll(".btn-remove-section").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.index,10),n=this.getCustomSections();n.splice(t,1),this.renderCustomSections(n),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()})}),n.querySelectorAll(".btn-move-section").forEach(e=>{e.addEventListener("click",()=>{const t=parseInt(e.dataset.index,10),n=e.dataset.direction,i=this.getCustomSections();"up"===n&&t>0?[i[t-1],i[t]]=[i[t],i[t-1]]:"down"===n&&t<i.length-1&&([i[t],i[t+1]]=[i[t+1],i[t]]),this.renderCustomSections(i),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()})}),n.querySelectorAll(".section-content").forEach(e=>{e.addEventListener("input",()=>{this.hasChanges=!0,this.updateSettingsFromForm(),this.debouncedPreview()})}))}getCustomSections(){const e=document.getElementById("edit-custom-sections");if(!e)return[];const t=[];return e.querySelectorAll(".custom-section-item").forEach(e=>{var n;const i=e.dataset.type,s=(null==(n=e.querySelector(".section-content"))?void 0:n.value)||"";t.push({type:i,content:s})}),t}addCustomSection(e){const t=this.getCustomSections();t.push({type:e,content:""}),this.renderCustomSections(t),this.hasChanges=!0,this.updateSettingsFromForm(),this.applyPreview()}updateEmbedUrl(){const e=document.getElementById("embed-page-url");if(e&&this.companyDomain){const t=window.location.origin;e.value=`${t}/company-recruit.html?id=${encodeURIComponent(this.companyDomain)}`}}generateBannerCode(t){var n;const i=`${window.location.origin}/company-recruit.html?id=${encodeURIComponent(this.companyDomain)}`,s=(null==(n=this.company)?void 0:n.company)||"";switch(t){case"button":return`<a href="${i}" target="_blank" rel="noopener" style="display:inline-block;padding:12px 24px;background:#0ea5e9;color:#fff;text-decoration:none;border-radius:6px;font-weight:bold;font-size:14px;">æ¡ç”¨æƒ…å ±ã¯ã“ã¡ã‚‰</a>`;case"button-large":return`<a href="${i}" target="_blank" rel="noopener" style="display:inline-block;padding:16px 32px;background:linear-gradient(135deg,#0ea5e9,#0284c7);color:#fff;text-decoration:none;border-radius:8px;font-weight:bold;font-size:16px;box-shadow:0 4px 14px rgba(14,165,233,0.4);">æ¡ç”¨æƒ…å ±ã¯ã“ã¡ã‚‰ â†’</a>`;case"card":return`<a href="${i}" target="_blank" rel="noopener" style="display:block;max-width:300px;padding:20px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;text-decoration:none;box-shadow:0 2px 8px rgba(0,0,0,0.08);"><span style="display:block;font-size:12px;color:#6b7280;margin-bottom:4px;">æ¡ç”¨æƒ…å ±</span><span style="display:block;font-size:16px;font-weight:bold;color:#1f2937;">${e(s)} æ¡ç”¨æƒ…å ±ã¯ã“ã¡ã‚‰</span><span style="display:block;margin-top:8px;color:#0ea5e9;font-size:14px;">è©³ã—ãè¦‹ã‚‹ â†’</span></a>`;case"recruiting":return`<a href="${i}" target="_blank" rel="noopener" style="display:inline-block;padding:16px 28px;background:linear-gradient(135deg,#f97316,#ea580c);color:#fff;text-decoration:none;border-radius:8px;text-align:center;box-shadow:0 4px 14px rgba(249,115,22,0.4);"><span style="display:block;font-size:12px;font-weight:500;">ãŸã ã„ã¾</span><span style="display:block;font-size:18px;font-weight:bold;">æ±‚äººå‹Ÿé›†ä¸­ï¼</span></a>`;case"special":return`<a href="${i}" target="_blank" rel="noopener" style="display:inline-block;padding:20px 32px;background:linear-gradient(135deg,#6366f1,#4f46e5);color:#fff;text-decoration:none;border-radius:12px;text-align:center;box-shadow:0 4px 20px rgba(99,102,241,0.4);"><span style="display:block;font-size:14px;font-weight:500;">æ¡ç”¨ç‰¹è¨­ãƒšãƒ¼ã‚¸</span><span style="display:block;font-size:20px;font-weight:bold;margin-top:4px;">å…¬é–‹ä¸­ï¼ï¼</span></a>`;default:return""}}async copyToClipboard(e){try{await navigator.clipboard.writeText(e),t("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ","success")}catch(n){console.error("ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã¸ã®ã‚³ãƒ”ãƒ¼ã«å¤±æ•—:",n),t("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ","error")}}}export{r as RecruitEditor};
