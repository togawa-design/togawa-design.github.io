import{t as n,e as a}from"./utils-C4oNoj7k.js";import{f as e,i as o,a as t,b as i,D as c,d as r,J as s}from"./jobs-loader-Cl5xPqcc.js";import{L as d,a as l,C as m,J as p}from"./index-CdesR8cu.js";async function y(){var y;const v=document.getElementById("job-detail-container");if(!v)return;const u=new URLSearchParams(window.location.search).get("id");if(!u)return void(v.innerHTML='\n      <div class="jobs-error">\n        <p>求人が見つかりませんでした。</p>\n        <a href="/" class="btn-more">トップページに戻る</a>\n      </div>\n    ');v.innerHTML=d({message:"会社情報を読み込んでいます..."});const b=await e();if(!b)return void(v.innerHTML='\n      <div class="jobs-error">\n        <p>会社情報を取得できませんでした。</p>\n        <button onclick="location.reload()">再読み込み</button>\n      </div>\n    ');const f=b.find(n=>{var a;return(null==(a=n.companyDomain)?void 0:a.trim())===u&&o(n)});if(!f)return void(v.innerHTML='\n      <div class="jobs-error">\n        <p>会社が見つかりませんでした。</p>\n        <a href="/" class="btn-more">トップページに戻る</a>\n      </div>\n    ');let h=[];if(null==(y=f.jobsSheet)?void 0:y.trim()){const n=await t(f.jobsSheet.trim());n&&n.length>0&&(h=n.filter(n=>"false"!==n.visible&&"FALSE"!==n.visible).filter(n=>i(n)).sort((n,a)=>(parseInt(n.order)||999)-(parseInt(a.order)||999)).map(n=>({...n,company:f.company,companyDomain:f.companyDomain})))}0===h.length&&(h=[f]),document.title=`${f.company}の求人一覧 | リクエコ求人ナビ`;const g=document.querySelector('meta[name="description"]');g&&(g.content=`${f.company}の期間工・期間従業員求人一覧。${h.length}件の求人を掲載中。`);const j=document.getElementById("breadcrumb-current");j&&(j.textContent=f.company),v.innerHTML=function(n,e){var o;const t=(null==(o=n.imageUrl)?void 0:o.trim())||c,i=r(n.designPattern),d=n.description?s.sanitizeHtml(n.description):"";return`\n    <div class="company-page ${i}">\n      <div class="company-header">\n        <div class="company-header-image">\n          ${l({src:t,alt:n.company,className:""})}\n        </div>\n        <div class="company-header-info">\n          <h1 class="company-name">${a(n.company)}</h1>\n          <p class="company-job-count">${e.length}件の求人を掲載中</p>\n        </div>\n      </div>\n\n      ${d?`\n      <div class="company-description">\n        <h2>会社について</h2>\n        <div class="company-description-content">${d}</div>\n      </div>\n      `:""}\n\n      <div class="company-jobs">\n        <h2>募集中の求人</h2>\n        <div class="company-jobs-list">\n          ${e.map(n=>m({job:n})).join("")}\n        </div>\n      </div>\n\n      <div class="company-cta">\n        <p>お仕事選びでお困りですか？</p>\n        <div class="company-cta-buttons">\n          <a href="#" class="btn-apply-large">無料で相談する</a>\n          <a href="#" class="btn-line-large">LINEで相談する</a>\n        </div>\n      </div>\n    </div>\n  `}(f,h),n("view_company_page",{company_domain:f.companyDomain||"",company_name:f.company||"",design_pattern:f.designPattern||"standard",page_location:window.location.href,page_title:document.title}),function(a){document.querySelectorAll(".btn-apply-job, .btn-apply-large").forEach(e=>{e.addEventListener("click",()=>{n("click_apply",{company_domain:a,button_type:"apply"})})}),document.querySelectorAll(".btn-line-large").forEach(e=>{e.addEventListener("click",()=>{n("click_apply",{company_domain:a,button_type:"line"})})})}(f.companyDomain),async function(n,a){const e=document.getElementById("related-jobs-container");if(!e)return;const t=n.filter(n=>n.companyDomain!==a&&o(n)).sort((n,a)=>(parseInt(n.order)||999)-(parseInt(a.order)||999)).slice(0,3);0!==t.length?e.innerHTML=t.map(n=>p({job:n})).join(""):e.innerHTML="<p>他の求人がありません。</p>"}(b,u)}document.addEventListener("DOMContentLoaded",()=>{y()});
