import"./modulepreload-polyfill-YP0FEG5d.js";import{r as t,a as n,L as e}from"./LPEditor-Czlt2EG3.js";import{e as i,s,h as o,g as a,t as l}from"./utils-BE8OECDH.js";import"./jobs-loader-Foiii4G8.js";function c(t,n){return 0===n.length?"":`\n    <section class="lp-jobs">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">募集中の求人</h2>\n        <div class="lp-jobs-list">\n          ${n.map(n=>function(t,n){const e=t.features?Array.isArray(t.features)?t.features:t.features.split(","):[];return`\n    <div class="lp-job-card">\n      <div class="lp-job-card-header">\n        <h3 class="lp-job-title">${i(t.title)}</h3>\n        ${t.employmentType?`<span class="lp-job-type">${i(t.employmentType)}</span>`:""}\n      </div>\n      <div class="lp-job-card-body">\n        <ul class="lp-job-info">\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>\n            </span>\n            ${i(t.location)}\n          </li>\n          ${t.monthlySalary?`\n          <li>\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>\n            </span>\n            ${i(t.monthlySalary)}\n          </li>\n          `:""}\n          ${t.totalBonus?`\n          <li class="highlight">\n            <span class="lp-info-icon">\n              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16z"/></svg>\n            </span>\n            特典総額 ${i(t.totalBonus)}\n          </li>\n          `:""}\n        </ul>\n        ${e.length>0?`\n        <div class="lp-job-tags">\n          ${e.slice(0,5).map(t=>`<span class="lp-job-tag">${i(t.trim())}</span>`).join("")}\n        </div>\n        `:""}\n      </div>\n      <div class="lp-job-card-footer">\n        <a href="job-detail.html?company=${i(t.companyDomain||n.companyDomain)}&job=${i(t.id||"")}" class="lp-btn-detail">詳細を見る</a>\n      </div>\n    </div>\n  `}(n,t)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function r(t,n){const e=[];return t.description&&e.push({label:"会社概要",value:t.description,isHtml:!0}),t.jobDescription&&e.push({label:"お仕事内容",value:t.jobDescription,isHtml:!0}),t.workingHours&&e.push({label:"勤務時間",value:t.workingHours,isHtml:!0}),t.workLocation&&e.push({label:"勤務地",value:t.workLocation,isHtml:!0}),n.benefits&&n.benefits!==t.benefits?e.push({label:"待遇・福利厚生",value:n.benefits,isHtml:!0}):t.benefits&&e.push({label:"待遇・福利厚生",value:t.benefits,isHtml:!0}),n.requirements&&e.push({label:"応募資格",value:n.requirements,isHtml:!0}),0===e.length?"":`\n    <section class="lp-details">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">募集要項</h2>\n        <div class="lp-details-table">\n          ${e.map(t=>`\n            <div class="lp-detail-row">\n              <dt class="lp-detail-label">${i(t.label)}</dt>\n              <dd class="lp-detail-value">${t.isHtml?s(t.value):i(t.value)}</dd>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}function d(t){if(!t)return"";const n=function(t){const n=[];if("string"==typeof t){const e=t.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(t=>t.trim());for(const t of e){const e=t.match(/Q[:：](.+?)\|A[:：](.+)/i);e&&n.push({question:e[1].trim(),answer:e[2].trim()})}}else Array.isArray(t)&&t.forEach(t=>{t.question&&t.answer&&n.push(t)});return n}(t);return 0===n.length?"":`\n    <section class="lp-faq lp-faq-chat">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">よくある質問</h2>\n        <div class="lp-faq-chat-container">\n          ${n.map((t,n)=>`\n            <div class="lp-faq-chat-pair">\n              \x3c!-- 質問（左側・サポート） --\x3e\n              <div class="lp-faq-chat-row lp-faq-chat-question">\n                <div class="lp-faq-chat-avatar lp-faq-chat-avatar-support">\n                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"/></svg>\n                </div>\n                <div class="lp-faq-chat-bubble lp-faq-chat-bubble-support">\n                  <span class="lp-faq-chat-text">${i(t.question)}</span>\n                </div>\n              </div>\n              \x3c!-- 回答（右側・ユーザー） --\x3e\n              <div class="lp-faq-chat-row lp-faq-chat-answer">\n                <div class="lp-faq-chat-bubble lp-faq-chat-bubble-user">\n                  <span class="lp-faq-chat-text">${i(t.answer)}</span>\n                </div>\n                <div class="lp-faq-chat-avatar lp-faq-chat-avatar-user">\n                  <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>\n                </div>\n              </div>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    </section>\n  `}function p(t,n){const e=n.ctaText||"この求人に応募する",s=t.phoneNumber||"0120-000-000";return`\n    <section class="lp-apply" id="lp-apply">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">応募する</h2>\n        <div class="lp-apply-content">\n          <p class="lp-apply-lead">ご応募・お問い合わせはお気軽にどうぞ</p>\n\n          <div class="lp-apply-methods">\n            <div class="lp-apply-method lp-apply-web">\n              <h3>WEBで応募</h3>\n              <p>24時間受付中</p>\n              <a href="#" class="lp-btn-apply-main lp-editable" data-field="ctaText" data-label="CTAテキスト">${i(e)}</a>\n              <span class="lp-cta-microcopy">1分で入力完了 / まずは話を聞くだけでもOK</span>\n            </div>\n\n            <div class="lp-apply-divider">\n              <span>または</span>\n            </div>\n\n            <div class="lp-apply-method lp-apply-tel">\n              <h3>電話で応募</h3>\n              <p>受付時間 9:00〜18:00（土日祝除く）</p>\n              <a href="tel:${i(s.replace(/-/g,""))}" class="lp-btn-tel-main">\n                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>\n                ${i(s)}\n              </a>\n            </div>\n          </div>\n\n          <p class="lp-apply-note">※ 面接は随時実施しております。お気軽にお問い合わせください。</p>\n        </div>\n      </div>\n    </section>\n  `}function m(t,n){const{data:e,layout:i}=t;return({"text-only":u,"image-only":h,"text-left-image-right":g,"text-right-image-left":v,"centered-with-button":y,"full-width-banner":f}[(null==i?void 0:i.variant)||"text-only"]||u)(t,n)}function u(t,n){const{data:e}=t;return`\n    <section class="lp-custom lp-custom-text-only" data-section-id="${t.id}">\n      <div class="lp-section-inner">\n        ${e.title?`<h2 class="lp-section-title">${i(e.title)}</h2>`:""}\n        ${e.content?`<div class="lp-custom-content">${$(e.content)}</div>`:""}\n        ${b(e.button)}\n      </div>\n    </section>\n  `}function h(t,n){const{data:e}=t;return e.image?`\n    <section class="lp-custom lp-custom-image-only" data-section-id="${t.id}">\n      <div class="lp-section-inner">\n        ${e.title?`<h2 class="lp-section-title">${i(e.title)}</h2>`:""}\n        <div class="lp-custom-image-container">\n          <img src="${i(e.image)}" alt="${i(e.title||"")}" loading="lazy">\n        </div>\n        ${b(e.button)}\n      </div>\n    </section>\n  `:""}function g(t,n){const{data:e}=t;return`\n    <section class="lp-custom lp-custom-split lp-custom-text-left" data-section-id="${t.id}">\n      <div class="lp-section-inner">\n        <div class="lp-split-layout">\n          <div class="lp-split-text">\n            ${e.title?`<h2 class="lp-custom-title">${i(e.title)}</h2>`:""}\n            ${e.content?`<div class="lp-custom-content">${$(e.content)}</div>`:""}\n            ${b(e.button)}\n          </div>\n          <div class="lp-split-image">\n            ${e.image?`<img src="${i(e.image)}" alt="" loading="lazy">`:'<div class="lp-image-placeholder"></div>'}\n          </div>\n        </div>\n      </div>\n    </section>\n  `}function v(t,n){const{data:e}=t;return`\n    <section class="lp-custom lp-custom-split lp-custom-text-right" data-section-id="${t.id}">\n      <div class="lp-section-inner">\n        <div class="lp-split-layout">\n          <div class="lp-split-image">\n            ${e.image?`<img src="${i(e.image)}" alt="" loading="lazy">`:'<div class="lp-image-placeholder"></div>'}\n          </div>\n          <div class="lp-split-text">\n            ${e.title?`<h2 class="lp-custom-title">${i(e.title)}</h2>`:""}\n            ${e.content?`<div class="lp-custom-content">${$(e.content)}</div>`:""}\n            ${b(e.button)}\n          </div>\n        </div>\n      </div>\n    </section>\n  `}function y(t,n){const{data:e}=t;return`\n    <section class="lp-custom lp-custom-centered" data-section-id="${t.id}">\n      <div class="lp-section-inner">\n        ${e.title?`<h2 class="lp-section-title">${i(e.title)}</h2>`:""}\n        ${e.content?`<div class="lp-custom-content">${$(e.content)}</div>`:""}\n        ${e.image?`\n          <div class="lp-custom-image-centered">\n            <img src="${i(e.image)}" alt="" loading="lazy">\n          </div>\n        `:""}\n        ${b(e.button,"centered")}\n      </div>\n    </section>\n  `}function f(t,n){const{data:e}=t,s=e.image?`background-image: url('${i(e.image)}')`:"";return`\n    <section class="lp-custom lp-custom-banner" data-section-id="${t.id}" style="${s}">\n      <div class="lp-banner-overlay"></div>\n      <div class="lp-section-inner">\n        ${e.title?`<h2 class="lp-banner-title">${i(e.title)}</h2>`:""}\n        ${e.content?`<div class="lp-banner-content">${$(e.content)}</div>`:""}\n        ${b(e.button,"banner")}\n      </div>\n    </section>\n  `}function b(t,n=""){if(!t||!t.text)return"";const e=t.style||"primary",s=t.url||"#";return`\n    <div class="lp-custom-button-wrapper ${n?`lp-btn-${n}`:""}">\n      <a href="${i(s)}" class="lp-btn lp-btn-${e}" ${t.newTab?'target="_blank" rel="noopener"':""}>\n        ${i(t.text)}\n      </a>\n    </div>\n  `}function $(t){if(!t)return"";let n=i(t).replace(/\n/g,"<br>");return n=n.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),n=n.replace(/\*(.+?)\*/g,"<em>$1</em>"),n}function w(t,n){const{data:e,layout:i}=t,s=(null==e?void 0:e.images)||[],o=(null==e?void 0:e.sectionTitle)||"",a=(null==i?void 0:i.columns)||3,l=(null==i?void 0:i.style)||"grid";if(0===s.length)return"";return({grid:L,masonry:S,slider:P}[l]||L)(t.id,o,s,a)}function L(t,n,e,s){return`\n    <section class="lp-gallery lp-gallery-grid" data-section-id="${t}">\n      <div class="lp-section-inner">\n        ${n?`<h2 class="lp-section-title">${i(n)}</h2>`:""}\n        <div class="lp-gallery-items cols-${s}">\n          ${e.map((t,n)=>function(t,n){const e="string"==typeof t?t:t.url,s="object"==typeof t&&(t.alt||t.caption)||"",o="object"==typeof t?t.caption:"";return`\n    <div class="lp-gallery-item" data-index="${n}">\n      <img src="${i(e)}" alt="${i(s)}" loading="lazy">\n      ${o?`<div class="lp-gallery-caption">${i(o)}</div>`:""}\n    </div>\n  `}(t,n)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function S(t,n,e,s){return`\n    <section class="lp-gallery lp-gallery-masonry" data-section-id="${t}">\n      <div class="lp-section-inner">\n        ${n?`<h2 class="lp-section-title">${i(n)}</h2>`:""}\n        <div class="lp-gallery-masonry-grid cols-${s}">\n          ${e.map((t,n)=>function(t,n){const e="string"==typeof t?t:t.url,s="object"==typeof t&&(t.alt||t.caption)||"",o="object"==typeof t?t.caption:"";return`\n    <div class="lp-gallery-masonry-item" data-index="${n}">\n      <img src="${i(e)}" alt="${i(s)}" loading="lazy">\n      ${o?`<div class="lp-gallery-caption">${i(o)}</div>`:""}\n    </div>\n  `}(t,n)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function P(t,n,e,s){return`\n    <section class="lp-gallery lp-gallery-slider" data-section-id="${t}">\n      <div class="lp-section-inner">\n        ${n?`<h2 class="lp-section-title">${i(n)}</h2>`:""}\n        <div class="lp-gallery-slider-container">\n          <div class="lp-gallery-slider-track">\n            ${e.map((t,n)=>function(t,n){const e="string"==typeof t?t:t.url,s="object"==typeof t&&(t.alt||t.caption)||"",o="object"==typeof t?t.caption:"";return`\n    <div class="lp-gallery-slide ${0===n?"active":""}" data-index="${n}">\n      <img src="${i(e)}" alt="${i(s)}">\n      ${o?`<div class="lp-gallery-slide-caption">${i(o)}</div>`:""}\n    </div>\n  `}(t,n)).join("")}\n          </div>\n          <button class="lp-gallery-slider-prev" aria-label="前へ">&#10094;</button>\n          <button class="lp-gallery-slider-next" aria-label="次へ">&#10095;</button>\n        </div>\n        <div class="lp-gallery-slider-dots">\n          ${e.map((t,n)=>`<button class="lp-gallery-dot ${0===n?"active":""}" data-index="${n}" aria-label="画像${n+1}"></button>`).join("")}\n        </div>\n      </div>\n    </section>\n  `}function j(t,n){const{data:e,layout:i}=t,s=(null==e?void 0:e.testimonials)||[],o=(null==e?void 0:e.sectionTitle)||"社員の声",a=(null==i?void 0:i.style)||"cards";if(0===s.length)return"";return({cards:q,list:k,slider:I}[a]||q)(t.id,o,s)}function q(t,n,e){return`\n    <section class="lp-testimonial lp-testimonial-cards" data-section-id="${t}">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">${i(n)}</h2>\n        <div class="lp-testimonial-grid">\n          ${e.map(t=>function(t){const{name:n,role:e,department:s,quote:o,avatar:a,yearsWorked:l}=t;return`\n    <div class="lp-testimonial-card">\n      <div class="lp-testimonial-quote-mark">"</div>\n      <p class="lp-testimonial-quote">${i(o||"")}</p>\n      <div class="lp-testimonial-author">\n        ${a?`\n          <div class="lp-testimonial-avatar">\n            <img src="${i(a)}" alt="${i(n||"")}" loading="lazy">\n          </div>\n        `:`\n          <div class="lp-testimonial-avatar lp-testimonial-avatar-placeholder">\n            <span>${D(n)}</span>\n          </div>\n        `}\n        <div class="lp-testimonial-info">\n          <p class="lp-testimonial-name">${i(n||"匿名")}</p>\n          ${e||s?`\n            <p class="lp-testimonial-role">\n              ${s?i(s):""}${s&&e?" / ":""}${e?i(e):""}\n            </p>\n          `:""}\n          ${l?`<p class="lp-testimonial-years">勤続${i(l)}</p>`:""}\n        </div>\n      </div>\n    </div>\n  `}(t)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function k(t,n,e){return`\n    <section class="lp-testimonial lp-testimonial-list" data-section-id="${t}">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">${i(n)}</h2>\n        <div class="lp-testimonial-items">\n          ${e.map((t,n)=>function(t,n){const{name:e,role:s,department:o,quote:a,avatar:l,yearsWorked:c}=t,r=n%2==0;return`\n    <div class="lp-testimonial-list-item ${r?"":"lp-testimonial-reverse"}">\n      <div class="lp-testimonial-list-avatar">\n        ${l?`\n          <img src="${i(l)}" alt="${i(e||"")}" loading="lazy">\n        `:`\n          <div class="lp-testimonial-avatar-placeholder">\n            <span>${D(e)}</span>\n          </div>\n        `}\n      </div>\n      <div class="lp-testimonial-list-content">\n        <div class="lp-testimonial-list-header">\n          <p class="lp-testimonial-name">${i(e||"匿名")}</p>\n          ${s||o?`\n            <p class="lp-testimonial-role">\n              ${o?i(o):""}${o&&s?" / ":""}${s?i(s):""}\n            </p>\n          `:""}\n          ${c?`<p class="lp-testimonial-years">勤続${i(c)}</p>`:""}\n        </div>\n        <p class="lp-testimonial-quote">${i(a||"")}</p>\n      </div>\n    </div>\n  `}(t,n)).join("")}\n        </div>\n      </div>\n    </section>\n  `}function I(t,n,e){return`\n    <section class="lp-testimonial lp-testimonial-slider" data-section-id="${t}">\n      <div class="lp-section-inner">\n        <h2 class="lp-section-title">${i(n)}</h2>\n        <div class="lp-testimonial-slider-container">\n          <div class="lp-testimonial-slider-track">\n            ${e.map((t,n)=>function(t,n){const{name:e,role:s,department:o,quote:a,avatar:l,yearsWorked:c}=t;return`\n    <div class="lp-testimonial-slide ${0===n?"active":""}" data-index="${n}">\n      <div class="lp-testimonial-slide-inner">\n        <div class="lp-testimonial-quote-mark">"</div>\n        <p class="lp-testimonial-quote">${i(a||"")}</p>\n        <div class="lp-testimonial-author">\n          ${l?`\n            <div class="lp-testimonial-avatar">\n              <img src="${i(l)}" alt="${i(e||"")}">\n            </div>\n          `:`\n            <div class="lp-testimonial-avatar lp-testimonial-avatar-placeholder">\n              <span>${D(e)}</span>\n            </div>\n          `}\n          <div class="lp-testimonial-info">\n            <p class="lp-testimonial-name">${i(e||"匿名")}</p>\n            ${s||o?`\n              <p class="lp-testimonial-role">\n                ${o?i(o):""}${o&&s?" / ":""}${s?i(s):""}\n              </p>\n            `:""}\n            ${c?`<p class="lp-testimonial-years">勤続${i(c)}</p>`:""}\n          </div>\n        </div>\n      </div>\n    </div>\n  `}(t,n)).join("")}\n          </div>\n          <button class="lp-testimonial-slider-prev" aria-label="前へ">&#10094;</button>\n          <button class="lp-testimonial-slider-next" aria-label="次へ">&#10095;</button>\n        </div>\n        <div class="lp-testimonial-slider-dots">\n          ${e.map((t,n)=>`<button class="lp-testimonial-dot ${0===n?"active":""}" data-index="${n}" aria-label="社員${n+1}"></button>`).join("")}\n        </div>\n      </div>\n    </section>\n  `}function D(t){if(!t)return"?";const n=t.split(/[\s　]+/);return n.length>=2?(n[0][0]+n[1][0]).toUpperCase():t.substring(0,2)}class T{constructor(){this.sectionRenderers={hero:n,points:t,jobs:c,details:r,faq:d,apply:p,custom:m,gallery:w,testimonial:j},this.defaultOrder=["hero","points","jobs","details","faq","apply"]}render(t,n,e,i){const s=`lp-pattern-${e.designPattern||t.designPattern||"standard"}`;document.body.classList.add(s);const o=`lp-layout-${e.layoutStyle||"default"}`;document.body.classList.add(o),i&&i.classList.add(o);const a=n.length>0?n[0]:t,l=this.parseLPContent(e);l&&"2.0"===l.version?this.renderV2Sections(l,t,a,n,i):this.renderLegacySections(t,a,n,e,i)}parseLPContent(t){var n;if(!t.lpContent)return null;try{const e="string"==typeof t.lpContent?JSON.parse(t.lpContent):t.lpContent;if("2.0"===e.version&&t.faq){const i=this.parseLegacyFAQ(t.faq),s=null==(n=e.sections)?void 0:n.find(t=>"faq"===t.type);s&&(s.data=s.data||{},s.data.items=i,s.visible=i.length>0)}return e}catch(e){return console.error("lpContent parse error:",e),null}}parseLegacyFAQ(t){if(!t)return[];const n=[],e=t.replace(/\\n/g,"\n").split(/\|\||[\n\r]+/).filter(t=>t.trim());for(const i of e){const t=i.match(/Q[:：](.+?)(?=\|A[:：]|$)/i),e=i.match(/A[:：](.+)/i);t&&e&&n.push({id:`faq-${n.length+1}`,question:t[1].trim(),answer:e[1].trim()})}return n}renderV2Sections(t,n,e,i,s){const{sections:o,globalSettings:a}=t,l=o.filter(t=>!1!==t.visible).sort((t,n)=>(t.order||0)-(n.order||0)),c={company:n,mainJob:e,jobs:i,globalSettings:a||{}};s.innerHTML=l.map(t=>this.renderV2Section(t,c)).join("")}renderV2Section(t,n){var e,i,s,o;const a=this.sectionRenderers[t.type];if(!a)return console.warn(`Unknown section type: ${t.type}`),"";try{switch(t.type){case"hero":return a(n.company,n.mainJob,{heroTitle:null==(e=t.data)?void 0:e.title,heroSubtitle:null==(i=t.data)?void 0:i.subtitle,heroImage:null==(s=t.data)?void 0:s.image,...n.globalSettings});case"points":const l=this.convertPointsToLegacy(t.data,n.globalSettings);return a(n.company,n.mainJob,l);case"jobs":return a(n.company,n.jobs);case"details":return a(n.company,n.mainJob);case"faq":const c=this.convertFAQToLegacy(null==(o=t.data)?void 0:o.items);return c?a(c):"";case"apply":return a(n.company,n.globalSettings);case"custom":case"gallery":case"testimonial":return a(t,n);default:return""}}catch(l){return console.error(`Error rendering section ${t.type}:`,l),""}}convertPointsToLegacy(t,n){const e={...n};return(null==t?void 0:t.points)&&t.points.forEach((t,n)=>{e[`pointTitle${n+1}`]=t.title||"",e[`pointDesc${n+1}`]=t.description||""}),e}convertFAQToLegacy(t){return t&&0!==t.length?t.map(t=>`Q:${t.question}|A:${t.answer}`).join("||"):""}renderLegacySections(t,n,e,i,s){const o=this.parseSectionVisibility(i.sectionVisibility),a=this.parseSectionOrder(i.sectionOrder),l=i.layoutStyle||"default";s.innerHTML=a.map(s=>this.renderLegacySection(s,t,n,e,i,o,l)).join("")}renderLegacySection(t,n,e,i,s,o,a){switch(t){case"hero":return this.sectionRenderers.hero(n,e,s,a);case"points":return o.points?this.sectionRenderers.points(n,e,s,a):"";case"jobs":return o.jobs?this.sectionRenderers.jobs(n,i,a):"";case"details":return o.details?this.sectionRenderers.details(n,e,a):"";case"faq":return o.faq&&s.faq?this.sectionRenderers.faq(s.faq,a):"";case"apply":return this.sectionRenderers.apply(n,s,a);default:return""}}parseSectionVisibility(t){const n={points:!0,jobs:!0,details:!0,faq:!0};if(!t)return n;try{return{...n,...JSON.parse(t)}}catch(e){return console.error("セクション表示設定のパースエラー:",e),n}}parseSectionOrder(t){if(!t)return this.defaultOrder;const n=t.split(",").map(t=>t.trim()).filter(t=>t);if(0===n.length)return this.defaultOrder;const e=this.defaultOrder.filter(t=>!n.includes(t));return[...n,...e]}}const _=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];function x(t){const n=[];let e="",i=!1;for(let s=0;s<t.length;s++){const o=t[s];if('"'===o)'"'===t[s+1]?(e+='""',s++):(i=!i,e+=o);else if("\n"!==o||i){if("\r"===o)continue;e+=o}else e.trim()&&n.push(e),e=""}return e.trim()&&n.push(e),n}class A{constructor(){this.renderer=new T,this.editor=new e,this.isEditMode=o("edit"),this.jobId=null,this.companyDomain=null,this.utmParams={},this.lpSettings=null,this.company=null,this.mainJob=null}async init(){var t,n,e;if(this.jobId=this.getJobId(),this.companyDomain=this.getCompanyDomain(),this.jobId||this.companyDomain){this.captureUTMParams();try{await this.waitForJobsLoader();const i=await window.JobsLoader.fetchCompanies();if(this.jobId){const[t,n]=this.jobId.split("_");if(this.company=null==i?void 0:i.find(n=>{var e;return(null==(e=n.companyDomain)?void 0:e.trim())===t&&window.JobsLoader.isCompanyVisible(n)}),console.log("[LP] 会社データ:",this.company),console.log("[LP] 会社データのキー:",this.company?Object.keys(this.company):[]),!this.company)return void this.showError("指定された会社は見つかりませんでした。");const e=await this.fetchJobs(this.company);if(this.mainJob=e.find(e=>{const i=e.jobId||e["求人ID"]||e.id||"";if(i===n||`${t}_${i}`===this.jobId)return!0;if(n.startsWith("job-")){if(i===n.replace("job-",""))return!0}return!1}),!this.mainJob)return void this.showError("指定された求人は見つかりませんでした。");this.lpSettings=await this.fetchLPSettings(this.jobId)||{},this.lpSettings=this.loadPreviewSettings(this.jobId,this.lpSettings)}else{if(this.company=null==i?void 0:i.find(t=>{var n;return(null==(n=t.companyDomain)?void 0:n.trim())===this.companyDomain&&window.JobsLoader.isCompanyVisible(t)}),!this.company)return void this.showError("指定された会社は見つかりませんでした。");this.lpSettings=await this.fetchLPSettingsLegacy(this.companyDomain)||{},this.lpSettings=this.loadPreviewSettings(this.companyDomain,this.lpSettings)}const s=a("layoutStyle");s&&(this.lpSettings.layoutStyle=s);const o=await this.fetchJobs(this.company);this.setupAdTracking(this.lpSettings),this.hideLoading();const l=document.getElementById("lp-content");if(l){const t=this.mainJob?[this.mainJob,...o.filter(t=>t!==this.mainJob)]:o;this.renderer.render(this.company,t,this.lpSettings,l),this.setupEventListeners(this.company)}if(this.isEditMode){const i={company:(null==(t=this.company)?void 0:t.company)||"",companyDomain:(null==(n=this.company)?void 0:n.companyDomain)||"",title:(null==(e=this.mainJob)?void 0:e.title)||""};this.editor.enable(this.lpSettings,this.jobId||this.companyDomain,i,this.company,this.mainJob)}this.updateSEO(this.company,this.mainJob?[this.mainJob]:o,this.lpSettings),this.isEditMode||this.trackPageView(this.company)}catch(i){console.error("LP読み込みエラー:",i),this.showError("ページの読み込みに失敗しました。")}}else this.showError("求人または会社が指定されていません。")}getJobId(){return a("j")||a("job")||null}getCompanyDomain(){return a("c")||a("id")||null}async waitForJobsLoader(t=1e4){return void 0!==window.JobsLoader?window.JobsLoader:new Promise((n,e)=>{const i=Date.now(),s=setInterval(()=>{void 0!==window.JobsLoader?(clearInterval(s),n(window.JobsLoader)):Date.now()-i>t&&(clearInterval(s),e(new Error("JobsLoader timeout")))},100)})}async fetchJobs(t){var n;const e=null==(n=t.jobsSheet)?void 0:n.trim();if(!e)return[];const i=await window.JobsLoader.fetchCompanyJobs(e);return(null==i?void 0:i.length)?i.filter(t=>"false"!==t.visible&&"FALSE"!==t.visible).filter(t=>window.JobsLoader.isJobInPublishPeriod(t)).sort((t,n)=>(parseInt(t.order)||999)-(parseInt(n.order)||999)).map(n=>({...n,company:t.company,companyDomain:t.companyDomain})):[]}async fetchLPSettings(t){var n,e,i,s;try{const o=(null==(n=this.company)?void 0:n.manageSheetUrl)||(null==(e=this.company)?void 0:e.jobsSheet);if(console.log("[LP] 管理シートURL:",o),console.log("[LP] 会社データのmanageSheetUrl:",null==(i=this.company)?void 0:i.manageSheetUrl),console.log("[LP] 会社データのjobsSheet:",null==(s=this.company)?void 0:s.jobsSheet),!o)return console.log("[LP] 管理シートURLが見つかりません"),null;const a=window.JobsLoader.extractSpreadsheetId(o);if(!a)return console.log("[LP] 管理シートIDを抽出できません"),null;console.log("[LP] 管理シートID:",a);const l=`https://docs.google.com/spreadsheets/d/${a}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent("LP設定")}`;console.log("[LP] LP設定シートURL:",l);const c=await fetch(l);if(console.log("[LP] レスポンスステータス:",c.status),!c.ok)return console.log("[LP] LP設定シートが見つかりません（デフォルト設定を使用）"),null;const r=x(await c.text());console.log("[LP] CSV取得成功, 行数:",r.length);const d=window.JobsLoader.parseCSVLine(r[0]||"");console.log("[LP] ヘッダー:",d);for(let n=1;n<r.length;n++){if(!r[n].trim())continue;const e=window.JobsLoader.parseCSVLine(r[n]),i={};d.forEach((t,n)=>{i[t.replace(/"/g,"").trim()]=e[n]||""});const s=i.jobId||i["求人ID"]||"";if(console.log("[LP] 行",n,"のjobId:",s,"検索中:",t),s===t)return console.log("[LP] LP設定を発見:",i),this.parseLPSettingsRow(i)}console.log("[LP] 該当するjobIdが見つかりませんでした")}catch(o){console.log("[LP] LP設定取得エラー:",o.message)}return null}async fetchLPSettingsLegacy(t){var n,e;try{const i=(null==(n=this.company)?void 0:n.manageSheetUrl)||(null==(e=this.company)?void 0:e.jobsSheet);if(console.log("[LP Legacy] 管理シートURL:",i),!i)return console.log("[LP Legacy] 管理シートURLが見つかりません"),null;const s=window.JobsLoader.extractSpreadsheetId(i);if(!s)return console.log("[LP Legacy] 管理シートIDを抽出できません"),null;const o=`https://docs.google.com/spreadsheets/d/${s}/gviz/tq?tqx=out:csv&sheet=${encodeURIComponent("LP設定")}`,a=await fetch(o);if(!a.ok)return console.log("[LP Legacy] LP設定シートが見つかりません（デフォルト設定を使用）"),null;const l=x(await a.text()),c=window.JobsLoader.parseCSVLine(l[0]||"");for(let n=1;n<l.length;n++){if(!l[n].trim())continue;const e=window.JobsLoader.parseCSVLine(l[n]),i={};if(c.forEach((t,n)=>{i[t.replace(/"/g,"").trim()]=e[n]||""}),i.companyDomain===t||i["会社ドメイン"]===t)return this.parseLPSettingsRow(i)}}catch(i){console.log("LP設定取得エラー:",i.message)}return null}parseLPSettingsRow(t){return{heroTitle:t.heroTitle||t["ヒーロータイトル"]||"",heroSubtitle:t.heroSubtitle||t["ヒーローサブタイトル"]||"",heroImage:t.heroImage||t["ヒーロー画像"]||"",ctaText:t.ctaText||t["CTAテキスト"]||"この求人に応募する",pointTitle1:t.pointTitle1||t["ポイント1タイトル"]||"",pointDesc1:t.pointDesc1||t["ポイント1説明"]||"",pointTitle2:t.pointTitle2||t["ポイント2タイトル"]||"",pointDesc2:t.pointDesc2||t["ポイント2説明"]||"",pointTitle3:t.pointTitle3||t["ポイント3タイトル"]||"",pointDesc3:t.pointDesc3||t["ポイント3説明"]||"",pointTitle4:t.pointTitle4||t["ポイント4タイトル"]||"",pointDesc4:t.pointDesc4||t["ポイント4説明"]||"",pointTitle5:t.pointTitle5||t["ポイント5タイトル"]||"",pointDesc5:t.pointDesc5||t["ポイント5説明"]||"",pointTitle6:t.pointTitle6||t["ポイント6タイトル"]||"",pointDesc6:t.pointDesc6||t["ポイント6説明"]||"",faq:t.faq||t.FAQ||"",designPattern:t.designPattern||t["デザインパターン"]||"standard",layoutStyle:t.layoutStyle||t["レイアウトスタイル"]||"default",sectionOrder:t.sectionOrder||t["セクション順序"]||"",sectionVisibility:t.sectionVisibility||t["セクション表示"]||"",tiktokPixelId:t.tiktokPixelId||t["TikTok Pixel ID"]||"",googleAdsId:t.googleAdsId||t["Google Ads ID"]||"",googleAdsLabel:t.googleAdsLabel||t["Google Ads ラベル"]||"",ogpTitle:t.ogpTitle||t["OGPタイトル"]||"",ogpDescription:t.ogpDescription||t["OGP説明文"]||"",ogpImage:t.ogpImage||t["OGP画像"]||"",lpContent:t.lpContent||t["LP構成"]||""}}loadPreviewSettings(t,n){if(!o("preview"))return n;const e=`lp_preview_${t}`,i=sessionStorage.getItem(e);if(!i)return console.log("[LP] プレビューデータが見つかりません"),n;try{const t=JSON.parse(i),s=3e5;return Date.now()-t.timestamp>s?(console.log("[LP] プレビューデータが古いため破棄"),sessionStorage.removeItem(e),n):(console.log("[LP] プレビューモード: 編集中のデータを使用",t.lpSettings),this.showPreviewBanner(),t.lpSettings)}catch(s){return console.error("[LP] プレビューデータの読み込みエラー:",s),n}}showPreviewBanner(){const t=document.createElement("div");t.className="lp-preview-banner",t.innerHTML='\n      <span>プレビューモード - 保存されていない変更を表示中</span>\n      <button type="button" onclick="this.parentElement.remove()">✕</button>\n    ',document.body.insertBefore(t,document.body.firstChild)}hideLoading(){const t=document.getElementById("lp-loading");t&&(t.style.display="none")}showError(t){this.hideLoading();const n=document.getElementById("lp-content");n&&(n.innerHTML=`\n        <div class="lp-error">\n          <p>${t}</p>\n          <a href="/" class="lp-btn-back">トップページへ戻る</a>\n        </div>\n      `)}setupEventListeners(t){document.querySelectorAll(".lp-faq-question").forEach(t=>{t.addEventListener("click",()=>{const n="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!n);const e=t.getAttribute("aria-controls"),i=document.getElementById(e);i&&i.classList.toggle("open",!n)})}),document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",n=>{const e=t.getAttribute("href");if("#"===e)return;const i=document.querySelector(e);i&&(n.preventDefault(),i.scrollIntoView({behavior:"smooth",block:"start"}))})}),document.querySelectorAll(".lp-btn-apply-hero, .lp-btn-apply-main, .lp-btn-apply-footer, .lp-btn-apply-header").forEach(n=>{n.addEventListener("click",()=>{const e=n.classList.contains("lp-btn-apply-hero")?"hero":n.classList.contains("lp-btn-apply-main")?"main":n.classList.contains("lp-btn-apply-header")?"header":"footer";l("lp_apply_click",{company_domain:t.companyDomain,company_name:t.company,button_location:e,...this.utmParams}),this.trackConversion("SubmitForm",{content_name:t.company,content_category:"job_application",button_location:e,...this.utmParams})})}),document.querySelectorAll(".lp-btn-tel-header, .lp-btn-tel-footer").forEach(n=>{n.addEventListener("click",()=>{const e=n.classList.contains("lp-btn-tel-header")?"header":"footer";l("lp_tel_click",{company_domain:t.companyDomain,company_name:t.company,button_location:e,...this.utmParams}),this.trackConversion("Contact",{content_name:t.company,content_category:"phone_call",button_location:e,...this.utmParams})})})}updateSEO(t,n,e={}){const i=e.ogpTitle||e.heroTitle||"",s=e.ogpDescription||"",o=e.ogpImage||e.heroImage||"",a=i?`${i} | ${t.company}`:`${t.company} 求人情報 | リクエコ求人ナビ`,l=s||(n.length>0?`${t.company}の求人情報。${n[0].title}など${n.length}件の募集中。`:`${t.company}の求人情報ページです。`);document.title=a;const c=document.querySelector('meta[name="description"]');c&&(c.content=l);const r=document.querySelector('meta[property="og:title"]');r&&(r.content=a);const d=document.querySelector('meta[property="og:description"]');if(d&&(d.content=l),o){let t=document.querySelector('meta[property="og:image"]');t||(t=document.createElement("meta"),t.setAttribute("property","og:image"),document.head.appendChild(t)),t.content=o;let n=document.querySelector('meta[name="twitter:image"]');n||(n=document.createElement("meta"),n.setAttribute("name","twitter:image"),document.head.appendChild(n)),n.content=o}let p=document.querySelector('meta[property="og:url"]');p||(p=document.createElement("meta"),p.setAttribute("property","og:url"),document.head.appendChild(p)),p.content=`${window.location.origin}${window.location.pathname}?c=${this.companyDomain}`;let m=document.querySelector('meta[name="twitter:card"]');m||(m=document.createElement("meta"),m.setAttribute("name","twitter:card"),document.head.appendChild(m)),m.content="summary_large_image"}captureUTMParams(){const t=new URLSearchParams(window.location.search);_.forEach(n=>{const e=t.get(n);e&&(this.utmParams[n]=e)});const n=this.jobId?`utm_params_job_${this.jobId}`:`utm_params_${this.companyDomain}`;if(Object.keys(this.utmParams).length>0)sessionStorage.setItem(n,JSON.stringify(this.utmParams)),console.log("[LP] UTM params captured:",this.utmParams);else{const t=sessionStorage.getItem(n);if(t)try{this.utmParams=JSON.parse(t)}catch(e){}}}setupAdTracking(t){t.tiktokPixelId&&this.initTikTokPixel(t.tiktokPixelId),t.googleAdsId&&this.initGoogleAds(t.googleAdsId)}initTikTokPixel(t){t&&!window.ttq&&(!function(n,e,i){n.TiktokAnalyticsObject=i;var s=n[i]=n[i]||[];s.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],s.setAndDefer=function(t,n){t[n]=function(){t.push([n].concat(Array.prototype.slice.call(arguments,0)))}};for(var o=0;o<s.methods.length;o++)s.setAndDefer(s,s.methods[o]);s.instance=function(t){for(var n=s._i[t]||[],e=0;e<s.methods.length;e++)s.setAndDefer(n,s.methods[e]);return n},s.load=function(t,n){var e="https://analytics.tiktok.com/i18n/pixel/events.js";s._i=s._i||{},s._i[t]=[],s._i[t]._u=e,s._t=s._t||{},s._t[t]=+new Date,s._o=s._o||{},s._o[t]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=e+"?sdkid="+t+"&lib="+i;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)},s.load(t),s.page()}(window,document,"ttq"),console.log("[LP] TikTok Pixel initialized:",t))}initGoogleAds(t){if(!t)return;if("function"==typeof gtag)return gtag("config",t),void console.log("[LP] Google Ads configured:",t);const n=document.createElement("script");n.async=!0,n.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(n),n.onload=()=>{function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],window.gtag=n,n("js",new Date),n("config",t),console.log("[LP] Google Ads initialized:",t)}}trackConversion(t,n={}){var e,i;window.ttq&&(window.ttq.track(t,n),console.log("[LP] TikTok event tracked:",t,n)),(null==(e=this.lpSettings)?void 0:e.googleAdsId)&&(null==(i=this.lpSettings)?void 0:i.googleAdsLabel)&&"function"==typeof gtag&&(gtag("event","conversion",{send_to:`${this.lpSettings.googleAdsId}/${this.lpSettings.googleAdsLabel}`,...n}),console.log("[LP] Google Ads conversion tracked:",this.lpSettings.googleAdsId))}trackPageView(t){l("lp_view",{company_domain:t.companyDomain,company_name:t.company,...this.utmParams}),window.ttq&&window.ttq.track("ViewContent",{content_name:t.company,content_category:"company_lp"})}}document.addEventListener("DOMContentLoaded",()=>{(new A).init()});
