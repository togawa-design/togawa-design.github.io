function t(t){if(!t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}function e(t,e=["b","strong","i","em","u","ul","ol","li","br","div","p"]){if(!t||"<br>"===t||"<div><br></div>"===t)return"";const n=document.createElement("div");n.innerHTML=t;return n.querySelectorAll("*").forEach(t=>{if(e.includes(t.tagName.toLowerCase()))for(;t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);else t.replaceWith(...t.childNodes)}),n.innerHTML}function n(e){return e?t(e).replace(/\n/g,"<br>"):""}function o(t,e=null){return new URLSearchParams(window.location.search).get(t)??e}function r(t,e){const n=new URL(window.location.href);e?n.searchParams.set(t,e):n.searchParams.delete(t),window.history.pushState({},"",n.toString())}function i(t){return new URLSearchParams(window.location.search).has(t)}function s(t,e=5e3,n=50){return new Promise((o,r)=>{if(void 0!==window[t])return void o(window[t]);const i=Date.now(),s=setInterval(()=>{void 0!==window[t]?(clearInterval(s),o(window[t])):Date.now()-i>e&&(clearInterval(s),r(new Error(`Timeout waiting for ${t}`)))},n)})}async function a(t=1e4){return void 0!==window.JobsLoader?window.JobsLoader:s("JobsLoader",t,100)}function c(e="読み込んでいます...",n="しばらくお待ちください"){return`\n    <div class="loading-container">\n      <div class="loading-inner">\n        <div class="loading-spinner large"></div>\n        <p class="loading-text">${t(e)}</p>\n        ${n?`<p class="loading-subtext">${t(n)}</p>`:""}\n      </div>\n    </div>\n  `}function l(t,e,n){const o="string"==typeof t?document.getElementById(t):t;o&&(o.innerHTML=c(e,n))}function u(e,n="トップページへ戻る",o="/"){return`\n    <div class="error-container">\n      <p class="error-message">${t(e)}</p>\n      <a href="${t(o)}" class="btn-back">${t(n)}</a>\n    </div>\n  `}function d(t,e,n,o){const r="string"==typeof t?document.getElementById(t):t;r&&(r.innerHTML=u(e,n,o))}function m(t="modal"){const e=document.querySelector(`.${t}`);e&&(e.classList.remove("active"),setTimeout(()=>e.remove(),300))}function f(e,n="info"){const o=document.querySelector(".utils-toast");o&&o.remove();const r=document.createElement("div");if(r.className=`utils-toast utils-toast-${n}`,r.innerHTML=`\n    <span class="utils-toast-icon">${"success"===n?"✓":"error"===n?"✕":"ℹ"}</span>\n    <span class="utils-toast-message">${t(e)}</span>\n  `,!document.getElementById("utils-toast-style")){const t=document.createElement("style");t.id="utils-toast-style",t.textContent="\n      .utils-toast {\n        position: fixed;\n        bottom: 2rem;\n        left: 50%;\n        transform: translateX(-50%);\n        padding: 1rem 1.5rem;\n        border-radius: 0.5rem;\n        background: #333;\n        color: #fff;\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        z-index: 10000;\n        animation: utils-toast-in 0.3s ease;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      }\n      .utils-toast-success { background: #10b981; }\n      .utils-toast-error { background: #ef4444; }\n      .utils-toast-info { background: #3b82f6; }\n      .utils-toast-hide { animation: utils-toast-out 0.3s ease forwards; }\n      @keyframes utils-toast-in { from { opacity: 0; transform: translateX(-50%) translateY(1rem); } to { opacity: 1; transform: translateX(-50%) translateY(0); } }\n      @keyframes utils-toast-out { from { opacity: 1; } to { opacity: 0; } }\n    ",document.head.appendChild(t)}document.body.appendChild(r),setTimeout(()=>{r.classList.add("utils-toast-hide"),setTimeout(()=>r.remove(),300)},3e3)}function g(e,n){return new Promise(o=>{const r=document.createElement("div");if(r.className="utils-confirm-overlay",r.innerHTML=`\n      <div class="utils-confirm-dialog">\n        <h3 class="utils-confirm-title">${t(e)}</h3>\n        <p class="utils-confirm-message">${t(n)}</p>\n        <div class="utils-confirm-buttons">\n          <button type="button" class="utils-confirm-cancel">キャンセル</button>\n          <button type="button" class="utils-confirm-ok">OK</button>\n        </div>\n      </div>\n    `,!document.getElementById("utils-confirm-style")){const t=document.createElement("style");t.id="utils-confirm-style",t.textContent="\n        .utils-confirm-overlay {\n          position: fixed; top: 0; left: 0; right: 0; bottom: 0;\n          background: rgba(0,0,0,0.5); display: flex; align-items: center;\n          justify-content: center; z-index: 10001;\n        }\n        .utils-confirm-dialog {\n          background: #fff; border-radius: 0.5rem; padding: 1.5rem;\n          max-width: 400px; width: 90%;\n        }\n        .utils-confirm-title { margin: 0 0 0.5rem; font-size: 1.1rem; }\n        .utils-confirm-message { margin: 0 0 1.5rem; color: #666; }\n        .utils-confirm-buttons { display: flex; gap: 0.5rem; justify-content: flex-end; }\n        .utils-confirm-cancel, .utils-confirm-ok {\n          padding: 0.5rem 1rem; border-radius: 0.25rem; cursor: pointer;\n          border: none; font-size: 0.9rem;\n        }\n        .utils-confirm-cancel { background: #e5e7eb; color: #374151; }\n        .utils-confirm-ok { background: #6366f1; color: #fff; }\n      ",document.head.appendChild(t)}r.querySelector(".utils-confirm-cancel").addEventListener("click",()=>{r.remove(),o(!1)}),r.querySelector(".utils-confirm-ok").addEventListener("click",()=>{r.remove(),o(!0)}),document.body.appendChild(r)})}function p(t){if(!t)return null;const e=t.trim().replace(/\//g,"-"),n=new Date(e);return isNaN(n.getTime())?null:(n.setHours(0,0,0,0),n)}function w(t,e={}){const n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||i("debug_mode");n&&console.log("[Analytics]",t,e),"function"==typeof gtag?(gtag("event",t,e),n&&console.log("[Analytics] gtag sent successfully")):n&&console.warn("[Analytics] gtag is not defined, event not sent:",t)}function v(t){return t||0===t?Number(t).toLocaleString():""}function y(t,e=0){const n="string"==typeof t?document.querySelector(t):t;if(!n)return;const o=n.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:o,behavior:"smooth"})}const b={escapeHtml:t,sanitizeHtml:e,nl2br:n,getUrlParam:o,setUrlParam:r,removeUrlParam:function(t){r(t,null)},hasUrlParam:i,waitForGlobal:s,waitForJobsLoader:a,waitUntil:function(t,e=5e3,n=50){return new Promise((o,r)=>{if(t())return void o();const i=Date.now(),s=setInterval(()=>{t()?(clearInterval(s),o()):Date.now()-i>e&&(clearInterval(s),r(new Error("Timeout waiting for condition")))},n)})},createLoadingHtml:c,showLoading:l,createErrorHtml:u,showError:d,showModal:function({className:e="modal",title:n="",content:o="",onClose:r=null}){m(e);const i=document.createElement("div");i.className=e,i.innerHTML=`\n    <div class="${e}-overlay"></div>\n    <div class="${e}-content">\n      <button class="${e}-close">&times;</button>\n      ${n?`<h3>${t(n)}</h3>`:""}\n      <div class="${e}-body">${o}</div>\n    </div>\n  `,document.body.appendChild(i),requestAnimationFrame(()=>{i.classList.add("active")});const s=()=>{i.classList.remove("active"),setTimeout(()=>{i.remove(),r&&r()},300)};i.querySelector(`.${e}-close`).addEventListener("click",s),i.querySelector(`.${e}-overlay`).addEventListener("click",s);const a=t=>{"Escape"===t.key&&(s(),document.removeEventListener("keydown",a))};return document.addEventListener("keydown",a),i},closeModal:m,parseDate:p,formatDate:function(t,e="YYYY-MM-DD"){const n="string"==typeof t?p(t):t;if(!n)return"";const o=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return e.replace("YYYY",o).replace("MM",r).replace("DD",i)},getToday:function(){const t=new Date;return t.setHours(0,0,0,0),t},trackEvent:w,trackPageView:function(t,e={}){w("page_view",{page_name:t,page_location:window.location.href,page_title:document.title,...e})},getStorage:function(t,e=null){try{const n=localStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return e}},setStorage:function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Failed to save to localStorage:",n)}},getSession:function(t,e=null){try{const n=sessionStorage.getItem(t);return n?JSON.parse(n):e}catch(n){return e}},setSession:function(t,e){try{sessionStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Failed to save to sessionStorage:",n)}},formatNumber:v,parseSalary:function(t){if(!t)return 0;const e=t.match(/(\d+(?:\.\d+)?)\s*万/);if(e)return 1e4*parseFloat(e[1]);const n=t.match(/(\d{1,3}(?:,\d{3})*)\s*円/);if(n)return parseInt(n[1].replace(/,/g,""));const o=t.match(/[¥￥]\s*(\d{1,3}(?:,\d{3})*|\d+)/);if(o)return parseInt(o[1].replace(/,/g,""));const r=t.match(/(\d{1,3}(?:,\d{3})*|\d+)/);return r?parseInt(r[1].replace(/,/g,"")):0},truncate:function(t,e=100,n="..."){return!t||t.length<=e?t||"":t.substring(0,e)+n},unique:function(t,e=null){if(e){const n=new Set;return t.filter(t=>{const o=t[e];return!n.has(o)&&(n.add(o),!0)})}return[...new Set(t)]},debounce:function(t,e=300){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...o)},e)}},throttle:function(t,e=300){let n;return function(...o){n||(t(...o),n=!0,setTimeout(()=>n=!1,e))}},scrollTo:y,initSmoothScroll:function(t=0){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",n=>{const o=e.getAttribute("href");if("#"===o)return;const r=document.querySelector(o);r&&(n.preventDefault(),y(r,t))})})}};"undefined"!=typeof window&&(window.RikuekoUtils=b,window.Utils=b);export{g as a,f as b,d as c,l as d,t as e,v as f,o as g,i as h,n,e as s,w as t,a as w};
