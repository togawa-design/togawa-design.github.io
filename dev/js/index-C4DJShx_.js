import{e}from"./utils-BbQaLTsI.js";import{j as n,f as t,i as o,c as a,b as c,d as i,k as s,e as l}from"./jobs-loader-Perrv3gz.js";import{L as r,J as d,b as u}from"./index-BdtvlSUd.js";function m(){const e=document.querySelectorAll(".search-card"),n=document.querySelectorAll(".search-panel");e.forEach(t=>{t.addEventListener("click",function(){const t=this.dataset.method;e.forEach(e=>e.classList.remove("active")),n.forEach(e=>e.classList.remove("active")),this.classList.add("active");const o=document.getElementById("panel-"+t);o&&o.classList.add("active"),"location"===t&&async function(){const e=document.querySelector(".location-modal");e&&e.remove();const n=document.createElement("div");n.className="location-modal",n.innerHTML=`\n    <div class="location-modal-overlay"></div>\n    <div class="location-modal-content">\n      <button class="location-modal-close">&times;</button>\n      <h3>å‹¤å‹™åœ°ã‹ã‚‰æ¢ã™</h3>\n      <p>åƒããŸã„ã‚¨ãƒªã‚¢ã‚’é¸æŠã—ã¦ãã ã•ã„</p>\n      <div class="location-list">\n        ${r({message:"å‹¤å‹™åœ°ã‚’èª­ã¿è¾¼ã¿ä¸­..."})}\n      </div>\n    </div>\n  `,document.body.appendChild(n),requestAnimationFrame(()=>{n.classList.add("active")});const t=()=>{n.classList.remove("active"),setTimeout(()=>n.remove(),300)};n.querySelector(".location-modal-close").addEventListener("click",t),n.querySelector(".location-modal-overlay").addEventListener("click",t);try{const e=await l(),o=n.querySelector(".location-list");if(0===e.length)return void(o.innerHTML='<p class="no-data">å‹¤å‹™åœ°ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>');o.innerHTML=e.map(e=>u({location:e})).join(""),o.querySelectorAll(".location-item").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault();const o=e.dataset.prefecture;t(),window.location.href=`location.html?prefecture=${encodeURIComponent(o)}`})})}catch(o){console.error("å‹¤å‹™åœ°ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",o),n.querySelector(".location-list").innerHTML='<p class="error">å‹¤å‹™åœ°ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</p>'}}(),"occupation"===t&&function(){const e=document.querySelector(".occupation-modal");e&&e.remove();const n=[{id:"office",name:"äº‹å‹™ãƒ»ç®¡ç†ãƒ»ä¼ç”»",icon:"ğŸ’¼"},{id:"sales",name:"å–¶æ¥­ãƒ»è²©å£²ãƒ»ã‚µãƒ¼ãƒ“ã‚¹",icon:"ğŸ¤"},{id:"it",name:"ITãƒ»ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–",icon:"ğŸ’»"},{id:"manufacturing",name:"è£½é€ ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°",icon:"ğŸ”§"},{id:"medical",name:"åŒ»ç™‚ãƒ»ç¦ç¥‰ãƒ»æ•™è‚²",icon:"ğŸ¥"},{id:"logistics",name:"ç‰©æµãƒ»é‹è¼¸",icon:"ğŸšš"},{id:"other",name:"ãã®ä»–",icon:"ğŸ“‹"}],t=document.createElement("div");t.className="occupation-modal",t.innerHTML=`\n    <div class="occupation-modal-overlay"></div>\n    <div class="occupation-modal-content">\n      <button class="occupation-modal-close">&times;</button>\n      <h3>è·ç¨®ã‹ã‚‰æ¢ã™</h3>\n      <p>å¸Œæœ›ã®è·ç¨®ã‚’é¸æŠã—ã¦ãã ã•ã„</p>\n      <div class="occupation-list">\n        ${n.map(e=>`\n          <a href="jobs.html?occupation=${encodeURIComponent(e.name)}" class="occupation-item" data-occupation="${e.id}">\n            <span class="occupation-icon">${e.icon}</span>\n            <span class="occupation-name">${e.name}</span>\n          </a>\n        `).join("")}\n      </div>\n    </div>\n  `,document.body.appendChild(t),requestAnimationFrame(()=>{t.classList.add("active")});const o=()=>{t.classList.remove("active"),setTimeout(()=>t.remove(),300)};t.querySelector(".occupation-modal-close").addEventListener("click",o),t.querySelector(".occupation-modal-overlay").addEventListener("click",o)}()})});const t=document.getElementById("keyword-search-form");t&&t.addEventListener("submit",function(e){var n,t;e.preventDefault();const o=null==(t=null==(n=document.getElementById("keyword-input"))?void 0:n.value)?void 0:t.trim();o&&(window.location.href=`jobs.html?keyword=${encodeURIComponent(o)}`)})}function f(){const e=document.querySelector(".mobile-menu-btn");if(!e)return;if(document.querySelector(".mobile-nav"))return;const n=document.createElement("nav");n.className="mobile-nav",n.innerHTML='\n    <ul>\n      <li><a href="#jobs">ãŠä»•äº‹ç´¹ä»‹</a></li>\n      <li><a href="#content">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a></li>\n      <li><a href="#about">å½“ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a></li>\n      <li><a href="#contact">ãŠå•ã„åˆã‚ã›</a></li>\n      <li><a href="admin.html">ç®¡ç†è€…</a></li>\n    </ul>\n  ';const t=document.querySelector(".header");t&&t.after(n),e.addEventListener("click",function(){this.classList.toggle("active"),n.classList.toggle("active")}),n.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{e.classList.remove("active"),n.classList.remove("active")})})}function v(){const e=document.querySelectorAll(".stat-number"),n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target,o=parseInt(t.dataset.value)||0;o>0&&function(e,n){const t=2e3,o=0,a=performance.now(),c=e.querySelector(".stat-value")||e;function i(e){const s=e-a,l=Math.min(s/t,1),r=1-Math.pow(1-l,3),d=Math.floor(o+(n-o)*r);c.textContent=d.toLocaleString(),l<1&&requestAnimationFrame(i)}requestAnimationFrame(i)}(t,o),n.unobserve(t)}})},{threshold:.5});e.forEach(e=>n.observe(e))}function p(){m(),f(),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){var n;const t=this.getAttribute("href");if("#"===t)return;const o=document.querySelector(t);if(o){e.preventDefault();const t=(null==(n=document.querySelector(".header"))?void 0:n.offsetHeight)||0,a=o.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:a,behavior:"smooth"})}})}),function(){const e=document.querySelector(".header");e&&window.addEventListener("scroll",()=>{window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")})}(),document.getElementById("jobs-container")&&async function(s="jobs-container"){const l=document.getElementById(s);if(!l)return;const u=new URLSearchParams(window.location.search).get("location");if(l.innerHTML=r({message:u?`${u}ã®æ±‚äººã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...`:"æ±‚äººæƒ…å ±ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™..."}),u){const t=await n(u);if(!t||0===t.length)return void(l.innerHTML=`\n        <div class="jobs-error">\n          <p>${e(u)}ã®æ±‚äººãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>\n          <a href="/" class="btn-more">ã™ã¹ã¦ã®æ±‚äººã‚’è¦‹ã‚‹</a>\n        </div>\n      `);const o=document.createElement("div");return o.className="location-filter-header",o.innerHTML=`\n      <div class="filter-info">\n        <span class="filter-label">${e(u)}ã®æ±‚äºº</span>\n        <span class="filter-count">${t.length}ä»¶</span>\n      </div>\n      <a href="/" class="btn-clear-filter">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’è§£é™¤</a>\n    `,l.before(o),void(l.innerHTML=t.map(e=>d({job:e,showCompanyName:!0})).join(""))}const m=await t();if(!m||0===m.length)return void(l.innerHTML='\n      <div class="jobs-error">\n        <p>æ±‚äººæƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚</p>\n        <button onclick="location.reload()">å†èª­ã¿è¾¼ã¿</button>\n      </div>\n    ');const f=m.filter(e=>o(e)).sort((e,n)=>(parseInt(e.order)||999)-(parseInt(n.order)||999)),v=await Promise.all(f.map(async e=>{if(e._displayTotalBonus="",e._displayMonthlySalary=e.monthlySalary||"",e.jobsSheet&&e.jobsSheet.trim()){const n=await a(e.jobsSheet.trim());if(n&&n.length>0){const t=n.filter(e=>"false"!==e.visible&&"FALSE"!==e.visible).filter(e=>c(e)).sort((e,n)=>(parseInt(e.order)||999)-(parseInt(n.order)||999));if(t.length>0){const n=t[0];e._displayTotalBonus=n.totalBonus||"";const o=i(t);o&&(e._displayMonthlySalary=o)}}}return e}));l.innerHTML=v.map(e=>d({job:e,linkToJobsList:!0})).join("")}(),document.querySelector(".hero-stats")&&async function(){const n=document.querySelector(".hero-stats");if(n)try{const t=await s();if(!t)return void console.warn("çµ±è¨ˆæƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ");const o=[{value:t.jobCount||0,label:"æ²è¼‰æ±‚äººæ•°",suffix:"ä»¶"},{value:t.avgHourlyWage||0,label:"å¹³å‡æ™‚çµ¦",suffix:"å††"},{value:t.avgMonthlySalary||0,label:"å¹³å‡æœˆå",suffix:"å††"}];n.innerHTML=o.map(n=>`\n      <div class="stat-item">\n        <span class="stat-number" data-value="${n.value}">\n          ${n.prefix?`<span class="stat-prefix">${n.prefix}</span>`:""}\n          <span class="stat-value">${n.value.toLocaleString()}</span>\n          ${n.suffix?`<span class="stat-suffix">${n.suffix}</span>`:""}\n        </span>\n        <span class="stat-label">${e(n.label)}</span>\n      </div>\n    `).join("")}catch(t){console.error("çµ±è¨ˆæƒ…å ±ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",t)}}(),document.getElementById("footer-locations")&&async function(){const n=document.getElementById("footer-locations");if(n)try{const t=(await l()).slice(0,4);if(0===t.length)return void(n.innerHTML='<li><a href="location.html">ã™ã¹ã¦ã®ã‚¨ãƒªã‚¢</a></li>');n.innerHTML=t.map(n=>`<li><a href="location.html?prefecture=${encodeURIComponent(n.prefecture)}">${e(n.prefecture)}ã®æ±‚äºº</a></li>`).join("")+'<li><a href="location.html">ã™ã¹ã¦ã®ã‚¨ãƒªã‚¢</a></li>'}catch(t){console.error("ãƒ•ãƒƒã‚¿ãƒ¼å‹¤å‹™åœ°ã®å–å¾—ã‚¨ãƒ©ãƒ¼:",t)}}(),window.addEventListener("load",v)}export{f as a,p as i};
