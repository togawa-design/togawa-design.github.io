function e(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}function t(e,t=["b","strong","i","em","u","ul","ol","li","br","div","p"]){if(!e||"<br>"===e||"<div><br></div>"===e)return"";const n=document.createElement("div");n.innerHTML=e;return n.querySelectorAll("*").forEach(e=>{if(t.includes(e.tagName.toLowerCase()))for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);else e.replaceWith(...e.childNodes)}),n.innerHTML}function n(t){return t?e(t).replace(/\n/g,"<br>"):""}function o(e,t=null){return new URLSearchParams(window.location.search).get(e)??t}function r(e,t){const n=new URL(window.location.href);t?n.searchParams.set(e,t):n.searchParams.delete(e),window.history.pushState({},"",n.toString())}function i(e){return new URLSearchParams(window.location.search).has(e)}function a(e,t=5e3,n=50){return new Promise((o,r)=>{if(void 0!==window[e])return void o(window[e]);const i=Date.now(),a=setInterval(()=>{void 0!==window[e]?(clearInterval(a),o(window[e])):Date.now()-i>t&&(clearInterval(a),r(new Error(`Timeout waiting for ${e}`)))},n)})}async function s(e=1e4){return void 0!==window.JobsLoader?window.JobsLoader:a("JobsLoader",e,100)}function c(t="読み込んでいます...",n="しばらくお待ちください"){return`\n    <div class="loading-container">\n      <div class="loading-inner">\n        <div class="loading-spinner large"></div>\n        <p class="loading-text">${e(t)}</p>\n        ${n?`<p class="loading-subtext">${e(n)}</p>`:""}\n      </div>\n    </div>\n  `}function l(e,t,n){const o="string"==typeof e?document.getElementById(e):e;o&&(o.innerHTML=c(t,n))}function u(t,n="トップページへ戻る",o="/"){return`\n    <div class="error-container">\n      <p class="error-message">${e(t)}</p>\n      <a href="${e(o)}" class="btn-back">${e(n)}</a>\n    </div>\n  `}function d(e,t,n,o){const r="string"==typeof e?document.getElementById(e):e;r&&(r.innerHTML=u(t,n,o))}function f(e="modal"){const t=document.querySelector(`.${e}`);t&&(t.classList.remove("active"),setTimeout(()=>t.remove(),300))}function m(e){if(!e)return null;const t=e.trim().replace(/\//g,"-"),n=new Date(t);return isNaN(n.getTime())?null:(n.setHours(0,0,0,0),n)}function g(e,t={}){const n="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||i("debug_mode");n&&console.log("[Analytics]",e,t),"function"==typeof gtag?(gtag("event",e,t),n&&console.log("[Analytics] gtag sent successfully")):n&&console.warn("[Analytics] gtag is not defined, event not sent:",e)}function w(e){return e||0===e?Number(e).toLocaleString():""}function v(e,t=0){const n="string"==typeof e?document.querySelector(e):e;if(!n)return;const o=n.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:o,behavior:"smooth"})}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const p={escapeHtml:e,sanitizeHtml:t,nl2br:n,getUrlParam:o,setUrlParam:r,removeUrlParam:function(e){r(e,null)},hasUrlParam:i,waitForGlobal:a,waitForJobsLoader:s,waitUntil:function(e,t=5e3,n=50){return new Promise((o,r)=>{if(e())return void o();const i=Date.now(),a=setInterval(()=>{e()?(clearInterval(a),o()):Date.now()-i>t&&(clearInterval(a),r(new Error("Timeout waiting for condition")))},n)})},createLoadingHtml:c,showLoading:l,createErrorHtml:u,showError:d,showModal:function({className:t="modal",title:n="",content:o="",onClose:r=null}){f(t);const i=document.createElement("div");i.className=t,i.innerHTML=`\n    <div class="${t}-overlay"></div>\n    <div class="${t}-content">\n      <button class="${t}-close">&times;</button>\n      ${n?`<h3>${e(n)}</h3>`:""}\n      <div class="${t}-body">${o}</div>\n    </div>\n  `,document.body.appendChild(i),requestAnimationFrame(()=>{i.classList.add("active")});const a=()=>{i.classList.remove("active"),setTimeout(()=>{i.remove(),r&&r()},300)};i.querySelector(`.${t}-close`).addEventListener("click",a),i.querySelector(`.${t}-overlay`).addEventListener("click",a);const s=e=>{"Escape"===e.key&&(a(),document.removeEventListener("keydown",s))};return document.addEventListener("keydown",s),i},closeModal:f,parseDate:m,formatDate:function(e,t="YYYY-MM-DD"){const n="string"==typeof e?m(e):e;if(!n)return"";const o=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return t.replace("YYYY",o).replace("MM",r).replace("DD",i)},getToday:function(){const e=new Date;return e.setHours(0,0,0,0),e},trackEvent:g,trackPageView:function(e,t={}){g("page_view",{page_name:e,page_location:window.location.href,page_title:document.title,...t})},getStorage:function(e,t=null){try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return t}},setStorage:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},getSession:function(e,t=null){try{const n=sessionStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return t}},setSession:function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to sessionStorage:",n)}},formatNumber:w,parseSalary:function(e){if(!e)return 0;const t=e.match(/(\d+(?:\.\d+)?)\s*万/);if(t)return 1e4*parseFloat(t[1]);const n=e.match(/(\d{1,3}(?:,\d{3})*)\s*円/);if(n)return parseInt(n[1].replace(/,/g,""));const o=e.match(/[¥￥]\s*(\d{1,3}(?:,\d{3})*|\d+)/);if(o)return parseInt(o[1].replace(/,/g,""));const r=e.match(/(\d{1,3}(?:,\d{3})*|\d+)/);return r?parseInt(r[1].replace(/,/g,"")):0},truncate:function(e,t=100,n="..."){return!e||e.length<=t?e||"":e.substring(0,t)+n},unique:function(e,t=null){if(t){const n=new Set;return e.filter(e=>{const o=e[t];return!n.has(o)&&(n.add(o),!0)})}return[...new Set(e)]},debounce:function(e,t=300){let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...o)},t)}},throttle:function(e,t=300){let n;return function(...o){n||(e(...o),n=!0,setTimeout(()=>n=!1,t))}},scrollTo:v,initSmoothScroll:function(e=0){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",n=>{const o=t.getAttribute("href");if("#"===o)return;const r=document.querySelector(o);r&&(n.preventDefault(),v(r,e))})})}};"undefined"!=typeof window&&(window.RikuekoUtils=p,window.Utils=p);export{d as a,l as b,e,w as f,o as g,i as h,n,t as s,g as t,s as w};
