import{e}from"./utils-DCR9QUau.js";function n(n={}){const{logoUrl:t="",companyName:a="",recruitPageUrl:o="",showBackLink:i=!1,designPattern:r="standard"}=n;if(!t&&!a)return"";const s=t?`<img src="${e(t)}" alt="${e(a)}" class="site-header-logo-img">`:"",c=a?`<span class="site-header-company-name">${e(a)}</span>`:"",d=i&&o?`<a href="${e(o)}" class="site-header-back-link">â† æ¡ç”¨ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a>`:"";return`\n    <header class="site-header" data-pattern="${e(r)}">\n      <div class="site-header-container">\n        <a href="${o?e(o):"#"}" class="site-header-logo">\n          ${s}\n          ${c}\n        </a>\n        <nav class="site-header-nav">\n          ${d}\n          <a href="#jobs" class="site-header-nav-link">æ±‚äººä¸€è¦§</a>\n        </nav>\n      </div>\n    </header>\n  `}function t(n={}){const{companyName:t="",designPattern:a="standard"}=n,o=(new Date).getFullYear();return`\n    <footer class="site-footer" data-pattern="${e(a)}">\n      <div class="site-footer-container">\n        <p class="site-footer-company">${e(t)} æ¡ç”¨æƒ…å ±</p>\n        <p class="site-footer-copyright">&copy; ${o} ${e(t)}</p>\n      </div>\n    </footer>\n  `}function a(n={}){const{phoneNumber:t="",ctaButtonText:a="ä»Šã™ãå¿œå‹Ÿã™ã‚‹",ctaUrl:o="#apply",designPattern:i="standard"}=n;if(!t&&!a)return"";const r=t?`<a href="tel:${e(t.replace(/[-\s]/g,""))}" class="fixed-cta-phone">\n         <span class="fixed-cta-phone-icon">ğŸ“</span>\n         <span class="fixed-cta-phone-text">ãŠé›»è©±ã§ç›¸è«‡ï¼š${e(t)}</span>\n       </a>`:"",s=a?`<a href="${e(o)}" class="fixed-cta-button">${e(a)}</a>`:"";return`\n    <div class="fixed-cta-bar" data-pattern="${e(i)}">\n      ${r}\n      ${s}\n    </div>\n  `}const o="https://asia-northeast1-generated-area-484613-e3.cloudfunctions.net/trackPageAnalytics";let i=null;function r(){if(i)return i;try{i=sessionStorage.getItem("pa_visitor_id"),i||(i="v_"+Date.now().toString(36)+Math.random().toString(36).substr(2,9),sessionStorage.setItem("pa_visitor_id",i))}catch(e){i="v_"+Date.now().toString(36)+Math.random().toString(36).substr(2,9)}return i}function s(){const e=navigator.userAgent;return/tablet|ipad|playbook|silk/i.test(e)?"tablet":/mobile|iphone|ipod|android|blackberry|opera mini|iemobile/i.test(e)?"mobile":"desktop"}function c(){const e=new URLSearchParams(window.location.search),n={};return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(t=>{const a=e.get(t);a&&(n[t]=a)}),Object.keys(n).length>0?n:null}function d(e){if(!e)return"direct";try{const n=new URL(e).hostname.toLowerCase();return n===window.location.hostname?"internal":n.includes("google")?"google":n.includes("yahoo")?"yahoo":n.includes("bing")?"bing":n.includes("indeed")?"indeed":n.includes("jobbox")||n.includes("stanby")?"jobbox":n.includes("engage")?"engage":n.includes("twitter")||n.includes("x.com")?"twitter":n.includes("facebook")?"facebook":n.includes("instagram")?"instagram":n.includes("line")?"line":"other"}catch{return"other"}}async function l(e){if("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname)console.log("[PageAnalytics] Event:",e);else try{const n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});n.ok||console.warn("[PageAnalytics] Failed to send event:",n.status)}catch(n){console.warn("[PageAnalytics] Error sending event:",n.message)}}function p(e){const{pageType:n,companyDomain:t,buttonType:a,jobId:o,buttonText:i}=e;if(!n||!t||!a)return void console.warn("[PageAnalytics] pageType, companyDomain, and buttonType are required");l({eventType:"cta_click",pageType:n,companyDomain:t,jobId:o||null,buttonType:a,buttonText:i||null,visitorId:r(),timestamp:(new Date).toISOString(),device:s(),pageUrl:window.location.href})}function u(e){!function(e){const{pageType:n,companyDomain:t,jobId:a,companyName:o,jobTitle:i}=e;if(!n||!t)return void console.warn("[PageAnalytics] pageType and companyDomain are required");l({eventType:"page_view",pageType:n,companyDomain:t,jobId:a||null,companyName:o||null,jobTitle:i||null,visitorId:r(),timestamp:(new Date).toISOString(),referrer:document.referrer||null,referrerType:d(document.referrer),utmParams:c(),device:s(),userAgent:navigator.userAgent,pageUrl:window.location.href,screenWidth:window.innerWidth,screenHeight:window.innerHeight})}(e),function(e){const{pageType:n,companyDomain:t,jobId:a}=e;if(!n||!t)return void console.warn("[PageAnalytics] pageType and companyDomain are required");let o=0,i=[25,50,75,100],c=new Set;const d=()=>{const e=window.pageYOffset||document.documentElement.scrollTop,d=document.documentElement.scrollHeight-window.innerHeight,p=d>0?Math.round(e/d*100):0;p>o&&(o=p,i.forEach(e=>{p>=e&&!c.has(e)&&(c.add(e),l({eventType:"scroll_depth",pageType:n,companyDomain:t,jobId:a||null,depth:e,visitorId:r(),timestamp:(new Date).toISOString(),device:s(),pageUrl:window.location.href}))}))};let p=!1;window.addEventListener("scroll",()=>{p||(window.requestAnimationFrame(()=>{d(),p=!1}),p=!0)}),d()}(e),function(e){const{pageType:n,companyDomain:t,jobId:a}=e;if(!n||!t)return void console.warn("[PageAnalytics] pageType and companyDomain are required");const i=Date.now(),c=()=>{const e=Math.round((Date.now()-i)/1e3);if(e>=1){const i={eventType:"time_on_page",pageType:n,companyDomain:t,jobId:a||null,duration:e,visitorId:r(),timestamp:(new Date).toISOString(),device:s(),pageUrl:window.location.href};"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?console.log("[PageAnalytics] Time on page:",i):navigator.sendBeacon&&navigator.sendBeacon(o,JSON.stringify(i))}};window.addEventListener("beforeunload",c),window.addEventListener("pagehide",c)}(e)}export{t as a,a as b,u as i,n as r,p as t};
