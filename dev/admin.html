<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">

  <title>管理者ダッシュボード | リクエコ求人ナビ</title>

  <!-- スタイルシート -->
  <link rel="stylesheet" href="/dev/css/style.css">
  <link rel="stylesheet" href="/dev/css/admin.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
  <script type="module" crossorigin src="/dev/js/admin-BMJ4X8QG.js"></script>
  <link rel="modulepreload" crossorigin href="/dev/js/modulepreload-polyfill-YP0FEG5d.js">
  <link rel="modulepreload" crossorigin href="/dev/js/utils-BE8OECDH.js">
  <link rel="modulepreload" crossorigin href="/dev/js/jobs-loader-gRNObmNk.js">
  <link rel="modulepreload" crossorigin href="/dev/js/LPEditor-lKPcvSRX.js">
  <link rel="modulepreload" crossorigin href="/dev/js/image-uploader-CwR9OqLI.js">
  <link rel="modulepreload" crossorigin href="/dev/js/job-feed-generator-DXgNiSjU.js">
</head>
<body class="admin-body">
  <!-- ログイン画面 -->
  <div id="login-screen" class="login-screen">
    <div class="login-card">
      <div class="login-header">
        <h1>リクエコ求人ナビ</h1>
        <p>管理画面</p>
      </div>

      <!-- ログインタブ -->
      <div class="login-tabs">
        <button type="button" class="login-tab active" data-tab="company">会社ユーザー</button>
        <button type="button" class="login-tab" data-tab="admin">管理者</button>
      </div>

      <!-- 会社ユーザーログインフォーム -->
      <form id="company-login-form" class="login-form">
        <div class="form-group">
          <label for="company-username">ユーザーID</label>
          <input type="text" id="company-username" name="username" required autocomplete="username" placeholder="例: toyota_user_xxxx">
        </div>
        <div class="form-group">
          <label for="company-password">パスワード</label>
          <input type="password" id="company-password" name="password" required autocomplete="current-password">
        </div>
        <div id="company-login-error" class="login-error" style="display: none;"></div>
        <button type="submit" class="btn-login-submit">ログイン</button>
      </form>

      <!-- 管理者ログインフォーム -->
      <form id="login-form" class="login-form" style="display: none;">
        <div class="form-group">
          <label for="username">ユーザー名</label>
          <input type="text" id="username" name="username" required autocomplete="username">
        </div>
        <div class="form-group">
          <label for="password">パスワード</label>
          <input type="password" id="password" name="password" required autocomplete="current-password">
        </div>
        <div id="login-error" class="login-error" style="display: none;"></div>
        <button type="submit" class="btn-login-submit">ログイン</button>
        <div class="login-divider"><span>または</span></div>
        <button type="button" id="google-login-btn" class="btn-google-login">
          <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/><path fill="#34A853" d="M9.003 18c2.43 0 4.467-.806 5.956-2.18l-2.909-2.26c-.806.54-1.836.86-3.047.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9.003 18z"/><path fill="#FBBC05" d="M3.964 10.712A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.33z"/><path fill="#EA4335" d="M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.428 0 9.002 0A8.997 8.997 0 0 0 .957 4.958L3.964 7.29c.708-2.127 2.692-3.71 5.036-3.71z"/></svg>
          Googleでログイン
        </button>
      </form>
    </div>
  </div>

  <!-- 管理者ダッシュボード -->
  <div id="admin-dashboard" class="admin-dashboard" style="display: none;">
    <!-- モバイルオーバーレイ -->
    <div id="mobile-overlay" class="mobile-overlay"></div>

    <!-- サイドバー -->
    <aside class="admin-sidebar" id="admin-sidebar">
      <div class="sidebar-header">
        <h2>リクエコ求人ナビ</h2>
        <p>管理画面</p>
        <button id="sidebar-close-btn" class="sidebar-close-btn" aria-label="メニューを閉じる">&times;</button>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-section">
          <h3 class="nav-section-title">アナリティクス</h3>
          <ul>
            <li class="active"><a href="#" data-section="overview"><span class="nav-icon">📊</span>概要</a></li>
            <li><a href="#" data-section="companies"><span class="nav-icon">🏢</span>企業別データ</a></li>
            <li><a href="#" data-section="applications"><span class="nav-icon">📝</span>応募データ</a></li>
          </ul>
        </div>
        <div class="nav-section">
          <h3 class="nav-section-title">会社管理</h3>
          <ul>
            <li><a href="#" data-section="company-manage"><span class="nav-icon">🏭</span>会社一覧</a></li>
            <li><a href="#" data-section="lp-settings"><span class="nav-icon">🎨</span>LP設定</a></li>
          </ul>
        </div>
        <div class="nav-section">
          <h3 class="nav-section-title">応募者対応</h3>
          <ul>
            <li><a href="#" data-section="applicant-select"><span class="nav-icon">💬</span>応募者管理</a></li>
          </ul>
        </div>
        <div class="nav-section" id="nav-section-user-manage">
          <h3 class="nav-section-title">ユーザー管理</h3>
          <ul>
            <li><a href="#" data-section="company-users"><span class="nav-icon">👥</span>会社ユーザー</a></li>
          </ul>
        </div>
        <div class="nav-section">
          <h3 class="nav-section-title">設定</h3>
          <ul>
            <li><a href="#" data-section="settings"><span class="nav-icon">⚙️</span>システム設定</a></li>
          </ul>
        </div>
      </nav>
      <div class="sidebar-footer">
        <a href="index.html" class="btn-back-top">トップページへ戻る</a>
        <button id="logout-btn" class="btn-logout">ログアウト</button>
      </div>
    </aside>

    <!-- メインコンテンツ -->
    <main class="admin-main">
      <!-- ヘッダー -->
      <header class="admin-header">
        <button id="mobile-menu-btn" class="mobile-menu-btn" aria-label="メニューを開く">
          <span class="hamburger-icon"></span>
        </button>
        <h1 id="page-title">概要</h1>
        <div class="header-actions">
          <div class="date-range-picker">
            <label for="date-range">期間:</label>
            <select id="date-range">
              <option value="7">過去7日間</option>
              <option value="30" selected>過去30日間</option>
              <option value="90">過去90日間</option>
            </select>
          </div>
          <button id="refresh-btn" class="btn-refresh">更新</button>
        </div>
      </header>

      <!-- 概要セクション -->
      <section id="section-overview" class="admin-section active">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">👁️</div>
            <div class="stat-content">
              <p class="stat-label">総ページビュー</p>
              <p class="stat-value" id="total-pageviews">-</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">👤</div>
            <div class="stat-content">
              <p class="stat-label">ユニークユーザー</p>
              <p class="stat-value" id="total-users">-</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">🏢</div>
            <div class="stat-content">
              <p class="stat-label">企業ページ閲覧</p>
              <p class="stat-value" id="company-views">-</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">📝</div>
            <div class="stat-content">
              <p class="stat-label">応募クリック</p>
              <p class="stat-value" id="apply-clicks">-</p>
            </div>
          </div>
        </div>

        <div class="chart-container">
          <h3>日別アクセス推移</h3>
          <div id="daily-chart" class="chart-placeholder">
            <p>データを読み込み中...</p>
          </div>
        </div>

        <div class="table-container">
          <h3>企業別アクセスランキング</h3>
          <table class="admin-table" id="overview-company-table">
            <thead>
              <tr>
                <th>順位</th>
                <th>企業名</th>
                <th>ページビュー</th>
                <th>応募クリック</th>
                <th>CVR</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="5" class="loading-cell">データを読み込み中...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 企業別データセクション -->
      <section id="section-companies" class="admin-section">
        <!-- 分析タブ -->
        <div class="analytics-tabs">
          <button class="analytics-tab active" data-tab="overview-tab">概要</button>
          <button class="analytics-tab" data-tab="engagement-tab">エンゲージメント</button>
          <button class="analytics-tab" data-tab="traffic-tab">流入元</button>
          <button class="analytics-tab" data-tab="funnel-tab">ファネル</button>
          <button class="analytics-tab" data-tab="trends-tab">時系列</button>
        </div>

        <!-- 概要タブ -->
        <div id="overview-tab" class="analytics-tab-content active">
          <!-- ユーザー属性（男女比・年齢分布） -->
          <div class="analytics-demographics admin-demographics" id="admin-demographics">
            <h3>ユーザー属性</h3>
            <p class="demographics-note">※ Google Signalsが有効な場合のみデータが表示されます</p>
            <div class="demographics-grid">
              <!-- 男女比 -->
              <div class="demographics-card">
                <h4>男女比</h4>
                <div class="gender-chart" id="admin-gender-chart">
                  <div class="gender-bar-container">
                    <div class="gender-bar male" id="admin-gender-bar-male" style="width: 0%"></div>
                    <div class="gender-bar female" id="admin-gender-bar-female" style="width: 0%"></div>
                  </div>
                  <div class="gender-labels">
                    <span class="gender-label male"><span class="gender-icon">♂</span> 男性 <span id="admin-gender-male-percent">-</span></span>
                    <span class="gender-label female"><span class="gender-icon">♀</span> 女性 <span id="admin-gender-female-percent">-</span></span>
                  </div>
                </div>
              </div>
              <!-- 年齢分布 -->
              <div class="demographics-card">
                <h4>年齢分布</h4>
                <div class="age-chart" id="admin-age-chart">
                  <div class="age-bars" id="admin-age-bars">
                    <!-- JSで動的に生成 -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="filter-bar">
            <input type="text" id="company-search" placeholder="企業名で検索..." class="search-input">
            <select id="sort-by">
              <option value="views">ページビュー順</option>
              <option value="clicks">応募クリック順</option>
              <option value="cvr">CVR順</option>
              <option value="name">名前順</option>
            </select>
          </div>
          <div class="company-cards" id="company-cards">
            <div class="loading-placeholder">データを読み込み中...</div>
          </div>
        </div>

        <!-- エンゲージメントタブ -->
        <div id="engagement-tab" class="analytics-tab-content">
          <div class="stats-grid stats-grid-3">
            <div class="stat-card">
              <div class="stat-icon">⏱️</div>
              <div class="stat-content">
                <p class="stat-label">平均滞在時間</p>
                <p class="stat-value" id="avg-session-duration">-</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">📊</div>
              <div class="stat-content">
                <p class="stat-label">エンゲージメント率</p>
                <p class="stat-value" id="engagement-rate">-</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">↩️</div>
              <div class="stat-content">
                <p class="stat-label">直帰率</p>
                <p class="stat-value" id="bounce-rate">-</p>
              </div>
            </div>
          </div>
          <div class="table-container">
            <h3>企業別エンゲージメント</h3>
            <table class="admin-table" id="engagement-company-table">
              <thead>
                <tr>
                  <th>企業名</th>
                  <th>閲覧数</th>
                  <th>総エンゲージ時間</th>
                  <th>平均時間/閲覧</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="4" class="loading-cell">データを読み込み中...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 流入元タブ -->
        <div id="traffic-tab" class="analytics-tab-content">
          <div class="analytics-row">
            <div class="analytics-col">
              <div class="chart-container">
                <h3>チャネル別セッション</h3>
                <div id="channel-chart" class="chart-placeholder">
                  <div class="loading-placeholder">データを読み込み中...</div>
                </div>
              </div>
            </div>
            <div class="analytics-col">
              <div class="table-container">
                <h3>参照元/メディア</h3>
                <table class="admin-table" id="source-table">
                  <thead>
                    <tr>
                      <th>参照元</th>
                      <th>メディア</th>
                      <th>セッション</th>
                      <th>ユーザー</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="4" class="loading-cell">データを読み込み中...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- ファネルタブ -->
        <div id="funnel-tab" class="analytics-tab-content">
          <div class="funnel-container">
            <h3>コンバージョンファネル</h3>
            <div id="funnel-chart" class="funnel-chart">
              <div class="loading-placeholder">データを読み込み中...</div>
            </div>
          </div>
          <div class="analytics-row">
            <div class="analytics-col">
              <div class="chart-container">
                <h3>アクション種別内訳</h3>
                <div id="action-breakdown-chart" class="chart-placeholder">
                  <div class="loading-placeholder">データを読み込み中...</div>
                </div>
              </div>
            </div>
            <div class="analytics-col">
              <div class="table-container">
                <h3>企業別CVR</h3>
                <table class="admin-table" id="company-funnel-table">
                  <thead>
                    <tr>
                      <th>企業</th>
                      <th>閲覧</th>
                      <th>クリック</th>
                      <th>CVR</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td colspan="4" class="loading-cell">データを読み込み中...</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- 時系列タブ -->
        <div id="trends-tab" class="analytics-tab-content">
          <div class="stats-grid stats-grid-2">
            <div class="stat-card">
              <div class="stat-icon">📅</div>
              <div class="stat-content">
                <p class="stat-label">ピーク曜日</p>
                <p class="stat-value" id="peak-day">-</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">🕐</div>
              <div class="stat-content">
                <p class="stat-label">ピーク時間帯</p>
                <p class="stat-value" id="peak-hour">-</p>
              </div>
            </div>
          </div>
          <div class="analytics-row">
            <div class="analytics-col">
              <div class="chart-container">
                <h3>曜日別アクセス</h3>
                <div id="day-of-week-chart" class="chart-placeholder">
                  <div class="loading-placeholder">データを読み込み中...</div>
                </div>
              </div>
            </div>
            <div class="analytics-col">
              <div class="chart-container">
                <h3>時間帯別アクセス</h3>
                <div id="hour-chart" class="chart-placeholder">
                  <div class="loading-placeholder">データを読み込み中...</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 応募データセクション -->
      <section id="section-applications" class="admin-section">
        <div class="table-container">
          <h3>応募イベント一覧</h3>
          <table class="admin-table" id="applications-table">
            <thead>
              <tr>
                <th>日時</th>
                <th>企業名</th>
                <th>ボタン種別</th>
                <th>画面</th>
                <th>参照元</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="5" class="loading-cell">データを読み込み中...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 応募者管理（会社選択）セクション -->
      <section id="section-applicant-select" class="admin-section">
        <div class="section-header">
          <h3>応募者管理</h3>
        </div>
        <p class="section-description">応募者とのメッセージのやり取りや、応募状況の管理ができます。会社を選択してください。</p>
        <div class="company-select-grid" id="applicant-company-grid">
          <!-- JSで会社カードを生成 -->
          <div class="loading-cell">会社一覧を読み込み中...</div>
        </div>
      </section>

      <!-- 会社管理セクション -->
      <section id="section-company-manage" class="admin-section">
        <div class="section-header">
          <h3>会社一覧</h3>
          <button id="btn-add-company" class="btn-primary">+ 新規会社登録</button>
        </div>

        <div class="info-box">
          <p><strong>データソース:</strong> Google スプレッドシート「会社一覧」シート</p>
          <p>スプレッドシートで直接編集するか、下記のフォームから登録・編集できます。</p>
          <a href="https://docs.google.com/spreadsheets/d/1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0/edit" target="_blank" class="btn-link">スプレッドシートを開く</a>
        </div>

        <div class="table-container">
          <table class="admin-table" id="company-manage-table">
            <thead>
              <tr>
                <th>会社名</th>
                <th>ドメイン</th>
                <th>デザイン</th>
                <th>表示</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="company-manage-tbody">
              <tr>
                <td colspan="5" class="loading-cell">データを読み込み中...</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 求人一覧エリア（会社選択後に表示） -->
        <div id="jobs-manage-area" class="jobs-manage-area" style="display: none;">
          <div class="section-header">
            <h3 id="jobs-area-title">求人一覧</h3>
            <div class="header-actions">
              <button id="btn-add-job" class="btn-primary">+ 新規求人作成</button>
              <a href="#" id="btn-open-sheet" target="_blank" class="btn-secondary">管理シートを開く</a>
              <button id="btn-close-jobs" class="btn-secondary">閉じる</button>
            </div>
          </div>

          <div class="info-box">
            <p>この会社の求人データは、専用の管理シートで管理されています。</p>
          </div>

          <!-- 求人カード一覧 -->
          <div class="job-cards-header">
            <div class="job-cards-count">
              <span id="jobs-count">0</span>件
            </div>
            <div class="job-cards-header-row">
              <span class="job-col-image">画像</span>
              <span class="job-col-info">件名/タグ</span>
              <span class="job-col-area">エリア</span>
              <span class="job-col-deadline">掲載期限</span>
              <span class="job-col-stats">応募</span>
              <span class="job-col-stats">PV</span>
              <span class="job-col-status">ステータス</span>
              <span class="job-col-actions">操作</span>
            </div>
          </div>
          <div class="job-cards-list" id="jobs-list">
            <div class="job-cards-loading">データを読み込み中...</div>
          </div>
        </div>
      </section>

      <!-- LP設定セクション -->
      <section id="section-lp-settings" class="admin-section">
        <div class="section-header">
          <h3>LP（ランディングページ）設定</h3>
        </div>

        <div class="info-box">
          <p>求人専用のランディングページの設定を行います。URLは <code>/lp.html?j=求人ID</code> でアクセスできます。</p>
        </div>

        <div class="lp-settings-form" id="lp-settings-form">
          <!-- ステップインジケーター -->
          <div class="lp-selection-steps" id="lp-selection-steps">
            <div class="lp-step active" data-step="company">
              <span class="lp-step-number">1</span>
              <span class="lp-step-label">会社を選択</span>
            </div>
            <div class="lp-step-arrow">→</div>
            <div class="lp-step" data-step="job">
              <span class="lp-step-number">2</span>
              <span class="lp-step-label">求人を選択</span>
            </div>
            <div class="lp-step-arrow">→</div>
            <div class="lp-step" data-step="edit">
              <span class="lp-step-number">3</span>
              <span class="lp-step-label">LP編集</span>
            </div>
          </div>

          <!-- 会社選択（admin専用） -->
          <div class="lp-selection-panel" id="lp-company-select-group">
            <div class="lp-selection-header">
              <h4>会社を選択</h4>
              <div class="lp-search-box">
                <input type="text" id="lp-company-search" placeholder="会社名で検索...">
              </div>
            </div>
            <div class="lp-company-grid" id="lp-company-grid">
              <div class="lp-loading-placeholder">読み込み中...</div>
            </div>
          </div>

          <!-- 求人選択 -->
          <div class="lp-selection-panel" id="lp-job-select-group" style="display: none;">
            <div class="lp-selection-header">
              <button type="button" class="lp-back-btn" id="lp-back-to-companies">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                会社一覧に戻る
              </button>
              <h4 id="lp-selected-company-name">求人を選択</h4>
            </div>
            <div class="lp-job-grid" id="lp-job-grid">
              <div class="lp-loading-placeholder">読み込み中...</div>
            </div>
          </div>

          <!-- 非表示のselect（互換性のため） -->
          <select id="lp-company-select" style="display: none;"></select>
          <select id="lp-job-select" style="display: none;"></select>

          <div id="lp-editor" style="display: none;">
            <!-- プレビューアクション -->
            <div class="lp-preview-actions">
              <a href="#" id="lp-preview-btn" target="_blank" class="btn btn-secondary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                プレビュー
              </a>
              <a href="#" id="lp-edit-mode-btn" target="_blank" class="btn btn-primary">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
                編集モードで開く
              </a>
            </div>

            <!-- 1. テンプレート -->
            <div class="form-section lp-form-section" id="template-section">
              <div class="lp-section-header">
                <span class="lp-section-number">1</span>
                <h4>テンプレート</h4>
              </div>
              <p class="form-hint">LPのレイアウトスタイルを選択してください。未選択の場合はデフォルトが適用されます。</p>
              <div id="template-selector-container">
                <!-- テンプレートセレクターはJSで動的に生成 -->
              </div>
            </div>

            <!-- 2. カラー選択 -->
            <div class="form-section lp-form-section">
              <div class="lp-section-header">
                <span class="lp-section-number">2</span>
                <h4>カラー選択</h4>
              </div>
              <p class="form-hint">LPのカラーテーマを選択してください</p>
              <div class="design-pattern-grid" id="design-pattern-grid">
                <label class="pattern-option">
                  <input type="radio" name="design-pattern" value="standard" checked>
                  <div class="pattern-preview standard">
                    <div class="pattern-mini-lp">
                      <div class="mini-hero"></div>
                      <div class="mini-section"></div>
                      <div class="mini-section"></div>
                      <div class="mini-cta"></div>
                    </div>
                    <span class="pattern-name">スタンダード</span>
                    <span class="pattern-desc">シンプルで使いやすい</span>
                  </div>
                </label>
                <label class="pattern-option">
                  <input type="radio" name="design-pattern" value="modern">
                  <div class="pattern-preview modern">
                    <div class="pattern-mini-lp">
                      <div class="mini-hero"></div>
                      <div class="mini-section"></div>
                      <div class="mini-section"></div>
                      <div class="mini-cta"></div>
                    </div>
                    <span class="pattern-name">モダン</span>
                    <span class="pattern-desc">洗練されたデザイン</span>
                  </div>
                </label>
                <label class="pattern-option">
                  <input type="radio" name="design-pattern" value="classic">
                  <div class="pattern-preview classic">
                    <div class="pattern-mini-lp">
                      <div class="mini-hero"></div>
                      <div class="mini-section"></div>
                      <div class="mini-section"></div>
                      <div class="mini-cta"></div>
                    </div>
                    <span class="pattern-name">クラシック</span>
                    <span class="pattern-desc">信頼感のある重厚感</span>
                  </div>
                </label>
                <label class="pattern-option">
                  <input type="radio" name="design-pattern" value="minimal">
                  <div class="pattern-preview minimal">
                    <div class="pattern-mini-lp">
                      <div class="mini-hero"></div>
                      <div class="mini-section"></div>
                      <div class="mini-section"></div>
                      <div class="mini-cta"></div>
                    </div>
                    <span class="pattern-name">ミニマル</span>
                    <span class="pattern-desc">シックでモノトーン</span>
                  </div>
                </label>
                <label class="pattern-option">
                  <input type="radio" name="design-pattern" value="colorful">
                  <div class="pattern-preview colorful">
                    <div class="pattern-mini-lp">
                      <div class="mini-hero"></div>
                      <div class="mini-section"></div>
                      <div class="mini-section"></div>
                      <div class="mini-cta"></div>
                    </div>
                    <span class="pattern-name">カラフル</span>
                    <span class="pattern-desc">華やかで目を引く</span>
                  </div>
                </label>
              </div>
            </div>

            <!-- 3. ヒーローセクション -->
            <div class="form-section lp-form-section">
              <div class="lp-section-header">
                <span class="lp-section-number">3</span>
                <h4>ヒーローセクション</h4>
              </div>
              <div class="form-group">
                <label for="lp-hero-title">ヒーロータイトル</label>
                <input type="text" id="lp-hero-title" placeholder="例: 月収32万円以上可！入社特典あり">
              </div>
              <div class="form-group">
                <label for="lp-hero-subtitle">サブタイトル</label>
                <input type="text" id="lp-hero-subtitle" placeholder="例: 未経験歓迎・寮完備">
              </div>
              <div class="form-group">
                <label for="lp-hero-image">ヒーロー画像URL</label>
                <input type="text" id="lp-hero-image" placeholder="https://example.com/image.jpg">
                <p class="form-hint">下のプリセットから選択するか、直接URLを入力してください</p>
              </div>
              <div class="form-group">
                <label>プリセット画像を選択</label>
                <div class="hero-image-presets" id="hero-image-presets">
                  <!-- JavaScriptで動的に生成 -->
                </div>
              </div>
            </div>

            <!-- 4. ポイント（特徴） -->
            <div class="form-section lp-form-section">
              <div class="lp-section-header">
                <span class="lp-section-number">4</span>
                <h4>ポイント（特徴）</h4>
              </div>
              <p class="form-hint">最大6つまで追加できます。表示したくない項目は空欄のままにしてください。</p>
              <div class="point-inputs" id="point-inputs-container">
                <!-- JavaScriptで動的に生成 -->
              </div>
              <button type="button" id="btn-add-point" class="btn-add-item">
                <span>+</span> ポイントを追加
              </button>
            </div>

            <!-- 5. CTA（応募ボタン） -->
            <div class="form-section lp-form-section">
              <div class="lp-section-header">
                <span class="lp-section-number">5</span>
                <h4>CTA（応募ボタン）</h4>
              </div>
              <div class="form-group">
                <label for="lp-cta-text">ボタンテキスト</label>
                <input type="text" id="lp-cta-text" placeholder="例: 今すぐ応募する" value="今すぐ応募する">
              </div>
            </div>

            <!-- 6. FAQ（よくある質問） -->
            <div class="form-section lp-form-section">
              <div class="lp-section-header">
                <span class="lp-section-number">6</span>
                <h4>FAQ（よくある質問）</h4>
              </div>
              <p class="form-hint">質問と回答を入力してください。LPではLINE風のチャット形式で表示されます。</p>
              <div class="faq-editor" id="faq-editor">
                <div class="faq-list" id="faq-list">
                  <!-- FAQアイテムはJSで動的に生成 -->
                </div>
                <button type="button" class="faq-add-btn" id="btn-add-faq">
                  <span class="faq-add-icon">+</span>
                  質問を追加
                </button>
              </div>
              <!-- 互換性のため非表示のテキストエリアを保持 -->
              <textarea id="lp-faq" style="display: none;"></textarea>
            </div>

            <!-- カスタムセクション（動画・カルーセル等）※登録されている場合のみ表示 -->
            <div class="form-section lp-form-section" id="custom-sections-panel" style="display: none;">
              <div class="lp-section-header">
                <span class="lp-section-number">✨</span>
                <h4>追加コンテンツ</h4>
              </div>
              <p class="form-hint">登録済みの動画・画像スライド・ギャラリーなど。クリックして編集できます。</p>
              <div class="custom-sections-list" id="custom-sections-list">
                <!-- JSで動的に生成 -->
              </div>
              <button type="button" id="btn-add-custom-section" class="btn-add-item">
                <span>+</span> 動画・スライドなどを追加
              </button>
            </div>

            <!-- 7. セクション管理 -->
            <div class="form-section lp-form-section" id="section-manager">
              <div class="lp-section-header">
                <span class="lp-section-number">7</span>
                <h4>セクション管理</h4>
              </div>
              <p class="form-hint">セクションの追加・削除・並び替えができます。ドラッグ＆ドロップで並び替え可能です。</p>
              <div class="section-manager-toolbar">
                <button type="button" id="btn-add-section" class="btn-primary">
                  <span>+</span> セクションを追加
                </button>
              </div>
              <ul id="lp-sections-list" class="sections-list">
                <!-- セクションリストはJSで動的に生成 -->
              </ul>
            </div>

            <!-- 8. 広告トラッキング設定 -->
            <div class="form-section lp-form-section collapsible" id="ad-tracking-section">
              <div class="lp-section-header collapsible-header" data-target="ad-tracking-content">
                <span class="lp-section-number">8</span>
                <h4>広告トラッキング設定</h4>
                <span class="collapse-icon">▼</span>
              </div>
              <div class="collapsible-content" id="ad-tracking-content">
                <p class="form-hint">TikTok広告やGoogle広告のコンバージョン計測に使用します。</p>
                <div class="form-group">
                  <label for="lp-tiktok-pixel">TikTok Pixel ID</label>
                  <input type="text" id="lp-tiktok-pixel" placeholder="例: CXXXXXXXXXXXXXX">
                  <p class="form-hint">TikTok Ads ManagerのPixel IDを入力してください</p>
                </div>
                <div class="form-group">
                  <label for="lp-google-ads-id">Google Ads コンバージョンID</label>
                  <input type="text" id="lp-google-ads-id" placeholder="例: AW-123456789">
                  <p class="form-hint">Google Adsのコンバージョン追跡タグIDを入力してください</p>
                </div>
                <div class="form-group">
                  <label for="lp-google-ads-label">Google Ads コンバージョンラベル</label>
                  <input type="text" id="lp-google-ads-label" placeholder="例: AbCdEfGhIjKlMn">
                  <p class="form-hint">コンバージョンアクション作成時に発行されるラベルを入力してください</p>
                </div>
                <div class="form-group">
                  <label for="lp-meta-pixel">Meta Pixel ID</label>
                  <input type="text" id="lp-meta-pixel" placeholder="例: 1234567890123456">
                  <p class="form-hint">Meta Business SuiteのPixel IDを入力してください（Facebook/Instagram広告用）</p>
                </div>
                <div class="form-group">
                  <label for="lp-line-tag">LINE Tag ID</label>
                  <input type="text" id="lp-line-tag" placeholder="例: 12345678-abcd-efgh-ijkl-1234567890ab">
                  <p class="form-hint">LINE広告マネージャーのベースタグIDを入力してください</p>
                </div>
                <div class="form-group">
                  <label for="lp-clarity">Microsoft Clarity Project ID</label>
                  <input type="text" id="lp-clarity" placeholder="例: abcdefghij">
                  <p class="form-hint">Clarityのプロジェクト設定で確認できるIDを入力してください（ヒートマップ・レコーディング用）</p>
                </div>
              </div>
            </div>

            <!-- 9. OGP設定（広告プレビュー用） -->
            <div class="form-section lp-form-section collapsible" id="ogp-section">
              <div class="lp-section-header collapsible-header" data-target="ogp-content">
                <span class="lp-section-number">9</span>
                <h4>OGP設定（広告プレビュー用）</h4>
                <span class="collapse-icon">▼</span>
              </div>
              <div class="collapsible-content" id="ogp-content">
                <p class="form-hint">広告やSNSでシェアされた時に表示される情報です。</p>
                <div class="form-group">
                  <label for="lp-ogp-title">OGPタイトル</label>
                  <input type="text" id="lp-ogp-title" placeholder="例: 月収32万円以上可！製造スタッフ募集">
                  <p class="form-hint">空欄の場合はヒーロータイトルが使用されます</p>
                </div>
                <div class="form-group">
                  <label for="lp-ogp-description">OGP説明文</label>
                  <input type="text" id="lp-ogp-description" placeholder="例: 未経験歓迎・寮完備の高待遇求人！今すぐチェック">
                  <p class="form-hint">空欄の場合は自動生成されます</p>
                </div>
                <div class="form-group">
                  <label for="lp-ogp-image">OGP画像URL</label>
                  <input type="text" id="lp-ogp-image" placeholder="https://example.com/ogp-image.jpg">
                  <p class="form-hint">推奨サイズ: 1200×630px。空欄の場合はヒーロー画像が使用されます</p>
                </div>
              </div>
            </div>

            <!-- 保存ボタン -->
            <div class="form-actions">
              <button id="btn-save-lp-settings" class="btn-primary">LP設定を保存</button>
              <button id="btn-reset-lp-settings" class="btn-secondary">リセット</button>
              <button id="btn-toggle-preview" class="btn-secondary">プレビュー表示</button>
            </div>
          </div>

          <!-- リアルタイムプレビュー -->
          <div id="lp-preview-container" class="lp-preview-container" style="display: none;">
            <div class="lp-preview-header">
              <h4>プレビュー</h4>
              <div class="lp-preview-controls">
                <label class="edit-mode-toggle">
                  <input type="checkbox" id="preview-edit-mode">
                  <span>編集モード</span>
                </label>
                <button class="preview-device-btn active" data-device="desktop" title="デスクトップ">🖥️</button>
                <button class="preview-device-btn" data-device="tablet" title="タブレット">📱</button>
                <button class="preview-device-btn" data-device="mobile" title="スマートフォン">📲</button>
              </div>
              <button id="btn-close-preview" class="btn-close-preview">&times;</button>
            </div>
            <div class="lp-preview-frame-wrapper" data-device="desktop">
              <iframe id="lp-preview-frame" class="lp-preview-frame"></iframe>
            </div>
          </div>
        </div>
      </section>

      <!-- 会社ユーザー管理セクション -->
      <section id="section-company-users" class="admin-section">
        <div class="section-header">
          <h3>会社ユーザー管理</h3>
          <button id="btn-add-company-user" class="btn-primary">+ 新規ユーザー追加</button>
        </div>

        <div class="info-box">
          <p><strong>会社ユーザーについて:</strong> 各会社に専用のID/パスワードを発行できます。会社ユーザーは自社のデータのみアクセス可能です。</p>
        </div>

        <!-- 一括発行ボタン -->
        <div class="bulk-actions" style="margin-bottom: 1rem;">
          <button id="btn-bulk-generate" class="btn-secondary">未発行の会社に一括発行</button>
        </div>

        <div class="table-container">
          <table class="admin-table" id="company-users-table">
            <thead>
              <tr>
                <th>会社名</th>
                <th>ユーザーID</th>
                <th>ステータス</th>
                <th>作成日</th>
                <th>最終ログイン</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody id="company-users-tbody">
              <tr>
                <td colspan="6" class="loading-cell">データを読み込み中...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- 設定セクション -->
      <section id="section-settings" class="admin-section">
        <div class="settings-card">
          <h3>スプレッドシート連携</h3>
          <div class="form-group">
            <label>スプレッドシートID</label>
            <code class="config-value">1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0</code>
          </div>
          <div class="form-group">
            <label>GAS Web App URL</label>
            <code class="config-value" style="font-size: 0.75rem; word-break: break-all;">https://script.google.com/macros/s/AKfycbxj6CqSfY7jq04uDXURhewD_BAKx3csLKBpl1hdRBdNg-R-E6IuoaZGje22Gr9WYWY2/exec</code>
          </div>
          <a href="https://docs.google.com/spreadsheets/d/1NVIDV3OiXbNrVI7EFdRrU2Ggn8dx7Q0rSnvJ6uaWvX0/edit" target="_blank" class="btn-link">スプレッドシートを開く</a>
        </div>

        <div class="settings-card">
          <h3>API設定</h3>
          <div class="form-group">
            <label>Cloud Functions エンドポイント</label>
            <code class="config-value" style="font-size: 0.75rem; word-break: break-all;">https://asia-northeast1-generated-area-484613-e3.cloudfunctions.net/getAnalyticsData</code>
          </div>
          <div class="form-group">
            <label>GA4 プロパティID</label>
            <code class="config-value">G-E1XC94EG05</code>
          </div>
        </div>

        <div class="settings-card">
          <h3>管理者アカウント</h3>
          <div class="form-group">
            <label>新しいパスワード</label>
            <input type="password" id="new-password" placeholder="新しいパスワード">
          </div>
          <div class="form-group">
            <label>パスワード確認</label>
            <input type="password" id="confirm-password" placeholder="パスワードを再入力">
          </div>
          <button class="btn-save" id="save-password">パスワード変更</button>
        </div>

        <div class="settings-card">
          <h3>求人フィード出力</h3>
          <p class="form-hint">Indeed、Google しごと検索、求人ボックスなどに求人を掲載するためのフィードを生成します。</p>

          <div class="feed-buttons">
            <div class="feed-item">
              <div class="feed-info">
                <strong>Indeed XML フィード</strong>
                <p class="form-hint">Indeedに求人を掲載するためのXMLフィード</p>
              </div>
              <button id="btn-download-indeed" class="btn-secondary">
                <span class="btn-icon">📥</span> ダウンロード
              </button>
            </div>

            <div class="feed-item">
              <div class="feed-info">
                <strong>Google しごと検索 JSON-LD</strong>
                <p class="form-hint">Google検索に求人を表示するための構造化データ</p>
              </div>
              <button id="btn-download-google" class="btn-secondary">
                <span class="btn-icon">📥</span> ダウンロード
              </button>
            </div>

            <div class="feed-item">
              <div class="feed-info">
                <strong>求人ボックス/スタンバイ XML</strong>
                <p class="form-hint">求人ボックス・スタンバイ用のXMLフィード</p>
              </div>
              <button id="btn-download-jobbox" class="btn-secondary">
                <span class="btn-icon">📥</span> ダウンロード
              </button>
            </div>

            <div class="feed-item">
              <div class="feed-info">
                <strong>CSV エクスポート</strong>
                <p class="form-hint">Excelやスプレッドシートで編集可能なCSV形式</p>
              </div>
              <button id="btn-download-csv" class="btn-secondary">
                <span class="btn-icon">📥</span> ダウンロード
              </button>
            </div>
          </div>

          <div id="feed-status" class="feed-status" style="display: none;">
            <div class="loading-spinner-small"></div>
            <span>フィードを生成中...</span>
          </div>
        </div>
      </section>

      <!-- 企業詳細分析セクション -->
      <section id="section-company-detail" class="admin-section">
        <div class="section-header detail-header">
          <button id="btn-back-to-companies" class="btn-back">← 企業一覧に戻る</button>
          <h3 id="company-detail-title">企業分析</h3>
          <a href="#" id="detail-view-page-btn" target="_blank" class="btn-secondary">企業ページを開く</a>
        </div>

        <!-- サマリー統計 -->
        <div class="detail-summary">
          <div class="detail-stat-card">
            <div class="detail-stat-icon">👁️</div>
            <div class="detail-stat-content">
              <p class="detail-stat-value" id="detail-total-views">-</p>
              <p class="detail-stat-label">総閲覧数</p>
            </div>
          </div>
          <div class="detail-stat-card">
            <div class="detail-stat-icon">📝</div>
            <div class="detail-stat-content">
              <p class="detail-stat-value" id="detail-total-clicks">-</p>
              <p class="detail-stat-label">応募クリック</p>
            </div>
          </div>
          <div class="detail-stat-card">
            <div class="detail-stat-icon">📊</div>
            <div class="detail-stat-content">
              <p class="detail-stat-value" id="detail-cvr">-</p>
              <p class="detail-stat-label">CVR</p>
            </div>
          </div>
          <div class="detail-stat-card">
            <div class="detail-stat-icon">📅</div>
            <div class="detail-stat-content">
              <p class="detail-stat-value" id="detail-avg-daily">-</p>
              <p class="detail-stat-label">日平均閲覧</p>
            </div>
          </div>
        </div>

        <!-- グラフエリア -->
        <div class="detail-charts-grid">
          <!-- 日別推移グラフ -->
          <div class="detail-chart-container detail-chart-wide">
            <h4>日別閲覧数推移</h4>
            <div id="detail-daily-chart" class="detail-chart">
              <div class="loading-placeholder">データを読み込み中...</div>
            </div>
          </div>

          <!-- 求人別応募数 -->
          <div class="detail-chart-container">
            <h4>求人別応募数</h4>
            <div id="detail-job-chart" class="detail-chart">
              <div class="loading-placeholder">データを読み込み中...</div>
            </div>
          </div>

          <!-- 流入元グラフ -->
          <div class="detail-chart-container">
            <h4>流入元</h4>
            <div id="detail-traffic-chart" class="detail-chart">
              <div class="loading-placeholder">データを読み込み中...</div>
            </div>
          </div>

          <!-- 性別比率 -->
          <div class="detail-chart-container">
            <h4>応募者性別比率</h4>
            <div id="detail-gender-chart" class="detail-chart">
              <div class="loading-placeholder">データを読み込み中...</div>
            </div>
          </div>

          <!-- 年齢層分布 -->
          <div class="detail-chart-container">
            <h4>年齢層分布</h4>
            <div id="detail-age-chart" class="detail-chart">
              <div class="loading-placeholder">データを読み込み中...</div>
            </div>
          </div>
        </div>

        <!-- 詳細テーブル -->
        <div class="detail-tables-grid">
          <!-- 求人別パフォーマンス -->
          <div class="detail-table-container">
            <h4>求人別パフォーマンス</h4>
            <table class="admin-table" id="detail-job-table">
              <thead>
                <tr>
                  <th>求人タイトル</th>
                  <th>閲覧数</th>
                  <th>応募数</th>
                  <th>CVR</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="4" class="loading-cell">データを読み込み中...</td></tr>
              </tbody>
            </table>
          </div>

          <!-- 最近の応募 -->
          <div class="detail-table-container">
            <h4>最近の応募</h4>
            <table class="admin-table" id="detail-recent-applications">
              <thead>
                <tr>
                  <th>日時</th>
                  <th>求人</th>
                  <th>種別</th>
                  <th>流入元</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="4" class="loading-cell">データを読み込み中...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- 会社編集モーダル -->
  <div id="company-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 id="company-modal-title">会社情報の編集</h3>
        <button class="modal-close" id="company-modal-close">&times;</button>
      </div>
      <form id="company-edit-form">
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group">
              <label for="edit-company-name">会社名 <span class="required">*</span></label>
              <input type="text" id="edit-company-name" required placeholder="例: トヨタ自動車">
            </div>
            <div class="form-group">
              <label for="edit-company-domain">会社ドメイン <span class="required">*</span></label>
              <input type="text" id="edit-company-domain" required placeholder="例: toyota" pattern="[a-z0-9-]+" title="半角英数字とハイフンのみ">
              <p class="form-hint">URLに使用されます（半角英数字・ハイフン）</p>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="edit-design-pattern">デザインパターン</label>
              <select id="edit-design-pattern">
                <option value="standard">スタンダード（紫）</option>
                <option value="modern">モダン（青）</option>
                <option value="classic">クラシック（赤）</option>
                <option value="minimal">ミニマル（白）</option>
                <option value="colorful">カラフル（グラデーション）</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>会社ロゴ</label>
              <div class="logo-uploader" id="logo-uploader-area">
                <div class="logo-preview" id="logo-preview">
                  <span class="upload-placeholder">ロゴをアップロード</span>
                </div>
                <input type="file" id="logo-file-input" accept="image/*" style="display: none;">
                <input type="hidden" id="edit-logo-url" name="logoUrl">
                <div class="logo-actions">
                  <button type="button" class="btn-small" id="logo-upload-btn">画像を選択</button>
                  <button type="button" class="btn-small btn-danger" id="logo-remove-btn" style="display: none;">削除</button>
                </div>
                <p class="form-hint">推奨: 400x400px以下、PNG/JPG/WebP</p>
              </div>
            </div>
            <div class="form-group">
              <label for="edit-order">並び順</label>
              <input type="number" id="edit-order" placeholder="1" min="1">
            </div>
          </div>
          <div class="form-group">
            <label for="edit-description">説明</label>
            <div class="rich-editor-container">
              <div class="rich-editor-toolbar">
                <button type="button" class="toolbar-btn" data-command="bold" title="太字"><b>B</b></button>
                <button type="button" class="toolbar-btn" data-command="italic" title="斜体"><i>I</i></button>
                <button type="button" class="toolbar-btn" data-command="insertUnorderedList" title="箇条書き">・</button>
                <button type="button" class="toolbar-btn" data-command="insertOrderedList" title="番号リスト">1.</button>
                <span class="toolbar-separator"></span>
                <button type="button" class="toolbar-btn" id="insert-image-btn" title="画像を挿入">🖼️</button>
              </div>
              <div id="edit-description" class="rich-editor" contenteditable="true" placeholder="会社の説明文を入力..."></div>
              <input type="file" id="description-image-input" accept="image/*" style="display: none;">
            </div>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="edit-show-company" checked>
              <span>サイトに表示する</span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-secondary" id="company-modal-cancel">キャンセル</button>
          <button type="submit" class="btn-primary" id="company-modal-save">保存</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 求人編集モーダル -->
  <div id="job-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 id="job-modal-title">求人情報の編集</h3>
        <button class="modal-close" id="job-modal-close">&times;</button>
      </div>
      <form id="job-edit-form">
        <div class="modal-body">
          <div class="form-row">
            <div class="form-group">
              <label for="edit-job-title">募集タイトル <span class="required">*</span></label>
              <input type="text" id="edit-job-title" required placeholder="例: 製造スタッフ募集！月収32万円以上">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="edit-job-location">勤務地 <span class="required">*</span></label>
              <input type="text" id="edit-job-location" required placeholder="例: 愛知県豊田市">
            </div>
            <div class="form-group">
              <label for="edit-job-salary">月収（円）</label>
              <input type="number" id="edit-job-salary" placeholder="例: 320000">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="edit-job-bonus">賞与合計（円）</label>
              <input type="number" id="edit-job-bonus" placeholder="例: 500000">
            </div>
            <div class="form-group">
              <label for="edit-job-order">表示順</label>
              <input type="number" id="edit-job-order" placeholder="1" min="1">
            </div>
          </div>
          <div class="form-group">
            <label for="edit-job-features">特徴（カンマ区切り）</label>
            <input type="text" id="edit-job-features" placeholder="例: 未経験歓迎, 寮完備, 交通費支給">
          </div>
          <div class="form-group">
            <label for="edit-job-badges">バッジ（カンマ区切り）</label>
            <input type="text" id="edit-job-badges" placeholder="例: 急募, 高収入">
          </div>
          <div class="form-group">
            <label for="edit-job-description">仕事内容</label>
            <textarea id="edit-job-description" rows="4" placeholder="仕事内容の詳細を入力..."></textarea>
          </div>
          <div class="form-group">
            <label for="edit-job-requirements">応募資格</label>
            <textarea id="edit-job-requirements" rows="3" placeholder="応募資格を入力..."></textarea>
          </div>
          <div class="form-group">
            <label for="edit-job-benefits">福利厚生</label>
            <textarea id="edit-job-benefits" rows="3" placeholder="福利厚生を入力..."></textarea>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="edit-job-hours">勤務時間</label>
              <input type="text" id="edit-job-hours" placeholder="例: 8:00〜17:00">
            </div>
            <div class="form-group">
              <label for="edit-job-holidays">休日</label>
              <input type="text" id="edit-job-holidays" placeholder="例: 土日祝, GW, 年末年始">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="edit-job-start-date">掲載開始日</label>
              <input type="date" id="edit-job-start-date">
            </div>
            <div class="form-group">
              <label for="edit-job-end-date">掲載終了日</label>
              <input type="date" id="edit-job-end-date">
            </div>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="edit-job-visible" checked>
              <span>公開する</span>
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-danger" id="job-modal-delete" style="margin-right: auto; display: none;">削除</button>
          <button type="button" class="btn-secondary" id="job-modal-cancel">キャンセル</button>
          <button type="submit" class="btn-primary" id="job-modal-save">保存</button>
        </div>
      </form>
    </div>
  </div>

  <!-- 会社ユーザー追加/編集モーダル -->
  <div id="company-user-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="company-user-modal-title">会社ユーザーの追加</h3>
        <button class="modal-close" id="company-user-modal-close">&times;</button>
      </div>
      <form id="company-user-form">
        <div class="modal-body">
          <div class="form-group">
            <label for="cu-company-select">会社 <span class="required">*</span></label>
            <select id="cu-company-select" required>
              <option value="">-- 会社を選択 --</option>
            </select>
          </div>
          <div class="form-group">
            <label for="cu-username">ユーザーID <span class="required">*</span></label>
            <input type="text" id="cu-username" required placeholder="例: toyota_user" pattern="[a-z0-9_-]+" title="半角英数字、アンダースコア、ハイフンのみ">
            <p class="form-hint">半角英数字・アンダースコア・ハイフンのみ</p>
          </div>
          <div class="form-group">
            <label for="cu-password">パスワード <span class="required">*</span></label>
            <div class="password-input-group">
              <input type="text" id="cu-password" required placeholder="パスワード" minlength="8">
              <button type="button" id="cu-generate-password" class="btn-small btn-secondary">自動生成</button>
            </div>
            <p class="form-hint">8文字以上推奨</p>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="cu-is-active" checked>
              <span>有効</span>
            </label>
          </div>

          <!-- 発行情報表示エリア（新規作成後） -->
          <div id="cu-credentials-display" class="credentials-display" style="display: none;">
            <h4>発行されたログイン情報</h4>
            <div class="credentials-box">
              <p><strong>ユーザーID:</strong> <code id="cu-issued-username"></code></p>
              <p><strong>パスワード:</strong> <code id="cu-issued-password"></code></p>
            </div>
            <button type="button" id="cu-copy-credentials" class="btn-secondary">クリップボードにコピー</button>
            <p class="form-hint warning">⚠️ パスワードは再表示できません。必ず控えてください。</p>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn-danger" id="company-user-delete" style="margin-right: auto; display: none;">削除</button>
          <button type="button" class="btn-secondary" id="company-user-modal-cancel">キャンセル</button>
          <button type="submit" class="btn-primary" id="company-user-modal-save">保存</button>
        </div>
      </form>
    </div>
  </div>

  <!-- セクション追加モーダル -->
  <div id="add-section-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>セクションを追加</h3>
        <button class="modal-close" id="add-section-modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <p class="form-hint">追加したいセクションタイプを選択してください</p>
        <div class="section-type-grid" id="section-type-grid">
          <!-- JSで動的に生成 -->
        </div>
      </div>
    </div>
  </div>

  <!-- セクションエディターモーダル -->
  <div id="section-editor-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 id="section-editor-title">セクションを編集</h3>
        <button class="modal-close" id="section-editor-close">&times;</button>
      </div>
      <div class="modal-body" id="section-editor-content">
        <!-- JSで動的に生成 -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-danger" id="section-delete-btn">削除</button>
        <button type="button" class="btn-secondary" id="section-editor-cancel">キャンセル</button>
        <button type="button" class="btn-primary" id="section-editor-save">適用</button>
      </div>
    </div>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
</body>
</html>
