# AI機能 実装プラン

> 管理画面にAI機能を追加し、求人作成・LP構築・応募者対応を効率化する。

---

## 目次

1. [概要](#概要)
2. [コスト見積もり](#コスト見積もり)
3. [AI機能一覧](#ai機能一覧)
4. [実装ロードマップ](#実装ロードマップ)
5. [Phase 1: 求人作成支援](#phase-1-求人作成支援)
6. [Phase 2: LP強化](#phase-2-lp強化)
7. [Phase 2.5: デザインカスタマイズ](#phase-25-デザインカスタマイズ)
8. [Phase 3: 応募者対応](#phase-3-応募者対応)
9. [Phase 4: 分析支援](#phase-4-分析支援)
10. [技術仕様](#技術仕様)
11. [次のアクション](#次のアクション)

---

## 概要

### 目的

- 求人作成の時間短縮
- 求職者に響く文言の自動生成
- 応募率・CVRの向上

### 推奨モデル

| モデル | 用途 | 特徴 |
|--------|------|------|
| **GPT-4o-mini** | 文章生成全般 | 低コスト、高速、十分な品質 |
| GPT-4o | 高品質な分析・レポート | 高精度だがコスト高 |
| Claude 3.5 Sonnet | 長文・複雑な文章 | 日本語品質が高い |

**結論**: まずは **GPT-4o-mini** で開始し、品質が必要な機能のみ上位モデルを検討。

---

## コスト見積もり

### 単価比較

| モデル | 入力 (1Mトークン) | 出力 (1Mトークン) | 1回あたり目安 |
|--------|------------------|------------------|---------------|
| GPT-4o-mini | $0.15 | $0.60 | **約¥0.1** |
| GPT-4o | $2.50 | $10.00 | 約¥1.5 |
| Claude 3.5 Sonnet | $3.00 | $15.00 | 約¥2.0 |

### Phase別 機能数と利用想定

| Phase | 機能 | 1社あたり月間利用回数 |
|-------|------|----------------------|
| Phase 1 | 説明文生成、タイトル提案、キャッチコピー | 10-20回 |
| Phase 2 | ポイント文言、FAQ生成、CTAボタン | 5-10回 |
| Phase 2.5 | テーマ提案、画像提案、レイアウト選択 | 3-5回 |
| Phase 3 | 返信メール、面接質問、日程調整 | 10-15回 |
| Phase 4 | レポート要約、改善提案 | 5-10回 |
| **合計** | 15機能 | **33-60回/社** |

### 月額コスト試算（GPT-4o-mini）

| 会社数 | 月間総利用回数 | 月額コスト |
|--------|---------------|-----------|
| 10社 | 300-550回 | **¥30-60** |
| 50社 | 1,500-2,750回 | **¥150-280** |
| 100社 | 3,000-5,500回 | **¥300-550** |
| 500社 | 15,000-27,500回 | **¥1,500-2,800** |

### GPT-4o 使用時（参考）

| 会社数 | 月間総利用回数 | 月額コスト |
|--------|---------------|-----------|
| 10社 | 300-550回 | ¥450-830 |
| 50社 | 1,500-2,750回 | ¥2,250-4,130 |
| 100社 | 3,000-5,500回 | ¥4,500-8,250 |

**結論**: Phase 4まで全機能実装しても、GPT-4o-miniなら **月数百円〜数千円** で運用可能。

---

## AI機能一覧

### 1. 求人関連（優先度: 高）

| 機能 | 説明 | 効果 | Phase |
|------|------|------|-------|
| **説明文生成** | 職種・条件から文章生成 | 作成時間短縮 | 1 |
| **タイトル最適化** | CTR高いタイトル提案 | 応募率UP | 1 |
| **キャッチコピー生成** | ファーストビュー用の文言 | 離脱率改善 | 1 |
| **給与相場提案** | 地域・職種から相場を提示 | 競争力のある求人 | 2 |
| **必須スキル抽出** | 説明文から要件を自動抽出 | 入力漏れ防止 | 2 |

### 2. LP/採用ページ（優先度: 高）

| 機能 | 説明 | 効果 | Phase |
|------|------|------|-------|
| **ポイント文言生成** | 「この求人の魅力」を自動作成 | 訴求力UP | 2 |
| **FAQ自動生成** | 求人内容からよくある質問を生成 | 問い合わせ削減 | 2 |
| **CTAボタン文言** | 「今すぐ応募」以外の候補提案 | CVR改善 | 2 |

### 3. 応募者対応（優先度: 中）

| 機能 | 説明 | 効果 | Phase |
|------|------|------|-------|
| **返信メール生成** | 応募者への返信テンプレート | 対応時間短縮 | 3 |
| **面接質問提案** | 職種に合った質問リスト | 面接品質向上 | 3 |
| **不採用理由文** | 丁寧な不採用通知文の生成 | ブランド維持 | 3 |
| **日程調整文** | 面接日程の案内文生成 | 事務効率化 | 3 |

### 4. 分析・レポート（優先度: 中）

| 機能 | 説明 | 効果 | Phase |
|------|------|------|-------|
| **レポート要約** | アナリティクスデータの要点抽出 | 意思決定支援 | 4 |
| **改善提案** | 「応募率を上げるには」を提案 | PDCAサイクル | 4 |
| **競合分析** | 同職種の他社求人との比較 | 差別化 | 4 |

### 5. デザイン・テーマ（優先度: 高）

| 機能 | 説明 | 効果 | Phase |
|------|------|------|-------|
| **会社別テーマ提案** | 業種・会社HPからデザイン提案 | ブランド統一感 | 2.5 |
| **フリー画像提案** | 求人に合った画像を自動検索 | 作成時間短縮 | 2.5 |
| **レイアウト自動選択** | 業種・ターゲットに最適な配置 | CVR向上 | 2.5 |
| **カラー自動抽出** | 会社HPからブランドカラー取得 | 統一感 | 2.5 |

### 6. 会社情報（優先度: 低）

| 機能 | 説明 | 効果 | Phase |
|------|------|------|-------|
| **会社紹介文生成** | 基本情報から紹介文作成 | 初期設定の簡略化 | - |
| **採用メッセージ** | 代表メッセージ・採用担当者コメント | 魅力的な採用ページ | - |

---

## 実装ロードマップ

```
Phase 1: 求人作成支援
├── 説明文生成 ← まずここから
├── タイトル提案
└── キャッチコピー生成

Phase 2: LP強化（文言）
├── ポイント文言生成
├── FAQ自動生成
└── CTAボタン文言

Phase 2.5: デザインカスタマイズ ← 会社独自のLP
├── 会社別テーマ提案（業種別プリセット）
├── フリー画像自動提案（Unsplash連携）
├── レイアウト自動選択
└── カラー自動抽出（会社HPから）

Phase 3: 応募者対応
├── 返信メール生成
├── 面接質問提案
└── 日程調整文

Phase 4: 分析支援
├── レポート要約
└── 改善提案
```

---

## Phase 1: 求人作成支援

### 1.1 準備作業

- [ ] OpenAI アカウント作成: https://platform.openai.com/signup
- [ ] APIキー発行: https://platform.openai.com/api-keys
- [ ] クレジット追加（$10程度で開始）
- [ ] APIキーを環境変数として設定

### 1.2 Cloud Function 作成

**エンドポイント**: `/generateJobDescription`

```javascript
// functions/index.js に追加
const OpenAI = require('openai');

functions.http('generateJobDescription', async (req, res) => {
  const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });

  const { jobTitle, location, salary, features, tone } = req.body;

  const completion = await openai.chat.completions.create({
    model: 'gpt-4o-mini',
    messages: [
      { role: 'system', content: 'あなたは求人広告のプロライターです。' },
      { role: 'user', content: `職種: ${jobTitle}\n勤務地: ${location}\n...` }
    ]
  });

  res.json({ success: true, generated: completion.choices[0].message.content });
});
```

**デプロイスクリプト** (package.json):

```json
"deploy:ai": "gcloud functions deploy generateJobDescription --gen2 --runtime nodejs20 --trigger-http --allow-unauthenticated --region asia-northeast1 --project generated-area-484613-e3 --set-env-vars OPENAI_API_KEY=$OPENAI_API_KEY"
```

### 1.3 フロントエンド UI

求人編集画面に「AI生成」ボタンを追加:

```
┌─────────────────────────────────────────┐
│ 仕事内容                                 │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │ (テキストエリア)                     │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│ [✨ AIで生成] [📝 AIで改善]              │
└─────────────────────────────────────────┘
```

### 1.4 プロンプト例

**説明文生成**:

```
あなたは求人広告のプロライターです。
以下の情報を元に、求職者の心に響く求人説明文を作成してください。

【職種】{jobTitle}
【勤務地】{location}
【給与】{salary}
【特徴】{features}

要件:
- 200〜400文字程度
- 親しみやすいトーン
- 具体的なメリットを強調
- 応募を促す文言を含める
```

**タイトル提案**:

```
以下の求人情報から、クリックされやすい求人タイトルを3つ提案してください。

【職種】{jobTitle}
【給与】{salary}
【特徴】{features}

要件:
- 40文字以内
- 数字を含める（給与、待遇など）
- 感情に訴える表現を使う
```

**出力例**:

```
1. 【月収30万円以上】未経験歓迎の期間工スタッフ
2. 寮完備で安心！愛知県の製造スタッフ募集
3. 正社員登用あり◎大手メーカーで働く期間工
```

---

## Phase 2: LP強化

### 2.1 ポイント文言生成

求人情報から「この求人の魅力」を自動生成。

```
入力: 求人データ（給与、福利厚生、勤務条件など）
出力: 3〜5個の魅力ポイント（見出し + 説明文）
```

### 2.2 FAQ自動生成

求人内容から想定される質問と回答を生成。

```
入力: 求人データ + 会社情報
出力: 5〜10個のQ&A
```

### 2.3 CTAボタン文言

状況に応じた応募ボタンのテキストを提案。

```
候補例:
- 今すぐ応募する
- 詳しく話を聞いてみる
- まずは見学から！
- 30秒で簡単応募
```

---

## Phase 3: 応募者対応

### 3.1 返信メール生成

状況に応じたメールテンプレートを生成。

| 種類 | 内容 |
|------|------|
| 応募受付 | 応募への感謝 + 次のステップ案内 |
| 面接案内 | 日時・場所・持ち物の案内 |
| 不採用通知 | 丁寧なお断り + 今後の激励 |
| 内定通知 | 祝福 + 入社手続きの案内 |

### 3.2 面接質問提案

職種・業界に合わせた質問リストを生成。

```
入力: 職種、必要スキル、経験年数
出力: 10〜15個の面接質問（カテゴリ分け）
```

---

## Phase 4: 分析支援

### 4.1 レポート要約

アナリティクスデータを要約してインサイトを提示。

```
入力: GA4データ（PV、応募数、流入経路など）
出力: 要点3〜5個 + 改善提案
```

### 4.2 改善提案

データに基づいた具体的な改善アクションを提案。

```
例:
- 「応募率が業界平均より20%低いです。CTAボタンの文言を変更してみましょう」
- 「スマホからの離脱率が高いです。ファーストビューの読み込み速度を改善しましょう」
```

---

## Phase 2.5: デザインカスタマイズ

### コンセプト

**項目（セクション）は変えずに、レイアウト・スタイルだけを会社ごとにカスタマイズ**

### 2.5.1 変更可能なパラメータ

| カテゴリ | パラメータ | 選択肢 |
|----------|-----------|--------|
| **カラー** | プライマリカラー | 会社HPから抽出 or 手動設定 |
| | セカンダリカラー | 自動補完 |
| | 背景色 | 白/グレー/カスタム |
| **レイアウト** | ポイント列数 | 2列 / 3列 / 4列 |
| | 画像配置 | 左 / 右 / 上 / フルワイド |
| | 余白 | コンパクト / 標準 / ゆったり |
| **スタイル** | 角丸 | なし / 小 / 大 |
| | 影 | なし / 薄い / 濃い |
| | ボタン形状 | 四角 / 角丸 / ピル型 |

### 2.5.2 業種別プリセット

| 業種 | カラー | レイアウト | スタイル |
|------|--------|-----------|---------|
| **製造業・大手** | 青系、落ち着いた色 | 3列、余白広め | カード、角丸大 |
| **物流・倉庫** | オレンジ系 | 2列、コンパクト | リスト、シンプル |
| **IT・スタートアップ** | ビビッド、グラデーション | 画像大きめ | モダン、影あり |
| **飲食・サービス** | 暖色系 | 画像多め | 親しみやすい |
| **介護・医療** | 緑・パステル | ゆったり | 柔らかい印象 |

### 2.5.3 テーマ設定の構造

```javascript
// 会社ごとのテーマ設定（Firestoreに保存）
const companyTheme = {
  // カラー
  colors: {
    primary: '#1E88E5',
    secondary: '#FFC107',
    background: '#FAFAFA',
    text: '#333333'
  },

  // レイアウト
  layout: {
    pointsColumns: 3,           // 2 | 3 | 4
    imagePosition: 'right',     // left | right | top | fullwidth
    spacing: 'comfortable',     // compact | standard | comfortable
    heroStyle: 'overlay'        // simple | overlay | split
  },

  // スタイル
  style: {
    borderRadius: 'large',      // none | small | large
    shadow: 'soft',             // none | subtle | soft
    buttonStyle: 'rounded'      // square | rounded | pill
  }
};
```

### 2.5.4 フリー画像自動提案

**使用API**（すべて無料枠あり）:

| API | 無料枠 | 特徴 |
|-----|-------|------|
| **Unsplash** | 月5,000リクエスト | 高品質、商用利用可 |
| **Pexels** | 月20,000リクエスト | 動画もあり |
| **Pixabay** | 無制限 | 種類豊富 |

**実装フロー**:

```
入力: 職種「製造スタッフ」、勤務地「愛知県」

AI処理:
1. キーワード生成: "factory", "manufacturing", "industrial", "automotive"
2. Unsplash APIで画像検索
3. 5枚の候補を表示

出力:
┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐
│ 🏭  │ │ 🔧  │ │ 👷  │ │ ⚙️  │ │ 🚗  │
└─────┘ └─────┘ └─────┘ └─────┘ └─────┘
  選択     選択     選択     選択     選択
```

### 2.5.5 テーマ提案UI

```
┌─────────────────────────────────────────────────────────┐
│ 🎨 あなたの会社に合ったデザインを提案                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  会社HP: [https://example.com      ] [分析する]         │
│                                                         │
│  または業種を選択:                                       │
│  [製造業 ▼]  [大企業 ▼]  [若年層向け ▼]                 │
│                                                         │
│  ─────────────────────────────────────────────          │
│                                                         │
│  【提案されたテーマ】                                    │
│                                                         │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │  テーマA    │  │  テーマB    │  │  テーマC    │     │
│  │  (信頼感)   │  │  (活気)     │  │  (親しみ)   │     │
│  │  🔵⬜⬜    │  │  🟠⬜⬜    │  │  🟢⬜⬜    │     │
│  │  [プレビュー]│  │  [プレビュー]│  │  [プレビュー]│     │
│  └─────────────┘  └─────────────┘  └─────────────┘     │
│                                                         │
│  [テーマAを適用]  [テーマBを適用]  [テーマCを適用]       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 2.5.6 会社HP分析機能

```
入力: 会社HPのURL
        ↓
処理:
1. HPをスクレイピング
2. ブランドカラー抽出（#FF5733など）
3. 会社概要・理念のテキスト取得
4. トーン分析（フォーマル/カジュアル）
        ↓
出力:
- テーマカラー自動設定
- 会社の雰囲気に合った文体で求人文生成
- おすすめセクション構成提案
```

### 2.5.7 追加コスト

| 機能 | コスト |
|------|--------|
| Unsplash/Pexels API | **無料** |
| AI画像キーワード生成 | 約¥0.05/回 |
| 会社HP分析 | 約¥0.1/回 |
| DALL-E 3 画像生成（オプション） | 約¥6/枚 |

---

## 技術仕様

### API設計

```
POST /generateJobDescription
Content-Type: application/json

Request:
{
  "jobTitle": "期間工",
  "location": "愛知県豊田市",
  "salary": "月給30万円〜",
  "features": ["寮完備", "未経験OK", "正社員登用あり"],
  "targetMedia": "indeed",  // optional: indeed | kyujinbox | lp
  "tone": "friendly"        // friendly | formal | casual
}

Response:
{
  "success": true,
  "generated": {
    "description": "生成された説明文...",
    "titles": ["タイトル候補1", "タイトル候補2", "タイトル候補3"]
  },
  "usage": {
    "promptTokens": 150,
    "completionTokens": 300,
    "estimatedCost": 0.0006
  }
}
```

### 媒体別対応

| 媒体 | 文字数制限 | 特徴 |
|------|-----------|------|
| Indeed | 4000文字 | SEO重視、キーワード含める |
| 求人ボックス | 2000文字 | シンプル・簡潔 |
| スタンバイ | 3000文字 | 条件明確に |
| 自社LP | 制限なし | ストーリー性重視 |

```javascript
const MEDIA_PROMPTS = {
  indeed: '【Indeed向け】検索されやすいキーワードを含め、SEOを意識した文章で...',
  kyujinbox: '【求人ボックス向け】2000文字以内で簡潔に要点をまとめ...',
  lp: '【自社LP向け】会社の魅力を伝えるストーリー調で...'
};
```

### セキュリティ

- APIキーはCloud Functionsの環境変数に保存
- フロントエンドからは直接OpenAI APIを呼ばない
- レート制限を設定（1社あたり月100回など）

### 使用量トラッキング

```javascript
// Firestoreに使用量を記録
await db.collection('ai_usage').add({
  companyDomain: 'xxx',
  function: 'generateJobDescription',
  model: 'gpt-4o-mini',
  promptTokens: 150,
  completionTokens: 300,
  estimatedCost: 0.0006,
  timestamp: new Date()
});
```

---

## 次のアクション

### 準備

1. [ ] OpenAI アカウント作成
2. [ ] APIキー発行
3. [ ] $10クレジット追加

### Phase 1 実装

4. [ ] Cloud Function作成（generateJobDescription）
5. [ ] openai パッケージ追加（functions/package.json）
6. [ ] プロンプトテンプレート作成
7. [ ] フロントエンドUI実装
8. [ ] テスト・調整
9. [ ] 本番デプロイ

### Phase 2 実装

10. [ ] ポイント文言生成API
11. [ ] FAQ自動生成API
12. [ ] CTAボタン文言提案

### Phase 2.5 実装

13. [ ] Unsplash API連携（APIキー取得）
14. [ ] 業種別テーマプリセット作成（5-10種類）
15. [ ] テーマ設定をFirestoreに保存する仕組み
16. [ ] LPビルダーにテーマ適用機能追加
17. [ ] 会社HP分析機能（オプション）

---

## 参考リンク

- [OpenAI Platform](https://platform.openai.com/)
- [OpenAI Pricing](https://openai.com/pricing)
- [OpenAI API Reference](https://platform.openai.com/docs/api-reference)
