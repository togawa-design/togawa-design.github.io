# 画面遷移図

## 概要
本ドキュメントはリクエコの画面遷移を記述します。

---

## 画面一覧

### 公開ページ（一般ユーザー向け）

| ファイル名 | 画面名 | 概要 |
|-----------|--------|------|
| index.html | トップページ | サイトのメインページ、注目求人・会社一覧表示 |
| jobs.html | 求人一覧 | 全求人の検索・一覧表示 |
| job-detail.html | 求人詳細 | 個別求人の詳細情報 |
| location.html | 勤務地別求人 | 都道府県別の求人一覧 |
| company.html | 会社一覧 | 掲載会社の一覧 |
| company-recruit.html | 会社採用ページ | 各会社の採用情報ページ |
| lp.html | 求人LP | 個別求人のランディングページ |
| mypage.html | マイページ | ユーザーのお気に入り・応募履歴 |

### ガイドページ

| ファイル名 | 画面名 |
|-----------|--------|
| guide-job-search.html | 仕事探しガイド |
| guide-interview.html | 面接ガイド |
| guide-work.html | 働き方ガイド |
| guide-site.html | サイト利用ガイド |
| about.html | 会社概要 |

### 法的ページ

| ファイル名 | 画面名 |
|-----------|--------|
| legal.html | 特定商取引法に基づく表記 |
| privacy.html | プライバシーポリシー |
| terms.html | 利用規約 |

### 管理画面（認証必要）

| ファイル名 | 画面名 | 概要 |
|-----------|--------|------|
| admin.html | 管理画面（統合） | 会社管理・求人管理の統合管理画面 |
| job-manage.html | 求人管理（旧） | 会社別求人管理画面 |
| company-edit.html | 会社情報編集 | 会社情報の編集画面 |
| applicants.html | 応募者管理 | 応募者一覧・管理 |

---

## 画面遷移図

### 公開ページの遷移

```
┌─────────────────────────────────────────────────────────────────────┐
│                           トップページ                               │
│                          (index.html)                               │
└─────────────────────────────────────────────────────────────────────┘
          │                    │                    │
          ▼                    ▼                    ▼
┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐
│   求人一覧       │  │   会社一覧       │  │  勤務地別求人    │
│  (jobs.html)    │  │ (company.html)  │  │ (location.html) │
└─────────────────┘  └─────────────────┘  └─────────────────┘
          │                    │                    │
          ▼                    ▼                    │
┌─────────────────┐  ┌─────────────────┐           │
│   求人詳細       │  │  会社採用ページ   │◄──────────┘
│(job-detail.html)│  │(company-recruit)│
└─────────────────┘  └─────────────────┘
          │                    │
          ▼                    ▼
┌─────────────────────────────────────────┐
│              求人LP (lp.html)           │
│        ※求人ごとのランディングページ      │
└─────────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────┐
│             応募フォーム                 │
│           （モーダル表示）               │
└─────────────────────────────────────────┘
```

### 管理画面の遷移

```
┌─────────────────────────────────────────────────────────────────────┐
│                        ログイン画面                                  │
│                      （認証モーダル）                                │
└─────────────────────────────────────────────────────────────────────┘
                              │
                              ▼ （認証成功）
┌─────────────────────────────────────────────────────────────────────┐
│                      管理画面 (admin.html)                          │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ サイドバーメニュー                                              │  │
│  ├───────────────────────────────────────────────────────────────┤  │
│  │ ・概要 (overview)                                             │  │
│  │ ・会社管理 (company-manage)                                    │  │
│  │ ・求人一覧 (job-listings)                                      │  │
│  │ ・求人編集 (job-manage)                                        │  │
│  │ ・LP設定 (lp-settings)                                        │  │
│  │ ・採用ページ設定 (recruit-settings)                            │  │
│  │ ・アナリティクス (analytics-detail)                            │  │
│  │ ・設定 (settings)                                             │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

### 管理画面セクション詳細

```
admin.html
    │
    ├── overview.html              # 概要・ダッシュボード
    │
    ├── company-manage.html        # 会社一覧管理
    │       │
    │       └── company-detail.html  # 会社詳細・編集
    │               │
    │               └── company-users.html  # 会社ユーザー管理
    │
    ├── job-listings.html          # 求人一覧（全社）
    │
    ├── job-manage.html            # 求人編集・作成
    │       │
    │       └── applicant-select.html  # 面談日程調整
    │
    ├── lp-settings.html           # LP設定
    │
    ├── recruit-settings.html      # 採用ページ設定
    │
    ├── analytics-detail.html      # アナリティクス詳細
    │
    └── settings.html              # システム設定
```

---

## 認証フロー

### 管理者認証（Google OAuth）

```
1. admin.html にアクセス
       │
       ▼
2. 未認証の場合 → 認証モーダル表示
       │
       ▼
3. 「Googleでログイン」クリック
       │
       ▼
4. Google OAuth 認証画面
       │
       ▼
5. 認証成功 → admin_users コレクション確認
       │
       ▼
6. 管理者として登録済み → 管理画面表示
   未登録 → エラー表示
```

### 会社ユーザー認証（ID/パスワード）

```
1. job-manage.html にアクセス
       │
       ▼
2. ログインフォーム表示
       │
       ▼
3. 会社ID・パスワード入力
       │
       ▼
4. company_users コレクション照合
       │
       ▼
5. 認証成功 → 該当会社の求人管理画面表示
```

---

## URLパラメータ

### 求人関連

| ページ | パラメータ | 例 |
|--------|-----------|-----|
| job-detail.html | company, job | `?company=example&job=job001` |
| lp.html | j | `?j=example_job001` |
| company-recruit.html | id | `?id=example` |
| location.html | prefecture | `?prefecture=東京都` |

### 管理画面

| ページ | パラメータ | 例 |
|--------|-----------|-----|
| admin.html | section, company | `?section=job-manage&company=example` |
| job-manage.html | company | `?company=example` |

---

## 関連ドキュメント
- [環境構築手順](./setup.md)
- [詳細設計書](./detailed-design.md)
- [Firestore DB構成図](./firestore-schema.md)
