rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // applications コレクション - 応募データ
    match /applications/{docId} {
      // 読み書き全て許可（開発用）
      allow read, write: if true;
    }

    // assignees コレクション - 担当者データ
    match /assignees/{docId} {
      allow read, write: if true;
    }

    // companies コレクション - 会社別設定
    match /companies/{companyDomain} {
      allow read, write: if true;

      // サブコレクション: assignees
      match /assignees/{assigneeId} {
        allow read, write: if true;
      }
    }

    // pageviews コレクション - ページビューデータ
    match /pageviews/{docId} {
      allow read, write: if true;
    }

    // users コレクション - ユーザープロフィール
    match /users/{userId} {
      allow read, write: if true;
    }

    // その他のコレクションも許可（開発用）
    match /{document=**} {
      allow read, write: if true;
    }
  }
}
